(function(a){function g(d){d.length>0&&d.button({label:d.attr("disabledText"),disabled:true})}var b={init:function(d){var f={ID:"",enabledText:"",disabledText:"",hasText:true,disableOnClick:true,inputType:"button",primaryicon:"",secondaryicon:"",ReadOnly:false,onclick:function(){}};d&&a.extend(f,d);d=a(this);var e=a("<input />").attr("type",f.inputType).attr("id",f.ID).attr("name",f.ID);e.attr("enabledText",f.enabledText);e.attr("disabledText",f.disabledText);var h={text:f.hasText,label:f.enabledText,
disabled:f.ReadOnly,icons:{primary:f.primaryicon,secondary:f.secondaryicon}};if(h.disabled)h.label=f.disabledText;e.button(h).click(function(){f.disableOnClick&&g(e);f.onclick()});d.append(e);return e},enable:function(){var d=a(this);d.length>0&&d.button({label:d.attr("enabledText"),disabled:false})},disable:function(){var d=a(this);g(d)}};a.fn.CswButton=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);
else a.error("Method "+d+" does not exist on CswButton")}})(jQuery);(function(a){a.fn.CswCheckBoxArray=function(g){var b={init:function(d){var f={ID:"",cols:["col1","col2","col3"],data:[{label:"row1",key:1,values:[true,false,true]},{label:"row2",key:2,values:[false,true,false]},{label:"row3",key:3,values:[true,false,true]}],HeightInRows:4,UseRadios:false,Required:false,onchange:function(){}};d&&a.extend(f,d);var e="checkbox";if(f.UseRadios)e="radio";d=a(this);d.contents().remove();var h=a("<div/>").appendTo(d),j=h.CswTable("init",{ID:f.ID+"_tbl"});h.css("height",
25*f.HeightInRows+"px");h.addClass("cbarraydiv");j.addClass("cbarraytable");h=1;for(var m=0;m<f.cols.length;m++){var i=j.CswTable("cell",h,m+2);i.addClass("cbarraycell");i.append(f.cols[m])}h++;if(f.UseRadios&&!f.Required){m=j.CswTable("cell",h,1);m.addClass("cbarraycell");m.append("[none]");for(m=0;m<f.cols.length;m++){i=j.CswTable("cell",h,m+2);i.addClass("cbarraycell");var n=f.ID+"_none";i=a('<input type="'+e+'" class="CBACheckBox_'+f.ID+'" id="'+n+'" name="'+f.ID+'" />').appendTo(i).click(f.onchange);
i.attr("key","");i.attr("rowlabel","[none]");i.attr("collabel",f.cols[m]);i.attr("row",-1);i.attr("col",m);i.attr("checked","true")}}h++;for(var k=0;k<f.data.length;k++){var l=f.data[k];m=j.CswTable("cell",h+k,1);m.addClass("cbarraycell");m.append(l.label);for(m=0;m<f.cols.length;m++){i=j.CswTable("cell",h+k,m+2);i.addClass("cbarraycell");n=f.ID+"_"+k+"_"+m;i=a('<input type="'+e+'" class="CBACheckBox_'+f.ID+'" id="'+n+'" name="'+f.ID+'" />').appendTo(i).click(f.onchange);i.attr("key",l.key);i.attr("rowlabel",
l.label);i.attr("collabel",f.cols[m]);i.attr("row",k);i.attr("col",m);l.values[m]&&i.attr("checked","true")}}if(!f.UseRadios){e="Check All";if(a(".CBACheckBox_"+f.ID).not(":checked").length===0)e="Uncheck All";var t=a('<div style="text-align: right"><a href="#">'+e+"</a></div>").appendTo(d).children("a");t.click(function(){var s=f.ID;if(a(".CBACheckBox_"+s).not(":checked").length>0){a(".CBACheckBox_"+s).attr("checked","checked");t.text("Uncheck all")}else{a(".CBACheckBox_"+s).removeAttr("checked");
t.text("Check all")}return false})}},getdata:function(d){var f={ID:""};d&&a.extend(f,d);var e=[];a(this).find(".CBACheckBox_"+f.ID).each(function(){var h=a(this),j=parseInt(h.attr("row")),m=parseInt(h.attr("col"));if(e[j]===undefined)e[j]=[];e[j][m]={key:h.attr("key"),rowlabel:h.attr("rowlabel"),collabel:h.attr("collabel"),checked:h.attr("checked")}});return e}};if(b[g])return b[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return b.init.apply(this,arguments);
else a.error("Method "+g+" does not exist on "+PluginName)}})(jQuery);(function(a){a.fn.CswComboBox=function(g){function b(f,e){f.toggleClass("CswComboBox_TopDiv_click");e.toggle()}var d={init:function(f){var e={ID:"",TopContent:"",SelectContent:"This ComboBox Is Empty!",Width:"180px"};f&&a.extend(e,f);f=a(this);f.contents().remove();var h=a('<div id="'+e.ID+'_top" class="CswComboBox_TopDiv"></div>').appendTo(f).attr("style","width: "+e.Width),j=h.CswTable("init",{ID:e.ID+"_tbl"});j.attr("width","100%");$cell1=j.CswTable("cell",1,1);$cell1.attr("width","100%");$cell1.append(e.TopContent);
$cell2=j.CswTable("cell",1,2);$cell2.addClass("CswComboBox_ImageCell");var m=a('<div id="'+e.ID+'_child" class="CswComboBox_ChildDiv">').appendTo(f).attr("style","width: "+e.Width).append(e.SelectContent);$cell1.click(function(){b(h,m)});$cell2.CswImageButton({ButtonType:CswImageButton_ButtonType.Select,ID:e.ID+"_top_img",AlternateText:"",onClick:function(){b(h,m)}})},TopContent:function(f){var e=a(this).children(".CswComboBox_TopDiv").children("table").CswTable("cell",1,1);e.text("");e.contents().remove();
e.append(f)},toggle:function(){var f=a(this),e=f.children(".CswComboBox_TopDiv");f=f.children(".CswComboBox_ChildDiv");b(e,f)},close:function(){var f=a(this),e=f.children(".CswComboBox_TopDiv");f=f.children(".CswComboBox_ChildDiv");e.removeClass("CswComboBox_TopDiv_click");f.hide()}};if(d[g])return d[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return d.init.apply(this,arguments);else a.error("Method "+g+" does not exist on "+PluginName)}})(jQuery);var CswCookieName={SessionId:"CswSessionId",Username:"csw_username",CurrentView:{ViewId:"csw_currentviewid",ViewMode:"csw_currentviewmode"},CurrentNode:{NodeId:"csw_currentnodeid",NodeKey:"csw_currentnodekey"},CurrentTabId:"csw_currenttabid"};
(function(a){a.CswCookie=function(g){var b={get:function(d){d=a.cookie(d);if(d==undefined)d="";return d},set:function(d,f){a.cookie(d,f)},clear:function(d){a.cookie(d,"")},clearAll:function(){for(var d in CswCookieName)if(CswCookieName.hasOwnProperty(d)){a.cookie(CswCookieName[d],null);for(var f in CswCookieName[d])CswCookieName[d].hasOwnProperty(f)&&a.cookie(CswCookieName[d][f],null)}}};if(b[g])return b[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return b.init.apply(this,
arguments);else a.error("Method "+g+" does not exist on CswCookie")}})(jQuery);(function(a){a.fn.CswDashboard=function(g){var b={Url:"/NbtWebApp/wsNBT.asmx/getDashboard",onSuccess:function(){}};g&&a.extend(b,g);var d=a(this);CswAjaxXml({url:b.Url,data:"",success:function(f){var e=d.CswTable("init",{ID:"DashboardTable"});e.addClass("DashboardTable");var h=e.append("<tr />");f.children().each(function(){var j=a(this),m="";m=j.attr("href")!==undefined?'<td class="DashboardCell">  <a target="_blank" href="'+j.attr("href")+'">    <div title="'+j.attr("text")+'" id="'+j.attr("id")+
'" class="'+j.attr("id")+'" />  </a></td>':'<td class="DashboardCell">  <div title="'+j.attr("text")+'" id="'+j.attr("id")+'" class="'+j.attr("id")+'" /></td>';h.append(m)});b.onSuccess()}});return this}})(jQuery);(function(a){function g(d,f,e){d.dialog({modal:true,width:f,height:e,close:function(){d.remove()}})}var b={AddWelcomeItemDialog:function(d){var f={onAdd:function(){}};d&&a.extend(f,d);var e=a("<div></div>");e.CswWelcome("getAddItemForm",{onAdd:function(){e.dialog("close");f.onAdd()}});g(e,400,400)},AddViewDialog:function(d){var f={ID:"addviewdialog",onAddView:function(){},makeVisibilitySelect:function(){}};d&&a.extend(f,d);var e=a("<div></div>");d=e.CswTable("init",{ID:f.ID+"_tbl",FirstCellRightAlign:true});
d.CswTable("cell",1,1).append("Name:");var h=d.CswTable("cell",1,2).CswInput("init",{ID:f.ID+"_nametb",type:CswInput_Types.text,cssclass:"textinput"});d.CswTable("cell",2,1).append("Display Mode:");var j=a('<select id="'+f.ID+'_dmsel" />').appendTo(d.CswTable("cell",2,2));j.append('<option value="List">List</option>');j.append('<option value="Tree">Tree</option>');j.append('<option value="Grid">Grid</option>');var m=f.makeVisibilitySelect(d,3,"Available to:"),i=e.CswButton({ID:f.ID+"_submit",enabledText:"Create View",
disabledText:"Creating View",onclick:function(){var n={};n.ViewName=h.val();n.ViewMode=j.val();n.Visibility=m.getvisibilityselect().val();n.VisibilityRoleId=m.getvisroleselect().val();n.VisibilityUserId=m.getvisuserselect().val();CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/createView",data:jsonToString(n),success:function(k){e.dialog("close");f.onAddView(k.newviewid)},error:function(){i.CswButton("enable")}})}});e.CswButton({ID:f.ID+"_cancel",enabledText:"Cancel",disabledText:"Canceling",onclick:function(){e.dialog("close")}});
g(e,400,200)},AddNodeDialog:function(d){var f={nodetypeid:"",relatednodeid:"",onAddNode:function(){}};d&&a.extend(f,d);var e=a("<div></div>");e.CswNodeTabs({nodetypeid:f.nodetypeid,relatednodeid:f.relatednodeid,EditMode:"AddInPopup",onSave:function(h,j){e.dialog("close");f.onAddNode(h,j)}});g(e,800,600)},EditNodeDialog:function(d){var f={nodeid:"",cswnbtnodekey:"",filterToPropId:"",title:"",onEditNode:function(){}};d&&a.extend(f,d);var e=a("<div></div>");e.CswNodeTabs({nodeid:f.nodeid,cswnbtnodekey:f.cswnbtnodekey,
filterToPropId:f.filterToPropId,EditMode:"EditInPopup",title:f.title,onSave:function(h,j){e.dialog("close");f.onEditNode(h,j)}});f.filterToPropId!==""?g(e,600,400):g(e,900,600)},CopyNodeDialog:function(d){var f={nodename:"",nodeid:"",nodekey:"",onCopyNode:function(){}};d&&a.extend(f,d);var e=a("<div>Copying: "+f.nodename+"<br/><br/></div>"),h=e.CswButton({ID:"copynode_submit",enabledText:"Copy",disabledText:"Copying",onclick:function(){copyNode({nodeid:f.nodeid,nodekey:f.nodekey,onSuccess:function(j,
m){e.dialog("close");f.onCopyNode(j,m)},onError:function(){h.CswButton("enable")}})}});e.CswButton({ID:"copynode_cancel",enabledText:"Cancel",disabledText:"Canceling",onclick:function(){e.dialog("close")}});g(e,400,300)},DeleteNodeDialog:function(d){var f={nodename:"",nodeid:"",nodekey:"",onDeleteNode:function(){},Multi:false,NodeCheckTreeId:""};d&&a.extend(f,d);var e=a("<div><span>Are you sure you want to delete:</span></div>"),h=[];if(f.Multi)a("."+f.NodeCheckTreeId+"_check:checked").each(function(){var m=
a(this);h[h.length]=m.attr("nodeid");e.append('<br/><span style="padding-left: 10px;">'+m.attr("nodename")+"</span>")});else{e.append("<span>"+f.nodename+"?</span>");h[0]=f.nodeid}e.append("<br/><br/>");var j=e.CswButton({ID:"deletenode_submit",enabledText:"Delete",disabledText:"Deleting",onclick:function(){deleteNodes({nodeids:h,onSuccess:function(m,i){e.dialog("close");f.onDeleteNode(m,i)},onError:function(){j.CswButton("enable")}})}});e.CswButton({ID:"deletenode_cancel",enabledText:"Cancel",disabledText:"Canceling",
onclick:function(){e.dialog("close")}});g(e,400,200)},AboutDialog:function(){var d=a("<div></div>");CswAjaxXml({url:"/NbtWebApp/wsNBT.asmx/getAbout",data:"",success:function(f){d.append("NBT Assembly Version: "+f.children("assembly").text()+"<br/><br/>");var e=d.CswTable("init",{ID:"abouttable"}),h=1;f.children("component").each(function(){var j=e.CswTable("cell",h,1),m=e.CswTable("cell",h,2),i=e.CswTable("cell",h,3);j.css("padding","2px 5px 2px 5px");m.css("padding","2px 5px 2px 5px");i.css("padding",
"2px 5px 2px 5px");var n=a(this);j.append(n.children("name").text());m.append(n.children("version").text());i.append(n.children("copyright").text());h++})}});g(d,600,400)},SearchDialog:function(){},FileUploadDialog:function(d){var f={url:"",params:{},onSuccess:function(){}};d&&a.extend(f,d);var e=a("<div></div>");new qq.FileUploader({element:e.get(0),action:f.url,params:f.params,debug:false,onComplete:function(){e.dialog("close");f.onSuccess()}});e.CswButton({ID:"fileupload_cancel",enabledText:"Cancel",
disabledText:"Canceling",onclick:function(){e.dialog("close")}});g(e,400,300)},ShowLicenseDialog:function(d){var f={GetLicenseUrl:"/NbtWebApp/wsNBT.asmx/getLicense",AcceptLicenseUrl:"/NbtWebApp/wsNBT.asmx/acceptLicense",onAccept:function(){},onDecline:function(){}};d&&a.extend(f,d);var e=a('<div align="center"></div>');e.append("Service Level Agreement<br/>");var h=a('<textarea id="license" disabled="true" rows="30" cols="80"></textarea>').appendTo(e);e.append("<br/>");CswAjaxJSON({url:f.GetLicenseUrl,
success:function(m){h.text(m.license)}});var j=e.CswButton({ID:"license_accept",enabledText:"I Accept",disabledText:"Accepting...",onclick:function(){CswAjaxJSON({url:f.AcceptLicenseUrl,success:function(){e.dialog("close");f.onAccept()},error:function(){j.CswButton("enable")}})}});e.CswButton({ID:"license_decline",enabledText:"I Decline",disabledText:"Declining...",onclick:function(){e.dialog("close");f.onDecline()}});g(e,800,600)},OpenDialog:function(d,f){var e=a('<div id="'+d+'"></div>');e.load(f,
{},function(){e.appendTo("body").dialog()})},CloseDialog:function(d){a("#"+d).dialog("close").remove()}};a.CswDialog=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswDialog")}})(jQuery);(function(a){var g={div:function(b){var d={ID:"",prefix:"",suffix:"",value:"",cssclass:""};b&&a.extend(d,b);b=a(this);var f=a("<div></div>"),e=makeId(d);if(e!==""){f.attr("id",e);f.attr("name",e)}d.cssclass!==""&&f.attr("class",d.cssclass);d.value!==""&&f.text(d.value);b.append(f);return f},span:function(b){var d={ID:"",prefix:"",suffix:"",value:"",cssclass:""};b&&a.extend(d,b);b=a(this);var f=a("<span></span>"),e=makeId(d);if(e!==""){f.attr("id",e);f.attr("name",e)}d.cssclass!==""&&f.attr("class",
d.cssclass);d.value!==""&&f.text(d.value);b.append(f);return f},link:function(b){var d={ID:"",prefix:"",suffix:"",value:"",type:"",media:"all",target:"",rel:"",cssclass:"",onClick:function(){}};b&&a.extend(d,b);b=a(this);var f=a("<a></a>"),e=makeId(d);e!==""&&f.attr("id",e);d.href!==""&&f.attr("href",d.href);d.value!==""&&f.text(d.value);d.cssclass!==""&&f.attr("class",d.cssclass);d.type!==""&&f.attr("type",d.type);d.rel!==""&&f.attr("rel",d.rel);d.media!==""&&f.attr("media",d.media);d.target!==""&&
f.attr("target",d.target);d.onClick!==undefined&&f.click(function(){d.onClick()});b.append(f);return f},"break":function(b){var d={count:1};b&&a.extend(d,b);b=a(this);for(var f=0;f<d.count;){b.append(a("<br/>"));f++}},getchildren:function(b){var d={ID:"",prefix:"",suffix:""};b&&a.extend(d,b);b=a(this);var f;d=makeId(d);if(d!=="")f=b.children("#"+d);return f},findelement:function(b){var d={ID:"",prefix:"",suffix:""};b&&a.extend(d,b);b=a(this);var f;d=makeId(d);if(d!=="")f=b.find("#"+d);return f}};
a.fn.CswDOM=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswDOM")}})(jQuery);(function(a){a.fn.CswErrorMessage=function(g){var b={message:"",detail:""};g&&a.extend(b,g);var d=a(this);d.show();g="error_"+(new Date).getTime();var f=a("<div />").appendTo(d).attr("id",g).addClass("CswErrorMessage_ErrorMessage"),e=f.CswTable("init",{id:makeId({prefix:g,id:"tbl"}),width:"100%"}),h=e.CswTable("cell",1,1).attr("width","100%"),j=e.CswTable("cell",1,2),m=e.CswTable("cell",2,1);a('<a href="#">'+b.message+"</a>").appendTo(h).click(function(){m.toggle()});m.append(b.detail);m.hide();j.CswImageButton({ButtonType:CswImageButton_ButtonType.Delete,
AlternateText:"Hide",ID:makeId({prefix:g,id:"hidebtn"}),onClick:function(){f.remove();d.children().length===0&&d.hide();return CswImageButton_ButtonType.None}});return f}})(jQuery);var CswImageButton_ButtonType={None:-1,Add:27,ArrowNorth:28,ArrowEast:29,ArrowSouth:30,ArrowWest:31,Calendar:6,CheckboxFalse:18,CheckboxNull:19,CheckboxTrue:20,Clear:4,Clock:10,ClockGrey:11,Configure:26,Delete:4,Edit:3,Fire:5,PageFirst:23,PagePrevious:24,PageNext:25,PageLast:22,PinActive:17,PinInactive:15,Print:2,Refresh:9,SaveStatus:13,Select:32,ToggleActive:1,ToggleInactive:0,View:8};
(function(a){a.fn.CswImageButton=function(g){function b(e){if(e!==undefined&&e!==CswImageButton_ButtonType.None){f.get(0).style.background="url('Images/buttons/buttons18.gif') 0px "+e*-18+"px no-repeat";f.unbind("mouseover");f.unbind("mouseout");f.unbind("mousedown");f.unbind("mouseup");f.bind("mouseover",function(){this.style.backgroundPosition="-18px "+e*-18+"px"});f.bind("mouseout",function(){this.style.backgroundPosition="0px "+e*-18+"px"});f.bind("mousedown",function(){this.style.backgroundPosition=
"-36px "+e*-18+"px"});f.bind("mouseup",function(){this.style.backgroundPosition="-18px "+e*-18+"px"})}}var d={ButtonType:CswImageButton_ButtonType.None,Active:false,AlternateText:"",ID:"",Required:false,onClick:function(){return CswImageButton_ButtonType.None}};g&&a.extend(d,g);$Div=a(this);var f=a('<div id="'+d.ID+'" class="divbutton" alt="'+d.AlternateText+'" />"').appendTo($Div).css("display","inline-block").click(function(){var e=d.onClick(f);b(e);return false});b(d.ButtonType);return f}})(jQuery);var CswInput_Types={button:{id:0,name:"button",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},checkbox:{id:1,name:"checkbox",placeholder:false,autocomplete:false,value:{required:true,allowed:true}},color:{id:2,name:"color",placeholder:false,autocomplete:true,value:{required:false,allowed:true}},date:{id:3,name:"date",placeholder:false,autocomplete:true,value:{required:false,allowed:true}},datetime:{id:4,name:"datetime",placeholder:false,autocomplete:false,value:{required:false,
allowed:true}},"datetime-local":{value:5,name:"datetime-local",placeholder:false,autocomplete:true,value:{required:false,allowed:true}},email:{id:6,name:"email",placeholder:true,autocomplete:true,value:{required:false,allowed:true}},file:{id:7,name:"file",placeholder:false,autocomplete:false,value:{required:false,allowed:false}},hidden:{id:8,name:"hidden",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},image:{id:9,name:"image",placeholder:false,autocomplete:false,value:{required:false,
allowed:true}},month:{id:10,name:"month",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},number:{id:11,name:"number",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},password:{id:12,name:"password",placeholder:true,value:{required:false,allowed:true}},radio:{id:13,name:"radio",placeholder:false,autocomplete:false,value:{required:true,allowed:true}},range:{id:14,name:"range",placeholder:false,autocomplete:true,value:{required:false,allowed:true}},
reset:{id:15,name:"reset",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},search:{id:16,name:"search",placeholder:true,autocomplete:true,value:{required:false,allowed:true}},submit:{id:17,name:"submit",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},tel:{id:18,name:"button",placeholder:true,autocomplete:true,value:{required:false,allowed:true}},text:{id:19,name:"text",placeholder:true,autocomplete:true,value:{required:false,allowed:true}},time:{id:20,
name:"time",placeholder:false,autocomplete:true,value:{required:false,allowed:true}},url:{id:21,name:"url",placeholder:true,autocomplete:true,value:{required:false,allowed:true}},week:{id:22,name:"week",placeholder:false,autocomplete:false,value:{required:false,allowed:true}}};
(function(a){var g={init:function(b){var d={ID:"",name:"",type:CswInput_Types.text,placeholder:"",cssclass:"",value:"",width:"200px",autofocus:false,autocomplete:"on",onChange:function(){}};b&&a.extend(d,b);if(isNullOrEmpty(d.name))d.name=d.ID;b=a(this);var f=a("<input />");if(d.ID!==""){f.attr("id",d.ID);f.attr("name",d.name)}if(d.type!==""&&d.type!==undefined){f.attr("type",d.type.name);d.type.autocomplete===true&&d.autocomplete==="on"&&f.attr("autocomplete","on");if(d.type.value.required===true||
d.value!==""&&d.value!==undefined){if(d.value===undefined)d.value="";f.val(d.value)}}d.cssclass!==""&&f.attr("class",d.cssclass);d.width!==""&&f.attr({width:d.width});d.autofocus===true&&f.attr("autofocus");d.onChange!==undefined&&f.change(function(){d.onChange()});b.append(f);return f},findandget:function(b){var d={ID:""};b&&a.extend(d,b);b=a(this);var f;if(d.ID!==""&&d.ID!==undefined)f=b.find("#"+d.ID);return f},findandset:function(b){var d=false,f={ID:"",value:""};b&&a.extend(f,b);b=a(this);if(f.ID!==
""&&f.ID!==undefined&&f.value!==undefined){b=b.find("#"+f.ID);if(b.size()>0){b.val(f.value);d=true}}return d},set:function(b){var d=false,f={value:""};b&&a.extend(f,b);b=a(this);if(b.size()>0&&f.value!==undefined){b.val(f.value);d=true}return d}};a.fn.CswInput=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswInput")}})(jQuery);(function(a){a.fn.CswLayoutTable=function(g){function b(k,l,t){for(var s=parseInt(k.attr("cellset_rows")),w=parseInt(k.attr("cellset_columns")),C=[],v=1;v<=s;v++)for(var u=1;u<=w;u++){if(C[v]===undefined)C[v]=[];C[v][u]=j(k,l,t,v,u,s,w)}return C}function d(k){return k.attr("removemode")==="true"}function f(k){return k.attr("configmode")==="true"}function e(k,l){l.find("#"+k.attr("id")+"addbtn").hide();l.find("#"+k.attr("id")+"rembtn").hide();l.find("#"+k.attr("id")+"addcolumnbtn").hide();l.find("#"+
k.attr("id")+"addrowbtn").hide();k.CswTable("findCell",".CswLayoutTable_cell").removeClass("CswLayoutTable_configcell");k.attr("configmode","false");k.trigger(k.attr("id")+"CswLayoutTable_onConfigOff",l)}function h(k,l){l.find("#"+k.attr("id")+"addbtn").show();l.find("#"+k.attr("id")+"rembtn").show();l.find("#"+k.attr("id")+"addcolumnbtn").show();l.find("#"+k.attr("id")+"addrowbtn").show();parseInt(k.attr("cellset_rows"));parseInt(k.attr("cellset_columns"));k.CswTable("finish",null);k.CswTable("findCell",
".CswLayoutTable_cell").addClass("CswLayoutTable_configcell");k.attr("configmode","true");k.trigger(k.attr("id")+"CswLayoutTable_onConfigOn",l)}function j(k,l,t,s,w,C,v){if(l<1)l=1;if(t<1)t=1;return k.CswTable("cell",(l-1)*C+s,(t-1)*v+w)}function m(k,l,t,s,w,C){var v=Math.ceil(t/w),u=Math.ceil(s/C);t=parseInt(w-t%w);s=parseInt(C-s%C);l.attr("row",v).attr("column",u).attr("cellsetrow",t).attr("cellsetcolumn",s).click(function(){if(d(k)){var A=a(".CswLayoutTable_remove");A.length>0&&k.trigger(k.attr("id")+
"CswLayoutTable_onRemove",{table:k,cellset:b(k,v,u),row:A.attr("row"),column:A.attr("column")});A.children().hide();A.removeClass("CswLayoutTable_remove")}}).drag(function(A,E){if(f(k)){k.CswTable("findCell",".CswLayoutTable_swapcell").removeClass("CswLayoutTable_swapcell");k.CswTable("findCell",'[row="'+v+'"][column="'+u+'"]').addClass("CswLayoutTable_dragcell");var P=i(k,v,u,w,C,E);P.length>0&&P.addClass("CswLayoutTable_swapcell")}}).drop(function(A,E){if(f(k)){k.CswTable("findCell",".CswLayoutTable_swapcell").removeClass("CswLayoutTable_swapcell");
var P=k.CswTable("findCell",'[row="'+v+'"][column="'+u+'"]');P.removeClass("CswLayoutTable_dragcell");var N=i(k,v,u,w,C,E);if(N.length>0){k.trigger(k.attr("id")+"CswLayoutTable_onSwap",{table:k,cellset:b(k,v,u),swapcellset:b(k,N.first().attr("row"),N.first().attr("column")),row:v,column:u,swaprow:N.first().attr("row"),swapcolumn:N.first().attr("column")});var ca=a("<div />");for(r=1;r<=w;r++)for(c=1;c<=C;c++){var ga=P.filter('[cellsetrow="'+r+'"][cellsetcolumn="'+c+'"]'),aa=N.filter('[cellsetrow="'+
r+'"][cellsetcolumn="'+c+'"]');ga.contents().appendTo(ca);aa.contents().appendTo(ga);ca.contents().appendTo(aa)}}}}).hover(function(){var A=a(this);f(k)&&A.addClass("CswLayoutTable_hover");d(k)&&k.CswTable("findCell",'[row="'+A.attr("row")+'"][column="'+A.attr("column")+'"]').addClass("CswLayoutTable_remove")},function(){var A=a(this);f(k)&&A.removeClass("CswLayoutTable_hover");d(k)&&k.CswTable("findCell",'[row="'+A.attr("row")+'"][column="'+A.attr("column")+'"]').removeClass("CswLayoutTable_remove")})}
function i(k){var l=a(".CswLayoutTable_hover");return k.CswTable("findCell",'[row="'+l.attr("row")+'"][column="'+l.attr("column")+'"]')}var n={init:function(k){var l={ID:"",cellset:{rows:1,columns:1},onSwap:function(){},onAddClick:function(){},onConfigOn:function(){},onConfigOff:function(){},onRemove:function(){},TableCssClass:"",CellCssClass:"",cellpadding:0,cellspacing:0,width:"",align:"",showConfigButton:false,showAddButton:false,showRemoveButton:false,OddCellRightAlign:false,ReadOnly:false};k&&
a.extend(l,k);k=a(this);var t=a("<div />").appendTo(k).css({"float":"right"});l.ReadOnly&&t.hide();var s=k.CswTable("init",{ID:l.ID,TableCssClass:l.TableCssClass+" CswLayoutTable_table",CellCssClass:l.CellCssClass+" CswLayoutTable_cell",cellpadding:l.cellpadding,cellspacing:l.cellspacing,OddCellRightAlign:l.OddCellRightAlign,width:l.width,align:l.align,onCreateCell:function(C,v,u,A,E){m(v,u,A,E,l.cellset.rows,l.cellset.columns)}}).attr("cellset_rows",l.cellset.rows).attr("cellset_columns",l.cellset.columns);
s.attr("configmode","false");s.bind(l.ID+"CswLayoutTable_onSwap",l.onSwap);s.bind(l.ID+"CswLayoutTable_onRemove",l.onRemove);s.bind(l.ID+"CswLayoutTable_onConfigOn",l.onConfigOn);s.bind(l.ID+"CswLayoutTable_onConfigOff",l.onConfigOff);var w=t.CswTable("init",{ID:l.ID+"_buttontbl"});l.showAddButton&&w.CswTable("cell",1,1).CswImageButton({ButtonType:CswImageButton_ButtonType.Add,AlternateText:"Add",ID:l.ID+"addbtn",onClick:function(){l.onAddClick();return CswImageButton_ButtonType.None}}).hide();l.showRemoveButton&&
w.CswTable("cell",1,2).CswImageButton({ButtonType:CswImageButton_ButtonType.Delete,AlternateText:"Remove",ID:l.ID+"rembtn",onClick:function(){var C=a(this);if(d(s)){s.attr("removemode","false");C.removeClass("CswLayoutTable_removeEnabled")}else{s.attr("removemode","true");C.addClass("CswLayoutTable_removeEnabled")}return CswImageButton_ButtonType.None}}).hide();if(l.showConfigButton){w.CswTable("cell",1,3).CswImageButton({ButtonType:CswImageButton_ButtonType.ArrowEast,AlternateText:"Add Column",ID:l.ID+
"addcolumnbtn",onClick:function(){var C=parseInt(s.attr("cellset_rows")),v=parseInt(s.attr("cellset_columns")),u=s.CswTable("maxrows"),A=s.CswTable("maxcolumns");j(s,u/C,A/v+1,C,v,C,v);s.CswTable("finish",null);f(s)&&s.CswTable("findCell",".CswLayoutTable_cell").addClass("CswLayoutTable_configcell");return CswImageButton_ButtonType.None}}).hide();w.CswTable("cell",1,4).CswImageButton({ButtonType:CswImageButton_ButtonType.ArrowSouth,AlternateText:"Add Row",ID:l.ID+"addrowbtn",onClick:function(){var C=
parseInt(s.attr("cellset_rows")),v=parseInt(s.attr("cellset_columns")),u=s.CswTable("maxrows"),A=s.CswTable("maxcolumns");j(s,u/C+1,A/v,C,v,C,v);s.CswTable("finish",null);f(s)&&s.CswTable("findCell",".CswLayoutTable_cell").addClass("CswLayoutTable_configcell");return CswImageButton_ButtonType.None}}).hide();w.CswTable("cell",1,5).CswImageButton({ButtonType:CswImageButton_ButtonType.Configure,AlternateText:"Configure",ID:l.ID+"configbtn",onClick:function(){f(s)?e(s,w):h(s,w);return CswImageButton_ButtonType.None}})}return s},
cellset:function(k,l){var t=a(this);return b(t,k,l)},isConfig:function(){var k=a(this);return f(k)},toggleConfig:function(){var k=a(this),l=a("#"+k.attr("id")+"_buttontbl");f(k)?e(k,l):h(k,l)},ConfigOn:function(){var k=a(this),l=a("#"+k.attr("id")+"_buttontbl");h(k,l)},ConfigOff:function(){var k=a(this),l=a("#"+k.attr("id")+"_buttontbl");e(k,l)}};if(n[g])return n[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return n.init.apply(this,arguments);else a.error("Method "+
g+" does not exist on CswLayoutTable")}})(jQuery);(function(a){a.fn.CswLogin=function(g){function b(e){var h={DeauthenticateUrl:"/NbtWebApp/wsNBT.asmx/deauthenticate",onDeauthenticate:function(){}};e&&a.extend(h,e);CswAjaxJSON({url:h.DeauthenticateUrl,data:"",success:function(){a.CswCookie("clear",CswCookieName.Username);h.onDeauthenticate()}})}function d(e,h){var j="",m=true;switch(e.AuthenticationStatus){case "Failed":j="Login Failed";break;case "Locked":j="Your account is locked.  Please see your account administrator.";break;case "Deactivated":j=
"Your account is deactivated.  Please see your account administrator.";break;case "TooManyUsers":j="Too many users are currently connected.  Try again later.";break;case "NonExistentAccessId":j="Login Failed";break;case "NonExistentSession":j="Login Failed";break;case "Unknown":j="An Unknown Error Occurred";break;case "ExpiredPassword":m=false;a.CswDialog("EditNodeDialog",{nodeid:e.nodeid,cswnbtnodekey:e.cswnbtnodekey,filterToPropId:e.passwordpropid,title:"Your password has expired.  Please change it now:",
onEditNode:function(){h()}});break;case "ShowLicense":m=false;a.CswDialog("ShowLicenseDialog",{onAccept:function(){h()},onDecline:function(){b()}})}a("#loginmsg").CswErrorMessage({message:j});a("#login_password").val("");m&&a("#login_button").CswButton("enable")}var f={login:function(e){var h={AuthenticateUrl:"/NbtWebApp/wsNBT.asmx/authenticate",onAuthenticate:function(){}};e&&a.extend(h,e);e=a.CswCookie("get",CswCookieName.SessionId);if(e!==undefined&&e!==""&&e!==null)h.onAuthenticate(a.CswCookie("get",
CswCookieName.Username));else{var j=a('<div id="logindiv" align="center">  <form>    <table>    <tr>      <td align="right"></td>      <td id="loginmsg" style="display: none;"></td>    </tr>    <tr>      <td align="right">Customer ID:</td>      <td><input type="text" name="accessid" id="login_accessid" /></td>    </tr>    <tr>      <td align="right">User Name:</td>      <td><input type="text" name="username" id="login_username" /></td>    </tr>    <tr>      <td align="right">Password:</td>      <td><input type="password" name="password" id="login_password" /></td>    </tr>    <tr>      <td align="right"></td>      <td id="login_button_cell">           </td>    </tr>    <tr>      <td></td>      <td></td>    </tr>  </table> </form> </div> <br/><br/><br/> <div id="assemblydiv" width="100%" align="right"></div>').appendTo(a(this));
a("#assemblydiv").load("_Assembly.txt");a("#login_accessid").focus();var m=a("#login_button_cell").CswButton({ID:"login_button",enabledText:"Login",disabledText:"Logging in...",onclick:function(){function i(t){a.CswCookie("set",CswCookieName.Username,t);j.remove();h.onAuthenticate(t)}a("#loginmsg").hide().children().remove();var n=a("#login_accessid").val(),k=a("#login_username").val(),l=a("#login_password").val();CswAjaxJSON({url:h.AuthenticateUrl,data:"{AccessId: '"+n+"', UserName: '"+k+"', Password: '"+
l+"'}",success:function(t){auth=t.AuthenticationStatus;auth==="Authenticated"?i(k):d(t,i,m)},error:function(){m.CswButton("enable")}})}})}},logout:function(e){b(e)}};if(f[g])return f[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return f.init.apply(this,arguments);else a.error("Method "+g+" does not exist on CswLogin")}})(jQuery);(function(a){a.fn.CswMenu=function(g){function b(){$this=a(this);d();$this.find("ul.subnav").slideDown("fast").show()}function d(){e.find("ul").stop(true,true);e.find("ul.subnav").slideUp("fast")}var f={};g&&a.extend(f,g);var e=a(this);e.children("li").click(b).hover(b,d);e.find(".subnav").children("li").click(function(h){d();h&&h.stopPropagation()});return this}})(jQuery);(function(a){a.fn.CswMenuHeader=function(g){var b={Url:"/NbtWebApp/wsNBT.asmx/getHeaderMenu",onLogout:function(){},onSuccess:function(){}};g&&a.extend(b,g);var d=a(this);CswAjaxXml({url:b.Url,data:"",success:function(f){var e=a('<ul class="topnav"></ul>');d.text("").append(e);f.children().each(function(){var h=a(this);if(h.attr("text")!==undefined){var j=HandleMenuItem({$ul:e,$itemxml:h,onLogout:b.onLogout});if(h.children().length>1){var m=a('<ul class="subnav"></ul>').appendTo(j);h.children().each(function(){HandleMenuItem({$ul:m,
$itemxml:a(this),onLogout:b.onLogout})})}}});e.CswMenu();b.onSuccess()}});return this}})(jQuery);(function(a){a.fn.CswMenuMain=function(g){var b={Url:"/NbtWebApp/wsNBT.asmx/getMainMenu",viewid:"",nodeid:"",cswnbtnodekey:"",onAddNode:function(){},onMultiEdit:function(){},onSearch:{onViewSearch:function(){},onGenericSearch:function(){}},onEditView:function(){},Multi:false,NodeCheckTreeId:""};g&&a.extend(b,g);var d=a(this);CswAjaxXml({url:b.Url,data:"ViewNum="+b.viewid+"&SafeNodeKey="+b.cswnbtnodekey,success:function(f){var e=a('<ul class="topnav"></ul>');d.text("").append(e);f.children().each(function(){var h=
a(this);if(h.attr("text")!==undefined){var j={$ul:e,$itemxml:h,onAlterNode:b.onAddNode,onMultiEdit:b.onMultiEdit,onEditView:b.onEditView,onSearch:b.onSearch,Multi:b.Multi,NodeCheckTreeId:b.NodeCheckTreeId},m=HandleMenuItem(j);if(h.children().length>=1){var i=a('<ul class="subnav"></ul>').appendTo(m);h.children().each(function(){var n={$ul:i,$itemxml:a(this)};a.extend(j,n);HandleMenuItem(j)})}}});e.CswMenu()}});return this}})(jQuery);(function(a){a.fn.CswMobile=function(g){function b(p){var q='<input type="textbox" id="login_accessid" placeholder="Access Id"/><br>';q+='<input type="textbox" id="login_username" placeholder="User Name"/><br>';q+='<input type="password" id="login_password" placeholder="Password"/><br>';q+='<a id="loginsubmit" data-role="button" href="#">Continue</a>';v({DivId:"logindiv",HeaderText:"Login to ChemSW Fire Inspection",content:q,HideSearchButton:true,HideRefreshButton:true,HideLogoutButton:true});a("#loginsubmit").click(N);
p&&a.mobile.changePage(a("#logindiv"),"fade",false,true)}function d(p){v({DivId:"sorrycharliediv",HeaderText:"Sorry Charlie!",content:"You must have internet connectivity to login.",HideSearchButton:true,HideRefreshButton:true,HideLogoutButton:true});p&&a.mobile.changePage(a("#sorrycharliediv"),"fade",false,true)}function f(p){setTimeout("$('#"+p+"').remove();",K.DivRemovalDelay)}function e(p){if(a("#viewsdiv").hasClass("ui-page-active")){v({DivId:"loadingdiv",HeaderText:"Please wait",content:"Loading...",
HideSearchButton:true,HideOnlineButton:true,HideRefreshButton:true,HideLogoutButton:true,HideHelpButton:true});a.mobile.changePage(a("#loadingdiv"),"fade",false,true);setTimeout(function(){h(true);f("loadingdiv")},K.DivRemovalDelay)}else h(p)}function h(p){a("#viewsdiv").remove();i({level:0,DivId:"viewsdiv",HeaderText:"Views",HideRefreshButton:true,HideSearchButton:true,ChangePage:p})}function j(){var p=a(".onlineStatus");if(p.hasClass("offline")){p.removeClass("offline").addClass("online").text("Online");
a(".refresh").css("visibility","");e(false)}if(a("#sorrycharliediv").length>0){b(true);f("sorrycharliediv")}}function m(){return a(".onlineStatus").hasClass("offline")}function i(p){var q={ParentId:"",level:1,DivId:"",HeaderText:"",HideRefreshButton:false,HideSearchButton:false,ChangePage:false};p&&a.extend(q,p);p=true;if(q.level===1)ka=q.DivId;if(a("#"+q.DivId).length===0)if(q.level===0)if(m())Z(function(x){n({ParentId:q.ParentId,DivId:q.DivId,HeaderText:q.HeaderText,$xml:a(x),parentlevel:q.level,
HideRefreshButton:q.HideRefreshButton,HideSearchButton:q.HideSearchButton,ChangePage:q.ChangePage})});else{debug&&log("Starting "+K.ViewUrl);CswAjaxXml({async:false,formobile:fa,url:K.ViewUrl,data:"SessionId="+la+"&ParentId="+q.DivId+"&ForMobile="+fa,onloginfail:function(){ca()},success:function(x){debug&&log("On Success "+K.ViewUrl);q.level===1&&S(q.DivId,q.HeaderText,x);n({ParentId:q.ParentId,DivId:q.DivId,HeaderText:q.HeaderText,$xml:a(x),parentlevel:q.level,HideRefreshButton:q.HideRefreshButton,
HideSearchButton:q.HideSearchButton,ChangePage:q.ChangePage})}})}else if(q.level===1)W(ka,function(x){if(isNullOrEmpty(x)){if(!m()){debug&&log("Starting "+K.ViewUrl);CswAjaxXml({async:false,formobile:fa,url:K.ViewUrl,data:"SessionId="+la+"&ParentId="+q.DivId+"&ForMobile="+fa,onloginfail:function(){ca()},success:function(B){debug&&log("On Success "+K.ViewUrl);q.level===1&&S(q.DivId,q.HeaderText,B);ia=a(B);n({ParentId:q.ParentId,DivId:q.DivId,HeaderText:q.HeaderText,$xml:a(B),parentlevel:q.level,HideRefreshButton:q.HideRefreshButton,
HideSearchButton:q.HideSearchButton,ChangePage:q.ChangePage})}})}}else{ia=a(x);n({ParentId:q.ParentId,DivId:q.DivId,HeaderText:q.HeaderText,$xml:a(x),parentlevel:q.level,HideRefreshButton:q.HideRefreshButton,HideSearchButton:q.HideSearchButton,ChangePage:q.ChangePage})}});else{if(!isNullOrEmpty(ia)){var z=ia.find("#"+q.DivId);n({ParentId:q.ParentId,DivId:q.DivId,HeaderText:q.HeaderText,$xml:z.children("subitems").first(),parentlevel:q.level,HideRefreshButton:q.HideRefreshButton,HideSearchButton:q.HideSearchButton,
ChangePage:q.ChangePage})}}else p=false;return p}function n(p){var q={ParentId:"",DivId:"",HeaderText:"",$xml:"",parentlevel:"",HideRefreshButton:false,HideSearchButton:false,ChangePage:false};p&&a.extend(q,p);var z=l();oa="";pa=function(){};q.$xml.children().each(function(){z+=k(this,q.DivId,q.parentlevel)});z+="</ul>";$divhtml=v({ParentId:q.ParentId,level:q.parentlevel,DivId:q.DivId,HeaderText:q.HeaderText,content:z,HideRefreshButton:q.HideRefreshButton,HideSearchButton:q.HideSearchButton});pa($divhtml);
q.ChangePage&&a.mobile.changePage(a("#"+q.DivId),"slide",false,true)}function k(p,q,z){var x=a(p),B=x.attr("id"),H=x.attr("name"),y=!isNullOrEmpty(B),L=p.nodeName;p=x.next().attr("id");var U=x.prev().attr("id"),M="";switch(L){case "SEARCHES":break;case "NODE":M+=t(x);break;case "PROP":var G=x.attr("tab");y=x.attr("fieldtype");var V=x.attr("gestalt");if(V==="NaN")V="";L=x.prevAll('[fieldtype="'+y+'"]').andSelf().length;var ja=x.siblings('[fieldtype="'+y+'"]').andSelf().length;if(oa!==G){isNullOrEmpty(oa)||
(M+="</ul>"+l());M+='<li data-role="list-divider">'+G+"</li>";oa=G}switch(y){case "Logical":M+='<li id="'+B+'_li"><a href="#'+B+'">'+H+"</a></li>";G=x.children("checked").text();V=x.children("required").text();if(isNullOrEmpty(G))G="";if(isNullOrEmpty(V))V="";M+='<div class="lisubstitute ui-li ui-btn-up-c">';M+=w(B,"_ans","_ans2",G,V);M+="</div>";break;case "Question":M+='<li id="'+B+'_li"><a href="#'+B+'">'+H+"</a></li>";G=x.children("answer").text();V=x.children("allowedanswers").text();var ba=
x.children("compliantanswers").text(),R=x.children("correctiveaction").text();if(isNullOrEmpty(G))G="";if(isNullOrEmpty(V))V="";if(isNullOrEmpty(ba))ba="";if(isNullOrEmpty(R))R="";M+='<div class="lisubstitute ui-li ui-btn-up-c">';M+=C(q,B,"_ans","_ans2","_cor","_li","_propname",V,G,ba);M+="</div>";if(!isNullOrEmpty(G)&&(","+ba+",").indexOf(","+G+",")<0&&isNullOrEmpty(R)){var ta=pa;pa=function(qa){qa.find("#"+B+"_li div").addClass("OOC");ta(qa)}}break;default:M+='<li id="'+B+'_li">';M+=' <a href="#'+
B+'">'+H+"</a>";M+=' <p class="ui-li-aside">'+V+"</p>";M+="</li>"}G="";isNullOrEmpty(U)||(G+='<a href="#'+U+'" data-role="button" data-icon="arrow-u" data-inline="true" data-theme="'+K.Theme+'" data-transition="slideup" data-back="true">Previous</a>');isNullOrEmpty(p)||(G+='<a href="#'+p+'" data-role="button" data-icon="arrow-d" data-inline="true" data-theme="'+K.Theme+'" data-transition="slideup">Next</a>');if(y==="Question")G+="&nbsp;"+L+"&nbsp;of&nbsp;"+ja;v({ParentId:q,level:z,DivId:B,HeaderText:H,
toolbar:G,content:s(x,q)});break;default:M+="<li>";M+=y?'<a href="#'+B+'">'+H+"</a>":H;M+="</li>"}return M}function l(p){var q='<ul data-role="listview" ';isNullOrEmpty(p)||(q+='id="'+p+'"');q+=">";return q}function t(p){var q="",z=p.attr("id"),x=p.attr("name"),B="";if(!isNullOrEmpty(p.attr("iconfilename"))&&!isNullOrEmpty(p.attr("iconfilename")))B="images/icons/"+p.attr("iconfilename");switch(p.attr("objectclass")){case "InspectionDesignClass":var H=p.find('prop[ocpname="Due Date"]').attr("gestalt"),
y=p.find('prop[ocpname="Location"]').attr("gestalt"),L=p.find('prop[ocpname="Target"]').attr("gestalt"),U=p.find('prop[ocpname="Status"]').attr("gestalt"),M=0;p.find('prop[fieldtype="Question"]').each(function(){isNullOrEmpty(a(this).children("Answer").text())&&M++});q+="<li>";isNullOrEmpty(B)||(q+='<img src="'+B+'" class="ui-li-icon"/>');q+='<h3><a href="#'+z+'">'+x+"</a></h3>";q+="<p>"+y+"</p>";q+="<p>"+L+"</p>";q+="<p>"+U+", Due: "+H+"</p>";q+='<span id="'+z+'_unansweredcnt" class="ui-li-count">'+
M+"</span>";q+="</li>";break;default:q+="<li>";isNullOrEmpty(B)||(q+='<img src="'+B+'" class="ui-li-icon"/>');q+='<a href="#'+z+'">'+x+"</a>";q+="</li>"}return q}function s(p,q){var z=p.attr("id"),x=p.attr("fieldtype"),B=p.attr("name"),H=isTrue(p.attr("readonly")),y=tryParseString,L=p.children("text");ret=L.text();L=L.html();if(!isNullOrEmpty(L))if(L.substr(0,11)==="<\!--[CDATA[")ret=L.substr(11,L.length-11-5);var U=y(ret,""),M=tryParseString(p.children("value").text(),""),G=tryParseString(p.children("href").text(),
""),V=tryParseString(p.children("checked").text(),""),ja=tryParseString(p.children("required").text(),""),ba=tryParseString(p.children("units").text(),""),R=tryParseString(p.children("answer").text(),""),ta=tryParseString(p.children("allowedanswers").text(),""),qa=tryParseString(p.children("correctiveaction").text(),""),ya=tryParseString(p.children("comments").text(),""),ua=tryParseString(p.children("compliantanswers").text(),"");L=tryParseString(p.children("options").text(),"");if(M=="NaN")M="";
y='<div id="'+z+'_propname"';if(x==="Question"&&!(R===""||(","+ua+",").indexOf(","+R+",")>=0))y+=' class="OOC"';y+=">"+B+"</div><br/>";if(H)y+=p.attr("gestalt");else switch(x){case "Date":y+='<input type="text" name="'+z+'" value="'+M+'" />';break;case "Link":y+='<a href="'+G+'">'+U+"</a>";break;case "List":y+='<select name="'+z+'">';z=M;x=L.split(",");for(B=0;B<x.length;B++){y+='<option value="'+x[B]+'"';if(z===x[B])y+=" selected";y+=isNullOrEmpty(x[B])?">[blank]</option>":">"+x[B]+"</option>"}y+=
"</select>";break;case "Logical":y+=w(z,"_ans2","_ans",V,ja);break;case "Memo":y+='<textarea name="'+z+'">'+U+"</textarea>";break;case "Number":y+='<input type="number" name="'+z+'" value="'+M+'"';y+="/>";break;case "Password":y+=string.Empty;break;case "Quantity":y+='<input type="text" name="'+z+'_qty" value="'+M+'" />';y+=ba;break;case "Question":y+=C(q,z,"_ans2","_ans","_cor","_li","_propname",ta,R,ua);y+='<textarea id="'+z+'_cor" name="'+z+'_cor" placeholder="Corrective Action"';if(R===""||(","+
ua+",").indexOf(","+R+",")>=0)y+='style="display: none"';y+='onchange="';y+="var $cor = $(this); ";y+="if($cor.attr('value') === '') { ";y+="  $('#"+z+"_li div').addClass('OOC'); ";y+="  $('#"+z+"_propname').addClass('OOC'); ";y+="} else {";y+="  $('#"+z+"_li div').removeClass('OOC'); ";y+="  $('#"+z+"_propname').removeClass('OOC'); ";y+="}";y+='">';y+=qa;y+="</textarea>";y+='<textarea name="'+z+'_com" placeholder="Comments">';y+=ya;y+="</textarea>";break;case "Static":y+=U;break;case "Text":y+='<input type="text" name="'+
z+'" value="'+U+'" />';break;case "Time":y+='<input type="text" name="'+z+'" value="'+M+'" />';break;default:y+=p.attr("gestalt")}return y}function w(p,q,z,x,B){var H='<fieldset class="csw_fieldset" data-role="controlgroup" data-type="horizontal" data-role="fieldcontain">',y=["Null","True","False"];if(isTrue(B))y=["True","False"];for(B=0;B<y.length;B++){var L;switch(y[B]){case "Null":L="?";break;case "True":L="Yes";break;case "False":L="No"}H+='<input type="radio" name="'+p+q+'" id="'+p+q+"_"+y[B]+
'" value="'+y[B]+'" ';if(!isTrue(x)&&!isTrue(y[B])||isTrue(x)&&isTrue(y[B])||isNullOrEmpty(x)&&isNullOrEmpty(y[B]))H+="checked";H+=' onclick="';for(var U=0;U<y.length;U++)H+=y[U]===y[B]?" $('#"+p+q+"_"+y[U]+"').siblings('label').addClass('ui-btn-active');":" $('#"+p+q+"_"+y[U]+"').siblings('label').removeClass('ui-btn-active');";H+=" var $otherradio; ";for(U=0;U<y.length;U++){H+=" $otherradio = $('#"+p+z+"_"+y[U]+"'); ";if(y[U]===y[B]){H+=" $otherradio.attr('checked', true); ";H+=" $otherradio.siblings('label').addClass('ui-btn-active'); "}else{H+=
" $otherradio.attr('checked', false); ";H+=" $otherradio.siblings('label').removeClass('ui-btn-active'); "}}H+='" />';H+='<label for="'+p+q+"_"+y[B]+'">'+L+"</label>"}H+="</fieldset>";return H}function C(p,q,z,x,B,H,y,L,U,M){var G='<fieldset class="csw_fieldset" id="'+q+'_fieldset" data-role="controlgroup" data-type="horizontal" data-role="fieldcontain">';L=L.split(",");for(var V=0;V<L.length;V++){var ja=L[V].replace(/'/gi,"");G+='<input type="radio" name="'+q+z+'" id="'+q+z+"_"+ja+'" value="'+L[V]+
'" ';if(U===L[V])G+=" checked";G+=' onclick="';for(var ba=0;ba<L.length;ba++){var R=L[ba].replace(/'/gi,"");G+=L[ba]===L[V]?" $('#"+q+z+"_"+R+"').siblings('label').addClass('ui-btn-active');":" $('#"+q+z+"_"+R+"').siblings('label').removeClass('ui-btn-active');"}G+=" var $otherradio; ";for(ba=0;ba<L.length;ba++){R=L[ba].replace(/'/gi,"");G+=" $otherradio = $('#"+q+x+"_"+R+"'); ";if(L[ba]===L[V]){G+=" $otherradio.attr('checked', true); ";G+=" $otherradio.siblings('label').addClass('ui-btn-active'); "}else{G+=
" $otherradio.attr('checked', false); ";G+=" $otherradio.siblings('label').removeClass('ui-btn-active'); "}}if((","+M+",").indexOf(","+L[V]+",")>=0){G+=" $('#"+q+B+"').css('display', 'none'); ";G+=" $('#"+q+H+" div').removeClass('OOC'); ";G+=" $('#"+q+y+"').removeClass('OOC'); "}else{G+=" var $cor = $('#"+q+B+"'); ";G+=" $cor.css('display', ''); ";G+=" if($cor.attr('value') === '') { ";G+="   $('#"+q+H+" div').addClass('OOC'); ";G+="   $('#"+q+y+"').addClass('OOC'); ";G+=" } else {";G+="   $('#"+
q+H+" div').removeClass('OOC'); ";G+="   $('#"+q+y+"').removeClass('OOC'); ";G+=" } "}if(isNullOrEmpty(U)){G+=" if(! $('#"+q+"_fieldset').attr('answered')) { ";G+="   var $cntspan = $('#"+p+"_unansweredcnt'); ";G+="   $cntspan.text(parseInt($cntspan.text()) - 1); ";G+="   $('#"+q+"_fieldset').attr('answered', 'true'); ";G+=" }"}G+=' " />';G+='            <label for="'+q+z+"_"+ja+'">'+L[V]+"</label>"}G+="</fieldset>";return G}function v(p){var q={ParentId:undefined,level:1,DivId:"",HeaderText:"",toolbar:"",
content:"",HideSearchButton:false,HideOnlineButton:false,HideRefreshButton:false,HideLogoutButton:false,HideHelpButton:false,backicon:undefined,backtransition:undefined};p&&a.extend(q,p);p='<div id="'+q.DivId+'" data-role="page"><div data-role="header" data-theme="'+K.Theme+'" data-position="fixed">';p+='<a href="#'+q.ParentId+'" id="'+q.DivId+'_back" data-back="true" ';isNullOrEmpty(q.backtransition)||(p+=' data-transition="'+q.backtransition+'" ');isNullOrEmpty(q.ParentId)||(p+=' style="visibility: hidden;" ');
p+=' data-icon="';p+=isNullOrEmpty(q.backicon)?"arrow-l":q.backicon;p+='">Back</a>';p+="<h1>"+q.HeaderText+"</h1>";q.HideSearchButton||(p+='    <a href="#" id="'+q.DivId+'_searchopen">Search</a>');p+='    <div class="toolbar" data-role="controlgroup" data-type="horizontal">'+q.toolbar+'    </div>  </div>  <div data-role="content" data-theme="'+K.Theme+'">'+q.content+'  </div>  <div data-role="footer" data-theme="'+K.Theme+'" data-position="fixed">';if(!q.HideOnlineButton){p+='    <a href="#" id="'+
q.DivId+'_gosynchstatus" data-transition="slideup">';p+=m()?'    <div class="onlineStatus offline">Offline</div>':'    <div class="onlineStatus online">Online</div>';p+="    </a>"}q.HideRefreshButton||(p+='    <a href="#" id="'+q.DivId+'_refresh" class="refresh">Refresh</a>');q.HideLogoutButton||(p+='    <a href="#" id="'+q.DivId+'_logout">Logout</a>');p+='     <a rel="external" href="Login.aspx?redir=n">Full Site</a>';q.HideHelpButton||(p+='    <a href="#" id="'+q.DivId+'_help">Help</a>');p+="  </div></div>";
p=a(p);a("body").append(p);p.page();A(q.DivId,q.ParentId,q.level,p);return p}function u(p){var q="";p=a("#"+p).find('div[data-role="header"] #'+p+"_back");if(p.length>0)q=p.attr("href").substr(1);return q}function A(p,q,z,x){x.find("#"+p+"_searchopen").click(function(B){ra(p,B)}).end().find("#"+p+"_gosynchstatus").click(function(){a("#synchstatus_back").attr("href","#"+p);a("#synchstatus_back").css("visibility","");a.mobile.changePage(a("#synchstatus"),"slideup")}).end().find("#"+p+"_refresh").click(function(B){B.stopPropagation();
B.preventDefault();return ga(p,B)}).end().find("#"+p+"_logout").click(function(B){B.stopPropagation();B.preventDefault();ca()}).end().find("#"+p+"_back").click(function(){p!=="synchstatus"&&p.indexOf("prop_")!==0&&setTimeout("$('div[id*=\""+p+"\"]').remove();",K.DivRemovalDelay);return true}).end().find("#"+p+"_help").click(function(){a.mobile.changePage(a("#help"),"slideup")}).end().find("input").change(function(B){ha(p,B)}).end().find("textarea").change(function(B){ha(p,B)}).end().find("select").change(function(B){ha(p,
B)}).end().find("li a").click(function(B){if(i({ParentId:p,level:z+1,DivId:a(this).attr("href").substr(1),HeaderText:a(this).text(),ChangePage:true})){B.stopPropagation();B.preventDefault()}}).end()}function E(p,q){if(p){a("#ss_pendingchangecnt").text("Yes");a(".onlineStatus").addClass("pendingchanges")}else{a("#ss_pendingchangecnt").text("No");a(".onlineStatus").removeClass("pendingchanges")}if(q){var z=new Date;a("#ss_lastsynch").text(z.toLocaleDateString()+" "+z.toLocaleTimeString())}}function P(){return a("#ss_pendingchangecnt").text()!==
"Yes"||confirm("You have pending unsaved changes.  These changes will be lost.  Continue?")}function N(){va=a("#login_username").attr("value");var p=a("#login_password").attr("value"),q=a("#login_accessid").attr("value");if(!m()){p={AccessId:q,UserName:va,Password:p};debug&&log("Starting "+K.AuthenticateUrl);CswAjaxJSON({formobile:fa,url:K.AuthenticateUrl,data:jsonToString(p),onloginfail:function(){ca()},success:function(){debug&&log("On Success "+K.AuthenticateUrl);O(la,va);e(true);f("logindiv")}})}}
function ca(){P()&&ma(function(){window.location.href=window.location.pathname})}function ga(p){if(!m())if(P()){v({DivId:"loadingdiv",HeaderText:"Please wait",content:"Loading...",HideSearchButton:true,HideOnlineButton:true,HideRefreshButton:true,HideLogoutButton:true,HideHelpButton:true});a.mobile.changePage(a("#loadingdiv"),"fade",false,true);setTimeout(function(){aa(p)},K.DivRemovalDelay)}return false}function aa(p){for(var q="";!isNullOrEmpty(p)&&p.substr(0,7)!=="viewid_";){q=u(p);a('div[id*="'+
p+'"]').remove();p=q}if(!isNullOrEmpty(p)){var z=p,x=a("#"+z).find('div[data-role="header"] h1').text();a('div[id*="'+z+'"]').remove();debug&&log("Starting "+K.ViewUrl);CswAjaxXml({async:false,formobile:fa,url:K.ViewUrl,data:"SessionId="+la+"&ParentId="+z+"&ForMobile="+fa,onloginfail:function(){ca()},success:function(B){debug&&log("Starting "+K.ViewUrl);ia=a(B);D(z,B,"0");n({ParentId:"viewsdiv",DivId:z,HeaderText:x,$xml:a(B),parentlevel:1,HideRefreshButton:false,HideSearchButton:true,ChangePage:true});
f("loadingdiv")}})}}function ha(p,q){var z=a(q.target),x=z.attr("name"),B=z.attr("value");if(!isNullOrEmpty(ia)){ia.find("#"+p).andSelf().find("prop").each(function(){var H=a(this),y=H.attr("id"),L=H.attr("fieldtype");H.attr("name");var U=H.children("text"),M=H.children("value");H.children("href");H.children("options");var G=H.children("checked");H.children("required");H.children("units");var V=H.children("answer");H.children("allowedanswers");var ja=H.children("correctiveaction"),ba=H.children("comments");
H.children("compliantanswers");var R=null;switch(L){case "Date":if(x===y)R=M;break;case "List":if(x===y)R=M;break;case "Logical":if(x===y+"_ans"||x===y+"_ans2")R=G;break;case "Memo":if(x===y)R=U;break;case "Number":if(x===y)R=M;break;case "Quantity":if(x===y+"_qty")R=M;break;case "Question":if(x===y+"_com")R=ba;else if(x===y+"_ans"||x===y+"_ans2")R=V;else if(x===y+"_cor")R=ja;break;case "Text":if(x===y)R=U;break;case "Time":if(x===y)R=M}if(!isNullOrEmpty(R)){R.text(B);H.attr("wasmodified","1")}});
D(ka,ia.wrap("<wrapper />").parent().html(),"1");E(true,false)}}function ra(p){a("#"+p+"_searchprop").attr("value");a("#"+p+"_searchfor").attr("value");W(ka,function(q){if(!isNullOrEmpty(q)){q=a(q);var z='<select id="'+p+'_searchprop" name="'+p+'_searchprop">';q.closest("result").find("searches").children().each(function(){var x=a(this);z+='<option value="'+x.attr("id")+'">'+x.attr("name")+"</option>"});z+='</select><input type="search" name="'+p+'_searchfor" id="'+p+'_searchfor" value="" placeholder="Search" /><input type="button" id="'+
p+'_searchgo" data-inline="true" value="Go" /> <div id="'+p+'_searchresults"></div>';v({ParentId:p,DivId:p+"_searchdiv",HeaderText:"Search",content:z,HideSearchButton:true,HideRefreshButton:true,backicon:"arrow-u"});a("#"+p+"_searchgo").click(function(x){sa(p,x)});a.mobile.changePage(a("#"+p+"_searchdiv"),"slideup",false,true)}})}function sa(p){var q=a("#"+p+"_searchprop").attr("value"),z=a("#"+p+"_searchfor").attr("value");W(ka,function(x){if(!isNullOrEmpty(x)){x=a(x);var B=l(p+"_searchresultslist"),
H=0;x.find("node").each(function(){var y=a(this);if(!isNullOrEmpty(y.attr(q)))if(y.attr(q).toLowerCase().indexOf(z.toLowerCase())>=0){H++;B+=k(this,p,1,false)}});if(H===0)B+="<li>No Results</li>";B+="</ul>";x=a("#"+p+"_searchresults");x.children().remove();x.append(B);a("#"+p+"_searchresultslist").listview();A(p+"_searchdiv",p,1,x)}})}function da(p,q,z){window.openDatabase?xa.transaction(function(x){x.executeSql(p,q,z,F)}):console.log("database is not opened")}function ma(p){da("DROP TABLE IF EXISTS configvars; ",
null,function(){da("DROP TABLE IF EXISTS views; ",null,function(){isNullOrEmpty(p)||p()})})}function Q(p){da("CREATE TABLE IF NOT EXISTS configvars   (id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,    varname TEXT NOT NULL,    varval TEXT);",null,function(){da("CREATE TABLE IF NOT EXISTS views   (id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,    rootid TEXT NOT NULL,    rootname TEXT NOT NULL,    viewxml TEXT,    wasmodified INTEGER );",null,p)})}function F(p,q){console.log("Database Error: "+q.message+
" (Code "+q.code+")");return true}function I(p,q,z){da("select varval from configvars where varname=?;",[p],function(x,B){0===B.rows.length?da("insert into configvars (varname, varval) values ( ?, ? );",[p,q],function(){isNullOrEmpty(z)||z()}):da("update configvars set varval = ? where varname = ?",[q,p],function(){isNullOrEmpty(z)||z()})})}function T(p,q){da("select varval from configvars where varname=?;",[p],function(z,x){if(x.rows.length>0){var B=x.rows.item(0);q(B.varval)}else q("")})}function O(p,
q,z){I("username",q,function(){I("sessionid",p,function(){isNullOrEmpty(z)||z()})})}function S(p,q,z){isNullOrEmpty(p)||da("INSERT INTO views (rootid, rootname, viewxml, wasmodified) VALUES (?, ?, ?, 0);",[p,q,z])}function D(p,q,z){isNullOrEmpty(p)||da("UPDATE views SET wasmodified = ?, viewxml = ? WHERE rootid = ?;",[z,q,p])}function J(p){da("SELECT rootid, viewxml FROM views WHERE wasmodified = 1 ORDER BY id DESC;",[],function(q,z){if(z.rows.length>0){E(true,true);var x=z.rows.item(0);p(x.rootid,
x.viewxml)}else{E(false,true);p("","")}})}function W(p,q){isNullOrEmpty(p)||da("SELECT viewxml FROM views WHERE rootid = ? ORDER BY id DESC;",[p],function(z,x){if(x.rows.length>0){var B=x.rows.item(0);q(B.viewxml)}else q("")})}function Z(p){da("SELECT rootid, rootname FROM views ORDER BY rootname;",[],function(q,z){for(var x="",B=0;B<z.rows.length;B++){var H=z.rows.item(B);x+='<view id="'+H.rootid+'" name="'+H.rootname+'" />'}p("<result>"+x+"</result>")})}function X(){wa=setTimeout(Y,K.PollingInterval)}
function Y(p,q){var z=K.ConnectTestUrl;if(K.RandomConnectionFailure)z=K.ConnectTestRandomFailUrl;debug&&log("Starting "+z);CswAjaxXml({formobile:fa,url:z,data:"",onloginfail:function(){ca()},success:function(){debug&&log("On Success "+z);j();ea(true);isNullOrEmpty(p)||p()},error:function(){isNullOrEmpty(q)||q();X()}})}function ea(p){if(isNullOrEmpty(la))p&&X();else J(function(q,z){if(!isNullOrEmpty(q)&&!isNullOrEmpty(z)){debug&&log("Starting "+K.UpdateUrl);CswAjaxXml({formobile:fa,url:K.UpdateUrl,
data:"SessionId="+la+"&ParentId="+UpdatedViewXml+"&UpdatedViewXml="+z.replace(/'/gi,"\\'"),onloginfail:function(){p&&X()},success:function(x){debug&&log("On Success "+K.UpdateUrl);D(q,x,"0");p&&X()},error:function(){p&&X()}})}else p&&X()})}var K={DBShortName:"Mobile.html",DBVersion:"1.0",DBDisplayName:"Mobile.html",DBMaxSize:65536,ViewUrl:"/NbtWebApp/wsNBT.asmx/RunView",ConnectTestUrl:"/NbtWebApp/wsNBT.asmx/ConnectTest",ConnectTestRandomFailUrl:"/NbtWebApp/wsNBT.asmx/ConnectTestRandomFail",UpdateUrl:"/NbtWebApp/wsNBT.asmx/UpdateProperties",
MainPageUrl:"/NbtWebApp/Mobile.html",AuthenticateUrl:"/NbtWebApp/wsNBT.asmx/Authenticate",Theme:"a",PollingInterval:3E4,DivRemovalDelay:1E3,RandomConnectionFailure:false};g&&a.extend(K,g);var fa=true,ka,xa,va,la,ia,na="initialloadingdiv";if(window.location.hash.length>0){g=window.location.hash.substr(1);if(a("#"+g).length===0&&g!=="viewsdiv"&&g!=="logindiv")na=g}v({DivId:na,HeaderText:"Please wait",content:"Loading...",HideSearchButton:true,HideOnlineButton:true,HideRefreshButton:true,HideLogoutButton:true,
HideHelpButton:true});(function(){var p="";p+='<p>Pending Unsynched Changes: <span id="ss_pendingchangecnt">No</span></p>';p+='<p>Last synch: <span id="ss_lastsynch"></span></p>';p+='<a id="ss_forcesynch" href="#" data-role="button">Force Synch Now</a>';p+='<a id="ss_gooffline" href="#" data-role="button">Go Offline</a>';$divhtml=v({DivId:"synchstatus",HeaderText:"Synch Status",content:p,HideSearchButton:true,HideRefreshButton:true});$divhtml.find("#ss_forcesynch").click(function(q){ea(false);q.preventDefault()}).end().find("#ss_gooffline").click(function(q){q.preventDefault();
if(m()){clearTimeout(wa);X();j();a("#ss_gooffline span").text("Go Offline")}else{clearTimeout(wa);q=a(".onlineStatus");if(q.hasClass("online")){q.removeClass("online").addClass("offline").text("Offline");a(".refresh").css("visibility","hidden");e(false)}if(a("#logindiv").length>0){d(true);f("logindiv")}a("#ss_gooffline span").text("Go Online")}})})();(function(){var p="";p+="<p>Help</p>";$divhtml=v({DivId:"help",HeaderText:"Help",content:p,HideSearchButton:true,HideRefreshButton:true})})();(function(p,
q){xa=openDatabase(K.DBShortName,K.DBVersion,K.DBDisplayName,K.DBMaxSize);p?ma(function(){Q(q)}):Q(q)})(false,function(){T("sessionid",function(p){if(isNullOrEmpty(p))Y(function(){b(true);f(na)},function(){d(true);f(na)});else{la=p;e(true);f(na);X()}})});var oa,pa,wa;return this}})(jQuery);(function(a){var g={init:function(b){var d={GridUrl:"/NbtWebApp/wsNBT.asmx/getGrid",viewid:"",ID:"",nodeid:"",cswnbtnodekey:"",gridTableID:"gridTable",gridPagerID:"gridPager",onAddNode:function(){},onEditNode:function(){},onDeleteNode:function(){}};b&&a.extend(d,b);b=a(this);var f=makeId({ID:d.gridTableID,prefix:d.ID}),e=b.CswTable("init",{ID:f});f=makeId({ID:d.gridPagerID,prefix:d.ID});var h=b.CswDOM("div",{ID:f}).css("width","100%").css("height","20px");CswAjaxJSON({url:d.GridUrl,data:"{ViewPk: '"+
d.viewid+"', 'SafeNodeKey': '"+d.cswnbtnodekey+"'}",success:function(j){jqGridOpt=j.jqGridOpt;var m=j.nodetypeid;if(jqGridOpt.width==="")jqGridOpt.width=650;j={autoencode:true,caption:"",datatype:"local",emptyrecords:"No Results",height:"300",multiselect:true,pager:h,rowList:[10,25,50],rowNum:10,shrinkToFit:true,sortname:"",sortorder:"asc",toppager:false,viewrecords:true};a.extend(j,jqGridOpt);if(j.rowNum>=50)j.toppager=true;e.jqGrid(j).hideCol("nodeid").hideCol("cswnbtnodekey").hideCol("nodename").navGrid("#"+
h.attr("id"),{cloneToTop:false,edit:true,edittext:"",edittitle:"Edit row",editfunc:function(i){var n={cswnbtnodekey:"",nodeid:"",onEditNode:d.onEditNode};if(i!==null){n.cswnbtnodekey=e.jqGrid("getCell",i,"cswnbtnodekey");n.nodeid=e.jqGrid("getCell",i,"nodeid");a.CswDialog("EditNodeDialog",n)}else alert("Please select a row to edit");return n.CswNbtNodeKey},add:true,addtext:"",addtitle:"Add row",addfunc:function(){var i={nodetypeid:m,onAddNode:d.onAddNode};a.CswDialog("AddNodeDialog",i);return i.nodetypeid},
del:true,deltext:"",deltitle:"Delete row",delfunc:function(i){var n={cswnbtnodekey:"",nodeid:"",nodename:"",onDeleteNode:d.onDeleteNode};if(i!==null){n.cswnbtnodekey=e.jqGrid("getCell",i,"cswnbtnodekey");n.nodeid=e.jqGrid("getCell",i,"nodeid");n.nodename=e.jqGrid("getCell",i,"nodename");a.CswDialog("DeleteNodeDialog",n)}else alert("Please select a row to delete");return n.cswnbtnodekey},search:true,searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",
alerttext:"Please, select row",view:true,viewtext:"",viewtitle:"View row"},{},{},{},{caption:"Search...",Find:"Find",Reset:"Reset",odata:["equal","not equal","less","less or equal","greater","greater or equal","begins with","does not begin with","is in","is not in","ends with","does not end with","contains","does not contain"],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],matchText:"match",rulesText:"rules"},{})}});return e},scrollToSelectedRow:function(){var b=a(this),d=b.jqGrid("getGridParam",
"selrow"),f=null;try{f=b.find("tbody").find("tr:first").outerHeight()}catch(e){}f=f||23;d=b.getInd(d);b.closest(".ui-jqgrid-bdiv").scrollTop(f*(d-1))}};a.fn.CswNodeGrid=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on "+PluginName)}})(jQuery);(function(a){var g={init:function(b){var d={ID:"",NodesUrl:"/NbtWebApp/wsNBT.asmx/getNodes",nodetypeid:"",objectclassid:"",objectclass:"",onSelect:function(){},onSuccess:function(){}};b&&a.extend(d,b);b=a(this);var f=a('<select id="'+d.ID+'_nodeselect" />').appendTo(b);f.change(function(){d.onSelect(f.val())});CswAjaxXml({url:d.NodesUrl,data:"NodeTypeId="+d.nodetypeid+"&ObjectClassId="+d.objectclassid+"&ObjectClass="+d.objectclass,success:function(e){e.children("node").each(function(){var h=a(this);
f.append('<option value="'+h.attr("id")+'">'+h.attr("name")+"</option>")});d.onSuccess()}});return f},value:function(){return a(this).val()}};a.fn.CswNodeSelect=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswNodeSelect")}})(jQuery);(function(a){a.fn.CswNodeTabs=function(g){function b(l,t){CswAjaxXml({url:n.PropsUrl,data:"EditMode="+n.EditMode+"&NodeId="+n.nodeid+"&SafeNodeKey="+n.cswnbtnodekey+"&TabId="+t+"&NodeTypeId="+n.nodetypeid,success:function(s){var w=l.children("form");w.contents().remove();n.title!==""&&w.append(n.title);var C=w.CswLayoutTable("init",{ID:n.ID+"_props",OddCellRightAlign:true,ReadOnly:n.EditMode==="PrintReport",cellset:{rows:1,columns:2},onSwap:function(u,A){d(A)},showConfigButton:n.filterToPropId===
"",onConfigOn:function(){s.children().each(function(){var u=a(this),A=C.CswLayoutTable("cellset",u.attr("displayrow"),u.attr("displaycol"))[1][2],E=A.children("#"+u.attr("id")+"_subproptable"),P={fieldtype:u.attr("fieldtype"),nodeid:n.nodeid,relatednodeid:n.relatednodeid,propid:u.attr("id"),$propdiv:A.children("div"),$propxml:u,onchange:function(){},onReload:function(){b(l,t)},cswnbtnodekey:n.cswnbtnodekey};E.length>0&&j(P,n.SinglePropUrl,n.EditMode,n.cswnbtnodekey,u.attr("id"),n.nodetypeid,u,A,l,
t,true)})},onConfigOff:function(){s.children().each(function(){var u=a(this),A=C.CswLayoutTable("cellset",u.attr("displayrow"),u.attr("displaycol"))[1][2],E=A.children("#"+u.attr("id")+"_subproptable"),P={fieldtype:u.attr("fieldtype"),nodeid:n.nodeid,relatednodeid:n.relatednodeid,propid:u.attr("id"),$propdiv:A.children("div"),$propxml:u,onchange:function(){},onReload:function(){b(l,t)},cswnbtnodekey:n.cswnbtnodekey};E.length>0&&j(P,n.SinglePropUrl,n.EditMode,n.cswnbtnodekey,u.attr("id"),n.nodetypeid,
u,A,l,t,false)})}});e(C,s,l,t);if(n.EditMode!=="PrintReport")var v=w.CswButton({ID:"SaveTab",enabledText:"Save Changes",disabledText:"Saving...",onclick:function(){m(w,C,s,v)}});w.validate({highlight:function(u){u=a(u);u.attr("csw_invalid","1");u.animate({backgroundColor:"#ff6666"})},unhighlight:function(u){var A=a(u);if(A.attr("csw_invalid")==="1"){A.css("background-color","#66ff66");A.attr("csw_invalid","0");setTimeout(function(){A.animate({backgroundColor:"transparent"})},500)}}})}})}function d(l){f(l.cellset[1][2].children("div").first(),
l.swaprow,l.swapcolumn);f(l.swapcellset[1][2].children("div").first(),l.row,l.column)}function f(l,t,s){if(l.length>0){l=l.attr("propid");CswAjaxJSON({url:n.MovePropUrl,data:'{ "PropId": "'+l+'", "NewRow": "'+t+'", "NewColumn": "'+s+'", "EditMode": "'+n.EditMode+'" }',success:function(){}})}}function e(l,t,s,w,C){t.children().each(function(){var v=a(this),u=v.attr("id"),A=v.attr("fieldtype"),E=l.CswLayoutTable("cellset",v.attr("displayrow"),v.attr("displaycol"));if((v.attr("display")!=="false"||C)&&
A!=="Image"&&A!=="Grid"&&(n.filterToPropId===""||n.filterToPropId===u)){A=E[1][1];A.addClass("propertylabel");v.attr("helptext")!==""?a('<a href="#" title="'+v.attr("helptext")+'" onclick="return false;">'+v.attr("name")+"</a>").appendTo(A):A.append(v.attr("name"));n.ShowCheckboxes&&v.attr("copyable")==="true"&&A.CswInput("init",{ID:"check_"+u,type:CswInput_Types.checkbox,value:Value,cssclass:n.ID+"_check"}).attr("propid",u)}u=E[1][2];u.addClass("propertyvaluecell");h(u,v,s,w,C)})}function h(l,t,
s,w,C){l.empty();if((t.attr("display")!=="false"||C)&&(n.filterToPropId===""||n.filterToPropId===t.attr("id"))){var v={fieldtype:t.attr("fieldtype"),nodeid:n.nodeid,relatednodeid:n.relatednodeid,propid:t.attr("id"),$propdiv:a("<div/>").appendTo(l),$propxml:t,onchange:function(){},onReload:function(){b(s,w)},cswnbtnodekey:n.cswnbtnodekey,EditMode:n.EditMode};v.$propdiv.attr("nodeid",v.nodeid);v.$propdiv.attr("propid",v.propid);v.$propdiv.attr("cswnbtnodekey",v.cswnbtnodekey);v.onchange=function(){n.onPropertyChange(v.propid,
t.attr("name"))};if(t.attr("hassubprops")==="true")v.onchange=function(){j(v,n.SinglePropUrl,n.EditMode,n.cswnbtnodekey,t.attr("id"),n.nodetypeid,t,l,s,w,false);n.onPropertyChange(v.propid,t.attr("name"))};a.CswFieldTypeFactory("make",v);var u=t.children("subprops");if(u.length>0&&u.children('[display != "false"]').length>0||C){var A=l.CswLayoutTable("init",{ID:v.propid+"_subproptable",OddCellRightAlign:true,ReadOnly:n.EditMode==="PrintReport",cellset:{rows:1,columns:2},onSwap:function(E,P){d(P)},
showConfigButton:false});e(A,u,s,w,C);C?A.CswLayoutTable("ConfigOn"):A.CswLayoutTable("ConfigOff")}}}function j(l,t,s,w,C,v,u,A,E,P,N){a.CswFieldTypeFactory("save",l);CswAjaxXml({url:t,data:"EditMode="+s+"&NodeId="+n.nodeid+"&SafeNodeKey="+w+"&PropId="+C+"&NodeTypeId="+v+"&NewPropXml="+xmlToString(u),success:function(ca){h(A,ca.children().first(),E,P,N)}})}function m(l,t,s,w){if(l.valid()){i(t,s);l={EditMode:n.EditMode,NodeId:n.nodeid,SafeNodeKey:n.cswnbtnodekey,NodeTypeId:n.nodetypeid,ViewId:a.CswCookie("get",
CswCookieName.CurrentView.ViewId),NewPropsXml:xmlToString(s)};CswAjaxJSON({url:n.SavePropUrl,data:jsonToString(l),success:function(C){if(n.ShowCheckboxes){var v=a("."+n.NodeCheckTreeId+"_check:checked"),u=a("."+n.ID+"_check:checked");if(v.length>0&&u.length>0){var A="{ SourceNodeKey: '"+n.cswnbtnodekey+"', CopyNodeIds: [",E=true;v.each(function(){var P=a(this).attr("nodeid");E||(A+=",");A+="'"+P+"'";E=false});A+="], PropIds: [";E=true;u.each(function(){var P=a(this).attr("propid");E||(A+=",");A+=
"'"+P+"'";E=false});A+="] }";CswAjaxJSON({url:n.CopyPropValuesUrl,data:A})}}n.onSave(C.nodeid,C.cswnbtnodekey)},error:function(){w.CswButton("enable")}})}}function i(l,t){t.children().each(function(){var s={$propxml:a(this),$propdiv:"",$propCell:"",fieldtype:"",nodeid:n.nodeid,cswnbtnodekey:n.cswnbtnodekey};s.fieldtype=s.$propxml.attr("fieldtype");var w=l.CswLayoutTable("cellset",s.$propxml.attr("displayrow"),s.$propxml.attr("displaycol"));s.$propcell=w[1][2];s.$propdiv=s.$propcell.children("div").first();
a.CswFieldTypeFactory("save",s);if(s.$propxml.attr("hassubprops")==="true"){w=s.$propxml.children("subprops");if(w.length>0&&w.children('[display != "false"]').length>0){s=s.$propcell.children("#"+s.$propxml.attr("id")+"_subproptable").first();s.length>0&&i(s,w)}}})}var n={ID:"",TabsUrl:"/NbtWebApp/wsNBT.asmx/getTabs",SinglePropUrl:"/NbtWebApp/wsNBT.asmx/getSingleProp",PropsUrl:"/NbtWebApp/wsNBT.asmx/getProps",MovePropUrl:"/NbtWebApp/wsNBT.asmx/moveProp",SavePropUrl:"/NbtWebApp/wsNBT.asmx/saveProps",
CopyPropValuesUrl:"/NbtWebApp/wsNBT.asmx/copyPropValues",nodeid:"",relatednodeid:"",tabid:"",cswnbtnodekey:"",nodetypeid:"",filterToPropId:"",title:"",EditMode:"Edit",onSave:function(){},onBeforeTabSelect:function(){return true},onTabSelect:function(){},onPropertyChange:function(){},ShowCheckboxes:false,NodeCheckTreeId:""};g&&a.extend(n,g);g=a(this);var k=a('<div id="'+n.ID+'_tabdiv" />').appendTo(g);(function(){CswAjaxXml({url:n.TabsUrl,data:"EditMode="+n.EditMode+"&NodeId="+n.nodeid+"&SafeNodeKey="+
n.cswnbtnodekey+"&NodeTypeId="+n.nodetypeid,success:function(l){k.contents().remove();var t=[],s=0,w=0;l.children().each(function(){$tab=a(this);if(n.EditMode==="PrintReport"||t.length===0)t[t.length]=a("<div><ul></ul></div>").appendTo(k);var A=t[t.length-1];A.children("ul").append('<li><a href="#'+$tab.attr("id")+'">'+$tab.attr("name")+"</a></li>");A.append('<div id="'+$tab.attr("id")+'"><form id="'+$tab.attr("id")+'_form" /></div>');if($tab.attr("id")===n.tabid)s=w;w++});for(var C in t){var v=t[C];
v.tabs({selected:s,select:function(A,E){if(n.onBeforeTabSelect(N)){var P=a(v.children("div")[E.index]),N=P.attr("id");b(P,N);n.onTabSelect(N)}else return false}});l=a(v.children("div")[v.tabs("option","selected")]);var u=l.attr("id");b(l,u);n.onTabSelect(u)}}})})(n);if(n.EditMode!=="PrintReport"){g=a('<div id="'+n.ID+'_linkdiv" align="right"/>').appendTo(g);a('<a href="#">As Report</a>').appendTo(g).click(function(){openPopup("NewNodeReport.html?nodeid="+n.nodeid+"&cswnbtnodekey="+n.cswnbtnodekey,
600,800)})}return this}})(jQuery);(function(a){function g(d,f){return jsTreeGetSelected(d).$item.attr("rel")===f.attr("rel")}var b={init:function(d){var f={ID:"",ViewTreeUrl:"/NbtWebApp/wsNBT.asmx/getTreeOfView",NodeTreeUrl:"/NbtWebApp/wsNBT.asmx/getTreeOfNode",viewid:"",viewmode:"",nodeid:"",cswnbtnodekey:"",IncludeNodeRequired:false,UsePaging:true,onSelectNode:function(){},onViewChange:function(){},SelectFirstChild:true,ShowCheckboxes:false};d&&a.extend(f,d);var e=f.ID+"_",h=a('<div id="'+e+'" class="treediv" />').appendTo(a(this)),
j=f.ViewTreeUrl;d="UsePaging="+f.UsePaging+"&ViewNum="+f.viewid+"&IDPrefix="+e+"&IsFirstLoad=true&ParentNodeKey=&IncludeNodeRequired="+f.IncludeNodeRequired+"&IncludeNodeKey=";if(f.cswnbtnodekey!==undefined)d+=f.cswnbtnodekey;if(f.viewid===""||f.viewid===undefined){j=f.NodeTreeUrl;d="IDPrefix="+e+"&NodePk="+f.nodeid}CswAjaxXml({url:j,data:d,success:function(m){var i="",n=["themes","html_data","ui","types","crrm"],k;if(f.nodeid!==undefined&&f.nodeid!=="")i=e+f.nodeid;var l=m.children("viewid").text();
if(f.viewid!==l){f.onViewChange(l);f.viewid=l}l=m.find('item[id="'+i+'"]');if(i===""||l.length===0)if(f.SelectFirstChild)if(f.viewmode==="list"){i=m.find("item").first().attr("id");k={dots:false}}else{i=m.find("item").first().find("item").first().attr("id");k={dots:true}}else i=e+"root";l=m.find('item[id="'+i+'"]');var t=[],s=0;l.parents("item").andSelf().each(function(){t[s]=a(this).attr("id");s++});l=m.find("types").text();l=a.parseJSON(l);m=m.find("tree").children("root");if(m.length>0){var w=
function(v){var u=v.attr("id").substring(e.length),A=v.children("content").children("name").text(),E='<li id="'+v.attr("id")+'" ';E+='    rel="'+v.attr("rel")+'" ';E+='    species="'+v.attr("species")+'" ';E+='    class="jstree-'+v.attr("state")+'" ';if(v.attr("cswnbtnodekey")!==undefined)E+='    cswnbtnodekey="'+v.attr("cswnbtnodekey").replace(/"/g,"&quot;")+'"';E+=">";if(f.ShowCheckboxes)E+='  <input type="checkbox" class="'+e+'check" id="check_'+u+'" rel="'+v.attr("rel")+'" nodeid="'+u+'" nodename="'+
A+'"></input>';E+='  <a href="#">'+A+"</a>";if(v.children("item").length>0){E+="<ul>";v.children("item").each(function(){E+=w(a(this))});E+="</ul>"}E+="</li>";return E},C="<ul>";m.children().each(function(){C+=w(a(this))});C+="</ul>";h.jstree({html_data:{data:C,ajax:{type:"POST",url:j,dataType:"xml",data:function(v){v=v.attr("cswnbtnodekey");return"UsePaging="+f.UsePaging+"&ViewNum="+f.viewid+"&IDPrefix="+e+"&IsFirstLoad=false&ParentNodeKey="+v+"&IncludeNodeRequired=false&IncludeNodeKey="},success:function(v,
u,A){var E="";a(A.responseXML).children().first().children().each(function(){E+=w(a(this))});return E}}},ui:{select_limit:1,initially_select:i},themes:k,core:{initially_open:t},types:{types:l,max_children:-2,max_depth:-2},plugins:n}).bind("load_node.jstree",function(){a("."+e+"check").unbind("click");a("."+e+"check").click(function(){return g(h,a(this))})}).bind("select_node.jstree",function(v,u){var A=jsTreeGetSelected(h),E={nodeid:A.id,nodename:A.text,iconurl:A.iconurl,cswnbtnodekey:A.$item.attr("cswnbtnodekey"),
nodespecies:A.$item.attr("species"),viewid:f.viewid};if(E.nodespecies==="More"){A="";var P=u.inst._get_parent(u.rslt.obj);if(P!==-1)A=P.attr("cswnbtnodekey");if(A===undefined)A="";CswAjaxXml({url:j,data:"UsePaging="+f.UsePaging+"&ViewNum="+f.viewid+"&IDPrefix="+e+"&IsFirstLoad=false&ParentNodeKey="+A+"&IncludeNodeRequired=false&IncludeNodeKey="+E.cswnbtnodekey,success:function(N){function ca(){aa.length>0&&h.jstree("create","#"+ga,"after",{attr:{id:aa.attr("id"),rel:aa.attr("rel"),cswnbtnodekey:aa.attr("cswnbtnodekey"),
species:aa.attr("species")},data:aa.children("content").children("name").text(),state:aa.attr("state")},function(){ga===aa.attr("id")&&h.jstree("remove","#"+e+E.nodeid+'[species="More"]');ga=aa.attr("id");aa=aa.next();ca()},true,true)}var ga=e+E.nodeid,aa=N.children().first();ca()}})}else{a("."+e+"check").attr("checked","");f.onSelectNode(E)}});a("."+e+"check").click(function(){return g(h,a(this))});h.find("li").each(function(){var v=a(this);v.children("ins").attr("id",v.attr("id")+"_expand")})}else h.append("No Results")}});
return h},selectNode:function(d){var f={newnodeid:"",newcswnbtnodekey:""};d&&a.extend(f,d);d=a(this).children(".treediv");var e=d.attr("id");d.jstree("select_node","#"+e+f.newnodeid)}};a.fn.CswNodeTree=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswNodeTree")}})(jQuery);(function(a){var g={init:function(b){var d={ID:"",NodeTypesUrl:"/NbtWebApp/wsNBT.asmx/getNodeTypes",nodetypeid:"",onSelect:function(){},onSuccess:function(){}};b&&a.extend(d,b);b=a(this);b.contents().remove();var f=a('<select id="'+d.ID+'_sel" />').appendTo(b);f.change(function(){d.onSelect(f.val())});CswAjaxXml({url:d.NodeTypesUrl,data:"",success:function(e){e.children("nodetype").each(function(){var h=a(this);f.append('<option value="'+h.attr("id")+'">'+h.attr("name")+"</option>")});d.onSuccess()}});
return f},value:function(){return a(this).val()}};a.fn.CswNodeTypeSelect=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswNodeTypeSelect")}})(jQuery);(function(a){var g={init:function(b){var d={ID:"",Value:"",MinValue:"",MaxValue:"",Precision:"",ReadOnly:false,Required:false,onchange:function(){}};b&&a.extend(d,b);b=a(this);b.contents().remove();if(d.ReadOnly)b.append(d.Value);else{b=b.CswInput("init",{ID:d.ID,type:CswInput_Types.text,value:d.Value,cssclass:"textinput number",onChange:d.onchange});if(d.MinValue!==undefined){jQuery.validator.addMethod(d.ID+"_validateFloatMinValue",function(f,e){return this.optional(e)||validateFloatMinValue(a(e).val(),
d.MinValue)},"Number must be greater than or equal to "+d.MinValue);b.addClass(d.ID+"_validateFloatMinValue")}if(d.MaxValue!==undefined){jQuery.validator.addMethod(d.ID+"_validateFloatMaxValue",function(f,e){return this.optional(e)||validateFloatMaxValue(a(e).val(),d.MaxValue)},"Number must be less than or equal to "+d.MaxValue);b.addClass(d.ID+"_validateFloatMaxValue")}if(d.Precision===undefined||d.Precision<=0){jQuery.validator.addMethod(d.ID+"_validateInteger",function(f,e){return this.optional(e)||
validateInteger(a(e).val())},"Value must be an integer");b.addClass(d.ID+"_validateInteger")}else{jQuery.validator.addMethod(d.ID+"_validateFloatPrecision",function(f,e){return this.optional(e)||validateFloatPrecision(a(e).val(),d.Precision)},"Value must be numeric");b.addClass(d.ID+"_validateFloatPrecision")}d.Required&&b.addClass("required")}},value:function(){return a(this).find("input").val()},setValue:function(b){a(this).find("input").CswInput("set",{value:b})}};a.fn.CswNumberTextBox=function(b){if(g[b])return g[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswNumberTextBox")}})(jQuery);(function(a){a.CswQueryString=function(){for(var g={},b,d=/\+/g,f=/([^&=]+)=?([^&]*)/g,e=window.location.search.substring(1);b=f.exec(e);)g[decodeURIComponent(b[1].replace(d," "))]=decodeURIComponent(b[2].replace(d," "));return g}})(jQuery);(function(a){a.fn.CswQuickLaunch=function(g){var b={Url:"/NbtWebApp/wsNBT.asmx/getQuickLaunchItems",onLinkClick:function(){},onSuccess:function(){}};g&&a.extend(b,g);var d=a(this);CswAjaxXml({url:b.Url,data:"{ UserId: '' }",success:function(f){var e=a('<div id="quicklaunchdiv"><ul id="launchitems"></ul></div>').appendTo(d).children();f.children("items").children("item").each(function(){var h=a(this),j={type:h.attr("type"),viewmode:h.attr("viewmode"),text:h.attr("text"),url:h.attr("url"),viewid:h.attr("itemid")};
switch(j.type){case "view":a('<li><a href="#'+j.text+"_"+j.type+"_"+j.viewmode+"_"+j.viewid+'">'+j.text+"</a></li>").appendTo(e).children("a").click(function(){b.onLinkClick(j);return false});break;case "action":a("<li><a href="+j.url+">"+j.text+"</a></li>").appendTo(e)}});b.onSuccess()}});return this}})(jQuery);var CswSearch_CssClasses={nodetype_select:{name:"csw_search_nodetype_select"},property_select:{name:"csw_search_property_select"}};
(function(a){a.fn.CswSearch=function(g){function b(k){var l={$link:"",advancedIsHidden:false};k&&a.extend(l,k);if("Advanced"===l.$link.text()||!l.advancedIsHidden){a("."+ViewBuilder_CssClasses.subfield_select.name).each(function(){a(this).show()});a("."+ViewBuilder_CssClasses.filter_select.name).each(function(){a(this).show()});a("."+ViewBuilder_CssClasses.default_filter.name).each(function(){a(this).hide()});l.$link.text("Simple");l.advancedIsHidden=true}else if("Simple"===l.$link.text()||l.advancedIsHidden){a("."+
ViewBuilder_CssClasses.subfield_select.name).each(function(){a(this).hide()});a("."+ViewBuilder_CssClasses.filter_select.name).each(function(){a(this).hide()});a("."+ViewBuilder_CssClasses.default_filter.name).each(function(){a(this).show()});l.$link.text("Advanced");l.advancedIsHidden=false}return l.advancedIsHidden}function d(){for(var k=2;k<=i.propsCount;){var l=i.$searchTable.CswTable("cell",k,1).attr({align:"right"}),t=a("<span>&nbsp;and&nbsp;</span>");l.append(t);k++}var s=1;i.$propsXml.children("property").each(function(){var w=
a(this),C=i.$searchTable.CswTable("cell",s,2),v=makeId({ID:"viewbuilderpropid",suffix:w.attr("viewbuilderpropid"),prefix:i.ID});C.CswDOM("span",{ID:v,value:w.attr("metadatatypename"),cssclass:ViewBuilder_CssClasses.metadatatype_static.name}).attr("relatedidtype",w.attr("relatedidtype"));i.selectedSubfieldVal="";i.selectedFilterVal="";C=w.attr("filtarbitraryid");i.$searchTable.CswViewPropFilter("init",{ID:i.ID,propRow:s,firstColumn:3,includePropertyName:true,$propsXml:w,filtarbitraryid:C,advancedIsHidden:i.advancedIsHidden});
s++});i.bottomRow=s;i.bottomCell=1;i.searchtype="viewsearch";h()}function f(){var k=i.$searchTable.CswTable("cell",1,2).empty(),l=makeId({ID:"nodetype_select",prefix:i.ID});l=a(xmlToString(i.$nodeTypesXml.children("select"))).attr("id",l).attr("name",l).attr("class",CswSearch_CssClasses.nodetype_select.name).change(function(){var t=a(this);t={nodetypeorobjectclassid:t.val(),relatedidtype:t.find(":selected").attr("title"),cswnbtnodekey:"",$parent:i.$searchTable,$nodeTypesSelect:t};a.extend(i,t);e()});
i.$nodeTypesSelect=l;i.relatedidtype=l.find(":selected").attr("title");i.nodetypeorobjectclassid!==""&&l.val(i.nodetypeorobjectclassid).attr("selected",true);k.append(l);k=i.$searchTable.CswTable("cell",1,3).empty();l=makeId({ID:"property_select",prefix:i.ID});l=a(xmlToString(i.$propsXml.children("properties").children("select"))).attr("id",l).attr("name",l).attr("class",CswSearch_CssClasses.property_select.name).change(function(){var t=a(this).val(),s={propertyid:t,selectedSubfieldVal:"",selectedFilterVal:"",
$selectedPropXml:i.$propsXml.children("propertyfilters").children("property[viewbuilderpropid="+t+"]")};a.extend(i,s);i.$searchTable.CswViewPropFilter("init",{ID:i.ID,propRow:1,firstColumn:3,includePropertyName:false,$propsXml:i.$selectedPropXml,viewbuilderpropid:t,advancedIsHidden:i.advancedIsHidden})});i.propertyid!==""&&l.val(i.propertyid).attr("selected",true);k.append(l);i.propertyid=l.find(":selected").val();i.$selectedPropXml=i.$propsXml.children("propertyfilters").children("property[viewbuilderpropid="+
i.propertyid+"]");i.$searchTable.CswViewPropFilter("init",{ID:i.ID,propRow:1,firstColumn:3,includePropertyName:false,$propsXml:i.$selectedPropXml,viewbuilderpropid:i.propertyid,advancedIsHidden:i.advancedIsHidden});i.bottomRow=i.propsCount+1;i.bottomCell=2;i.searchtype="nodetypesearch";h()}function e(){CswAjaxXml({url:i.getNewPropsUrl,data:"RelatedIdType="+i.relatedidtype+"&NodeTypeOrObjectClassId="+i.nodetypeorobjectclassid+"&IdPrefix="+i.ID+"&NodeKey="+i.cswnbtnodekey,success:function(k){i.$propsXml=
k;f()}})}function h(){var k=i.$searchTable,l=i.bottomCell,t=l+1,s=i.bottomRow;if(i.searchtype==="nodetypesearch"){k=i.$searchTable.CswTable("cell",i.bottomRow,i.bottomCell).empty();t=makeId({prefix:i.ID,ID:"split_cell_table"});k=k.CswTable("init",{ID:t,cellpadding:1,cellspacing:1,cellalign:"left",align:"left"});l=1;t=2;s=1}l=k.CswTable("cell",s,l).empty();var w=makeId({ID:"clear_button",prefix:i.ID});l.CswButton({ID:w,enabledText:"Clear",disabledText:"Clear",disableOnClick:false,onclick:function(){n.empty();
var v=makeId({prefix:i.ID,ID:"search_tbl"});i.$searchTable=n.CswTable("init",{ID:v,cellpadding:1,cellspacing:1,cellalign:"center",align:"center"});switch(i.searchtype){case "nodetypesearch":f();case "viewsearch":d()}}});k=k.CswTable("cell",s,t).empty();t=makeId({ID:"advanced_options",prefix:i.ID});var C=k.CswDOM("link",{ID:t,href:"#advanced",value:"Advanced"}).click(function(){i.advancedIsHidden=b({$link:C,advancedIsHidden:i.advancedIsHidden})});k=i.$searchTable.CswTable("cell",i.bottomRow,i.searchBtnCell).attr({align:"right"}).empty();
t=makeId({ID:"search_button",prefix:i.ID});k.CswButton({ID:t,enabledText:"Search",disabledText:"Searching",onclick:function(){m()}})}function j(){CswAjaxXml({url:i.getClientSearchXmlUrl,data:"ViewIdNum="+i.viewid+"&SelectedNodeTypeIdNum="+i.nodetypeorobjectclassid+"&IdPrefix="+i.ID+"&NodeKey="+i.cswnbtnodekey,success:function(k){n.empty();i.searchtype=k.attr("searchtype");var l=makeId({prefix:i.ID,ID:"search_tbl"});i.$searchTable=n.CswTable("init",{ID:l,cellpadding:1,cellspacing:1,cellalign:"left",
align:"center"});i.$searchTable.css("background-color","0099FF");i.$searchTable.attr("frame","border");switch(i.searchtype){case "nodetypesearch":i.$nodeTypesXml=k.children("nodetypes");i.$propsXml=k.children("viewbuilderprops");f();break;case "viewsearch":i.$propsXml=k.children("properties");i.propsCount=k.children("properties").children("property").size();d()}}})}function m(){var k,l=[],t;switch(i.searchtype){case "nodetypesearch":t=i.doNodeSearchUrl;var s=i.$nodeTypesSelect.val();i.relatedidtype=
i.$nodeTypesSelect.find(":selected").attr("title");a("."+CswSearch_CssClasses.property_select.name).each(function(){var w=a(this),C=w.text(),v=w.val();C=i.$propsXml.children("propertyfilters").children('property[propname="'+C+'"][viewbuilderpropid="'+v+'"]').attr("fieldtype");w=w.CswViewPropFilter("getFilterJson",{nodetypeorobjectclassid:s,relatedidtype:i.relatedidtype,fieldtype:C,ID:i.ID,$parent:i.$searchTable,viewbuilderpropid:v,advancedIsHidden:i.advancedIsHidden});l.push(w)});k={viewbuilderprops:l};
break;case "viewsearch":t=i.doViewSearchUrl;i.$propsXml.children("property").each(function(){var w=a(this),C=w.attr("filtarbitraryid");w=w.CswViewPropFilter("getFilterJson",{ID:i.ID,$parent:i.$searchTable,filterarbitraryid:C});l.push(w)});k={viewprops:l,viewid:i.viewid}}k&&CswAjaxJSON({url:t,data:'{SearchJson: "'+jsonToString(k)+'"}',success:function(w){i.viewid=w.sessionviewid;i.searchtype="viewsearch";j();i.onSearchSubmit({viewid:w.sessionviewid,viewmode:w.viewmode})}})}var i={$parent:"",$searchTable:"",
getNewPropsUrl:"/NbtWebApp/wsNBT.asmx/getNodeTypeSearchProps",doViewSearchUrl:"/NbtWebApp/wsNBT.asmx/doViewSearch",doNodeSearchUrl:"/NbtWebApp/wsNBT.asmx/doNodeTypeSearch",getSearchableViewsUrl:"/NbtWebApp/wsNBT.asmx/getSearchableViews",getClientSearchXmlUrl:"/NbtWebApp/wsNBT.asmx/getClientSearchXml",viewid:"",nodetypeorobjectclassid:"",propertyid:"",cswnbtnodekey:"",relatedidtype:"",ID:"",propsCount:1,advancedIsHidden:true,$propsXml:"",$selectedPropXml:"",$nodeTypesXml:"",$nodeTypesSelect:"",onSearchSubmit:function(){},
selectedPropVal:"",selectedSubfieldVal:"",selectedFilterVal:"",bottomRow:2,bottomCell:1,propRow:"",clearBtnCell:1,searchBtnCell:6,searchtype:""};g&&a.extend(i,g);g=a(this);i.$searchTable=g.CswDOM("div",{ID:i.ID});var n=i.$searchTable.CswDOM("span").CswDOM("div",{ID:"search_criteria_div",prefix:i.ID});j();return i.$searchTable}})(jQuery);(function(a){a.fn.CswTable=function(g){function b(h){return h.children("tbody").children("tr").length}function d(h){h=h.children("tbody").children("tr");for(var j=0,m=0;m<h.length;m++){var i=a(h[m]).children("td");if(i.length>j)j=i.length}return j}function f(h,j,m){var i=null;if(h.length>0&&j!==undefined&&j!==""&&m!==undefined&&m!==""){if(j<=0){log("error: row must be greater than 1, got: "+j);j=1}if(m<=0){log("error: col must be greater than 1, got: "+m);m=1}for(;j>h.children("tbody").children("tr").length;)h.append("<tr></tr>");
for(i=a(h.children("tbody").children("tr")[j-1]);m>i.children("td").length;){var n=h.attr("cellalign");if(i.children("td").length===0&&h.attr("FirstCellRightAlign")=="true"||i.children("td").length%2===0&&h.attr("OddCellRightAlign")=="true")n="right";n=a('<td class="'+h.attr("cellcssclass")+'" align="'+n+'" valign="'+h.attr("cellvalign")+'"></td>').appendTo(i);h.trigger("CswTable_onCreateCell",[h,n,j,i.children("td").length])}i=a(i.children("td")[m-1])}return i}var e={init:function(h){var j={ID:"",
prefix:"",suffix:"",TableCssClass:"",CellCssClass:"",cellpadding:0,cellspacing:0,cellalign:"top",width:"",align:"",cellalign:"",cellvalign:"top",onCreateCell:function(){},FirstCellRightAlign:false,OddCellRightAlign:false};h&&a.extend(j,h);h=makeId({ID:j.ID,prefix:j.prefix,suffix:j.suffix});h=a('<table id="'+h+'"></table>');h.addClass(j.TableCssClass);h.attr("width",j.width);h.attr("align",j.align);h.attr("cellpadding",j.cellpadding);h.attr("cellspacing",j.cellspacing);h.attr("border","0");h.attr("cellalign",
j.cellalign);h.attr("cellvalign",j.cellvalign);h.attr("cellcssclass",j.CellCssClass);h.attr("FirstCellRightAlign",j.FirstCellRightAlign);h.attr("OddCellRightAlign",j.OddCellRightAlign);h.bind("CswTable_onCreateCell",function(m,i,n,k,l){j.onCreateCell(m,i,n,k,l);m.stopPropagation()});h.trigger("CswTable_onCreateCell",[h,h.find("td"),1,1]);a(this).append(h);return h},cell:function(h,j){var m=a(this);return f(m,h,j)},maxrows:function(){return b(a(this))},maxcolumns:function(){return d(a(this))},finish:function(h){for(var j=
a(this),m=b(j),i=d(j),n=1;n<=m;n++)for(var k=1;k<=i;k++){var l=f(j,n,k);if(l.contents().length===0)h!==null?h(l,n,k):l.append("&nbsp;")}},findRow:function(h){var j=a(this).children("tbody").children("tr");if(h!==""&&h!==null)j=j.filter(h);return j},findCell:function(h){var j=a(this).children("tbody").children("tr").children("td");if(h!==""&&h!==null)j=j.filter(h);return j},rowFindCell:function(h,j){var m=h.children("td");if(j!==""&&j!==null)m=m.filter(j);return m}};if(e[g])return e[g].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return e.init.apply(this,arguments);else a.error("Method "+g+" does not exist on CswTable")}})(jQuery);(function(a){var g={init:function(b){var d={ID:"",prefix:"",Checked:"",ReadOnly:false,Required:false,onchange:function(){}};b&&a.extend(d,b);b=a(this);b.empty();var f=makeId({prefix:d.prefix,ID:d.ID});if(d.Checked===""||d.Checked===undefined||d.Checked===null)d.Checked="null";if(d.ReadOnly)switch(d.Checked){case "true":b.append("Yes");break;case "false":b.append("No")}else{var e;switch(d.Checked){case "true":e=CswImageButton_ButtonType.CheckboxTrue;break;case "false":e=CswImageButton_ButtonType.CheckboxFalse;
break;default:e=CswImageButton_ButtonType.CheckboxNull}b.CswImageButton({ID:f,ButtonType:e,AlternateText:d.Checked,onClick:function(h){var j=d.Required,m=h.attr("alt"),i=CswImageButton_ButtonType.CheckboxNull,n="null";if(m==="null"){i=CswImageButton_ButtonType.CheckboxTrue;n="true"}else if(m==="false")if(j==="true"){i=CswImageButton_ButtonType.CheckboxTrue;n="true"}else{i=CswImageButton_ButtonType.CheckboxNull;n="null"}else if(m==="true"){i=CswImageButton_ButtonType.CheckboxFalse;n="false"}h.attr("alt",
n);h=i;d.onchange();return h}})}},value:function(){return a(this).attr("alt")}};a.fn.CswTristateCheckBox=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswTristateCheckBox")}})(jQuery);(function(a){a.fn.CswViewEditor=function(g){function b(F){s=F}function d(F,I){var T=false;if(a("#"+i.ID+"_all:checked").length>0)T=true;l.text("");n.CswWizard("button","next","disable");CswAjaxJSON({url:i.ViewGridUrl,data:"{ All: "+T+" }",success:function(O){t.empty();var S=a('<div id="'+i.ID+'_gp" style="width:100%; height:20px;" />').appendTo(t),D=a('<table id="'+i.ID+'_gt" />').appendTo(t);a.extend(O,{autowidth:true,height:180,onSelectRow:function(J,W){if(W){v.CswButton("enable");u.CswButton("enable")}else{v.CswButton("disable");
u.CswButton("disable")}l.text(f(D,i.ColumnViewName));n.CswWizard("button","next","enable")},pager:S});D.jqGrid(O).hideCol(i.ColumnViewId);if(I!==undefined){D.setSelection(e(D,I));D.CswNodeGrid("scrollToSelectedRow")}F(D)}})}function f(F,I){var T=F.jqGrid("getGridParam","selrow");return F.jqGrid("getCell",T,I)}function e(F,I){var T=F.jqGrid("getCol",i.ColumnViewId,true),O=0,S;for(S in T)if(T[S].value===I)O=T[S].id;return O}function h(F,I,T){var O,S,D;IsAdministrator({Yes:function(){F.CswTable("cell",
I,1).append(T);var J=F.CswTable("cell",I,2),W=F.attr("id");O=a('<select id="'+W+'_vissel" />').appendTo(J);O.append('<option value="User">User:</option>');O.append('<option value="Role">Role:</option>');O.append('<option value="Global">Global</option>');S=J.CswNodeSelect("init",{ID:W+"_visrolesel",objectclass:"RoleClass"}).hide();D=J.CswNodeSelect("init",{ID:W+"_visusersel",objectclass:"UserClass"});O.change(function(){var Z=O.val();if(Z==="Role"){S.show();D.hide()}else if(Z==="User"){S.hide();D.show()}else{S.hide();
D.hide()}})}});return{getvisibilityselect:function(){return O},getvisroleselect:function(){return S},getvisuserselect:function(){return D}}}function j(F,I){var T=m(F,Q);I.jstree({html_data:{data:T.htmlstring},ui:{select_limit:1},types:{types:T.types,max_children:-2,max_depth:-2},plugins:["themes","html_data","ui","types","crrm"]});I.find(".vieweditor_childselect").change(function(){var D=a(this),J=D.find("option:selected").data("optionviewxml");D.attr("arbid")==="root"?a(J).appendTo(Q):a(J).appendTo(Q.find('[arbitraryid="'+
D.attr("arbid")+'"]'));j(F,I)});I.find(".vieweditor_deletespan").each(function(){var D=a(this);D.CswImageButton({ButtonType:CswImageButton_ButtonType.Delete,AlternateText:"Delete",ID:D.attr("arbid")+"_delete",onClick:function(J){J=J.parent();Q.find('[arbitraryid="'+J.attr("arbid")+'"]').remove();j(F,I);return CswImageButton_ButtonType.None}})});F===5&&I.find(".vieweditor_addfilter").each(function(){var D=a(this),J=D.CswTable({ID:i.ID+"_propfilttbl"});J.css("display","inline-table");J.CswViewPropFilter("init",
{viewxml:xmlToString(Q),proparbitraryid:D.attr("proparbid"),filtarbitraryid:"",viewbuilderpropid:"",ID:i.ID,propRow:1,firstColumn:1,includePropertyName:false,selectedSubfieldVal:"",selectedFilterVal:"",autoFocusInput:false});J.CswTable("cell",1,5).CswButton("init",{ID:"addfiltbtn",prefix:i.ID,enabledText:"Add",disabledText:"Adding",onclick:function(){var W=J.CswViewPropFilter("getFilterJson",{ID:i.ID,$parent:D,proparbitraryid:D.attr("proparbid")});J.CswViewPropFilter("makeFilter",{viewxml:xmlToString(Q),
filtJson:W,onSuccess:function(Z){var X=Q.find('[arbitraryid="'+D.attr("proparbid")+'"]');a(xmlToString(Z)).appendTo(X);j(F,I)}})}})});if(F===6){var O=ma.CswTable("cell",1,2),S=f(s,i.ColumnViewMode);I.find(".vieweditor_viewrootlink").click(function(){O.empty()});I.find(".vieweditor_viewrellink").click(function(){$a=a(this);O.empty();var D=Q.find('[arbitraryid="'+$a.attr("arbid")+'"]'),J=O.CswTable({ID:i.ID+"_editrel",FirstCellRightAlign:true});J.CswTable("cell",1,1).append("Allow Deleting");var W=
J.CswTable("cell",1,2).CswInput("init",{ID:i.ID+"_adcb",type:CswInput_Types.checkbox});D.attr("allowdelete").toLowerCase()=="true"&&W.attr("checked","true");J.CswTable("cell",2,1).append("Group By");var Z=a('<select id="'+i.ID+'_gbs" />').appendTo(J.CswTable("cell",2,2));CswAjaxXml({url:i.PropNamesUrl,data:"Type="+D.attr("secondtype")+"&Id="+D.attr("secondid"),success:function(Y){Z.empty();a('<option value="">[None]</option>').appendTo(Z);Y.children().each(function(){var ea=a(this),K=a('<option value="'+
ea.attr("propid")+'">'+ea.attr("propname")+"</option>").appendTo(Z).data("propxml",ea);D.attr("groupbypropid")===ea.attr("propid")&&D.attr("groupbyproptype")===ea.attr("proptype")&&D.attr("groupbypropname")===ea.attr("propname")&&K.attr("selected","true")})}});var X;if(S==="Tree"){J.CswTable("cell",3,1).append("Show In Tree");X=J.CswTable("cell",3,2).CswInput("init",{ID:i.ID+"_stcb",type:CswInput_Types.checkbox});D.attr("showintree").toLowerCase()=="true"&&X.attr("checked","true")}J.CswTable("cell",
4,2).CswButton({ID:i.ID+"_saverel",enabledText:"Apply",disableOnClick:false,onclick:function(){X!==undefined&&D.attr("showintree",X.is(":checked"));D.attr("allowdelete",W.is(":checked"));if(Z.val()!==""){var Y=Z.find(":selected").data("propxml");D.attr("groupbypropid",Y.attr("propid"));D.attr("groupbyproptype",Y.attr("proptype"));D.attr("groupbypropname",Y.attr("propname"))}else{D.attr("groupbypropid","");D.attr("groupbyproptype","");D.attr("groupbypropname","")}}})});I.find(".vieweditor_viewproplink").click(function(){$a=
a(this);O.empty();if(S==="Grid"){var D=Q.find('[arbitraryid="'+$a.attr("arbid")+'"]'),J=O.CswTable({ID:i.ID+"_editprop",FirstCellRightAlign:true});J.CswTable("cell",1,1).append("Sort By");var W=J.CswTable("cell",1,2).CswInput("init",{ID:i.ID+"_sortcb",type:CswInput_Types.checkbox});D.attr("sortby").toLowerCase()=="true"&&W.attr("checked","true");J.CswTable("cell",2,1).append("Grid Column Order");var Z=J.CswTable("cell",2,2).CswInput("init",{ID:i.ID+"_gcotb",type:CswInput_Types.text});Z.val(D.attr("order"));
J.CswTable("cell",3,1).append("Grid Column Width (in characters)");var X=J.CswTable("cell",3,2).CswInput("init",{ID:i.ID+"_gcwtb",type:CswInput_Types.text});X.val(D.attr("width"));J.CswTable("cell",4,2).CswButton({ID:i.ID+"_saveprop",enabledText:"Apply",disableOnClick:false,onclick:function(){D.attr("sortby",W.is(":checked"));D.attr("order",Z.val());D.attr("width",X.val())}})}});I.find(".vieweditor_viewfilterlink").click(function(){$a=a(this);O.empty();var D=Q.find('[arbitraryid="'+$a.attr("arbid")+
'"]'),J=O.CswTable({ID:i.ID+"_editfilt",FirstCellRightAlign:true});J.CswTable("cell",1,1).append("Case Sensitive");var W=a('<input type="checkbox" id="'+i.ID+'_casecb" />').appendTo(J.CswTable("cell",1,2));D.attr("casesensitive").toLowerCase()==="true"&&W.attr("checked","true");J.CswTable("cell",4,2).CswButton({ID:i.ID+"_savefilt",enabledText:"Apply",disableOnClick:false,onclick:function(){D.attr("casesensitive",W.is(":checked"))}})})}}function m(F,I){var T={},O=I.attr("arbitraryid"),S=I.get(0).nodeName,
D,J,W=false,Z=true,X;if(S.toLowerCase()==="treeview"){if(F===3)Z=false;O="root";D=I.attr("viewname");J="root";T.root={icon:{image:I.attr("iconfilename")}};X="vieweditor_viewrootlink"}else if(S.toLowerCase()==="relationship"){if(F===3)Z=false;if(F===4)Z=false;D=I.attr("secondname");S=I.attr("propname");if(S!==""&&S!==undefined)D+=I.attr("propowner")==="First"?" (by "+I.attr("firstname")+"'s "+S+")":" (by "+S+")";J=I.attr("secondtype")+"_"+I.attr("secondid");T[J]={icon:{image:I.attr("secondiconfilename")}};
X="vieweditor_viewrellink"}else if(S.toLowerCase()==="property"){if(F<=3)W=true;if(F===5)Z=false;D=I.attr("name");J="property";T.property={icon:{image:"Images/view/property.gif"}};X="vieweditor_viewproplink"}else if(S.toLowerCase()==="filter"){if(F<=4)W=true;D=I.attr("subfieldname")+" "+I.attr("filtermode")+" "+I.attr("value");J="filter";T.filter={icon:{image:"Images/view/filter.gif"}};X="vieweditor_viewfilterlink"}var Y="";if(!W){Y='<li id="'+O+'" ';Y+='    rel="'+J+'" ';Y+='    class="jstree-open" ';
Y+=">";Y+=' <a href="#" class="'+X+'" arbid="'+O+'">'+D+"</a>";if(O!=="root")Y+=' <span style="" class="vieweditor_deletespan" arbid="'+O+'"></span>';Y+="<ul>";I.children().each(function(){var ea=m(F,a(this));Y+=ea.htmlstring;a.extend(T,ea.types)});if(!Z)if(F===5)Y+='<li><span class="vieweditor_addfilter" proparbid="'+O+'"></span></li>';else{Y+='<li><select id="'+F+"_"+O+'_child" arbid="'+O+'" class="vieweditor_childselect"></select></li>';CswAjaxXml({url:i.ChildOptionsUrl,data:"StepNo="+F+"&ArbitraryId="+
O+"&ViewXml="+xmlToString(Q),success:function(ea){var K=a("#"+F+"_"+O+"_child");K.empty();K.append('<option value="">Select...</option>');ea.children().each(function(){var fa=a(this),ka=a(fa.attr("value"));a('<option value="'+ka.attr("arbitraryid")+'">'+fa.attr("name")+"</option>").appendTo(K).data("optionviewxml",fa.attr("value"))})}})}Y+="</ul>";Y+="</li>"}return{htmlstring:Y,types:T}}var i={ViewGridUrl:"/NbtWebApp/wsNBT.asmx/getViewGrid",ViewInfoUrl:"/NbtWebApp/wsNBT.asmx/getViewInfo",SaveViewUrl:"/NbtWebApp/wsNBT.asmx/saveViewInfo",
CopyViewUrl:"/NbtWebApp/wsNBT.asmx/copyView",DeleteViewUrl:"/NbtWebApp/wsNBT.asmx/deleteView",ChildOptionsUrl:"/NbtWebApp/wsNBT.asmx/getViewChildOptions",PropNamesUrl:"/NbtWebApp/wsNBT.asmx/getPropNames",viewid:"",ID:"vieweditor",ColumnViewName:"VIEWNAME",ColumnViewId:"NODEVIEWID",ColumnViewMode:"VIEWMODE",onCancel:function(){},onFinish:function(){}};g&&a.extend(i,g);g=a(this);g=a("<div></div>").appendTo(g);var n=g.CswWizard("init",{ID:i.ID+"_wizard",Title:"Edit View",StepCount:6,Steps:{1:"Choose a View",
2:"Edit View Attributes",3:"Add Relationships",4:"Select Properties",5:"Set Filters",6:"Fine Tuning"},FinishText:"Save and Finish",onNext:function(F){switch(F){case 2:CswAjaxXml({url:i.ViewInfoUrl,data:"ViewId="+f(s,i.ColumnViewId),success:function(T){Q=T;E.val(Q.attr("viewname"));P.val(Q.attr("category"));if(N.getvisibilityselect()!==undefined){N.getvisibilityselect().val(Q.attr("visibility")).trigger("change");N.getvisroleselect().val("nodes_"+Q.attr("visibilityroleid"));N.getvisuserselect().val("nodes_"+
Q.attr("visibilityuserid"))}Q.attr("formobile")==="true"&&ca.attr("checked","true");T=Q.attr("mode");ga.text(T);ha.CswNumberTextBox("setValue",Q.attr("width"));if(T==="Grid"){aa.show();ha.show()}else{aa.hide();ha.hide()}}});break;case 3:if(Q!==undefined){Q.attr("viewname",E.val());Q.attr("category",P.val());Q.attr("visibility",N.getvisibilityselect().val());F=N.getvisroleselect().val();isNullOrEmpty(F)||(F=F.substr(6));var I=N.getvisuserselect().val();isNullOrEmpty(I)||(I=I.substr(6));Q.attr("visibilityroleid",
F);Q.attr("visibilityuserid",I);Q.attr("formobile",ca.attr("checked")==="true");Q.attr("width",ha.CswNumberTextBox("value"))}j(3,ra);break;case 4:j(4,sa);break;case 5:j(5,da);break;case 6:j(6,ma.CswTable("cell",1,1))}},onPrevious:function(F){switch(F){case 3:j(3,ra);break;case 4:j(4,sa);break;case 5:j(5,da);break;case 6:j(6,ma.CswTable("cell",1,1))}},onBeforePrevious:function(F){return F!==2||confirm("You will lose any changes made to the current view if you continue.  Are you sure?")},onCancel:i.onCancel,
onFinish:function(){var F=f(s,i.ColumnViewId);CswAjaxXml({url:i.SaveViewUrl,data:"ViewId="+F+"&ViewXml="+xmlToString(Q),success:function(){i.onFinish(F,f(s,i.ColumnViewMode))}})}}),k=n.CswWizard("div",1);k.append("A <em>View</em> controls the arrangement of information you see in a tree or grid.  Views are useful for defining a user's workflow or for creating elaborate search criteria. This wizard will take you step by step through the process of creating a new View or editing an existing View.<br/><br/>");
k.append("Select a View to Edit:&nbsp;");var l=a('<span id="'+i.ID+'_selviewname" style="font-weight: bold"></span>').appendTo(k),t=a("<div></div>").appendTo(k),s;d(b,i.viewid);var w=k.CswTable({ID:i.ID+"_1_btntbl",width:"100%"});k=w.CswTable("cell",1,1);w=w.CswTable("cell",1,2);w.attr("align","right");var C=a("<div></div>").appendTo(w);IsAdministrator({Yes:function(){C.CswInput("init",{ID:i.ID+"_all",type:CswInput_Types.checkbox,onChange:function(){d(b)}});C.append("Show Other Roles/Users")}});var v=
k.CswButton({ID:i.ID+"_copyview",enabledText:"Copy View",disableOnClick:true,onclick:function(){var F=f(s,i.ColumnViewId);F!==""&&F!==undefined&&CswAjaxJSON({url:i.CopyViewUrl,data:"{ ViewId: "+F+" }",success:function(I){d(b,I.copyviewid)},error:function(){v.CswButton("enable")}})}});v.CswButton("disable");var u=k.CswButton({ID:i.ID+"_deleteview",enabledText:"Delete View",disableOnClick:true,onclick:function(){var F=f(s,i.ColumnViewId);F!==""&&F!==undefined&&confirm("Are you sure you want to delete: "+
f(s,i.ColumnViewName))&&CswAjaxJSON({url:i.DeleteViewUrl,data:"{ ViewId: "+F+" }",success:function(){d(b);v.CswButton("disable")},error:function(){u.CswButton("enable")}})}});u.CswButton("disable");var A=k.CswButton({ID:i.ID+"_newview",enabledText:"Create New View",disableOnClick:false,onclick:function(){a.CswDialog("AddViewDialog",{onAddView:function(F){s=d(b,F)},onClose:function(){A.CswButton("enable")},makeVisibilitySelect:h})}});n.CswWizard("button","next","disable");k=n.CswWizard("div",2).CswTable({ID:i.ID+
"_tbl2",FirstCellRightAlign:true});k.CswTable("cell",1,1).append("View Name:");var E=k.CswTable("cell",1,2).CswInput("init",{ID:i.ID+"_viewname",type:CswInput_Types.text});k.CswTable("cell",2,1).append("Category:");var P=k.CswTable("cell",2,2).CswInput("init",{ID:i.ID+"_category",type:CswInput_Types.text}),N=h(k,3,"View Visibility:");k.CswTable("cell",4,1).append("For Mobile:");var ca=k.CswTable("cell",4,2).CswInput("init",{ID:i.ID+"_formobile",type:CswInput_Types.checkbox});k.CswTable("cell",5,1).append("Display Mode:");
var ga=k.CswTable("cell",5,2).append('<span id="'+i.ID+'_displaymode"></span>'),aa=k.CswTable("cell",6,1).append("Grid Width (in characters):"),ha=k.CswTable("cell",6,2);ha.CswNumberTextBox("init",{ID:i.ID+"_gridwidth",Value:"",MinValue:"1",MaxValue:"",Precision:"0",onchange:function(){}});k=n.CswWizard("div",3);k.append("Add relationships from the select boxes below:<br/><br/>");var ra=a("<div />").appendTo(k);k=n.CswWizard("div",4);k.append("Add properties from the select boxes below:<br/><br/>");
var sa=a("<div />").appendTo(k);k=n.CswWizard("div",5);k.append("Add filters by selecting properties from the tree:<br/><br/>");var da=a("<div />").appendTo(k);k=n.CswWizard("div",6);k.append("Select what you want to edit from the tree:<br/><br/>");var ma=k.CswTable({ID:i.ID+"_6_tbl"}),Q;return g}})(jQuery);var ViewBuilder_CssClasses={subfield_select:{name:"csw_viewbuilder_subfield_select"},filter_select:{name:"csw_viewbuilder_filter_select"},default_filter:{name:"csw_viewbuilder_default_filter"},filter_value:{name:"csw_viewbuilder_filter_value"},metadatatype_static:{name:"csw_viewbuilder_metadatatype_static"}};
(function(a){function g(d,f){var e="";e={proparbitraryid:"",filtarbitraryid:"",viewbuilderpropid:"",ID:""};f&&a.extend(e,f);return e=e.filtarbitraryid!==""&&e.filtarbitraryid!==undefined?makeId({ID:d+"_filtarbitraryid",prefix:e.ID,suffix:e.filtarbitraryid}):e.viewbuilderpropid!==""&&e.viewbuilderpropid!==undefined?makeId({ID:d+"_viewbuilderpropid",prefix:e.ID,suffix:e.viewbuilderpropid}):e.proparbitraryid!==""&&e.proparbitraryid!==undefined?makeId({ID:d+"_proparbitraryid",prefix:e.ID,suffix:e.proparbitraryid}):
e.ID!==""&&e.ID!==undefined?makeId({ID:d,prefix:e.ID}):d}var b={init:function(d){function f(m){e.$propsXml.attr("viewbuilderpropid");var i=e.$propsXml.attr("propname");if(e.includePropertyName){var n=h.CswTable("cell",e.propRow,e.firstColumn).empty(),k=g(i,m);n.CswDOM("span",{ID:k,value:i})}n=e.$propsXml.attr("fieldtype");var l=e.$propsXml.children("defaultsubfield").attr("filter");k=h.CswTable("cell",e.propRow,e.firstColumn+1).empty();var t=g("default_filter",m);l=k.CswDOM("span",{ID:t,value:l,cssclass:ViewBuilder_CssClasses.default_filter.name}).attr({align:"center"});
e.advancedIsHidden||l.hide();l=g("subfield_select",m);var s=a(xmlToString(e.$propsXml.children("subfields").children("select"))).attr("id",l).attr("name",l).attr("class",ViewBuilder_CssClasses.subfield_select.name).change(function(){var C={selectedSubfieldVal:a(this).val(),selectedFilterVal:""};a.extend(e,C);f(m)});e.selectedSubfieldVal!==""&&s.val(e.selectedSubfieldVal).attr("selected",true);k.append(s);e.advancedIsHidden&&s.hide();t=s.find(":selected").val();k=s.find(":selected").attr("defaultvalue");
l=h.CswTable("cell",e.propRow,e.firstColumn+2).empty();var w=g("filter_select",m);t=a(xmlToString(e.$propsXml.children("propertyfilters").children("subfield[column="+t+"]").children("select"))).attr("id",w).attr("name",w).attr("class",ViewBuilder_CssClasses.filter_select.name).change(function(){var C=a(this);C={selectedSubfieldVal:s.val(),selectedFilterVal:C.val()};a.extend(e,C);f(m)});e.selectedFilterVal!==""&&t.val(e.selectedFilterVal).attr("selected",true);l.append(t);e.advancedIsHidden&&t.hide();
l=h.CswTable("cell",e.propRow,e.firstColumn+3).empty();t=g("propfilter_input",m);if(n==="List")l.append(a(xmlToString(e.$propsXml.children("filtersoptions").children("select"))));else if(n==="Logical")l.CswTristateCheckBox("init",{ID:t,Checked:k});else{n={value:k,placeholder:""};if(n.value===""||n.value===undefined){e.placeholder=i;if(e.placeholder!==s.find(":selected").text())e.placeholder+="'s "+s.find(":selected").text()}l.CswInput("init",{ID:t,type:CswInput_Types.text,cssclass:ViewBuilder_CssClasses.filter_value.name,
value:n.value,placeholder:n.placeholder,width:"200px",autofocus:e.autoFocusInput,autocomplete:"on"})}}var e={getNewPropsUrl:"/NbtWebApp/wsNBT.asmx/getViewPropFilterUI",viewid:"",viewxml:"",$propsXml:"",proparbitraryid:"",filtarbitraryid:"",viewbuilderpropid:"",ID:"",propRow:1,firstColumn:3,includePropertyName:false,advancedIsHidden:false,selectedSubfieldVal:"",selectedFilterVal:"",autoFocusInput:false};d&&a.extend(e,d);var h=a(this),j={proparbitraryid:e.proparbitraryid,filtarbitraryid:e.filtarbitraryid,
viewbuilderpropid:e.viewbuilderpropid,ID:e.ID};(e.$propsXml===""||e.$propsXml===undefined)&&e.proparbitraryid!==""&&e.proparbitraryid!==undefined?CswAjaxXml({url:e.getNewPropsUrl,data:"ViewXml="+e.viewxml+"&PropArbitraryId="+e.proparbitraryid,success:function(m){e.$propsXml=m.children("propertyfilters").children("property");j.filtarbitraryid=e.$propsXml.attr("filtarbitraryid");f(j)}}):f(j);return h},getFilterJson:function(d){var f=a(this),e={nodetypeorobjectclassid:"",relatedidtype:"",fieldtype:f.attr("fieldtype"),
ID:"",$parent:"",proparbitraryid:"",filtarbitraryid:f.attr("filtarbitraryid"),viewbuilderpropid:""};d&&a.extend(e,d);var h={proparbitraryid:e.proparbitraryid,filtarbitraryid:e.filtarbitraryid,viewbuilderpropid:e.viewbuilderpropid,ID:e.ID},j=g("propfilter_input",h),m=g("filtersoptions_select",h);d=g("subfield_select",h);h=g("filter_select",h);var i={};j=e.$parent.CswInput("findandget",{ID:j});switch(e.fieldtype){case "Logical":m=j.CswTristateCheckBox("value");break;case "List":m=e.$parent.CswDOM("findelement",
{ID:m}).find(":selected").val();break;default:m=j.val()}if(m!==""){d=e.$parent.CswDOM("findelement",{ID:d}).find(":selected").text();h=e.$parent.CswDOM("findelement",{ID:h}).find(":selected").val();f=f.attr("proptype");i={nodetypeorobjectclassid:e.nodetypeorobjectclassid,relatedidtype:e.relatedidtype,proptype:f,viewbuilderpropid:e.viewbuilderpropid,filtarbitraryid:e.filtarbitraryid,proparbitraryid:e.proparbitraryid,relatedidtype:e.relatedidtype,subfield:d,filter:h,filtervalue:m}}return i},makeFilter:function(d){var f=
{url:"/NbtWebApp/wsNBT.asmx/makeViewPropFilter",viewxml:"",filtJson:"",onSuccess:function(){}};d&&a.extend(f,d);CswAjaxXml({url:f.url,data:"ViewXml="+f.viewxml+"&PropFiltJson="+jsonToString(f.filtJson),success:function(e){f.onSuccess(e)}})}};a.fn.CswViewPropFilter=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswViewPropFilter")}})(jQuery);(function(a){function g(d){var f={ID:"",ClickDelay:300,iconurl:"",type:"",viewid:"",viewname:"",viewmode:"",actionid:"",actionurl:"",reportid:"",onSelect:function(){},$selectdiv:""};d&&a.extend(f,d);d=a("<div></div>");var e=d.CswTable("init",{ID:f.ID+"selectedtbl"}),h=e.CswTable("cell",1,1);h=a("<div />").appendTo(h);h.css("background-image",f.iconurl);h.css("width","18px");h.css("height","18px");e.CswTable("cell",1,2).append(f.viewname);f.$selectdiv.CswComboBox("TopContent",d);f.$selectdiv.attr("selectedValue",
f.viewid);setTimeout(function(){f.$selectdiv.CswComboBox("toggle")},f.ClickDelay);f.onSelect({iconurl:f.iconurl,type:f.type,viewid:f.viewid,viewname:f.viewname,viewmode:f.viewmode,actionid:f.actionid,actionurl:f.actionurl,reportid:f.reportid})}var b={init:function(d){var f={ID:"",onSelect:function(){},onSuccess:function(){},ClickDelay:300};d&&a.extend(f,d);var e=a(this);e.contents().remove();$viewtreediv=a("<div/>");e.CswComboBox("init",{ID:f.ID+"_combo",TopContent:"Select a View",SelectContent:$viewtreediv,
Width:"266px"});$viewtreediv.CswViewTree({onSelect:function(h){g({ID:f.ID,ClickDelay:f.ClickDelay,iconurl:h.iconurl,type:h.type,viewid:h.viewid,viewname:h.viewname,viewmode:h.viewmode,actionid:h.actionid,actionurl:h.actionurl,reportid:h.reportid,onSelect:f.onSelect,$selectdiv:e})},onSuccess:f.onSuccess});return e},value:function(){return a(this).attr("selectedValue")}};a.fn.CswViewSelect=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||
!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswViewSelect")}})(jQuery);(function(a){a.fn.CswViewTree=function(g){var b={ViewUrl:"/NbtWebApp/wsNBT.asmx/getViewTree",viewid:"",onSelect:function(){},onSuccess:function(){}};g&&a.extend(b,g);var d=a(this);d.contents().remove();CswAjaxXml({url:b.ViewUrl,data:"",success:function(f){var e=f.find("types").text();e=a.parseJSON(e);f=f.find("tree").children("root");f=xmlToString(f);d.jstree({xml_data:{data:f,xsl:"nest"},ui:{select_limit:1},core:{initially_open:["root"]},types:{types:e},plugins:["themes","xml_data","ui","types"]}).bind("select_node.jstree",
function(){var h=jsTreeGetSelected(d);h={iconurl:h.iconurl,type:h.$item.attr("type"),viewid:h.$item.attr("viewid"),viewname:h.text,viewmode:h.$item.attr("viewmode"),actionid:h.$item.attr("actionid"),actionurl:h.$item.attr("actionurl"),reportid:h.$item.attr("reportid")};b.onSelect(h)});b.onSuccess()}});return this}})(jQuery);(function(a){function g(e){var h={cellset:"",row:"",column:"",RemoveWelcomeItemUrl:"",onSuccess:function(){}};e&&a.extend(h,e);e=a(h.cellset[2][1]);if(e.length>0){e=e.children("input").attr("welcomeid");CswAjaxJSON({url:h.RemoveWelcomeItemUrl,data:'{ "RoleId": "", "WelcomeId": "'+e+'" }',success:function(){h.onSuccess()}})}}function b(e){var h={AddWelcomeItemUrl:"",type:"",viewid:"",nodetypeid:"",text:"",iconfilename:"",onSuccess:function(){},onError:function(){}};e&&a.extend(h,e);CswAjaxJSON({url:h.AddWelcomeItemUrl,
data:'{ "RoleId": "", "Type": "'+h.type+'", "ViewId": "'+h.viewid+'", "NodeTypeId": "'+h.nodetypeid+'", "Text": "'+h.text+'", "IconFileName": "'+h.iconfilename+'" }',success:function(){h.onSuccess()},error:o.onError})}function d(e,h,j,m){h=a(h[2][1]);if(h.length>0){h=h.children("input").attr("welcomeid");CswAjaxJSON({url:e,data:'{ "RoleId": "", "WelcomeId": "'+h+'", "NewRow": "'+j+'", "NewColumn": "'+m+'" }',success:function(){}})}}var f={initTable:function(e){var h={Url:"/NbtWebApp/wsNBT.asmx/getWelcomeItems",
MoveWelcomeItemUrl:"/NbtWebApp/wsNBT.asmx/moveWelcomeItems",RemoveWelcomeItemUrl:"/NbtWebApp/wsNBT.asmx/deleteWelcomeItem",onLinkClick:function(){},onSearchClick:function(){},onAddClick:function(){},onAddComponent:function(){}};e&&a.extend(h,e);var j=a(this);CswAjaxXml({url:h.Url,data:"RoleId=",success:function(m){var i=a('<div id="welcomediv"></div>').appendTo(j).css("text-align","center").css("font-size","1.2em").CswLayoutTable("init",{ID:"welcometable",cellset:{rows:2,columns:1},TableCssClass:"WelcomeTable",
cellpadding:10,align:"center",onSwap:function(n,k){var l={cellset:k.cellset,row:k.row,column:k.column,swapcellset:k.swapcellset,swaprow:k.swaprow,swapcolumn:k.swapcolumn,MoveWelcomeItemUrl:h.MoveWelcomeItemUrl},t={cellset:"",row:"",column:"",swapcellset:"",swaprow:"",swapcolumn:"",MoveWelcomeItemUrl:""};l&&a.extend(t,l);d(t.MoveWelcomeItemUrl,t.cellset,t.swaprow,t.swapcolumn);d(t.MoveWelcomeItemUrl,t.swapcellset,t.row,t.column)},showConfigButton:true,showAddButton:true,showRemoveButton:true,onAddClick:function(){a.CswDialog("AddWelcomeItemDialog",
{onAdd:h.onAddComponent})},onRemove:function(n,k){g({cellset:k.cellset,row:k.row,column:k.column,RemoveWelcomeItemUrl:h.RemoveWelcomeItemUrl})}});m.children().each(function(){var n=a(this),k=i.CswLayoutTable("cellset",n.attr("displayrow"),n.attr("displaycol")),l=k[1][1];k=k[2][1];n.attr("buttonicon")!==undefined&&n.attr("buttonicon")!==""&&l.append(a('<a href=""><img border="0" src="'+n.attr("buttonicon")+'"/></a>'));var t={type:n.attr("type"),viewmode:n.attr("viewmode"),itemid:n.attr("itemid"),text:n.attr("text"),
iconurl:n.attr("iconurl"),viewid:n.attr("viewid"),actionid:n.attr("actionid"),reportid:n.attr("reportid"),linktype:n.attr("linktype")};switch(t.linktype){case "Link":k.append(a('<a href="">'+t.text+"</a>"));k.find("a").click(function(){h.onLinkClick(t);return false});l.find("a").click(function(){h.onLinkClick(t);return false});break;case "Search":k.append(a('<a href="">'+t.text+"</a>"));k.find("a").click(function(){h.onSearchClick(t);return false});l.find("a").click(function(){h.onSearchClick(t);
return false});break;case "Text":k.append("<span>"+t.text+"</span>");break;case "Add":k.append(a('<a href="">'+t.text+"</a>"));k.find("a").click(function(){h.onAddClick(n.attr("nodetypeid"));return false});l.find("a").click(function(){h.onAddClick(n.attr("nodetypeid"));return false})}k.CswInput("init",{ID:n.attr("welcomeid"),type:CswInput_Types.hidden}).attr("welcomeid",n.attr("welcomeid"))})}})},getAddItemForm:function(e){var h={AddWelcomeItemUrl:"/NbtWebApp/wsNBT.asmx/addWelcomeItem",onAdd:function(){}};
e&&a.extend(h,e);e=a(this).CswTable("init",{ID:"addwelcomeitem_tbl"});a("<span>Type:</span>").appendTo(e.CswTable("cell",1,1));var j=a('<select id="welcome_type" name="welcome_type"></select>').appendTo(e.CswTable("cell",1,2));j.append('<option value="Add" selected>Add</option>');j.append('<option value="Link">Link</option>');j.append('<option value="Search">Search</option>');j.append('<option value="Text">Text</option>');var m=a("<span>View:</span>").appendTo(e.CswTable("cell",2,1)).hide(),i=e.CswTable("cell",
2,2).CswViewSelect({ID:"welcome_viewsel"}).hide(),n=a("<span>Add New:</span>").appendTo(e.CswTable("cell",3,1)),k=e.CswTable("cell",3,2).CswNodeTypeSelect({ID:"welcome_ntsel"});a("<span>Text:</span>").appendTo(e.CswTable("cell",4,1));var l=e.CswTable("cell",4,2).CswInput("init",{ID:"welcome_text",type:CswInput_Types.text}),t=a("<span>Use Button:</span>").appendTo(e.CswTable("cell",5,1)),s=a('<select id="welcome_button" />').appendTo(e.CswTable("cell",5,2));s.append('<option value="blank.gif"></option>');
var w=a('<img id="welcome_btnimg" />').appendTo(e.CswTable("cell",6,2)),C=e.CswTable("cell",7,2).CswButton({ID:"welcome_add",enabledText:"Add",disabledText:"Adding",onclick:function(){b({AddWelcomeItemUrl:h.AddWelcomeItemUrl,type:j.val(),viewid:i.CswViewSelect("value"),nodetypeid:k.CswNodeTypeSelect("value"),text:l.val(),iconfilename:s.val(),onSuccess:h.onAdd,onError:function(){C.CswButton("enable")}})}});e.CswTable("cell",7,2).append(C);s.change(function(){w.attr("src","Images/biggerbuttons/"+s.val())});
j.change(function(){var v={$typeselect:j,$viewselect_label:m,$viewselect:i,$ntselect_label:n,$ntselect:k,$buttonsel_label:t,$buttonsel:s,$buttonimg:w},u={$typeselect:"",$viewselect_label:"",$viewselect:"",$ntselect_label:"",$ntselect:"",$buttonsel_label:"",$buttonsel:"",$buttonimg:""};v&&a.extend(u,v);switch(u.$typeselect.val()){case "Add":u.$viewselect_label.hide();u.$viewselect.hide();u.$ntselect_label.show();u.$ntselect.show();u.$buttonsel_label.show();u.$buttonsel.show();u.$buttonimg.show();break;
case "Link":u.$viewselect_label.show();u.$viewselect.show();u.$ntselect_label.hide();u.$ntselect.hide();u.$buttonsel_label.show();u.$buttonsel.show();u.$buttonimg.show();break;case "Search":u.$viewselect_label.show();u.$viewselect.show();u.$ntselect_label.hide();u.$ntselect.hide();u.$buttonsel_label.show();u.$buttonsel.show();u.$buttonimg.show();break;case "Text":u.$viewselect_label.hide();u.$viewselect.hide();u.$ntselect_label.hide();u.$ntselect.hide();u.$buttonsel_label.hide();u.$buttonsel.hide();
u.$buttonimg.hide()}});CswAjaxXml({url:"/NbtWebApp/wsNBT.asmx/getWelcomeButtonIconList",success:function(v){v.children().each(function(){var u=a(this).attr("filename");u!=="blank.gif"&&s.append('<option value="'+u+'">'+u+"</option>")})}})}};a.fn.CswWelcome=function(e){if(f[e])return f[e].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof e==="object"||!e)return f.init.apply(this,arguments);else a.error("Method "+e+" does not exist on CswWelcome")}})(jQuery);(function(a){function g(f){return parseInt(f.find(".CswWizard_StepLinkDivSelected").attr("stepno"))}function b(f,e){var h=f.attr("stepcount");if(e>0&&e<=h){f.find(".CswWizard_StepLinkDiv").removeClass("CswWizard_StepLinkDivSelected");f.find(".CswWizard_StepLinkDiv[stepno="+e+"]").addClass("CswWizard_StepLinkDivSelected");f.find(".CswWizard_StepDiv").hide();f.find(".CswWizard_StepDiv[stepno="+e+"]").show();var j=a("#"+f.attr("id")+"_prev");e===1?j.CswButton("disable"):j.CswButton("enable");j=a("#"+
f.attr("id")+"_next");e>=h?j.CswButton("disable"):j.CswButton("enable")}}var d={init:function(f){var e={ID:"",Title:"A Wizard",StepCount:1,Steps:{1:"Default"},SelectedStep:1,FinishText:"Finish",onNext:function(){},onPrevious:function(){},onBeforeNext:function(){return true},onBeforePrevious:function(){return true},onFinish:function(){},onCancel:function(){}};f&&a.extend(e,f);var h=a(this).CswTable({ID:e.ID,TableCssClass:"CswWizard_WizardTable"});h.attr("stepcount",e.StepCount);h.CswTable("cell",1,
1).addClass("CswWizard_TitleCell").attr("colspan",2).append(e.Title);f=h.CswTable("cell",2,1).attr("rowspan",2).addClass("CswWizard_IndexCell");for(var j=h.CswTable("cell",2,2).addClass("CswWizard_StepsCell"),m=h.CswTable("cell",3,1).addClass("CswWizard_ButtonsCell"),i=1;i<=e.StepCount;i++){var n=e.Steps[i];a('<div class="CswWizard_StepLinkDiv" stepno="'+i+'">'+i+".&nbsp;"+n+"</div>").appendTo(f);a('<div class="CswWizard_StepDiv" id="'+e.ID+"_"+i+'" stepno="'+i+'" ><span class="CswWizard_StepTitle">'+
n+'</span><br/></br><div id="'+e.ID+"_"+i+'_content"></div></div>').appendTo(j)}j=m.CswTable({ID:e.ID+"_btntbl",width:"100%"});f=j.CswTable("cell",1,1).attr("align","right").attr("width","65%");j=j.CswTable("cell",1,2).attr("align","right").attr("width","35%");f.CswButton("init",{ID:e.ID+"_prev",enabledText:"< Previous",disableOnClick:false,onclick:function(){var k=g(h);if(e.onBeforePrevious(k)){b(h,k-1);e.onPrevious(k-1)}}});f.CswButton("init",{ID:e.ID+"_next",enabledText:"Next >",disableOnClick:false,
onclick:function(){var k=g(h);if(e.onBeforeNext(k)){b(h,k+1);e.onNext(k+1)}}});f.CswButton("init",{ID:e.ID+"_finish",enabledText:e.FinishText,onclick:e.onFinish});j.CswButton("init",{ID:e.ID+"_cancel",enabledText:"Cancel",onclick:e.onCancel});b(h,e.SelectedStep);return h},div:function(f){return a(this).find(".CswWizard_StepDiv[stepno="+f+"] div")},button:function(f,e){var h=a(this);switch(f){case "previous":a("#"+h.attr("id")+"_prev").CswButton(e);break;case "next":a("#"+h.attr("id")+"_next").CswButton(e);
break;case "finish":a("#"+h.attr("id")+"_finish").CswButton(e);break;case "cancel":a("#"+h.attr("id")+"_cancel").CswButton(e)}}};a.fn.CswWizard=function(f){if(d[f])return d[f].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof f==="object"||!f)return d.init.apply(this,arguments);else a.error("Method "+f+" does not exist on CswWizard")}})(jQuery);function CswAjaxJSON(a){var g={url:"",data:"",onloginfail:function(){},success:function(){},error:function(){},formobile:false};a&&$.extend(g,a);$.ajax({type:"POST",url:g.url,dataType:"json",contentType:"application/json; charset=utf-8",data:g.data,success:function(b,d,f){b=$.parseJSON(b.d);if(b.error!==undefined){_handleAjaxError(f,{message:b.error.message,detail:b.error.detail},"");g.error()}else if(g.formobile){f=tryParseString(b.AuthenticationStatus,"");_handleAuthenticationStatus({status:f,success:g.success(b),
failure:g.onloginfail})}else g.success(b)},error:function(b,d,f){_handleAjaxError(b,{message:"A Webservices Error Occurred",detail:d},f);g.error()}})}
function CswAjaxXml(a){var g={url:"",data:"",onloginfail:function(){},success:function(){},error:function(){},formobile:false};a&&$.extend(g,a);g.url!==""&&$.ajax({type:"POST",url:g.url,dataType:"xml",data:g.data,success:function(b,d,f){d=$(f.responseXML);b=d.children().first();if(b.first().get(0).nodeName==="error"){_handleAjaxError(f,{message:b.attr("message"),detail:b.attr("detail")},"");g.error()}else if(g.formobile){f=tryParseString(d.find("AuthenticationStatus").text(),"");_handleAuthenticationStatus({status:f,
success:g.success(b),failure:g.onloginfail})}else g.success(b)},error:function(b,d,f){_handleAjaxError(b,{message:"A Webservices Error Occurred",detail:d},f);g.error()}})}function _handleAjaxError(a,g){var b=$("#ErrorDiv");b.length>0?b.CswErrorMessage({message:g.message,detail:g.detail}):log(g.message+"; "+g.detail)}
function _handleAuthenticationStatus(){var a={status:"",success:function(){},failure:function(){}};if(!isNullOrEmpty(a.status)&&a.status!=="Authenticated"){alert(a.status);a.failure()}else a.success()}function xmlToString(a){var g="";if(a!==""&&a!==undefined){(g=a.get(0).xml)||(g=(new XMLSerializer).serializeToString(a.get(0)));g||$.error("Browser does not support XML operations necessary to convert to string")}return g}
function jsonToString(a){if(typeof a==="object"){var g="{",b=true,d;for(d in a)if(a.hasOwnProperty(d)){b||(g+=",");g+=" '"+d+"': ";g+=jsonToString(a[d]);b=false}g+="}"}else g="'"+safeJsonParam(a)+"'";return g}function safeJsonParam(a){var g="";if(a!==undefined)g=a.replace(/'/g,"\\'");return g}var changed=0,checkChangesEnabled=true;function setChanged(){if(checkChangesEnabled)changed=1}function unsetChanged(){if(checkChangesEnabled)changed=0}
function checkChanges(){if(checkChangesEnabled&&changed===1)return"If you continue, you will lose any changes made on this page.  To save your changes, click Cancel and then click the Save button."}
function manuallyCheckChanges(){var a=true;if(checkChangesEnabled&&changed===1)if(a=confirm("Are you sure you want to navigate away from this page?\n\nIf you continue, you will lose any changes made on this page.  To save your changes, click Cancel and then click the Save button.\n\nPress OK to continue, or Cancel to stay on the current page."))changed=0;return a}
function initCheckChanges(){window.onbeforeunload=window.onbeforeunload!==null&&window.onbeforeunload!==undefined?function(){var a=window.onbeforeunload;return a()?checkChanges():false}:function(){return checkChanges()}}window.onload=window.onload!==null&&window.onload!==undefined?new Function("initCheckChanges(); var f="+window.onload+"; return f();"):function(){initCheckChanges()};
function IsAdministrator(a){var g={Yes:function(){},No:function(){}};a&&$.extend(g,a);CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/isAdministrator",success:function(b){b.Administrator==="true"?g.Yes():g.No()}})}function copyNode(a){var g={nodeid:"",nodekey:"",onSuccess:function(){},onError:function(){}};a&&$.extend(g,a);CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/CopyNode",data:'{ "NodePk":"'+g.nodeid+'" }',success:function(b){g.onSuccess(b.NewNodeId,"")},error:g.onError})}
function deleteNodes(a){var g={nodeids:[],onSuccess:function(){},onError:function(){}};a&&$.extend(g,a);a='{ "NodePks": [';var b=true,d;for(d in g.nodeids){b||(a+=",");a+='"'+g.nodeids[d]+'"';b=false}a+="] }";CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/DeleteNodes",data:a,success:function(){g.onSuccess("","")},error:g.onError})}
function jsTreeGetSelected(a){var g=a.attr("id");$SelectedItem=a.jstree("get_selected");return{iconurl:$SelectedItem.children("a").children("ins").css("background-image"),id:$SelectedItem.attr("id").substring(g.length),text:$SelectedItem.children("a").first().text().trim(),$item:$SelectedItem}}function GoHome(){$.CswCookie("clear",CswCookieName.CurrentView.ViewId);$.CswCookie("clear",CswCookieName.CurrentView.ViewMode);window.location="NewMain.html"}
function HandleMenuItem(a){var g={$ul:"",$itemxml:"",onLogout:function(){},onAlterNode:function(){},onSearch:{onViewSearch:function(){},onGenericSearch:function(){}},onMultiEdit:function(){},onEditView:function(){},Multi:false,NodeCheckTreeId:""};a&&$.extend(g,a);if(g.$itemxml.attr("href")!==undefined&&g.$itemxml.attr("href")!=="")a=$('<li><a href="'+g.$itemxml.attr("href")+'">'+g.$itemxml.attr("text")+"</a></li>").appendTo(g.$ul);else if(g.$itemxml.attr("popup")!==undefined&&g.$itemxml.attr("popup")!==
"")a=$('<li class="headermenu_dialog"><a href="#">'+g.$itemxml.attr("text")+"</a></li>").appendTo(g.$ul).click(function(){$.CswDialog("OpenDialog",g.$itemxml.attr("text"),g.$itemxml.attr("popup"));return false});else if(g.$itemxml.attr("action")!==undefined&&g.$itemxml.attr("action")!==""){a=$('<li><a href="#">'+g.$itemxml.attr("text")+"</a></li>").appendTo(g.$ul);var b=a.children("a");switch(g.$itemxml.attr("action")){case "About":b.click(function(){$.CswDialog("AboutDialog");return false});break;
case "AddNode":b.click(function(){$.CswDialog("AddNodeDialog",{nodetypeid:g.$itemxml.attr("nodetypeid"),relatednodeid:g.$itemxml.attr("relatednodeid"),onAddNode:g.onAlterNode});return false});break;case "DeleteNode":b.click(function(){$.CswDialog("DeleteNodeDialog",{nodename:g.$itemxml.attr("nodename"),nodeid:g.$itemxml.attr("nodeid"),onDeleteNode:g.onAlterNode,NodeCheckTreeId:g.NodeCheckTreeId,Multi:g.Multi});return false});break;case "editview":b.click(function(){g.onEditView(g.$itemxml.attr("viewid"));
return false});break;case "CopyNode":b.click(function(){$.CswDialog("CopyNodeDialog",{nodename:g.$itemxml.attr("nodename"),nodeid:g.$itemxml.attr("nodeid"),onCopyNode:g.onAlterNode});return false});break;case "Home":b.click(function(){GoHome();return false});break;case "Logout":b.click(function(){g.onLogout();return false});break;case "Profile":b.click(function(){$.CswDialog("EditNodeDialog",{nodeid:g.$itemxml.attr("userid"),cswnbtnodekey:"",filterToPropId:"",title:"User Profile",onEditNode:function(){}});
return false});break;case "ViewSearch":b.click(function(){g.onSearch.onViewSearch()});break;case "GenericSearch":b.click(function(){g.onSearch.onGenericSearch()});break;case "multiedit":b.click(g.onMultiEdit)}}else a=$("<li>"+g.$itemxml.attr("text")+"</li>").appendTo(g.$ul);return a}function openPopup(a,g,b){a=window.open(a,null,"height="+g+", width="+b+", status=no, resizable=yes, scrollbars=yes, toolbar=yes, location=no, menubar=yes");a.focus();return a}
function validateTime(a){var g=true,b=/^(\d?\d):(\d\d)\s?([APap][Mm])?$/g.exec(a);if(b===null)g=false;else{a=parseInt(b[1]);b=parseInt(b[2]);if(a<0||a>=24||b<0||b>=60)g=false}return g}function validateFloatMinValue(a,g){var b=parseFloat(a),d=parseFloat(g),f=true;if(d!==undefined)if(b===undefined||b<d)f=false;return f}function validateFloatMaxValue(a,g){var b=parseFloat(a),d=parseFloat(g),f=true;if(d!==undefined)if(b===undefined||b>d)f=false;return f}
function validateFloatPrecision(a,g){var b=true,d;d=g>0?/^\-?\d*\.?\d*$/g:/^\-?\d*$/g;if(b&&!d.test(a))b=false;return b}function validateInteger(a){return/^\-?\d*$/g.test(a)}function startsWith(a,g){return a.substr(0,g.length)===g}function getTimeString(a){var g="",b=a.getHours();a=a.getMinutes();if(a<10)a="0"+a;g=b%12+":"+a+" ";g+=b>11?"PM":"AM";return g}
function makeId(a){var g={ID:"",prefix:"",suffix:"",Delimiter:"_"};a&&$.extend(g,a);a=g.ID;if(g.prefix!==""&&a!=="")a=g.prefix+g.Delimiter+a;if(g.suffix!==""&&a!=="")a+=g.Delimiter+g.suffix;return a}function isNullOrEmpty(a){return a===""||a===undefined||a===null}function isTrue(a){var g;if(a==="true"||a===true||a==="1"||a===1)g=true;else if(a==="false"||a===false||a==="0"||a===0)g=false;else log("isTrue() was called on "+a+", which is not a boolean.");return g}
function tryParseString(a,g){var b=g;isNullOrEmpty(a)||(b=a);return b}function iterate(a){var g,b;for(b in a)g=g+b+"="+a[b]+"<br><br>";a=window.open("","popup");a!==null?a.document.write(g):console.log("iterate() error: No popup!")}function log(a){try{console.log(a)}catch(g){alert(a)}}if(typeof String.prototype.trim!=="function")String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("barcode").text().trim();if(b.ReadOnly)d.append(f);else{d=d.CswTable("init",{ID:b.ID+"_tbl"});f=d.CswTable("cell",1,1).CswInput("init",{ID:b.ID,type:CswInput_Types.text,cssclass:"textinput",onChange:b.onchange,value:f});d=d.CswTable("cell",1,2);a("<div/>").appendTo(d).CswImageButton({ButtonType:CswImageButton_ButtonType.Print,AlternateText:"",ID:b.ID+"_print",onClick:function(){a.CswDialog("OpenDialog",
b.ID+"_dialog","Popup_PrintLabel.aspx?nodeid="+b.nodeid+"&propid="+b.ID);return CswImageButton_ButtonType.None}});b.Required&&f.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("barcode").text(d.val())}};a.fn.CswFieldTypeBarcode=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeBarcode")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();b=b.$propxml.children("value").text().trim();d.append(b)},save:function(){}};a.fn.CswFieldTypeComposite=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeComposite")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("value").text().trim();if(f==="1/1/0001")f="";if(b.ReadOnly)d.append(f);else{d=d.CswInput("init",{ID:b.ID,type:CswInput_Types.text,value:f,onChange:b.onchange,cssclass:"textinput date"});d.datepicker();b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("value").text(d.val())}};a.fn.CswFieldTypeDate=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,
1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeDate")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("href").text().trim(),e=b.$propxml.children("name").text().trim(),h=d.CswTable("init",{ID:b.ID+"_tbl"});d=h.CswTable("cell",1,1);var j=h.CswTable("cell",1,2);h=h.CswTable("cell",1,3);d.append('<a href="'+f+'" target="_blank">'+e+"</a>");if(!b.ReadOnly){a("<div/>").appendTo(j).CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID+"_edit",onClick:function(){a.CswDialog("FileUploadDialog",
{url:"/NbtWebApp/wsNBT.asmx/fileForProp",params:{PropId:b.$propxml.attr("id")},onSuccess:function(){b.onReload()}});return CswImageButton_ButtonType.None}});a("<div/>").appendTo(h).CswImageButton({ButtonType:CswImageButton_ButtonType.Clear,AlternateText:"Clear",ID:b.ID+"_clr",onClick:function(){confirm("Are you sure you want to clear this file?")&&CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/clearProp",data:'{ "PropId": "'+b.$propxml.attr("id")+'", "IncludeBlob": "true" }',success:function(){b.onReload()}});
return CswImageButton_ButtonType.None}})}},save:function(){}};a.fn.CswFieldTypeFile=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeFile")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.empty();var f=a('<div id="grid_as_fieldtype_menu" name="grid_as_fieldtype_menu"></div>'),e=a('<div id="grid_as_fieldtype" name="grid_as_fieldtype"></div>'),h=b.$propxml.children("viewid").text().trim();e.CswNodeGrid({viewid:h,nodeid:b.nodeid,cswnbtnodekey:b.cswnbtnodekey,readonly:b.ReadOnly});f.CswMenuMain({viewid:h,nodeid:b.nodeid,cswnbtnodekey:b.cswnbtnodekey,onAddNode:function(){refreshSelected({nodeid:b.nodeid,cswnbtnodekey:b.cswnbtnodekey})}});
d.append(f,a("<br/><br/>"),e)},save:function(){}};a.fn.CswFieldTypeGrid=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeGrid")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("href").text().trim(),e=b.$propxml.children("href").attr("width"),h=b.$propxml.children("href").attr("height"),j=b.$propxml.children("name").text().trim(),m=d.CswTable("init",{ID:b.ID+"_tbl"});d=m.CswTable("cell",1,1).attr("colspan","3");var i=m.CswTable("cell",2,1).attr("width",e-36),n=m.CswTable("cell",2,2).attr("align","right");m=m.CswTable("cell",2,3).attr("align","right");if(j!==""){a('<a href="'+
f+'" target="_blank"><img src="'+f+'" alt="'+j+'" width="'+e+'" height="'+h+'"/></a>').appendTo(d);i.append('<a href="'+f+'" target="_blank">'+j+"</a>")}if(!b.ReadOnly){a("<div/>").appendTo(n).CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID+"_edit",onClick:function(){a.CswDialog("FileUploadDialog",{url:"/NbtWebApp/wsNBT.asmx/fileForProp",params:{PropId:b.$propxml.attr("id")},onSuccess:function(){b.onReload()}});return CswImageButton_ButtonType.None}});a("<div/>").appendTo(m).CswImageButton({ButtonType:CswImageButton_ButtonType.Clear,
AlternateText:"Clear",ID:b.ID+"_clr",onClick:function(){confirm("Are you sure you want to clear this image?")&&CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/clearProp",data:'{ "PropId": "'+b.$propxml.attr("id")+'", "IncludeBlob": "true" }',success:function(){b.onReload()}});return CswImageButton_ButtonType.None}})}},save:function(){}};a.fn.CswFieldTypeImage=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);
else a.error("Method "+b+" does not exist on CswFieldTypeImage")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("text").text().trim(),e=b.$propxml.children("href").text().trim();if(b.ReadOnly)d.append(Value);else{var h=d.CswTable("init",{ID:b.ID+"_tbl"});a('<a href="'+e+'" target="_blank">'+f+"</a>&nbsp;&nbsp;").appendTo(h.CswTable("cell",1,1));a("<div/>").appendTo(h.CswTable("cell",1,2)).CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID+"_edit",Required:b.Required,onClick:function(){j.show();
return CswImageButton_ButtonType.None}});var j=d.CswTable("init",{ID:b.ID+"_edittbl"}).hide();a("<span>Text</span>").appendTo(j.CswTable("cell",1,1));d=j.CswTable("cell",1,2).CswInput("init",{ID:b.ID+"_text",type:CswInput_Types.text,value:f,onChange:b.onchange});a("<span>URL</span>").appendTo(j.CswTable("cell",2,1));f=j.CswTable("cell",2,2).CswInput("init",{ID:b.ID+"_href",type:CswInput_Types.text,value:e,onChange:b.onchange});if(b.Required&&e===""){j.show();d.addClass("required");f.addClass("required")}}},
save:function(b){var d=b.$propdiv.find("#"+b.ID+"_text"),f=b.$propdiv.find("#"+b.ID+"_href");b.$propxml.children("text").text(d.val());b.$propxml.children("href").text(f.val())}};a.fn.CswFieldTypeLink=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeLink")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("value").text().trim(),e=b.$propxml.children("options").text().trim();if(b.ReadOnly)d.append(f);else{d=a('<select id="'+b.ID+'" name="'+b.ID+'" class="selectinput" />"').appendTo(d).change(b.onchange);e=e.split(",");for(var h=0;h<e.length;h++)d.append('<option value="'+e[h]+'">'+e[h]+"</option>");d.val(f);b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("select");b.$propxml.children("value").text(d.val())}};
a.fn.CswFieldTypeList=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeList")}})(jQuery);(function(a){a.fn.CswFieldTypeLocation=function(g){function b(f,e,h,j,m){if(e==="root")e="";f.CswComboBox("TopContent",h);if(f.attr("value")!==e){f.attr("value",e);m()}setTimeout(function(){f.CswComboBox("close")},300)}var d={init:function(f){var e=a(this);e.contents().remove();var h=f.$propxml.children("nodeid").text().trim(),j=f.$propxml.children("nodekey").text().trim(),m=f.$propxml.children("name").text().trim(),i=f.$propxml.children("path").text().trim(),n=f.$propxml.children("viewid").text().trim();
if(f.ReadOnly)e.append(i);else{e=e.CswTable("init",{ID:f.ID+"_tbl"});var k=e.CswTable("cell",1,1);k.attr("colspan","2");k.append(i+"<br/>");i=e.CswTable("cell",2,1);var l=a('<div class="locationselect" value="'+h+'"/>').appendTo(i);h=a("<div />").CswNodeTree("init",{ID:f.ID,viewid:n,nodeid:h,cswnbtnodekey:j,onSelectNode:function(t){b(l,t.nodeid,t.nodename,t.iconurl,f.onchange)},SelectFirstChild:false,UsePaging:false});l.CswComboBox("init",{ID:f.ID+"_combo",TopContent:m,SelectContent:h,Width:"266px"})}},
save:function(f){var e=f.$propdiv.find(".locationselect");f.$propxml.children("nodeid").text(e.attr("value"))}};if(d[g])return d[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return d.init.apply(this,arguments);else a.error("Method "+g+" does not exist on CswFieldTypeLocation")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();b.$propxml.children("value").text().trim();d.append("[Not Implemented Yet]")},save:function(){}};a.fn.CswFieldTypeLocationContents=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeLocationContents")}})(jQuery);(function(a){var g={init:function(b){$Div=a(this);b={Checked:b.$propxml.children("checked").text().trim(),Required:b.Required,ReadOnly:b.ReadOnly,onchange:b.onchange};$Div.CswTristateCheckBox("init",b)},save:function(b){$Div=b.$propdiv.find("div");var d=$Div.CswTristateCheckBox("value");b.$propxml.children("checked").text(d)}};a.fn.CswFieldTypeLogical=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);
else a.error("Method "+b+" does not exist on CswFieldTypeLogical")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("logicalsetxml");d=a("<div />").appendTo(d);var e=[],h=0;f.find("item").first().children("column").each(function(){var i=a(this).attr("field");if(i!=="name"&&i!="key"){e[h]=i;h++}});var j=[],m=0;f.find("item").each(function(){for(var i=a(this),n=[],k=0,l=0;l<e.length;l++){var t=i.children('column[field="'+e[l]+'"]').attr("value");n[k]=t==="True";k++}i={label:i.children('column[field="name"]').attr("value"),
key:i.children('column[field="key"]').attr("value"),values:n};j[m]=i;m++});d.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:e,data:j,onchange:b.onchange})},save:function(b){var d=b.$propxml.children("logicalsetxml");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var f=0;f<b.length;f++)for(var e=0;e<b[f].length;e++){var h=b[f][e],j=d.find('item:has(column[field="key"][value="'+h.key+'"])').find('column[field="'+h.collabel+'"]');if(h.checked&&j.attr("value")==="False")j.attr("value",
"True");else!h.checked&&j.attr("value")==="True"&&j.attr("value","False")}}};a.fn.CswFieldTypeLogicalSet=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeLogicalSet")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("text").text().trim(),e=b.$propxml.children("text").attr("rows"),h=b.$propxml.children("text").attr("columns");if(b.ReadOnly)d.append(f);else{d=a('<textarea id="'+b.ID+'" name="'+b.ID+'" rows="'+e+'" cols="'+h+'">'+f+"</textarea>").appendTo(d).change(b.onchange);b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("textarea");b.$propxml.children("text").text(d.val())}};a.fn.CswFieldTypeMemo=
function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeMemo")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("startdatetime").text().trim(),e=b.$propxml.children("value").text().trim(),h=b.$propxml.children("units").text().trim();d=d.CswTable("init",{ID:b.ID+"_tbl"});var j=d.CswTable("cell",1,1),m=d.CswTable("cell",1,2);j.append(e+"&nbsp;"+h);if(!b.ReadOnly){m.CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID,onClick:function(){i.show()}});var i=d.CswTable("cell",2,2).CswTable("init",
{ID:b.ID+"_edittbl"});i.CswTable("cell",1,1).append("Start Date");i.CswTable("cell",1,2).CswInput("init",{ID:b.ID+"_sd",type:CswInput_Types.text,cssclass:"textinput date",value:f,onChange:b.onchange}).datepicker();i.CswTable("cell",3,1).append("Units");b=a('<select id="'+b.ID+'_units" />').appendTo(i.CswTable("cell",3,2)).change(b.onchange);f=a('<option value="hours">hours</option>').appendTo(b);h==="hours"&&f.attr("selected","true");b=a('<option value="days">days</option>').appendTo(b);h==="days"&&
b.attr("selected","true");i.hide()}},save:function(b){var d=b.$propdiv.find("#"+b.ID+"_sd").val(),f=b.$propdiv.find("#"+b.ID+"_units").val();b.$propxml.children("startdatetime").text(d);b.$propxml.children("units").text(f)}};a.fn.CswFieldTypeMTBF=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeMTBF")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("options");b.$propxml.children("NodeType").text().trim();var e=b.$propxml.children("NodeType").attr("SelectMode");d=a("<div />").appendTo(d);var h=[],j=0;f.find("item").each(function(){var m=a(this);m={label:m.children('column[field="NodeTypeName"]').attr("value"),key:m.children('column[field="nodetypeid"]').attr("value"),values:[m.children('column[field="Include"]').attr("value")==="True"]};h[j]=m;
j++});d.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:["Include"],data:h,UseRadios:e==="Single",Required:b.Required,onchange:b.onchange})},save:function(b){var d=b.$propxml.children("options");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var f=0;f<b.length;f++){var e=b[f][0],h=d.find('item:has(column[field="nodetypeid"][value="'+e.key+'"])').find('column[field="Include"]');if(e.checked&&h.attr("value")==="False")h.attr("value","True");else!e.checked&&h.attr("value")===
"True"&&h.attr("value","False")}}};a.fn.CswFieldTypeNodeTypeSelect=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeNodeTypeSelect")}})(jQuery);(function(a){var g={init:function(b){a(this).CswNumberTextBox({ID:b.ID,Value:b.$propxml.children("value").text().trim(),MinValue:b.$propxml.children("value").attr("minvalue"),MaxValue:b.$propxml.children("value").attr("maxvalue"),Precision:b.$propxml.children("value").attr("precision"),ReadOnly:b.ReadOnly,Required:b.Required,onchange:b.onchange})},save:function(b){b.$propxml.children("value").text(b.$propdiv.CswNumberTextBox("value"))}};a.fn.CswFieldTypeNumber=function(b){if(g[b])return g[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeNumber")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();if(!b.ReadOnly){var f=d.CswTable("init",{ID:b.ID+"_tbl"});d=f.CswTable("cell",1,1);f=f.CswTable("cell",2,1);d.CswInput("init",{ID:b.ID+"_pwd1",type:CswInput_Types.password,cssclass:"textinput",onChange:b.onchange});f.CswInput("init",{ID:b.ID+"_pwd2",type:CswInput_Types.password,cssclass:"textinput password2",onChange:b.onchange});jQuery.validator.addMethod("password2",function(){var e=a("#"+b.ID+"_pwd1").val(),h=a("#"+b.ID+"_pwd2").val();
return e===""&&h===""||e===h},"Passwords do not match!")}},save:function(b){var d=b.$propdiv.find("input#"+b.ID+"_pwd1").val();d!==""&&b.$propxml.children("newpassword").text(d)}};a.fn.CswFieldTypePassword=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypePassword")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("value").text().trim();f+="&nbsp;";a('<div id="'+b.ID+'" class="staticvalue">'+f+"</div>").appendTo(d)},save:function(){}};a.fn.CswFieldTypePropertyReference=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypePropertyReference")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();d.CswNumberTextBox({ID:b.ID+"_qty",Value:b.$propxml.children("value").text().trim(),MinValue:b.$propxml.children("value").attr("minvalue"),MaxValue:b.$propxml.children("value").attr("maxvalue"),Precision:b.$propxml.children("value").attr("precision"),ReadOnly:b.ReadOnly,Required:b.Required,onchange:b.onchange});var f=b.$propxml.children("units").contents().first().text(),e=a('<select id="'+b.ID+'_units" />').appendTo(d).change(b.onchange);
b.$propxml.children("units").children().each(function(){var h=a(this).attr("value"),j=a('<option value="'+h+'">'+h+"</option>").appendTo(e);f===h&&j.attr("selected","true")})},save:function(b){b.$propxml.children("value").text(b.$propdiv.CswNumberTextBox("value"));var d=b.$propdiv.find("#"+b.ID+"_units").val();b.$propxml.children("units").text(d)}};a.fn.CswFieldTypeQuantity=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,
arguments);else a.error("Method "+b+" does not exist on CswFieldTypeQuantity")}})(jQuery);(function(a){function g(d,f,e,h){d=d.split(",");var j=true,m=f.val(),i=h.val();if(m!==""&&i===""){j=false;for(var n=0;n<d.length;n++)if(d[n]===m)j=true}if(j){f.removeClass("CswFieldTypeQuestion_OOC");if(i===""){e.hide();h.hide()}}else{f.addClass("CswFieldTypeQuestion_OOC");e.show();h.show()}}var b={init:function(d){var f=a(this);f.contents().remove();var e=d.$propxml.children("answer").text().trim(),h=d.$propxml.children("allowedanswers").text().trim(),j=d.$propxml.children("compliantanswers").text().trim(),
m=d.$propxml.children("comments").text().trim(),i=d.$propxml.children("correctiveaction").text().trim(),n=d.$propxml.children("dateanswered").text().trim(),k=d.$propxml.children("datecorrected").text().trim();d.$propxml.children("iscompliant").text().trim();if(d.ReadOnly){f.append("Answer: "+e);n!==""&&f.append(" ("+n+")");f.append("<br/>");f.append("Corrective Action: "+i);k!==""&&f.append(" ("+k+")");f.append("<br/>");f.append("Comments: "+m+"<br/>")}else{f=f.CswTable("init",{ID:d.ID+"_tbl",FirstCellRightAlign:true});
f.CswTable("cell",1,1).append("Answer");h=h.split(",");var l=a('<select id="'+d.ID+'_ans" />').appendTo(f.CswTable("cell",1,2)).change(function(){g(j,l,s,w);d.onchange()});n=a('<option value=""></option>').appendTo(l);for(k=0;k<h.length;k++){var t=h[k];n=a('<option value="'+t+'">'+t+"</option>").appendTo(l);t===e&&n.attr("selected","true")}var s=f.CswTable("cell",2,1).append("Corrective Action"),w=a('<textarea id="'+d.ID+'_cor" />').appendTo(f.CswTable("cell",2,2)).text(i).change(function(){g(j,l,
s,w);d.onchange()});f.CswTable("cell",3,1).append("Comments");a('<textarea id="'+d.ID+'_com" />').appendTo(f.CswTable("cell",3,2)).text(m).change(d.onchange);g(j,l,s,w)}},save:function(d){var f=d.$propdiv.find("#"+d.ID+"_ans").val(),e=d.$propdiv.find("#"+d.ID+"_cor").val(),h=d.$propdiv.find("#"+d.ID+"_com").val();d.$propxml.children("answer").text(f);d.$propxml.children("correctiveaction").text(e);d.$propxml.children("comments").text(h)}};a.fn.CswFieldTypeQuestion=function(d){if(b[d])return b[d].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswFieldTypeQuestion")}})(jQuery);(function(a){a.fn.CswFieldTypeRelationship=function(g){var b={init:function(d){var f=a(this);f.contents().remove();var e=d.$propxml.children("nodeid").text().trim();if(d.relatednodeid!==""&&d.relatednodeid!==undefined&&(e===""||e===undefined))e=d.relatednodeid;var h=d.$propxml.children("name").text().trim(),j=d.$propxml.children("nodetypeid").text().trim(),m=d.$propxml.children("options");if(d.ReadOnly)f.append(h);else{f=f.CswTable("init",{ID:d.ID+"_tbl"});h=f.CswTable("cell",1,1);var i=a('<select id="'+
d.ID+'" name="'+d.ID+'" class="selectinput" />"').appendTo(h).change(d.onchange);m.children().each(function(){var n=a(this);i.append('<option value="'+n.attr("id")+'">'+n.attr("value")+"</option>")});i.val(e);if(j!==""){e=f.CswTable("cell",1,2);a("<div />").appendTo(e).CswImageButton({ButtonType:CswImageButton_ButtonType.Add,AlternateText:"Add New",onClick:function(){a.CswDialog("AddNodeDialog",{nodetypeid:j,onAddNode:function(){d.onReload()}});return CswImageButton_ButtonType.None}})}d.Required&&
i.addClass("required")}},save:function(d){var f=d.$propdiv.find("select");d.$propxml.children("nodeid").text(f.val())}};if(b[g])return b[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return b.init.apply(this,arguments);else a.error("Method "+g+" does not exist on CswFieldTypeRelationship")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("sequence").text().trim();if(b.ReadOnly)d.append(f);else{d=d.CswInput("init",{ID:b.ID,type:CswInput_Types.text,cssclass:"textinput",onChange:b.onchange,value:f});b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("sequence").text(d.val())}};a.fn.CswFieldTypeSequence=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));
else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeSequence")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("text").text().trim(),e=parseInt(b.$propxml.children("text").attr("columns"));b=parseInt(b.$propxml.children("text").attr("rows"));var h="auto",j="",m="";if(e>0&&b>0){h="scroll";j=Math.round(e+2-e/2.25)+"em";m=Math.round(b+2.5+b/5)+"em"}else if(e>0)j=Math.round(e-e/2.25)+"em";else if(b>0)m=Math.round(b+0.5+b/5)+"em";a('<div class="staticvalue" style="overflow: '+h+"; width: "+j+"; height: "+m+';">'+
f+"</div>").appendTo(d)},save:function(){}};a.fn.CswFieldTypeStatic=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeStatic")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("text").text().trim(),e=b.$propxml.children("text").attr("length");if(b.ReadOnly)d.append(f);else{d=d.CswInput("init",{ID:b.ID,type:CswInput_Types.text,value:f,cssclass:"textinput",width:e,onChange:b.onchange});b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("text").text(d.val())}};a.fn.CswFieldTypeText=function(b){if(g[b])return g[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeText")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("value").text().trim();if(b.ReadOnly)d.append(f);else{var e=d.CswInput("init",{ID:b.ID,type:CswInput_Types.text,cssclass:"textinput validateTime",onChange:b.onchange,value:f});d.CswButton("init",{ID:b.ID+"_now",disableOnClick:false,onclick:function(){e.val(getTimeString(new Date))},enabledText:"Now"});jQuery.validator.addMethod("validateTime",function(h,j){return this.optional(j)||validateTime(a(j).val())},
"Enter a valid time (e.g. 12:30 PM)");b.Required&&e.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("value").text(d.val())}};a.fn.CswFieldTypeTime=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeTime")}})(jQuery);(function(a){function g(e,h,j){e=e.CswTable("init",{ID:h,cellalign:"center"});e.CswTable("cell",1,1).append("Su");e.CswTable("cell",1,2).append("M");e.CswTable("cell",1,3).append("Tu");e.CswTable("cell",1,4).append("W");e.CswTable("cell",1,5).append("Th");e.CswTable("cell",1,6).append("F");e.CswTable("cell",1,7).append("Sa");for(var m=1;m<=7;m++)e.CswTable("cell",2,m).CswInput("init",{ID:h+"_"+m,type:CswInput_Types.checkbox,onChange:j,value:m})}function b(e,h){a('[name="'+e+'"]').attr("checked","");
for(var j=h.split(","),m=0;m<j.length;m++)switch(j[m]){case "Sunday":a("#"+e+"_1").attr("checked","true");break;case "Monday":a("#"+e+"_2").attr("checked","true");break;case "Tuesday":a("#"+e+"_3").attr("checked","true");break;case "Wednesday":a("#"+e+"_4").attr("checked","true");break;case "Thursday":a("#"+e+"_5").attr("checked","true");break;case "Friday":a("#"+e+"_6").attr("checked","true");break;case "Saturday":a("#"+e+"_7").attr("checked","true")}}function d(e){var h="";a('[name="'+e+'"]').each(function(){var j=
a(this);if(j.attr("checked")!==""){if(h!=="")h+=",";switch(j.attr("value")){case "1":h+="Sunday";break;case "2":h+="Monday";break;case "3":h+="Tuesday";break;case "4":h+="Wednesday";break;case "5":h+="Thursday";break;case "6":h+="Friday";break;case "7":h+="Saturday"}}});return h}var f={init:function(e){var h=a(this);h.contents().remove();var j=e.$propxml.children("Interval").attr("text");h.append('<span id="'+e.ID+'_textvalue">'+j+"</span>");if(!e.ReadOnly){var m=h.CswTable("init",{ID:e.ID+"_tbl",
cellspacing:5});h=m.CswTable("cell",1,1).CswInput("init",{ID:e.ID+"_type_weekly",name:e.ID+"_type",type:CswInput_Types.radio,value:"weekly"});m.CswTable("cell",1,2).append("<span>&nbsp;Weekly</span>");h.click(function(){k.show();l.hide();N.hide();e.onchange()});j=m.CswTable("cell",2,1).CswInput("init",{ID:e.ID+"_type_monthly",name:e.ID+"_type",type:CswInput_Types.radio,value:"monthly"});m.CswTable("cell",2,2).append("<span>&nbsp;Monthly</span>");j.click(function(){k.hide();l.show();N.hide();e.onchange()});
var i=m.CswTable("cell",3,1).CswInput("init",{ID:e.ID+"_type_yearly",name:e.ID+"_type",type:CswInput_Types.radio,value:"yearly"});m.CswTable("cell",3,2).append("<span>&nbsp;Yearly</span>");i.click(function(){k.hide();l.hide();N.show();e.onchange()});var n=m.CswTable("cell",1,3);n.attr("rowspan","3");var k=a("<div />").appendTo(n).addClass("CswFieldTypeTimeInterval_Div");m=k.CswTable("init",{ID:e.ID+"_weeklytbl",cellalign:"center",FirstCellRightAlign:true});m.CswTable("cell",1,1).append("Every:");
g(m.CswTable("cell",1,2),e.ID+"_weeklyday",e.onchange);m.CswTable("cell",2,1).append("Starting On:");m=m.CswTable("cell",2,2).CswInput("init",{ID:e.ID+"_weekly_sd",type:CswInput_Types.text,cssclass:"textinput date",onChange:e.onchange});m.datepicker();var l=a("<div />").appendTo(n).addClass("CswFieldTypeTimeInterval_Div");l.append("Every ");for(var t=a('<select id="'+e.ID+'_monthly_rate"/>').appendTo(l).change(e.onchange),s=1;s<=12;s++)t.append('<option value="'+s+'">'+s+"</option>");l.append(" Month(s)<br/>");
var w=l.CswInput("init",{ID:e.ID+"_monthly_by_date",name:e.ID+"_monthly",type:CswInput_Types.radio,onChange:e.onchange,value:"MonthlyByDate"});l.append("On Day of Month:&nbsp;");var C=a('<select id="'+e.ID+'_monthly_date" />').appendTo(l).change(e.onchange);for(s=1;s<=31;s++)C.append('<option value="'+s+'">'+s+"</option>");l.append("<br/>");var v=l.CswInput("init",{ID:e.ID+"_monthly_by_day",name:e.ID+"_monthly",type:CswInput_Types.radio,onChange:e.onchange,value:"MonthlyByWeekAndDay"});l.append("Every&nbsp;");
var u=a('<select id="'+e.ID+'_monthly_week" />').appendTo(l);u.append('<option value="1">First:</option>');u.append('<option value="2">Second:</option>');u.append('<option value="3">Third:</option>');u.append('<option value="4">Fourth:</option>');l.append("<br/>");g(l,e.ID+"_monthly_day",e.onchange);l.append("<br/>Starting On:&nbsp;");var A=a('<select id="'+e.ID+'_monthly_startMonth" />').appendTo(l).change(e.onchange);for(s=1;s<=12;s++)A.append('<option value="'+s+'">'+s+"</option>");l.append("/");
var E=a('<select id="'+e.ID+'_monthly_startYear" />').appendTo(l).change(e.onchange),P=(new Date).getFullYear();for(s=P-10;s<=P+10;s++)E.append('<option value="'+s+'">'+s+"</option>");E.val(P);var N=a("<div />").appendTo(n).addClass("CswFieldTypeTimeInterval_Div");N.append("Every Year, Starting On:<br/>");n=N.CswInput("init",{ID:e.ID+"_yearly_sd",type:CswInput_Types.text,cssclass:"textinput date",onChange:e.onchange});n.datepicker();s=e.$propxml.children("interval").children("rateintervalvalue");
switch(s.children("ratetype").text()){case "WeeklyByDay":h.attr("checked","true");k.show();l.hide();N.hide();b(e.ID+"_weeklyday",s.children("weeklyday").text());m.val(s.children("startingdate").text());w.attr("checked","true");break;case "MonthlyByDate":j.attr("checked","true");k.hide();l.show();N.hide();w.attr("checked","true");t.val(s.children("monthlyfrequency").text());C.val(s.children("monthlydate").text());A.val(s.children("startingmonth").text());E.val(s.children("startingyear").text());break;
case "MonthlyByWeekAndDay":j.attr("checked","true");k.hide();l.show();N.hide();v.attr("checked","true");u.val(s.children("monthlyweek").text());b(e.ID+"_monthly_day",s.children("monthlyday").text());A.val(s.children("startingmonth").text());E.val(s.children("startingyear").text());break;case "YearlyByDate":i.attr("checked","true");k.hide();l.show();N.hide();n.val(s.children("yearlydate").text());w.attr("checked","true")}}},save:function(e){var h=a('[name="'+e.ID+'_type"]:checked').attr("value");e.$propxml.children().remove();
var j=a("<interval />").appendTo(e.$propxml),m=a("<rateintervalvalue />").appendTo(j);switch(h){case "weekly":a("<ratetype>WeeklyByDay</ratetype>").appendTo(m);a("<weeklyday>"+d(e.ID+"_weeklyday")+"</weeklyday>").appendTo(m);a("<startingdate>"+a("#"+e.ID+"_weekly_sd").val()+"</startingdate>").appendTo(m);break;case "monthly":h=a('[name="'+e.ID+'_monthly_by"]:checked').attr("value");a("<ratetype>"+h+"</ratetype>").appendTo(m);a("<monthlyfrequency>"+a("#"+e.ID+"_monthly_rate").val()+"</monthlyfrequency>").appendTo(m);
if(h==="MonthlyByDate")a("<monthlydate>"+a("#"+e.ID+"_monthly_date").val()+"</monthlydate>").appendTo(m);else{a("<monthlyweek>"+a("#"+e.ID+"_monthly_week").val()+"</monthlyweek>").appendTo(m);a("<monthlyday>"+d(e.ID+"_monthly_day")+"</monthlyday>").appendTo(m)}a("<startingmonth>"+a("#"+e.ID+"_monthly_startMonth").val()+"</startingmonth>").appendTo(m);a("<startingyear>"+a("#"+e.ID+"_monthly_startYear").val()+"</startingyear>").appendTo(m);break;case "yearly":a("<ratetype>YearlyByDate</ratetype>").appendTo(m);
a("<yearlydate>"+a("#"+e.ID+"_yearly_sd").val()+"</yearlydate>").appendTo(m)}j.find("*").andSelf().each(function(){a(this).attr("xmlns","")})}};a.fn.CswFieldTypeTimeInterval=function(e){if(f[e])return f[e].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof e==="object"||!e)return f.init.apply(this,arguments);else a.error("Method "+e+" does not exist on CswFieldTypeTimeInterval")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();b.$propxml.children("NodeId").text().trim();var f=b.$propxml.children("options");d=a("<div />").appendTo(d);var e=[],h=0;f.children().each(function(){var j=a(this);j={label:j.children('column[field="User Name"]').attr("value"),key:j.children('column[field="UserId"]').attr("value"),values:[j.children('column[field="Include"]').attr("value")==="True"]};e[h]=j;h++});d.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:["Include"],data:e,
UseRadios:false,Required:b.Required,onchange:b.onchange})},save:function(b){var d=b.$propxml.children("options");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var f=0;f<b.length;f++){var e=b[f][0],h=d.find('user:has(column[field="UserId"][value="'+e.key+'"])').find('column[field="Include"]');if(e.checked&&h.attr("value")==="False")h.attr("value","True");else!e.checked&&h.attr("value")==="True"&&h.attr("value","False")}}};a.fn.CswFieldTypeUserSelect=function(b){if(g[b])return g[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeUserSelect")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();b.$propxml.children("viewid").text().trim();var f=b.$propxml.children("options"),e=b.$propxml.children("viewid").attr("SelectMode");d=a("<div />").appendTo(d);var h=[],j=0;f.children().each(function(){var m=a(this);m={label:m.children('column[field="View Name"]').attr("value"),key:m.children('column[field="nodeviewid"]').attr("value"),values:[m.children('column[field="Include"]').attr("value")==="True"]};h[j]=m;j++});d.CswCheckBoxArray("init",
{ID:b.ID+"_cba",cols:["Include"],data:h,UseRadios:e==="Single",Required:b.Required,onchange:b.onchange})},save:function(b){var d=b.$propxml.children("options");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var f=0;f<b.length;f++){var e=b[f][0],h=d.find('user:has(column[field="nodeviewid"][value="'+e.key+'"])').find('column[field="Include"]');if(e.checked&&h.attr("value")==="False")h.attr("value","True");else!e.checked&&h.attr("value")==="True"&&h.attr("value",
"False")}}};a.fn.CswFieldTypeViewPickList=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeViewPickList")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("viewid").text().trim(),e=b.$propxml.children("viewmode").text().trim().toLowerCase();b.$propxml.children("name").text().trim();d=d.CswTable("init",{ID:b.ID+"_tbl"});d.CswTable("cell",1,1).CswImageButton({ID:b.ID+"_view",ButtonType:CswImageButton_ButtonType.View,AlternateText:"View",Required:b.Required,onClick:function(){a.CswCookie("set",CswCookieName.CurrentView.ViewId,f);a.CswCookie("set",CswCookieName.CurrentView.ViewMode,
e);a.CswCookie("clear",CswCookieName.CurrentNode.NodeId,b.viewid);a.CswCookie("clear",CswCookieName.CurrentNode.NodeKey,b.viewmode);window.location="NewMain.html";return CswImageButton_ButtonType.None}});b.ReadOnly||d.CswTable("cell",1,2).CswImageButton({ID:b.ID+"_edit",ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",Required:b.Required,onClick:function(){window.location="EditView.aspx?step=2&return=NewMain.html&viewid="+f;return CswImageButton_ButtonType.None}})},save:function(){}};
a.fn.CswFieldTypeViewReference=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeViewReference")}})(jQuery);$.CswFieldTypeFactory=function(a){var g={nodeid:"",fieldtype:"",$propdiv:"",$propxml:"",onchange:function(){},onReload:function(){},cswnbtnodekey:"",ID:"",Required:"",ReadOnly:"",EditMode:"Edit"},b={make:function(d){d&&$.extend(g,d);g.ID=g.$propxml.attr("id");g.Required=g.$propxml.attr("required")==="true"||g.Required;g.ReadOnly=g.$propxml.attr("readonly")==="true"||g.ReadOnly||g.EditMode==="PrintReport";switch(g.fieldtype){case "Barcode":g.$propdiv.CswFieldTypeBarcode("init",g);break;case "Composite":g.$propdiv.CswFieldTypeComposite("init",
g);break;case "Date":g.$propdiv.CswFieldTypeDate("init",g);break;case "File":g.$propdiv.CswFieldTypeFile("init",g);break;case "Grid":g.$propdiv.CswFieldTypeGrid("init",g);break;case "Image":g.$propdiv.CswFieldTypeImage("init",g);break;case "Link":g.$propdiv.CswFieldTypeLink("init",g);break;case "List":g.$propdiv.CswFieldTypeList("init",g);break;case "Location":g.$propdiv.CswFieldTypeLocation("init",g);break;case "LocationContents":g.$propdiv.CswFieldTypeLocationContents("init",g);break;case "Logical":g.$propdiv.CswFieldTypeLogical("init",
g);break;case "LogicalSet":g.$propdiv.CswFieldTypeLogicalSet("init",g);break;case "Memo":g.$propdiv.CswFieldTypeMemo("init",g);break;case "MTBF":g.$propdiv.CswFieldTypeMTBF("init",g);break;case "NodeTypeSelect":g.$propdiv.CswFieldTypeNodeTypeSelect("init",g);break;case "Number":g.$propdiv.CswFieldTypeNumber("init",g);break;case "Password":g.$propdiv.CswFieldTypePassword("init",g);break;case "PropertyReference":g.$propdiv.CswFieldTypePropertyReference("init",g);break;case "Quantity":g.$propdiv.CswFieldTypeQuantity("init",
g);break;case "Question":g.$propdiv.CswFieldTypeQuestion("init",g);break;case "Relationship":g.$propdiv.CswFieldTypeRelationship("init",g);break;case "Sequence":g.$propdiv.CswFieldTypeSequence("init",g);break;case "Static":g.$propdiv.CswFieldTypeStatic("init",g);break;case "Text":g.$propdiv.CswFieldTypeText("init",g);break;case "Time":g.$propdiv.CswFieldTypeTime("init",g);break;case "TimeInterval":g.$propdiv.CswFieldTypeTimeInterval("init",g);break;case "UserSelect":g.$propdiv.CswFieldTypeUserSelect("init",
g);break;case "ViewPickList":g.$propdiv.CswFieldTypeViewPickList("init",g);break;case "ViewReference":g.$propdiv.CswFieldTypeViewReference("init",g);break;default:g.$propdiv.append(g.$propxml.attr("init",g))}},save:function(d){d&&$.extend(g,d);g.ID=g.$propxml.attr("id");g.Required=g.$propxml.attr("required")==="true";g.ReadOnly=g.$propxml.attr("readonly")==="true";switch(g.fieldtype){case "Barcode":g.$propdiv.CswFieldTypeBarcode("save",g);break;case "Composite":g.$propdiv.CswFieldTypeComposite("save",
g);break;case "Date":g.$propdiv.CswFieldTypeDate("save",g);break;case "File":g.$propdiv.CswFieldTypeFile("save",g);break;case "Grid":g.$propdiv.CswFieldTypeGrid("save",g);break;case "Image":g.$propdiv.CswFieldTypeImage("save",g);break;case "Link":g.$propdiv.CswFieldTypeLink("save",g);break;case "List":g.$propdiv.CswFieldTypeList("save",g);break;case "Location":g.$propdiv.CswFieldTypeLocation("save",g);break;case "LocationContents":g.$propdiv.CswFieldTypeLocationContents("save",g);break;case "Logical":g.$propdiv.CswFieldTypeLogical("save",
g);break;case "LogicalSet":g.$propdiv.CswFieldTypeLogicalSet("save",g);break;case "Memo":g.$propdiv.CswFieldTypeMemo("save",g);break;case "MTBF":g.$propdiv.CswFieldTypeMTBF("save",g);break;case "NodeTypeSelect":g.$propdiv.CswFieldTypeNodeTypeSelect("save",g);break;case "Number":g.$propdiv.CswFieldTypeNumber("save",g);break;case "Password":g.$propdiv.CswFieldTypePassword("save",g);break;case "PropertyReference":g.$propdiv.CswFieldTypePropertyReference("save",g);break;case "Quantity":g.$propdiv.CswFieldTypeQuantity("save",
g);break;case "Question":g.$propdiv.CswFieldTypeQuestion("save",g);break;case "Relationship":g.$propdiv.CswFieldTypeRelationship("save",g);break;case "Sequence":g.$propdiv.CswFieldTypeSequence("save",g);break;case "Static":g.$propdiv.CswFieldTypeStatic("save",g);break;case "Text":g.$propdiv.CswFieldTypeText("save",g);break;case "Time":g.$propdiv.CswFieldTypeTime("save",g);break;case "TimeInterval":g.$propdiv.CswFieldTypeTimeInterval("save",g);break;case "UserSelect":g.$propdiv.CswFieldTypeUserSelect("save",
g);break;case "ViewPickList":g.$propdiv.CswFieldTypeViewPickList("save",g);break;case "ViewReference":g.$propdiv.CswFieldTypeViewReference("save",g)}}};if(b[a])return b[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return b.init.apply(this,arguments);else $.error("Method "+a+" does not exist on "+PluginName)};
