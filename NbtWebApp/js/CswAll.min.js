(function(a){function g(d){d.length>0&&d.button({label:d.attr("disabledText"),disabled:true})}var b={init:function(d){var f={ID:"",enabledText:"",disabledText:"",hasText:true,disableOnClick:true,inputType:"button",primaryicon:"",secondaryicon:"",ReadOnly:false,onclick:function(){}};d&&a.extend(f,d);d=a(this);var e=a("<input />").attr("type",f.inputType).attr("id",f.ID).attr("name",f.ID);e.attr("enabledText",f.enabledText);e.attr("disabledText",f.disabledText);var h={text:f.hasText,label:f.enabledText,
disabled:f.ReadOnly,icons:{primary:f.primaryicon,secondary:f.secondaryicon}};if(h.disabled)h.label=f.disabledText;e.button(h).click(function(){f.disableOnClick&&g(e);f.onclick()});d.append(e);return e},enable:function(){var d=a(this);d.length>0&&d.button({label:d.attr("enabledText"),disabled:false})},disable:function(){var d=a(this);g(d)}};a.fn.CswButton=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);
else a.error("Method "+d+" does not exist on CswButton")}})(jQuery);(function(a){a.fn.CswCheckBoxArray=function(g){var b={init:function(d){var f={ID:"",cols:["col1","col2","col3"],data:[{label:"row1",key:1,values:[true,false,true]},{label:"row2",key:2,values:[false,true,false]},{label:"row3",key:3,values:[true,false,true]}],HeightInRows:4,UseRadios:false,Required:false,onchange:function(){}};d&&a.extend(f,d);var e="checkbox";if(f.UseRadios)e="radio";d=a(this);d.contents().remove();var h=a("<div/>").appendTo(d),j=h.CswTable("init",{ID:f.ID+"_tbl"});h.css("height",
25*f.HeightInRows+"px");h.addClass("cbarraydiv");j.addClass("cbarraytable");h=1;for(var m=0;m<f.cols.length;m++){var i=j.CswTable("cell",h,m+2);i.addClass("cbarraycell");i.append(f.cols[m])}h++;if(f.UseRadios&&!f.Required){m=j.CswTable("cell",h,1);m.addClass("cbarraycell");m.append("[none]");for(m=0;m<f.cols.length;m++){i=j.CswTable("cell",h,m+2);i.addClass("cbarraycell");var k=f.ID+"_none";i=a('<input type="'+e+'" class="CBACheckBox_'+f.ID+'" id="'+k+'" name="'+f.ID+'" />').appendTo(i).click(f.onchange);
i.attr("key","");i.attr("rowlabel","[none]");i.attr("collabel",f.cols[m]);i.attr("row",-1);i.attr("col",m);i.attr("checked","true")}}h++;for(var n=0;n<f.data.length;n++){var l=f.data[n];m=j.CswTable("cell",h+n,1);m.addClass("cbarraycell");m.append(l.label);for(m=0;m<f.cols.length;m++){i=j.CswTable("cell",h+n,m+2);i.addClass("cbarraycell");k=f.ID+"_"+n+"_"+m;i=a('<input type="'+e+'" class="CBACheckBox_'+f.ID+'" id="'+k+'" name="'+f.ID+'" />').appendTo(i).click(f.onchange);i.attr("key",l.key);i.attr("rowlabel",
l.label);i.attr("collabel",f.cols[m]);i.attr("row",n);i.attr("col",m);l.values[m]&&i.attr("checked","true")}}if(!f.UseRadios){e="Check All";if(a(".CBACheckBox_"+f.ID).not(":checked").length===0)e="Uncheck All";var t=a('<div style="text-align: right"><a href="#">'+e+"</a></div>").appendTo(d).children("a");t.click(function(){var s=f.ID;if(a(".CBACheckBox_"+s).not(":checked").length>0){a(".CBACheckBox_"+s).attr("checked","checked");t.text("Uncheck all")}else{a(".CBACheckBox_"+s).removeAttr("checked");
t.text("Check all")}return false})}},getdata:function(d){var f={ID:""};d&&a.extend(f,d);var e=[];a(this).find(".CBACheckBox_"+f.ID).each(function(){var h=a(this),j=parseInt(h.attr("row")),m=parseInt(h.attr("col"));if(e[j]===undefined)e[j]=[];e[j][m]={key:h.attr("key"),rowlabel:h.attr("rowlabel"),collabel:h.attr("collabel"),checked:h.attr("checked")}});return e}};if(b[g])return b[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return b.init.apply(this,arguments);
else a.error("Method "+g+" does not exist on "+PluginName)}})(jQuery);(function(a){a.fn.CswComboBox=function(g){function b(f,e){f.toggleClass("CswComboBox_TopDiv_click");e.toggle()}var d={init:function(f){var e={ID:"",TopContent:"",SelectContent:"This ComboBox Is Empty!",Width:"180px"};f&&a.extend(e,f);f=a(this);f.contents().remove();var h=a('<div id="'+e.ID+'_top" class="CswComboBox_TopDiv"></div>').appendTo(f).attr("style","width: "+e.Width),j=h.CswTable("init",{ID:e.ID+"_tbl"});j.attr("width","100%");$cell1=j.CswTable("cell",1,1);$cell1.attr("width","100%");$cell1.append(e.TopContent);
$cell2=j.CswTable("cell",1,2);$cell2.addClass("CswComboBox_ImageCell");var m=a('<div id="'+e.ID+'_child" class="CswComboBox_ChildDiv">').appendTo(f).attr("style","width: "+e.Width).append(e.SelectContent);$cell1.click(function(){b(h,m)});$cell2.CswImageButton({ButtonType:CswImageButton_ButtonType.Select,ID:e.ID+"_top_img",AlternateText:"",onClick:function(){b(h,m)}})},TopContent:function(f){var e=a(this).children(".CswComboBox_TopDiv").children("table").CswTable("cell",1,1);e.text("");e.contents().remove();
e.append(f)},toggle:function(){var f=a(this),e=f.children(".CswComboBox_TopDiv");f=f.children(".CswComboBox_ChildDiv");b(e,f)},close:function(){var f=a(this),e=f.children(".CswComboBox_TopDiv");f=f.children(".CswComboBox_ChildDiv");e.removeClass("CswComboBox_TopDiv_click");f.hide()}};if(d[g])return d[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return d.init.apply(this,arguments);else a.error("Method "+g+" does not exist on "+PluginName)}})(jQuery);var CswCookieName={SessionId:"CswSessionId",Username:"csw_username",CurrentView:{ViewId:"csw_currentviewid",ViewMode:"csw_currentviewmode"},CurrentNode:{NodeId:"csw_currentnodeid",NodeKey:"csw_currentnodekey"},CurrentTabId:"csw_currenttabid"};
(function(a){a.CswCookie=function(g){var b={get:function(d){d=a.cookie(d);if(d==undefined)d="";return d},set:function(d,f){a.cookie(d,f)},clear:function(d){a.cookie(d,"")},clearAll:function(){for(var d in CswCookieName)if(CswCookieName.hasOwnProperty(d)){a.cookie(CswCookieName[d],null);for(var f in CswCookieName[d])CswCookieName[d].hasOwnProperty(f)&&a.cookie(CswCookieName[d][f],null)}}};if(b[g])return b[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return b.init.apply(this,
arguments);else a.error("Method "+g+" does not exist on CswCookie")}})(jQuery);(function(a){a.fn.CswDashboard=function(g){var b={Url:"/NbtWebApp/wsNBT.asmx/getDashboard",onSuccess:function(){}};g&&a.extend(b,g);var d=a(this);CswAjaxXml({url:b.Url,data:"",success:function(f){var e=d.CswTable("init",{ID:"DashboardTable"});e.addClass("DashboardTable");var h=e.append("<tr />");f.children().each(function(){var j=a(this),m="";m=j.attr("href")!==undefined?'<td class="DashboardCell">  <a target="_blank" href="'+j.attr("href")+'">    <div title="'+j.attr("text")+'" id="'+j.attr("id")+
'" class="'+j.attr("id")+'" />  </a></td>':'<td class="DashboardCell">  <div title="'+j.attr("text")+'" id="'+j.attr("id")+'" class="'+j.attr("id")+'" /></td>';h.append(m)});b.onSuccess()}});return this}})(jQuery);(function(a){function g(d,f,e){d.dialog({modal:true,width:f,height:e,close:function(){d.remove()}})}var b={AddWelcomeItemDialog:function(d){var f={onAdd:function(){}};d&&a.extend(f,d);var e=a("<div></div>");e.CswWelcome("getAddItemForm",{onAdd:function(){e.dialog("close");f.onAdd()}});g(e,400,400)},AddViewDialog:function(d){var f={ID:"addviewdialog",onAddView:function(){},makeVisibilitySelect:function(){}};d&&a.extend(f,d);var e=a("<div></div>");d=e.CswTable("init",{ID:f.ID+"_tbl",FirstCellRightAlign:true});
d.CswTable("cell",1,1).append("Name:");var h=d.CswTable("cell",1,2).CswInput("init",{ID:f.ID+"_nametb",type:CswInput_Types.text,cssclass:"textinput"});d.CswTable("cell",2,1).append("Display Mode:");var j=a('<select id="'+f.ID+'_dmsel" />').appendTo(d.CswTable("cell",2,2));j.append('<option value="List">List</option>');j.append('<option value="Tree">Tree</option>');j.append('<option value="Grid">Grid</option>');var m=f.makeVisibilitySelect(d,3,"Available to:"),i=e.CswButton({ID:f.ID+"_submit",enabledText:"Create View",
disabledText:"Creating View",onclick:function(){var k={};k.ViewName=h.val();k.ViewMode=j.val();k.Visibility=m.getvisibilityselect().val();k.VisibilityRoleId=m.getvisroleselect().val();k.VisibilityUserId=m.getvisuserselect().val();CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/createView",data:jsonToString(k),success:function(n){e.dialog("close");f.onAddView(n.newviewid)},error:function(){i.CswButton("enable")}})}});e.CswButton({ID:f.ID+"_cancel",enabledText:"Cancel",disabledText:"Canceling",onclick:function(){e.dialog("close")}});
g(e,400,200)},AddNodeDialog:function(d){var f={nodetypeid:"",relatednodeid:"",onAddNode:function(){}};d&&a.extend(f,d);var e=a("<div></div>");e.CswNodeTabs({nodetypeid:f.nodetypeid,relatednodeid:f.relatednodeid,EditMode:"AddInPopup",onSave:function(h,j){e.dialog("close");f.onAddNode(h,j)}});g(e,800,600)},EditNodeDialog:function(d){var f={nodeid:"",cswnbtnodekey:"",filterToPropId:"",title:"",onEditNode:function(){}};d&&a.extend(f,d);var e=a("<div></div>");e.CswNodeTabs({nodeid:f.nodeid,cswnbtnodekey:f.cswnbtnodekey,
filterToPropId:f.filterToPropId,EditMode:"EditInPopup",title:f.title,onSave:function(h,j){e.dialog("close");f.onEditNode(h,j)}});f.filterToPropId!==""?g(e,600,400):g(e,900,600)},CopyNodeDialog:function(d){var f={nodename:"",nodeid:"",cswnbtnodekey:"",onCopyNode:function(){}};d&&a.extend(f,d);var e=a("<div>Copying: "+f.nodename+"<br/><br/></div>"),h=e.CswButton({ID:"copynode_submit",enabledText:"Copy",disabledText:"Copying",onclick:function(){copyNode({nodeid:f.nodeid,nodekey:f.nodekey,onSuccess:function(j,
m){e.dialog("close");f.onCopyNode(j,m)},onError:function(){h.CswButton("enable")}})}});e.CswButton({ID:"copynode_cancel",enabledText:"Cancel",disabledText:"Canceling",onclick:function(){e.dialog("close")}});g(e,400,300)},DeleteNodeDialog:function(d){var f={nodename:"",nodeid:"",cswnbtnodekey:"",onDeleteNode:function(){},Multi:false,NodeCheckTreeId:""};d&&a.extend(f,d);var e=a("<div><span>Are you sure you want to delete:</span></div>"),h=[],j=[];if(f.Multi)a("."+f.NodeCheckTreeId+"_check:checked").each(function(){var i=
a(this);h[h.length]=i.attr("nodeid");e.append('<br/><span style="padding-left: 10px;">'+i.attr("nodename")+"</span>")});else{e.append("<span>"+f.nodename+"?</span>");h[0]=f.nodeid;j[0]=f.cswnbtnodekey}e.append("<br/><br/>");var m=e.CswButton({ID:"deletenode_submit",enabledText:"Delete",disabledText:"Deleting",onclick:function(){deleteNodes({nodeids:h,nodekeys:j,onSuccess:function(i,k){e.dialog("close");f.onDeleteNode(i,k)},onError:function(){m.CswButton("enable")}})}});e.CswButton({ID:"deletenode_cancel",
enabledText:"Cancel",disabledText:"Canceling",onclick:function(){e.dialog("close")}});g(e,400,200)},AboutDialog:function(){var d=a("<div></div>");CswAjaxXml({url:"/NbtWebApp/wsNBT.asmx/getAbout",data:"",success:function(f){d.append("NBT Assembly Version: "+f.children("assembly").text()+"<br/><br/>");var e=d.CswTable("init",{ID:"abouttable"}),h=1;f.children("component").each(function(){var j=e.CswTable("cell",h,1),m=e.CswTable("cell",h,2),i=e.CswTable("cell",h,3);j.css("padding","2px 5px 2px 5px");
m.css("padding","2px 5px 2px 5px");i.css("padding","2px 5px 2px 5px");var k=a(this);j.append(k.children("name").text());m.append(k.children("version").text());i.append(k.children("copyright").text());h++})}});g(d,600,400)},SearchDialog:function(){},FileUploadDialog:function(d){var f={url:"",params:{},onSuccess:function(){}};d&&a.extend(f,d);var e=a("<div></div>");new qq.FileUploader({element:e.get(0),action:f.url,params:f.params,debug:false,onComplete:function(){e.dialog("close");f.onSuccess()}});
e.CswButton({ID:"fileupload_cancel",enabledText:"Cancel",disabledText:"Canceling",onclick:function(){e.dialog("close")}});g(e,400,300)},ShowLicenseDialog:function(d){var f={GetLicenseUrl:"/NbtWebApp/wsNBT.asmx/getLicense",AcceptLicenseUrl:"/NbtWebApp/wsNBT.asmx/acceptLicense",onAccept:function(){},onDecline:function(){}};d&&a.extend(f,d);var e=a('<div align="center"></div>');e.append("Service Level Agreement<br/>");var h=a('<textarea id="license" disabled="true" rows="30" cols="80"></textarea>').appendTo(e);
e.append("<br/>");CswAjaxJSON({url:f.GetLicenseUrl,success:function(m){h.text(m.license)}});var j=e.CswButton({ID:"license_accept",enabledText:"I Accept",disabledText:"Accepting...",onclick:function(){CswAjaxJSON({url:f.AcceptLicenseUrl,success:function(){e.dialog("close");f.onAccept()},error:function(){j.CswButton("enable")}})}});e.CswButton({ID:"license_decline",enabledText:"I Decline",disabledText:"Declining...",onclick:function(){e.dialog("close");f.onDecline()}});g(e,800,600)},OpenDialog:function(d,
f){var e=a('<div id="'+d+'"></div>');e.load(f,{},function(){e.appendTo("body").dialog()})},CloseDialog:function(d){a("#"+d).dialog("close").remove()}};a.CswDialog=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswDialog")}})(jQuery);(function(a){var g={div:function(b){var d={ID:"",prefix:"",suffix:"",value:"",cssclass:""};b&&a.extend(d,b);b=a(this);var f=a("<div></div>"),e=makeId(d);if(e!==""){f.attr("id",e);f.attr("name",e)}d.cssclass!==""&&f.attr("class",d.cssclass);d.value!==""&&f.text(d.value);b.append(f);return f},span:function(b){var d={ID:"",prefix:"",suffix:"",value:"",cssclass:""};b&&a.extend(d,b);b=a(this);var f=a("<span></span>"),e=makeId(d);if(e!==""){f.attr("id",e);f.attr("name",e)}d.cssclass!==""&&f.attr("class",
d.cssclass);d.value!==""&&f.text(d.value);b.append(f);return f},link:function(b){var d={ID:"",prefix:"",suffix:"",value:"",type:"",media:"all",target:"",rel:"",cssclass:"",onClick:function(){}};b&&a.extend(d,b);b=a(this);var f=a("<a></a>"),e=makeId(d);e!==""&&f.attr("id",e);d.href!==""&&f.attr("href",d.href);d.value!==""&&f.text(d.value);d.cssclass!==""&&f.attr("class",d.cssclass);d.type!==""&&f.attr("type",d.type);d.rel!==""&&f.attr("rel",d.rel);d.media!==""&&f.attr("media",d.media);d.target!==""&&
f.attr("target",d.target);d.onClick!==undefined&&f.click(function(){d.onClick()});b.append(f);return f},"break":function(b){var d={count:1};b&&a.extend(d,b);b=a(this);for(var f=0;f<d.count;){b.append(a("<br/>"));f++}},getchildren:function(b){var d={ID:"",prefix:"",suffix:""};b&&a.extend(d,b);b=a(this);var f;d=makeId(d);if(d!=="")f=b.children("#"+d);return f},findelement:function(b){var d={ID:"",prefix:"",suffix:""};b&&a.extend(d,b);b=a(this);var f;d=makeId(d);if(d!=="")f=b.find("#"+d);return f}};
a.fn.CswDOM=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswDOM")}})(jQuery);(function(a){a.fn.CswErrorMessage=function(g){var b={message:"",detail:""};g&&a.extend(b,g);var d=a(this);d.show();g="error_"+(new Date).getTime();var f=a("<div />").appendTo(d).attr("id",g).addClass("CswErrorMessage_ErrorMessage"),e=f.CswTable("init",{id:makeId({prefix:g,id:"tbl"}),width:"100%"}),h=e.CswTable("cell",1,1).attr("width","100%"),j=e.CswTable("cell",1,2),m=e.CswTable("cell",2,1);a('<a href="#">'+b.message+"</a>").appendTo(h).click(function(){m.toggle()});m.append(b.detail);m.hide();j.CswImageButton({ButtonType:CswImageButton_ButtonType.Delete,
AlternateText:"Hide",ID:makeId({prefix:g,id:"hidebtn"}),onClick:function(){f.remove();d.children().length===0&&d.hide();return CswImageButton_ButtonType.None}});return f}})(jQuery);var CswImageButton_ButtonType={None:-1,Add:27,ArrowNorth:28,ArrowEast:29,ArrowSouth:30,ArrowWest:31,Calendar:6,CheckboxFalse:18,CheckboxNull:19,CheckboxTrue:20,Clear:4,Clock:10,ClockGrey:11,Configure:26,Delete:4,Edit:3,Fire:5,PageFirst:23,PagePrevious:24,PageNext:25,PageLast:22,PinActive:17,PinInactive:15,Print:2,Refresh:9,SaveStatus:13,Select:32,ToggleActive:1,ToggleInactive:0,View:8};
(function(a){a.fn.CswImageButton=function(g){function b(e){if(e!==undefined&&e!==CswImageButton_ButtonType.None){f.get(0).style.background="url('Images/buttons/buttons18.gif') 0px "+e*-18+"px no-repeat";f.unbind("mouseover");f.unbind("mouseout");f.unbind("mousedown");f.unbind("mouseup");f.bind("mouseover",function(){this.style.backgroundPosition="-18px "+e*-18+"px"});f.bind("mouseout",function(){this.style.backgroundPosition="0px "+e*-18+"px"});f.bind("mousedown",function(){this.style.backgroundPosition=
"-36px "+e*-18+"px"});f.bind("mouseup",function(){this.style.backgroundPosition="-18px "+e*-18+"px"})}}var d={ButtonType:CswImageButton_ButtonType.None,Active:false,AlternateText:"",ID:"",Required:false,onClick:function(){return CswImageButton_ButtonType.None}};g&&a.extend(d,g);$Div=a(this);var f=a('<div id="'+d.ID+'" class="divbutton" alt="'+d.AlternateText+'" />"').appendTo($Div).css("display","inline-block").click(function(){var e=d.onClick(f);b(e);return false});b(d.ButtonType);return f}})(jQuery);var CswInput_Types={button:{id:0,name:"button",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},checkbox:{id:1,name:"checkbox",placeholder:false,autocomplete:false,value:{required:true,allowed:true}},color:{id:2,name:"color",placeholder:false,autocomplete:true,value:{required:false,allowed:true}},date:{id:3,name:"date",placeholder:false,autocomplete:true,value:{required:false,allowed:true}},datetime:{id:4,name:"datetime",placeholder:false,autocomplete:false,value:{required:false,
allowed:true}},"datetime-local":{value:5,name:"datetime-local",placeholder:false,autocomplete:true,value:{required:false,allowed:true}},email:{id:6,name:"email",placeholder:true,autocomplete:true,value:{required:false,allowed:true}},file:{id:7,name:"file",placeholder:false,autocomplete:false,value:{required:false,allowed:false}},hidden:{id:8,name:"hidden",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},image:{id:9,name:"image",placeholder:false,autocomplete:false,value:{required:false,
allowed:true}},month:{id:10,name:"month",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},number:{id:11,name:"number",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},password:{id:12,name:"password",placeholder:true,value:{required:false,allowed:true}},radio:{id:13,name:"radio",placeholder:false,autocomplete:false,value:{required:true,allowed:true}},range:{id:14,name:"range",placeholder:false,autocomplete:true,value:{required:false,allowed:true}},
reset:{id:15,name:"reset",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},search:{id:16,name:"search",placeholder:true,autocomplete:true,value:{required:false,allowed:true}},submit:{id:17,name:"submit",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},tel:{id:18,name:"button",placeholder:true,autocomplete:true,value:{required:false,allowed:true}},text:{id:19,name:"text",placeholder:true,autocomplete:true,value:{required:false,allowed:true}},time:{id:20,
name:"time",placeholder:false,autocomplete:true,value:{required:false,allowed:true}},url:{id:21,name:"url",placeholder:true,autocomplete:true,value:{required:false,allowed:true}},week:{id:22,name:"week",placeholder:false,autocomplete:false,value:{required:false,allowed:true}}};
(function(a){var g={init:function(b){var d={ID:"",name:"",type:CswInput_Types.text,placeholder:"",cssclass:"",value:"",width:"200px",autofocus:false,autocomplete:"on",onChange:function(){}};b&&a.extend(d,b);if(isNullOrEmpty(d.name))d.name=d.ID;b=a(this);var f=a("<input />");if(d.ID!==""){f.attr("id",d.ID);f.attr("name",d.name)}if(d.type!==""&&d.type!==undefined){f.attr("type",d.type.name);d.type.autocomplete===true&&d.autocomplete==="on"&&f.attr("autocomplete","on");if(d.type.value.required===true||
d.value!==""&&d.value!==undefined){if(d.value===undefined)d.value="";f.val(d.value)}}d.cssclass!==""&&f.attr("class",d.cssclass);d.width!==""&&f.attr({width:d.width});d.autofocus===true&&f.attr("autofocus");d.onChange!==undefined&&f.change(function(){d.onChange()});b.append(f);return f},findandget:function(b){var d={ID:""};b&&a.extend(d,b);b=a(this);var f;if(d.ID!==""&&d.ID!==undefined)f=b.find("#"+d.ID);return f},findandset:function(b){var d=false,f={ID:"",value:""};b&&a.extend(f,b);b=a(this);if(f.ID!==
""&&f.ID!==undefined&&f.value!==undefined){b=b.find("#"+f.ID);if(b.size()>0){b.val(f.value);d=true}}return d},set:function(b){var d=false,f={value:""};b&&a.extend(f,b);b=a(this);if(b.size()>0&&f.value!==undefined){b.val(f.value);d=true}return d}};a.fn.CswInput=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswInput")}})(jQuery);(function(a){a.fn.CswLayoutTable=function(g){function b(n,l,t){for(var s=parseInt(n.attr("cellset_rows")),w=parseInt(n.attr("cellset_columns")),C=[],v=1;v<=s;v++)for(var u=1;u<=w;u++){if(C[v]===undefined)C[v]=[];C[v][u]=j(n,l,t,v,u,s,w)}return C}function d(n){return n.attr("removemode")==="true"}function f(n){return n.attr("configmode")==="true"}function e(n,l){l.find("#"+n.attr("id")+"addbtn").hide();l.find("#"+n.attr("id")+"rembtn").hide();l.find("#"+n.attr("id")+"addcolumnbtn").hide();l.find("#"+
n.attr("id")+"addrowbtn").hide();n.CswTable("findCell",".CswLayoutTable_cell").removeClass("CswLayoutTable_configcell");n.attr("configmode","false");n.trigger(n.attr("id")+"CswLayoutTable_onConfigOff",l)}function h(n,l){l.find("#"+n.attr("id")+"addbtn").show();l.find("#"+n.attr("id")+"rembtn").show();l.find("#"+n.attr("id")+"addcolumnbtn").show();l.find("#"+n.attr("id")+"addrowbtn").show();parseInt(n.attr("cellset_rows"));parseInt(n.attr("cellset_columns"));n.CswTable("finish",null);n.CswTable("findCell",
".CswLayoutTable_cell").addClass("CswLayoutTable_configcell");n.attr("configmode","true");n.trigger(n.attr("id")+"CswLayoutTable_onConfigOn",l)}function j(n,l,t,s,w,C,v){if(l<1)l=1;if(t<1)t=1;return n.CswTable("cell",(l-1)*C+s,(t-1)*v+w)}function m(n,l,t,s,w,C){var v=Math.ceil(t/w),u=Math.ceil(s/C);t=parseInt(w-t%w);s=parseInt(C-s%C);l.attr("row",v).attr("column",u).attr("cellsetrow",t).attr("cellsetcolumn",s).click(function(){if(d(n)){var y=a(".CswLayoutTable_remove");y.length>0&&n.trigger(n.attr("id")+
"CswLayoutTable_onRemove",{table:n,cellset:b(n,v,u),row:y.attr("row"),column:y.attr("column")});y.children().hide();y.removeClass("CswLayoutTable_remove")}}).drag(function(y,F){if(f(n)){n.CswTable("findCell",".CswLayoutTable_swapcell").removeClass("CswLayoutTable_swapcell");n.CswTable("findCell",'[row="'+v+'"][column="'+u+'"]').addClass("CswLayoutTable_dragcell");var N=i(n,v,u,w,C,F);N.length>0&&N.addClass("CswLayoutTable_swapcell")}}).drop(function(y,F){if(f(n)){n.CswTable("findCell",".CswLayoutTable_swapcell").removeClass("CswLayoutTable_swapcell");
var N=n.CswTable("findCell",'[row="'+v+'"][column="'+u+'"]');N.removeClass("CswLayoutTable_dragcell");var P=i(n,v,u,w,C,F);if(P.length>0){n.trigger(n.attr("id")+"CswLayoutTable_onSwap",{table:n,cellset:b(n,v,u),swapcellset:b(n,P.first().attr("row"),P.first().attr("column")),row:v,column:u,swaprow:P.first().attr("row"),swapcolumn:P.first().attr("column")});var ba=a("<div />");for(r=1;r<=w;r++)for(c=1;c<=C;c++){var ea=N.filter('[cellsetrow="'+r+'"][cellsetcolumn="'+c+'"]'),Z=P.filter('[cellsetrow="'+
r+'"][cellsetcolumn="'+c+'"]');ea.contents().appendTo(ba);Z.contents().appendTo(ea);ba.contents().appendTo(Z)}}}}).hover(function(){var y=a(this);f(n)&&y.addClass("CswLayoutTable_hover");d(n)&&n.CswTable("findCell",'[row="'+y.attr("row")+'"][column="'+y.attr("column")+'"]').addClass("CswLayoutTable_remove")},function(){var y=a(this);f(n)&&y.removeClass("CswLayoutTable_hover");d(n)&&n.CswTable("findCell",'[row="'+y.attr("row")+'"][column="'+y.attr("column")+'"]').removeClass("CswLayoutTable_remove")})}
function i(n){var l=a(".CswLayoutTable_hover");return n.CswTable("findCell",'[row="'+l.attr("row")+'"][column="'+l.attr("column")+'"]')}var k={init:function(n){var l={ID:"",cellset:{rows:1,columns:1},onSwap:function(){},onAddClick:function(){},onConfigOn:function(){},onConfigOff:function(){},onRemove:function(){},TableCssClass:"",CellCssClass:"",cellpadding:0,cellspacing:0,width:"",align:"",showConfigButton:false,showAddButton:false,showRemoveButton:false,OddCellRightAlign:false,ReadOnly:false};n&&
a.extend(l,n);n=a(this);var t=a("<div />").appendTo(n).css({"float":"right"});l.ReadOnly&&t.hide();var s=n.CswTable("init",{ID:l.ID,TableCssClass:l.TableCssClass+" CswLayoutTable_table",CellCssClass:l.CellCssClass+" CswLayoutTable_cell",cellpadding:l.cellpadding,cellspacing:l.cellspacing,OddCellRightAlign:l.OddCellRightAlign,width:l.width,align:l.align,onCreateCell:function(C,v,u,y,F){m(v,u,y,F,l.cellset.rows,l.cellset.columns)}}).attr("cellset_rows",l.cellset.rows).attr("cellset_columns",l.cellset.columns);
s.attr("configmode","false");s.bind(l.ID+"CswLayoutTable_onSwap",l.onSwap);s.bind(l.ID+"CswLayoutTable_onRemove",l.onRemove);s.bind(l.ID+"CswLayoutTable_onConfigOn",l.onConfigOn);s.bind(l.ID+"CswLayoutTable_onConfigOff",l.onConfigOff);var w=t.CswTable("init",{ID:l.ID+"_buttontbl"});l.showAddButton&&w.CswTable("cell",1,1).CswImageButton({ButtonType:CswImageButton_ButtonType.Add,AlternateText:"Add",ID:l.ID+"addbtn",onClick:function(){l.onAddClick();return CswImageButton_ButtonType.None}}).hide();l.showRemoveButton&&
w.CswTable("cell",1,2).CswImageButton({ButtonType:CswImageButton_ButtonType.Delete,AlternateText:"Remove",ID:l.ID+"rembtn",onClick:function(){var C=a(this);if(d(s)){s.attr("removemode","false");C.removeClass("CswLayoutTable_removeEnabled")}else{s.attr("removemode","true");C.addClass("CswLayoutTable_removeEnabled")}return CswImageButton_ButtonType.None}}).hide();if(l.showConfigButton){w.CswTable("cell",1,3).CswImageButton({ButtonType:CswImageButton_ButtonType.ArrowEast,AlternateText:"Add Column",ID:l.ID+
"addcolumnbtn",onClick:function(){var C=parseInt(s.attr("cellset_rows")),v=parseInt(s.attr("cellset_columns")),u=s.CswTable("maxrows"),y=s.CswTable("maxcolumns");j(s,u/C,y/v+1,C,v,C,v);s.CswTable("finish",null);f(s)&&s.CswTable("findCell",".CswLayoutTable_cell").addClass("CswLayoutTable_configcell");return CswImageButton_ButtonType.None}}).hide();w.CswTable("cell",1,4).CswImageButton({ButtonType:CswImageButton_ButtonType.ArrowSouth,AlternateText:"Add Row",ID:l.ID+"addrowbtn",onClick:function(){var C=
parseInt(s.attr("cellset_rows")),v=parseInt(s.attr("cellset_columns")),u=s.CswTable("maxrows"),y=s.CswTable("maxcolumns");j(s,u/C+1,y/v,C,v,C,v);s.CswTable("finish",null);f(s)&&s.CswTable("findCell",".CswLayoutTable_cell").addClass("CswLayoutTable_configcell");return CswImageButton_ButtonType.None}}).hide();w.CswTable("cell",1,5).CswImageButton({ButtonType:CswImageButton_ButtonType.Configure,AlternateText:"Configure",ID:l.ID+"configbtn",onClick:function(){f(s)?e(s,w):h(s,w);return CswImageButton_ButtonType.None}})}return s},
cellset:function(n,l){var t=a(this);return b(t,n,l)},isConfig:function(){var n=a(this);return f(n)},toggleConfig:function(){var n=a(this),l=a("#"+n.attr("id")+"_buttontbl");f(n)?e(n,l):h(n,l)},ConfigOn:function(){var n=a(this),l=a("#"+n.attr("id")+"_buttontbl");h(n,l)},ConfigOff:function(){var n=a(this),l=a("#"+n.attr("id")+"_buttontbl");e(n,l)}};if(k[g])return k[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return k.init.apply(this,arguments);else a.error("Method "+
g+" does not exist on CswLayoutTable")}})(jQuery);(function(a){a.fn.CswLogin=function(g){function b(e){var h={DeauthenticateUrl:"/NbtWebApp/wsNBT.asmx/deauthenticate",onDeauthenticate:function(){}};e&&a.extend(h,e);CswAjaxJSON({url:h.DeauthenticateUrl,data:"",success:function(){a.CswCookie("clear",CswCookieName.Username);h.onDeauthenticate()}})}function d(e,h){var j="",m=true;switch(e.AuthenticationStatus){case "Failed":j="Login Failed";break;case "Locked":j="Your account is locked.  Please see your account administrator.";break;case "Deactivated":j=
"Your account is deactivated.  Please see your account administrator.";break;case "TooManyUsers":j="Too many users are currently connected.  Try again later.";break;case "NonExistentAccessId":j="Login Failed";break;case "NonExistentSession":j="Login Failed";break;case "Unknown":j="An Unknown Error Occurred";break;case "ExpiredPassword":m=false;a.CswDialog("EditNodeDialog",{nodeid:e.nodeid,cswnbtnodekey:e.cswnbtnodekey,filterToPropId:e.passwordpropid,title:"Your password has expired.  Please change it now:",
onEditNode:function(){h()}});break;case "ShowLicense":m=false;a.CswDialog("ShowLicenseDialog",{onAccept:function(){h()},onDecline:function(){b()}})}a("#loginmsg").CswErrorMessage({message:j});a("#login_password").val("");m&&a("#login_button").CswButton("enable")}var f={login:function(e){var h={AuthenticateUrl:"/NbtWebApp/wsNBT.asmx/authenticate",onAuthenticate:function(){}};e&&a.extend(h,e);e=a.CswCookie("get",CswCookieName.SessionId);if(e!==undefined&&e!==""&&e!==null)h.onAuthenticate(a.CswCookie("get",
CswCookieName.Username));else{var j=a('<div id="logindiv" align="center">  <form>    <table>    <tr>      <td align="right"></td>      <td id="loginmsg" style="display: none;"></td>    </tr>    <tr>      <td align="right">Customer ID:</td>      <td><input type="text" name="accessid" id="login_accessid" /></td>    </tr>    <tr>      <td align="right">User Name:</td>      <td><input type="text" name="username" id="login_username" /></td>    </tr>    <tr>      <td align="right">Password:</td>      <td><input type="password" name="password" id="login_password" /></td>    </tr>    <tr>      <td align="right"></td>      <td id="login_button_cell">           </td>    </tr>    <tr>      <td></td>      <td></td>    </tr>  </table> </form> </div> <br/><br/><br/> <div id="assemblydiv" width="100%" align="right"></div>').appendTo(a(this));
a("#assemblydiv").load("_Assembly.txt");a("#login_accessid").focus();var m=a("#login_button_cell").CswButton({ID:"login_button",enabledText:"Login",disabledText:"Logging in...",onclick:function(){function i(t){a.CswCookie("set",CswCookieName.Username,t);j.remove();h.onAuthenticate(t)}a("#loginmsg").hide().children().remove();var k=a("#login_accessid").val(),n=a("#login_username").val(),l=a("#login_password").val();CswAjaxJSON({url:h.AuthenticateUrl,data:"{AccessId: '"+k+"', UserName: '"+n+"', Password: '"+
l+"'}",success:function(t){auth=t.AuthenticationStatus;auth==="Authenticated"?i(n):d(t,i,m)},error:function(){m.CswButton("enable")}})}})}},logout:function(e){b(e)}};if(f[g])return f[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return f.init.apply(this,arguments);else a.error("Method "+g+" does not exist on CswLogin")}})(jQuery);(function(a){a.fn.CswMenu=function(g){function b(){$this=a(this);d();$this.find("ul.subnav").slideDown("fast").show()}function d(){e.find("ul").stop(true,true);e.find("ul.subnav").slideUp("fast")}var f={};g&&a.extend(f,g);var e=a(this);e.children("li").click(b).hover(b,d);e.find(".subnav").children("li").click(function(h){d();h&&h.stopPropagation()});return this}})(jQuery);(function(a){a.fn.CswMenuHeader=function(g){var b={Url:"/NbtWebApp/wsNBT.asmx/getHeaderMenu",onLogout:function(){},onSuccess:function(){}};g&&a.extend(b,g);var d=a(this);CswAjaxXml({url:b.Url,data:"",success:function(f){var e=a('<ul class="topnav"></ul>');d.text("").append(e);f.children().each(function(){var h=a(this);if(h.attr("text")!==undefined){var j=HandleMenuItem({$ul:e,$itemxml:h,onLogout:b.onLogout});if(h.children().length>1){var m=a('<ul class="subnav"></ul>').appendTo(j);h.children().each(function(){HandleMenuItem({$ul:m,
$itemxml:a(this),onLogout:b.onLogout})})}}});e.CswMenu();b.onSuccess()}});return this}})(jQuery);(function(a){a.fn.CswMenuMain=function(g){var b={Url:"/NbtWebApp/wsNBT.asmx/getMainMenu",viewid:"",nodeid:"",cswnbtnodekey:"",onAddNode:function(){},onMultiEdit:function(){},onSearch:{onViewSearch:function(){},onGenericSearch:function(){}},onEditView:function(){},Multi:false,NodeCheckTreeId:""};g&&a.extend(b,g);var d=a(this);CswAjaxXml({url:b.Url,data:"ViewNum="+b.viewid+"&SafeNodeKey="+b.cswnbtnodekey,success:function(f){var e=a('<ul class="topnav"></ul>');d.text("").append(e);f.children().each(function(){var h=
a(this);if(h.attr("text")!==undefined){var j={$ul:e,$itemxml:h,onAlterNode:b.onAddNode,onMultiEdit:b.onMultiEdit,onEditView:b.onEditView,onSearch:b.onSearch,Multi:b.Multi,NodeCheckTreeId:b.NodeCheckTreeId},m=HandleMenuItem(j);if(h.children().length>=1){var i=a('<ul class="subnav"></ul>').appendTo(m);h.children().each(function(){var k={$ul:i,$itemxml:a(this)};a.extend(j,k);HandleMenuItem(j)})}}});e.CswMenu()}});return this}})(jQuery);var debug=false;
(function(a){a.fn.CswMobile=function(g){function b(p){var q='<input type="textbox" id="login_accessid" placeholder="Access Id"/><br>';q+='<input type="textbox" id="login_username" placeholder="User Name"/><br>';q+='<input type="password" id="login_password" placeholder="Password"/><br>';q+='<a id="loginsubmit" data-role="button" href="#">Continue</a>';v({DivId:"logindiv",HeaderText:"Login to ChemSW Fire Inspection",content:q,HideSearchButton:true,HideRefreshButton:true,HideLogoutButton:true});a("#loginsubmit").click(P);
p&&a.mobile.changePage(a("#logindiv"),"fade",false,true)}function d(p){v({DivId:"sorrycharliediv",HeaderText:"Sorry Charlie!",content:"You must have internet connectivity to login.",HideSearchButton:true,HideRefreshButton:true,HideLogoutButton:true});p&&a.mobile.changePage(a("#sorrycharliediv"),"fade",false,true)}function f(p){setTimeout("$('#"+p+"').remove();",H.DivRemovalDelay)}function e(p){if(a("#viewsdiv").hasClass("ui-page-active")){v({DivId:"loadingdiv",HeaderText:"Please wait",content:"Loading...",
HideSearchButton:true,HideOnlineButton:true,HideRefreshButton:true,HideLogoutButton:true,HideHelpButton:true});a.mobile.changePage(a("#loadingdiv"),"fade",false,true);setTimeout(function(){h(true);f("loadingdiv")},H.DivRemovalDelay)}else h(p)}function h(p){a("#viewsdiv").remove();i({level:0,DivId:"viewsdiv",HeaderText:"Views",HideRefreshButton:true,HideSearchButton:true,ChangePage:p})}function j(){var p=a(".onlineStatus");if(p.hasClass("offline")){p.removeClass("offline").addClass("online").text("Online");
a(".refresh").css("visibility","");e(false)}if(a("#sorrycharliediv").length>0){b(true);f("sorrycharliediv")}}function m(){return a(".onlineStatus").hasClass("offline")}function i(p){var q={ParentId:"",level:1,DivId:"",HeaderText:"",HideRefreshButton:false,HideSearchButton:false,ChangePage:false};p&&a.extend(q,p);p=true;if(q.level===1)V=q.DivId;if(a("#"+q.DivId).length===0)if(q.level===0)if(m())T(function(x){k({ParentId:q.ParentId,DivId:q.DivId,HeaderText:q.HeaderText,$xml:a(x),parentlevel:q.level,
HideRefreshButton:q.HideRefreshButton,HideSearchButton:q.HideSearchButton,ChangePage:q.ChangePage})});else{debug&&log("Starting "+H.ViewUrl);CswAjaxXml({async:false,formobile:W,url:H.ViewUrl,data:"SessionId="+fa+"&ParentId="+q.DivId+"&ForMobile="+W,onloginfail:function(){ba()},success:function(x){debug&&log("On Success "+H.ViewUrl);q.level===1&&E(q.DivId,q.HeaderText,x);k({ParentId:q.ParentId,DivId:q.DivId,HeaderText:q.HeaderText,$xml:a(x),parentlevel:q.level,HideRefreshButton:q.HideRefreshButton,
HideSearchButton:q.HideSearchButton,ChangePage:q.ChangePage})}})}else if(q.level===1)O(V,function(x){if(isNullOrEmpty(x)){if(!m()){debug&&log("Starting "+H.ViewUrl);CswAjaxXml({async:false,formobile:W,url:H.ViewUrl,data:"SessionId="+fa+"&ParentId="+q.DivId+"&ForMobile="+W,onloginfail:function(){ba()},success:function(B){debug&&log("On Success "+H.ViewUrl);q.level===1&&E(q.DivId,q.HeaderText,B);ha=a(B);k({ParentId:q.ParentId,DivId:q.DivId,HeaderText:q.HeaderText,$xml:a(B),parentlevel:q.level,HideRefreshButton:q.HideRefreshButton,
HideSearchButton:q.HideSearchButton,ChangePage:q.ChangePage})}})}}else{ha=a(x);k({ParentId:q.ParentId,DivId:q.DivId,HeaderText:q.HeaderText,$xml:a(x),parentlevel:q.level,HideRefreshButton:q.HideRefreshButton,HideSearchButton:q.HideSearchButton,ChangePage:q.ChangePage})}});else{if(!isNullOrEmpty(ha)){var A=ha.find("#"+q.DivId);k({ParentId:q.ParentId,DivId:q.DivId,HeaderText:q.HeaderText,$xml:A.children("subitems").first(),parentlevel:q.level,HideRefreshButton:q.HideRefreshButton,HideSearchButton:q.HideSearchButton,
ChangePage:q.ChangePage})}}else p=false;return p}function k(p){var q={ParentId:"",DivId:"",HeaderText:"",$xml:"",parentlevel:"",HideRefreshButton:false,HideSearchButton:false,ChangePage:false};p&&a.extend(q,p);var A=l();pa="";qa=function(){};q.$xml.children().each(function(){A+=n(this,q.DivId,q.parentlevel)});A+="</ul>";$divhtml=v({ParentId:q.ParentId,level:q.parentlevel,DivId:q.DivId,HeaderText:q.HeaderText,content:A,HideRefreshButton:q.HideRefreshButton,HideSearchButton:q.HideSearchButton});qa($divhtml);
q.ChangePage&&a.mobile.changePage(a("#"+q.DivId),"slide",false,true)}function n(p,q,A){var x=a(p),B=x.attr("id"),I=x.attr("name"),z=!isNullOrEmpty(B),L=p.nodeName;p=x.next().attr("id");var U=x.prev().attr("id"),M="";switch(L){case "SEARCHES":break;case "NODE":M+=t(x);break;case "PROP":var G=x.attr("tab");z=x.attr("fieldtype");var X=x.attr("gestalt");if(X==="NaN")X="";L=x.prevAll('[fieldtype="'+z+'"]').andSelf().length;var ja=x.siblings('[fieldtype="'+z+'"]').andSelf().length;if(pa!==G){isNullOrEmpty(pa)||
(M+="</ul>"+l());M+='<li data-role="list-divider">'+G+"</li>";pa=G}switch(z){case "Logical":M+='<li id="'+B+'_li"><a href="#'+B+'">'+I+"</a></li>";G=x.children("checked").text();X=x.children("required").text();if(isNullOrEmpty(G))G="";if(isNullOrEmpty(X))X="";M+='<div class="lisubstitute ui-li ui-btn-up-c">';M+=w(B,"_ans","_ans2",G,X);M+="</div>";break;case "Question":M+='<li id="'+B+'_li"><a href="#'+B+'">'+I+"</a></li>";G=x.children("answer").text();X=x.children("allowedanswers").text();var aa=
x.children("compliantanswers").text(),R=x.children("correctiveaction").text();if(isNullOrEmpty(G))G="";if(isNullOrEmpty(X))X="";if(isNullOrEmpty(aa))aa="";if(isNullOrEmpty(R))R="";M+='<div class="lisubstitute ui-li ui-btn-up-c">';M+=C(q,B,"_ans","_ans2","_cor","_li","_propname",X,G,aa);M+="</div>";if(!isNullOrEmpty(G)&&(","+aa+",").indexOf(","+G+",")<0&&isNullOrEmpty(R)){var ua=qa;qa=function(ra){ra.find("#"+B+"_li div").addClass("OOC");ua(ra)}}break;default:M+='<li id="'+B+'_li">';M+=' <a href="#'+
B+'">'+I+"</a>";M+=' <p class="ui-li-aside">'+X+"</p>";M+="</li>"}G="";isNullOrEmpty(U)||(G+='<a href="#'+U+'" data-role="button" data-icon="arrow-u" data-inline="true" data-theme="'+H.Theme+'" data-transition="slideup" data-back="true">Previous</a>');isNullOrEmpty(p)||(G+='<a href="#'+p+'" data-role="button" data-icon="arrow-d" data-inline="true" data-theme="'+H.Theme+'" data-transition="slideup">Next</a>');if(z==="Question")G+="&nbsp;"+L+"&nbsp;of&nbsp;"+ja;v({ParentId:q,level:A,DivId:B,HeaderText:I,
toolbar:G,content:s(x,q)});break;default:M+="<li>";M+=z?'<a href="#'+B+'">'+I+"</a>":I;M+="</li>"}return M}function l(p){var q='<ul data-role="listview" ';isNullOrEmpty(p)||(q+='id="'+p+'"');q+=">";return q}function t(p){var q="",A=p.attr("id"),x=p.attr("name"),B="";if(!isNullOrEmpty(p.attr("iconfilename"))&&!isNullOrEmpty(p.attr("iconfilename")))B="images/icons/"+p.attr("iconfilename");switch(p.attr("objectclass")){case "InspectionDesignClass":var I=p.find('prop[ocpname="Due Date"]').attr("gestalt"),
z=p.find('prop[ocpname="Location"]').attr("gestalt"),L=p.find('prop[ocpname="Target"]').attr("gestalt"),U=p.find('prop[ocpname="Status"]').attr("gestalt"),M=0;p.find('prop[fieldtype="Question"]').each(function(){isNullOrEmpty(a(this).children("Answer").text())&&M++});q+="<li>";isNullOrEmpty(B)||(q+='<img src="'+B+'" class="ui-li-icon"/>');q+='<h3><a href="#'+A+'">'+x+"</a></h3>";q+="<p>"+z+"</p>";q+="<p>"+L+"</p>";q+="<p>"+U+", Due: "+I+"</p>";q+='<span id="'+A+'_unansweredcnt" class="ui-li-count">'+
M+"</span>";q+="</li>";break;default:q+="<li>";isNullOrEmpty(B)||(q+='<img src="'+B+'" class="ui-li-icon"/>');q+='<a href="#'+A+'">'+x+"</a>";q+="</li>"}return q}function s(p,q){var A=p.attr("id"),x=p.attr("fieldtype"),B=p.attr("name"),I=isTrue(p.attr("readonly")),z=tryParseString,L=p.children("text");ret=L.text();L=L.html();if(!isNullOrEmpty(L))if(L.substr(0,11)==="<\!--[CDATA[")ret=L.substr(11,L.length-11-5);var U=z(ret,""),M=tryParseString(p.children("value").text(),""),G=tryParseString(p.children("href").text(),
""),X=tryParseString(p.children("checked").text(),""),ja=tryParseString(p.children("required").text(),""),aa=tryParseString(p.children("units").text(),""),R=tryParseString(p.children("answer").text(),""),ua=tryParseString(p.children("allowedanswers").text(),""),ra=tryParseString(p.children("correctiveaction").text(),""),ya=tryParseString(p.children("comments").text(),""),va=tryParseString(p.children("compliantanswers").text(),"");L=tryParseString(p.children("options").text(),"");if(M=="NaN")M="";
z='<div id="'+A+'_propname"';if(x==="Question"&&!(R===""||(","+va+",").indexOf(","+R+",")>=0))z+=' class="OOC"';z+=">"+B+"</div><br/>";if(I)z+=p.attr("gestalt");else switch(x){case "Date":z+='<input type="text" name="'+A+'" value="'+M+'" />';break;case "Link":z+='<a href="'+G+'">'+U+"</a>";break;case "List":z+='<select name="'+A+'">';A=M;x=L.split(",");for(B=0;B<x.length;B++){z+='<option value="'+x[B]+'"';if(A===x[B])z+=" selected";z+=isNullOrEmpty(x[B])?">[blank]</option>":">"+x[B]+"</option>"}z+=
"</select>";break;case "Logical":z+=w(A,"_ans2","_ans",X,ja);break;case "Memo":z+='<textarea name="'+A+'">'+U+"</textarea>";break;case "Number":z+='<input type="number" name="'+A+'" value="'+M+'"';z+="/>";break;case "Password":z+=string.Empty;break;case "Quantity":z+='<input type="text" name="'+A+'_qty" value="'+M+'" />';z+=aa;break;case "Question":z+=C(q,A,"_ans2","_ans","_cor","_li","_propname",ua,R,va);z+='<textarea id="'+A+'_cor" name="'+A+'_cor" placeholder="Corrective Action"';if(R===""||(","+
va+",").indexOf(","+R+",")>=0)z+='style="display: none"';z+='onchange="';z+="var $cor = $(this); ";z+="if($cor.attr('value') === '') { ";z+="  $('#"+A+"_li div').addClass('OOC'); ";z+="  $('#"+A+"_propname').addClass('OOC'); ";z+="} else {";z+="  $('#"+A+"_li div').removeClass('OOC'); ";z+="  $('#"+A+"_propname').removeClass('OOC'); ";z+="}";z+='">';z+=ra;z+="</textarea>";z+='<textarea name="'+A+'_com" placeholder="Comments">';z+=ya;z+="</textarea>";break;case "Static":z+=U;break;case "Text":z+='<input type="text" name="'+
A+'" value="'+U+'" />';break;case "Time":z+='<input type="text" name="'+A+'" value="'+M+'" />';break;default:z+=p.attr("gestalt")}return z}function w(p,q,A,x,B){var I='<fieldset class="csw_fieldset" data-role="controlgroup" data-type="horizontal" data-role="fieldcontain">',z=["Null","True","False"];if(isTrue(B))z=["True","False"];for(B=0;B<z.length;B++){var L;switch(z[B]){case "Null":L="?";break;case "True":L="Yes";break;case "False":L="No"}I+='<input type="radio" name="'+p+q+'" id="'+p+q+"_"+z[B]+
'" value="'+z[B]+'" ';if(!isTrue(x)&&!isTrue(z[B])||isTrue(x)&&isTrue(z[B])||isNullOrEmpty(x)&&isNullOrEmpty(z[B]))I+="checked";I+=' onclick="';for(var U=0;U<z.length;U++)I+=z[U]===z[B]?" $('#"+p+q+"_"+z[U]+"').siblings('label').addClass('ui-btn-active');":" $('#"+p+q+"_"+z[U]+"').siblings('label').removeClass('ui-btn-active');";I+=" var $otherradio; ";for(U=0;U<z.length;U++){I+=" $otherradio = $('#"+p+A+"_"+z[U]+"'); ";if(z[U]===z[B]){I+=" $otherradio.attr('checked', true); ";I+=" $otherradio.siblings('label').addClass('ui-btn-active'); "}else{I+=
" $otherradio.attr('checked', false); ";I+=" $otherradio.siblings('label').removeClass('ui-btn-active'); "}}I+='" />';I+='<label for="'+p+q+"_"+z[B]+'">'+L+"</label>"}I+="</fieldset>";return I}function C(p,q,A,x,B,I,z,L,U,M){var G='<fieldset class="csw_fieldset" id="'+q+'_fieldset" data-role="controlgroup" data-type="horizontal" data-role="fieldcontain">';L=L.split(",");for(var X=0;X<L.length;X++){var ja=L[X].replace(/'/gi,"");G+='<input type="radio" name="'+q+A+'" id="'+q+A+"_"+ja+'" value="'+L[X]+
'" ';if(U===L[X])G+=" checked";G+=' onclick="';for(var aa=0;aa<L.length;aa++){var R=L[aa].replace(/'/gi,"");G+=L[aa]===L[X]?" $('#"+q+A+"_"+R+"').siblings('label').addClass('ui-btn-active');":" $('#"+q+A+"_"+R+"').siblings('label').removeClass('ui-btn-active');"}G+=" var $otherradio; ";for(aa=0;aa<L.length;aa++){R=L[aa].replace(/'/gi,"");G+=" $otherradio = $('#"+q+x+"_"+R+"'); ";if(L[aa]===L[X]){G+=" $otherradio.attr('checked', true); ";G+=" $otherradio.siblings('label').addClass('ui-btn-active'); "}else{G+=
" $otherradio.attr('checked', false); ";G+=" $otherradio.siblings('label').removeClass('ui-btn-active'); "}}if((","+M+",").indexOf(","+L[X]+",")>=0){G+=" $('#"+q+B+"').css('display', 'none'); ";G+=" $('#"+q+I+" div').removeClass('OOC'); ";G+=" $('#"+q+z+"').removeClass('OOC'); "}else{G+=" var $cor = $('#"+q+B+"'); ";G+=" $cor.css('display', ''); ";G+=" if($cor.attr('value') === '') { ";G+="   $('#"+q+I+" div').addClass('OOC'); ";G+="   $('#"+q+z+"').addClass('OOC'); ";G+=" } else {";G+="   $('#"+
q+I+" div').removeClass('OOC'); ";G+="   $('#"+q+z+"').removeClass('OOC'); ";G+=" } "}if(isNullOrEmpty(U)){G+=" if(! $('#"+q+"_fieldset').attr('answered')) { ";G+="   var $cntspan = $('#"+p+"_unansweredcnt'); ";G+="   $cntspan.text(parseInt($cntspan.text()) - 1); ";G+="   $('#"+q+"_fieldset').attr('answered', 'true'); ";G+=" }"}G+=' " />';G+='            <label for="'+q+A+"_"+ja+'">'+L[X]+"</label>"}G+="</fieldset>";return G}function v(p){var q={ParentId:undefined,level:1,DivId:"",HeaderText:"",toolbar:"",
content:"",HideSearchButton:false,HideOnlineButton:false,HideRefreshButton:false,HideLogoutButton:false,HideHelpButton:false,backicon:undefined,backtransition:undefined};p&&a.extend(q,p);p='<div id="'+q.DivId+'" data-role="page"><div data-role="header" data-theme="'+H.Theme+'" data-position="fixed">';p+='<a href="#'+q.ParentId+'" id="'+q.DivId+'_back" data-back="true" ';isNullOrEmpty(q.backtransition)||(p+=' data-transition="'+q.backtransition+'" ');isNullOrEmpty(q.ParentId)||(p+=' style="visibility: hidden;" ');
p+=' data-icon="';p+=isNullOrEmpty(q.backicon)?"arrow-l":q.backicon;p+='">Back</a>';p+="<h1>"+q.HeaderText+"</h1>";q.HideSearchButton||(p+='    <a href="#" id="'+q.DivId+'_searchopen">Search</a>');p+='    <div class="toolbar" data-role="controlgroup" data-type="horizontal">'+q.toolbar+'    </div>  </div>  <div data-role="content" data-theme="'+H.Theme+'">'+q.content+'  </div>  <div data-role="footer" data-theme="'+H.Theme+'" data-position="fixed">';if(!q.HideOnlineButton){p+='    <a href="#" id="'+
q.DivId+'_gosynchstatus" data-transition="slideup">';p+=m()?'    <div class="onlineStatus offline">Offline</div>':'    <div class="onlineStatus online">Online</div>';p+="    </a>"}q.HideRefreshButton||(p+='    <a href="#" id="'+q.DivId+'_refresh" class="refresh">Refresh</a>');q.HideLogoutButton||(p+='    <a href="#" id="'+q.DivId+'_logout">Logout</a>');p+='     <a rel="external" href="Login.aspx?redir=n">Full Site</a>';q.HideHelpButton||(p+='    <a href="#" id="'+q.DivId+'_help">Help</a>');p+="  </div></div>";
p=a(p);a("body").append(p);p.page();y(q.DivId,q.ParentId,q.level,p);return p}function u(p){var q="";p=a("#"+p).find('div[data-role="header"] #'+p+"_back");if(p.length>0)q=p.attr("href").substr(1);return q}function y(p,q,A,x){x.find("#"+p+"_searchopen").click(function(B){sa(p,B)}).end().find("#"+p+"_gosynchstatus").click(function(){a("#synchstatus_back").attr("href","#"+p);a("#synchstatus_back").css("visibility","");a.mobile.changePage(a("#synchstatus"),"slideup")}).end().find("#"+p+"_refresh").click(function(B){B.stopPropagation();
B.preventDefault();return ea(p,B)}).end().find("#"+p+"_logout").click(function(B){B.stopPropagation();B.preventDefault();ba()}).end().find("#"+p+"_back").click(function(){p!=="synchstatus"&&p.indexOf("prop_")!==0&&setTimeout("$('div[id*=\""+p+"\"]').remove();",H.DivRemovalDelay);return true}).end().find("#"+p+"_help").click(function(){a.mobile.changePage(a("#help"),"slideup")}).end().find("input").change(function(B){ga(p,B)}).end().find("textarea").change(function(B){ga(p,B)}).end().find("select").change(function(B){ga(p,
B)}).end().find("li a").click(function(B){if(i({ParentId:p,level:A+1,DivId:a(this).attr("href").substr(1),HeaderText:a(this).text(),ChangePage:true})){B.stopPropagation();B.preventDefault()}}).end()}function F(p,q){if(p){a("#ss_pendingchangecnt").text("Yes");a(".onlineStatus").addClass("pendingchanges")}else{a("#ss_pendingchangecnt").text("No");a(".onlineStatus").removeClass("pendingchanges")}if(q){var A=new Date;a("#ss_lastsynch").text(A.toLocaleDateString()+" "+A.toLocaleTimeString())}}function N(){return a("#ss_pendingchangecnt").text()!==
"Yes"||confirm("You have pending unsaved changes.  These changes will be lost.  Continue?")}function P(){ia=a("#login_username").attr("value");var p=a("#login_password").attr("value"),q=a("#login_accessid").attr("value");if(!m()){p={AccessId:q,UserName:ia,Password:p};debug&&log("Starting "+H.AuthenticateUrl);CswAjaxJSON({formobile:W,url:H.AuthenticateUrl,data:jsonToString(p),onloginfail:function(){ba()},success:function(){debug&&log("On Success "+H.AuthenticateUrl);Q(fa,ia);e(true);f("logindiv")}})}}
function ba(){N()&&ka(function(){window.location.href=window.location.pathname})}function ea(p){if(!m())if(N()){v({DivId:"loadingdiv",HeaderText:"Please wait",content:"Loading...",HideSearchButton:true,HideOnlineButton:true,HideRefreshButton:true,HideLogoutButton:true,HideHelpButton:true});a.mobile.changePage(a("#loadingdiv"),"fade",false,true);setTimeout(function(){Z(p)},H.DivRemovalDelay)}return false}function Z(p){for(var q="";!isNullOrEmpty(p)&&p.substr(0,7)!=="viewid_";){q=u(p);a('div[id*="'+
p+'"]').remove();p=q}if(!isNullOrEmpty(p)){var A=p,x=a("#"+A).find('div[data-role="header"] h1').text();a('div[id*="'+A+'"]').remove();debug&&log("Starting "+H.ViewUrl);CswAjaxXml({async:false,formobile:W,url:H.ViewUrl,data:"SessionId="+fa+"&ParentId="+A+"&ForMobile="+W,onloginfail:function(){ba()},success:function(B){debug&&log("Starting "+H.ViewUrl);ha=a(B);J(A,B,"0");k({ParentId:"viewsdiv",DivId:A,HeaderText:x,$xml:a(B),parentlevel:1,HideRefreshButton:false,HideSearchButton:true,ChangePage:true});
f("loadingdiv")}})}}function ga(p,q){var A=a(q.target),x=A.attr("name"),B=A.attr("value");if(!isNullOrEmpty(ha)){ha.find("#"+p).andSelf().find("prop").each(function(){var I=a(this),z=I.attr("id"),L=I.attr("fieldtype");I.attr("name");var U=I.children("text"),M=I.children("value");I.children("href");I.children("options");var G=I.children("checked");I.children("required");I.children("units");var X=I.children("answer");I.children("allowedanswers");var ja=I.children("correctiveaction"),aa=I.children("comments");
I.children("compliantanswers");var R=null;switch(L){case "Date":if(x===z)R=M;break;case "List":if(x===z)R=M;break;case "Logical":if(x===z+"_ans"||x===z+"_ans2")R=G;break;case "Memo":if(x===z)R=U;break;case "Number":if(x===z)R=M;break;case "Quantity":if(x===z+"_qty")R=M;break;case "Question":if(x===z+"_com")R=aa;else if(x===z+"_ans"||x===z+"_ans2")R=X;else if(x===z+"_cor")R=ja;break;case "Text":if(x===z)R=U;break;case "Time":if(x===z)R=M}if(!isNullOrEmpty(R)){R.text(B);I.attr("wasmodified","1")}});
J(V,ha.wrap("<wrapper />").parent().html(),"1");F(true,false)}}function sa(p){a("#"+p+"_searchprop").attr("value");a("#"+p+"_searchfor").attr("value");O(V,function(q){if(!isNullOrEmpty(q)){q=a(q);var A='<select id="'+p+'_searchprop" name="'+p+'_searchprop">';q.closest("result").find("searches").children().each(function(){var x=a(this);A+='<option value="'+x.attr("id")+'">'+x.attr("name")+"</option>"});A+='</select><input type="search" name="'+p+'_searchfor" id="'+p+'_searchfor" value="" placeholder="Search" /><input type="button" id="'+
p+'_searchgo" data-inline="true" value="Go" /> <div id="'+p+'_searchresults"></div>';v({ParentId:p,DivId:p+"_searchdiv",HeaderText:"Search",content:A,HideSearchButton:true,HideRefreshButton:true,backicon:"arrow-u"});a("#"+p+"_searchgo").click(function(x){wa(p,x)});a.mobile.changePage(a("#"+p+"_searchdiv"),"slideup",false,true)}})}function wa(p){var q=a("#"+p+"_searchprop").attr("value"),A=a("#"+p+"_searchfor").attr("value");O(V,function(x){if(!isNullOrEmpty(x)){x=a(x);var B=l(p+"_searchresultslist"),
I=0;x.find("node").each(function(){var z=a(this);if(!isNullOrEmpty(z.attr(q)))if(z.attr(q).toLowerCase().indexOf(A.toLowerCase())>=0){I++;B+=n(this,p,1,false)}});if(I===0)B+="<li>No Results</li>";B+="</ul>";x=a("#"+p+"_searchresults");x.children().remove();x.append(B);a("#"+p+"_searchresultslist").listview();y(p+"_searchdiv",p,1,x)}})}function ca(p,q,A){window.openDatabase?da.transaction(function(x){x.executeSql(p,q,A,ta)}):console.log("database is not opened")}function ka(p){ca("DROP TABLE IF EXISTS configvars; ",
null,function(){ca("DROP TABLE IF EXISTS views; ",null,function(){isNullOrEmpty(p)||p()})})}function la(p){ca("CREATE TABLE IF NOT EXISTS configvars   (id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,    varname TEXT NOT NULL,    varval TEXT);",null,function(){ca("CREATE TABLE IF NOT EXISTS views   (id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,    rootid TEXT NOT NULL,    rootname TEXT NOT NULL,    viewxml TEXT,    wasmodified INTEGER );",null,p)})}function ta(p,q){console.log("Database Error: "+q.message+
" (Code "+q.code+")");return true}function ma(p,q,A){ca("select varval from configvars where varname=?;",[p],function(x,B){0===B.rows.length?ca("insert into configvars (varname, varval) values ( ?, ? );",[p,q],function(){isNullOrEmpty(A)||A()}):ca("update configvars set varval = ? where varname = ?",[q,p],function(){isNullOrEmpty(A)||A()})})}function na(p,q){ca("select varval from configvars where varname=?;",[p],function(A,x){if(x.rows.length>0){var B=x.rows.item(0);q(B.varval)}else q("")})}function Q(p,
q,A){ma("username",q,function(){ma("sessionid",p,function(){isNullOrEmpty(A)||A()})})}function E(p,q,A){isNullOrEmpty(p)||ca("INSERT INTO views (rootid, rootname, viewxml, wasmodified) VALUES (?, ?, ?, 0);",[p,q,A])}function J(p,q,A){isNullOrEmpty(p)||ca("UPDATE views SET wasmodified = ?, viewxml = ? WHERE rootid = ?;",[A,q,p])}function S(p){ca("SELECT rootid, viewxml FROM views WHERE wasmodified = 1 ORDER BY id DESC;",[],function(q,A){if(A.rows.length>0){F(true,true);var x=A.rows.item(0);p(x.rootid,
x.viewxml)}else{F(false,true);p("","")}})}function O(p,q){isNullOrEmpty(p)||ca("SELECT viewxml FROM views WHERE rootid = ? ORDER BY id DESC;",[p],function(A,x){if(x.rows.length>0){var B=x.rows.item(0);q(B.viewxml)}else q("")})}function T(p){ca("SELECT rootid, rootname FROM views ORDER BY rootname;",[],function(q,A){for(var x="",B=0;B<A.rows.length;B++){var I=A.rows.item(B);x+='<view id="'+I.rootid+'" name="'+I.rootname+'" />'}p("<result>"+x+"</result>")})}function D(){xa=setTimeout(K,H.PollingInterval)}
function K(p,q){var A=H.ConnectTestUrl;if(H.RandomConnectionFailure)A=H.ConnectTestRandomFailUrl;debug&&log("Starting "+A);CswAjaxXml({formobile:W,url:A,data:"",onloginfail:function(){ba()},success:function(){debug&&log("On Success "+A);j();Y(true);isNullOrEmpty(p)||p()},error:function(){isNullOrEmpty(q)||q();D()}})}function Y(p){if(isNullOrEmpty(fa))p&&D();else S(function(q,A){if(!isNullOrEmpty(q)&&!isNullOrEmpty(A)){debug&&log("Starting "+H.UpdateUrl);CswAjaxXml({formobile:W,url:H.UpdateUrl,data:"SessionId="+
fa+"&ParentId="+UpdatedViewXml+"&UpdatedViewXml="+A.replace(/'/gi,"\\'"),onloginfail:function(){p&&D()},success:function(x){debug&&log("On Success "+H.UpdateUrl);J(q,x,"0");p&&D()},error:function(){p&&D()}})}else p&&D()})}var H={DBShortName:"Mobile.html",DBVersion:"1.0",DBDisplayName:"Mobile.html",DBMaxSize:65536,ViewUrl:"/NbtWebApp/wsNBT.asmx/RunView",ConnectTestUrl:"/NbtWebApp/wsNBT.asmx/ConnectTest",ConnectTestRandomFailUrl:"/NbtWebApp/wsNBT.asmx/ConnectTestRandomFail",UpdateUrl:"/NbtWebApp/wsNBT.asmx/UpdateProperties",
MainPageUrl:"/NbtWebApp/Mobile.html",AuthenticateUrl:"/NbtWebApp/wsNBT.asmx/Authenticate",Theme:"a",PollingInterval:3E4,DivRemovalDelay:1E3,RandomConnectionFailure:false};g&&a.extend(H,g);var W=true,V,da,ia,fa,ha,oa="initialloadingdiv";if(window.location.hash.length>0){g=window.location.hash.substr(1);if(a("#"+g).length===0&&g!=="viewsdiv"&&g!=="logindiv")oa=g}v({DivId:oa,HeaderText:"Please wait",content:"Loading...",HideSearchButton:true,HideOnlineButton:true,HideRefreshButton:true,HideLogoutButton:true,
HideHelpButton:true});(function(){var p="";p+='<p>Pending Unsynched Changes: <span id="ss_pendingchangecnt">No</span></p>';p+='<p>Last synch: <span id="ss_lastsynch"></span></p>';p+='<a id="ss_forcesynch" href="#" data-role="button">Force Synch Now</a>';p+='<a id="ss_gooffline" href="#" data-role="button">Go Offline</a>';$divhtml=v({DivId:"synchstatus",HeaderText:"Synch Status",content:p,HideSearchButton:true,HideRefreshButton:true});$divhtml.find("#ss_forcesynch").click(function(q){Y(false);q.preventDefault()}).end().find("#ss_gooffline").click(function(q){q.preventDefault();
if(m()){clearTimeout(xa);D();j();a("#ss_gooffline span").text("Go Offline")}else{clearTimeout(xa);q=a(".onlineStatus");if(q.hasClass("online")){q.removeClass("online").addClass("offline").text("Offline");a(".refresh").css("visibility","hidden");e(false)}if(a("#logindiv").length>0){d(true);f("logindiv")}a("#ss_gooffline span").text("Go Online")}})})();(function(){var p="";p+="<p>Help</p>";$divhtml=v({DivId:"help",HeaderText:"Help",content:p,HideSearchButton:true,HideRefreshButton:true})})();(function(p,
q){da=openDatabase(H.DBShortName,H.DBVersion,H.DBDisplayName,H.DBMaxSize);p?ka(function(){la(q)}):la(q)})(false,function(){na("sessionid",function(p){if(isNullOrEmpty(p))K(function(){b(true);f(oa)},function(){d(true);f(oa)});else{fa=p;e(true);f(oa);D()}})});var pa,qa,xa;return this}})(jQuery);(function(a){var g={init:function(b){var d={GridUrl:"/NbtWebApp/wsNBT.asmx/getGrid",viewid:"",ID:"",nodeid:"",cswnbtnodekey:"",gridTableID:"gridTable",gridPagerID:"gridPager",reinit:false,onAddNode:function(){},onEditNode:function(){},onDeleteNode:function(){}};b&&a.extend(d,b);b=a(this);d.reinit&&b.empty();var f=makeId({ID:d.gridTableID,prefix:d.ID}),e=b.CswTable("init",{ID:f});f=makeId({ID:d.gridPagerID,prefix:d.ID});var h=b.CswDOM("div",{ID:f}).css("width","100%").css("height","20px");CswAjaxJSON({url:d.GridUrl,
data:"{ViewPk: '"+d.viewid+"', 'SafeNodeKey': '"+d.cswnbtnodekey+"'}",success:function(j){jqGridOpt=j.jqGridOpt;var m=j.nodetypeid;if(jqGridOpt.width==="")jqGridOpt.width=650;j={autoencode:true,caption:"",datatype:"local",emptyrecords:"No Results",height:"300",multiselect:true,pager:h,rowList:[10,25,50],rowNum:10,shrinkToFit:true,sortname:"",sortorder:"asc",toppager:false,viewrecords:true};a.extend(j,jqGridOpt);if(j.rowNum>=50)j.toppager=true;e.jqGrid(j).hideCol("nodeid").hideCol("cswnbtnodekey").hideCol("nodename").navGrid("#"+
h.attr("id"),{cloneToTop:false,edit:true,edittext:"",edittitle:"Edit row",editfunc:function(i){var k={cswnbtnodekey:"",onEditNode:d.onEditNode};if(i!==null){k.cswnbtnodekey=e.jqGrid("getCell",i,"cswnbtnodekey");a.CswDialog("EditNodeDialog",k)}else alert("Please select a row to edit");return k.CswNbtNodeKey},add:true,addtext:"",addtitle:"Add row",addfunc:function(){var i={nodetypeid:m,onAddNode:d.onAddNode};a.CswDialog("AddNodeDialog",i);return i.nodetypeid},del:true,deltext:"",deltitle:"Delete row",
delfunc:function(i){var k={cswnbtnodekey:"",nodename:"",onDeleteNode:d.onDeleteNode};if(i!==null){k.cswnbtnodekey=e.jqGrid("getCell",i,"cswnbtnodekey");k.nodename=e.jqGrid("getCell",i,"nodename");a.CswDialog("DeleteNodeDialog",k)}else alert("Please select a row to delete");return k.cswnbtnodekey},search:true,searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",view:true,viewtext:"",viewtitle:"View row"},{},{},{},{caption:"Search...",
Find:"Find",Reset:"Reset",odata:["equal","not equal","less","less or equal","greater","greater or equal","begins with","does not begin with","is in","is not in","ends with","does not end with","contains","does not contain"],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],matchText:"match",rulesText:"rules"},{})}});return e},scrollToSelectedRow:function(){var b=a(this),d=b.jqGrid("getGridParam","selrow"),f=null;try{f=b.find("tbody").find("tr:first").outerHeight()}catch(e){}f=f||23;d=b.getInd(d);
b.closest(".ui-jqgrid-bdiv").scrollTop(f*(d-1))}};a.fn.CswNodeGrid=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on "+PluginName)}})(jQuery);(function(a){var g={init:function(b){var d={ID:"",NodesUrl:"/NbtWebApp/wsNBT.asmx/getNodes",nodetypeid:"",objectclassid:"",objectclass:"",onSelect:function(){},onSuccess:function(){}};b&&a.extend(d,b);b=a(this);var f=a('<select id="'+d.ID+'_nodeselect" />').appendTo(b);f.change(function(){d.onSelect(f.val())});CswAjaxXml({url:d.NodesUrl,data:"NodeTypeId="+d.nodetypeid+"&ObjectClassId="+d.objectclassid+"&ObjectClass="+d.objectclass,success:function(e){e.children("node").each(function(){var h=a(this);
f.append('<option value="'+h.attr("id")+'">'+h.attr("name")+"</option>")});d.onSuccess()}});return f},value:function(){return a(this).val()}};a.fn.CswNodeSelect=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswNodeSelect")}})(jQuery);(function(a){a.fn.CswNodeTabs=function(g){function b(l,t){CswAjaxXml({url:k.PropsUrl,data:"EditMode="+k.EditMode+"&NodeId="+k.nodeid+"&SafeNodeKey="+k.cswnbtnodekey+"&TabId="+t+"&NodeTypeId="+k.nodetypeid,success:function(s){var w=l.children("form");w.contents().remove();k.title!==""&&w.append(k.title);var C=w.CswLayoutTable("init",{ID:k.ID+"_props",OddCellRightAlign:true,ReadOnly:k.EditMode==="PrintReport",cellset:{rows:1,columns:2},onSwap:function(u,y){d(y)},showConfigButton:k.filterToPropId===
"",onConfigOn:function(){s.children().each(function(){var u=a(this),y=C.CswLayoutTable("cellset",u.attr("displayrow"),u.attr("displaycol"))[1][2],F=y.children("#"+u.attr("id")+"_subproptable"),N={fieldtype:u.attr("fieldtype"),nodeid:k.nodeid,relatednodeid:k.relatednodeid,propid:u.attr("id"),$propdiv:y.children("div"),$propxml:u,onchange:function(){},onReload:function(){b(l,t)},cswnbtnodekey:k.cswnbtnodekey};F.length>0&&j(N,k.SinglePropUrl,k.EditMode,k.cswnbtnodekey,u.attr("id"),k.nodetypeid,u,y,l,
t,true)})},onConfigOff:function(){s.children().each(function(){var u=a(this),y=C.CswLayoutTable("cellset",u.attr("displayrow"),u.attr("displaycol"))[1][2],F=y.children("#"+u.attr("id")+"_subproptable"),N={fieldtype:u.attr("fieldtype"),nodeid:k.nodeid,relatednodeid:k.relatednodeid,propid:u.attr("id"),$propdiv:y.children("div"),$propxml:u,onchange:function(){},onReload:function(){b(l,t)},cswnbtnodekey:k.cswnbtnodekey};F.length>0&&j(N,k.SinglePropUrl,k.EditMode,k.cswnbtnodekey,u.attr("id"),k.nodetypeid,
u,y,l,t,false)})}});e(C,s,l,t);if(k.EditMode!=="PrintReport")var v=w.CswButton({ID:"SaveTab",enabledText:"Save Changes",disabledText:"Saving...",onclick:function(){m(w,C,s,v)}});w.validate({highlight:function(u){u=a(u);u.attr("csw_invalid","1");u.animate({backgroundColor:"#ff6666"})},unhighlight:function(u){var y=a(u);if(y.attr("csw_invalid")==="1"){y.css("background-color","#66ff66");y.attr("csw_invalid","0");setTimeout(function(){y.animate({backgroundColor:"transparent"})},500)}}})}})}function d(l){f(l.cellset[1][2].children("div").first(),
l.swaprow,l.swapcolumn);f(l.swapcellset[1][2].children("div").first(),l.row,l.column)}function f(l,t,s){if(l.length>0){l=l.attr("propid");CswAjaxJSON({url:k.MovePropUrl,data:'{ "PropId": "'+l+'", "NewRow": "'+t+'", "NewColumn": "'+s+'", "EditMode": "'+k.EditMode+'" }',success:function(){}})}}function e(l,t,s,w,C){t.children().each(function(){var v=a(this),u=v.attr("id"),y=v.attr("fieldtype"),F=l.CswLayoutTable("cellset",v.attr("displayrow"),v.attr("displaycol"));if((v.attr("display")!=="false"||C)&&
y!=="Image"&&y!=="Grid"&&(k.filterToPropId===""||k.filterToPropId===u)){y=F[1][1];y.addClass("propertylabel");v.attr("helptext")!==""?a('<a href="#" title="'+v.attr("helptext")+'" onclick="return false;">'+v.attr("name")+"</a>").appendTo(y):y.append(v.attr("name"));k.ShowCheckboxes&&v.attr("copyable")==="true"&&y.CswInput("init",{ID:"check_"+u,type:CswInput_Types.checkbox,value:Value,cssclass:k.ID+"_check"}).attr("propid",u)}u=F[1][2];u.addClass("propertyvaluecell");h(u,v,s,w,C)})}function h(l,t,
s,w,C){l.empty();if((t.attr("display")!=="false"||C)&&(k.filterToPropId===""||k.filterToPropId===t.attr("id"))){var v={fieldtype:t.attr("fieldtype"),nodeid:k.nodeid,relatednodeid:k.relatednodeid,propid:t.attr("id"),$propdiv:a("<div/>").appendTo(l),$propxml:t,onchange:function(){},onReload:function(){b(s,w)},cswnbtnodekey:k.cswnbtnodekey,EditMode:k.EditMode,onEditView:k.onEditView};v.$propdiv.attr("nodeid",v.nodeid);v.$propdiv.attr("propid",v.propid);v.$propdiv.attr("cswnbtnodekey",v.cswnbtnodekey);
v.onchange=function(){k.onPropertyChange(v.propid,t.attr("name"))};if(t.attr("hassubprops")==="true")v.onchange=function(){j(v,k.SinglePropUrl,k.EditMode,k.cswnbtnodekey,t.attr("id"),k.nodetypeid,t,l,s,w,false);k.onPropertyChange(v.propid,t.attr("name"))};a.CswFieldTypeFactory("make",v);var u=t.children("subprops");if(u.length>0&&u.children('[display != "false"]').length>0||C){var y=l.CswLayoutTable("init",{ID:v.propid+"_subproptable",OddCellRightAlign:true,ReadOnly:k.EditMode==="PrintReport",cellset:{rows:1,
columns:2},onSwap:function(F,N){d(N)},showConfigButton:false});e(y,u,s,w,C);C?y.CswLayoutTable("ConfigOn"):y.CswLayoutTable("ConfigOff")}}}function j(l,t,s,w,C,v,u,y,F,N,P){a.CswFieldTypeFactory("save",l);CswAjaxXml({url:t,data:"EditMode="+s+"&NodeId="+k.nodeid+"&SafeNodeKey="+w+"&PropId="+C+"&NodeTypeId="+v+"&NewPropXml="+xmlToString(u),success:function(ba){h(y,ba.children().first(),F,N,P)}})}function m(l,t,s,w){if(l.valid()){i(t,s);l={EditMode:k.EditMode,NodeId:k.nodeid,SafeNodeKey:k.cswnbtnodekey,
NodeTypeId:k.nodetypeid,ViewId:a.CswCookie("get",CswCookieName.CurrentView.ViewId),NewPropsXml:xmlToString(s)};CswAjaxJSON({url:k.SavePropUrl,data:jsonToString(l),success:function(C){if(k.ShowCheckboxes){var v=a("."+k.NodeCheckTreeId+"_check:checked"),u=a("."+k.ID+"_check:checked");if(v.length>0&&u.length>0){var y="{ SourceNodeKey: '"+k.cswnbtnodekey+"', CopyNodeIds: [",F=true;v.each(function(){var N=a(this).attr("nodeid");F||(y+=",");y+="'"+N+"'";F=false});y+="], PropIds: [";F=true;u.each(function(){var N=
a(this).attr("propid");F||(y+=",");y+="'"+N+"'";F=false});y+="] }";CswAjaxJSON({url:k.CopyPropValuesUrl,data:y})}}k.onSave(C.nodeid,C.cswnbtnodekey)},error:function(){w.CswButton("enable")}})}else w.CswButton("enable")}function i(l,t){t.children().each(function(){var s={$propxml:a(this),$propdiv:"",$propCell:"",fieldtype:"",nodeid:k.nodeid,cswnbtnodekey:k.cswnbtnodekey};s.fieldtype=s.$propxml.attr("fieldtype");var w=l.CswLayoutTable("cellset",s.$propxml.attr("displayrow"),s.$propxml.attr("displaycol"));
s.$propcell=w[1][2];s.$propdiv=s.$propcell.children("div").first();a.CswFieldTypeFactory("save",s);if(s.$propxml.attr("hassubprops")==="true"){w=s.$propxml.children("subprops");if(w.length>0&&w.children('[display != "false"]').length>0){s=s.$propcell.children("#"+s.$propxml.attr("id")+"_subproptable").first();s.length>0&&i(s,w)}}})}var k={ID:"",TabsUrl:"/NbtWebApp/wsNBT.asmx/getTabs",SinglePropUrl:"/NbtWebApp/wsNBT.asmx/getSingleProp",PropsUrl:"/NbtWebApp/wsNBT.asmx/getProps",MovePropUrl:"/NbtWebApp/wsNBT.asmx/moveProp",
SavePropUrl:"/NbtWebApp/wsNBT.asmx/saveProps",CopyPropValuesUrl:"/NbtWebApp/wsNBT.asmx/copyPropValues",nodeid:"",relatednodeid:"",tabid:"",cswnbtnodekey:"",nodetypeid:"",filterToPropId:"",title:"",EditMode:"Edit",onSave:function(){},onBeforeTabSelect:function(){return true},onTabSelect:function(){},onPropertyChange:function(){},ShowCheckboxes:false,NodeCheckTreeId:"",onEditView:function(){}};g&&a.extend(k,g);g=a(this);var n=a('<div id="'+k.ID+'_tabdiv" />').appendTo(g);(function(){CswAjaxXml({url:k.TabsUrl,
data:"EditMode="+k.EditMode+"&NodeId="+k.nodeid+"&SafeNodeKey="+k.cswnbtnodekey+"&NodeTypeId="+k.nodetypeid,success:function(l){n.contents().remove();var t=[],s=0,w=0;l.children().each(function(){$tab=a(this);if(k.EditMode==="PrintReport"||t.length===0)t[t.length]=a("<div><ul></ul></div>").appendTo(n);var y=t[t.length-1];y.children("ul").append('<li><a href="#'+$tab.attr("id")+'">'+$tab.attr("name")+"</a></li>");y.append('<div id="'+$tab.attr("id")+'"><form id="'+$tab.attr("id")+'_form" /></div>');
if($tab.attr("id")===k.tabid)s=w;w++});for(var C in t){var v=t[C];v.tabs({selected:s,select:function(y,F){if(k.onBeforeTabSelect(P)){var N=a(v.children("div")[F.index]),P=N.attr("id");b(N,P);k.onTabSelect(P)}else return false}});l=a(v.children("div")[v.tabs("option","selected")]);var u=l.attr("id");b(l,u);k.onTabSelect(u)}}})})(k);if(k.EditMode!=="PrintReport"){g=a('<div id="'+k.ID+'_linkdiv" align="right"/>').appendTo(g);a('<a href="#">As Report</a>').appendTo(g).click(function(){openPopup("NewNodeReport.html?nodeid="+
k.nodeid+"&cswnbtnodekey="+k.cswnbtnodekey,600,800)})}return this}})(jQuery);(function(a){function g(d,f){return jsTreeGetSelected(d).$item.attr("rel")===f.attr("rel")}var b={init:function(d){var f={ID:"",ViewTreeUrl:"/NbtWebApp/wsNBT.asmx/getTreeOfView",NodeTreeUrl:"/NbtWebApp/wsNBT.asmx/getTreeOfNode",viewid:"",viewmode:"",nodeid:"",cswnbtnodekey:"",IncludeNodeRequired:false,UsePaging:true,onSelectNode:function(){},onViewChange:function(){},SelectFirstChild:true,ShowCheckboxes:false};d&&a.extend(f,d);var e=f.ID+"_",h=a('<div id="'+e+'" class="treediv" />').appendTo(a(this)),
j=f.ViewTreeUrl;d="UsePaging="+f.UsePaging+"&ViewNum="+f.viewid+"&IDPrefix="+e+"&IsFirstLoad=true&ParentNodeKey=&IncludeNodeRequired="+f.IncludeNodeRequired+"&IncludeNodeKey=";if(f.cswnbtnodekey!==undefined)d+=f.cswnbtnodekey;if(f.viewid===""||f.viewid===undefined){j=f.NodeTreeUrl;d="IDPrefix="+e+"&NodePk="+f.nodeid}CswAjaxXml({url:j,data:d,success:function(m){var i="",k=["themes","html_data","ui","types","crrm"],n;if(f.nodeid!==undefined&&f.nodeid!=="")i=e+f.nodeid;var l=m.children("viewid").text();
if(f.viewid!==l){f.onViewChange(l);f.viewid=l}l=m.find('item[id="'+i+'"]');if(i===""||l.length===0)if(f.SelectFirstChild)if(f.viewmode==="list"){i=m.find("item").first().attr("id");n={dots:false}}else{i=m.find("item").first().find("item").first().attr("id");n={dots:true}}else i=e+"root";l=m.find('item[id="'+i+'"]');var t=[],s=0;l.parents("item").andSelf().each(function(){t[s]=a(this).attr("id");s++});l=m.find("types").text();l=a.parseJSON(l);m=m.find("tree").children("root");if(m.length>0){var w=
function(v){var u=v.attr("id").substring(e.length),y=v.children("content").children("name").text(),F='<li id="'+v.attr("id")+'" ';F+='    rel="'+v.attr("rel")+'" ';F+='    species="'+v.attr("species")+'" ';F+='    class="jstree-'+v.attr("state")+'" ';if(v.attr("cswnbtnodekey")!==undefined)F+='    cswnbtnodekey="'+v.attr("cswnbtnodekey").replace(/"/g,"&quot;")+'"';F+=">";if(f.ShowCheckboxes)F+='  <input type="checkbox" class="'+e+'check" id="check_'+u+'" rel="'+v.attr("rel")+'" nodeid="'+u+'" nodename="'+
y+'"></input>';F+='  <a href="#">'+y+"</a>";if(v.children("item").length>0){F+="<ul>";v.children("item").each(function(){F+=w(a(this))});F+="</ul>"}F+="</li>";return F},C="<ul>";m.children().each(function(){C+=w(a(this))});C+="</ul>";h.jstree({html_data:{data:C,ajax:{type:"POST",url:j,dataType:"xml",data:function(v){v=v.attr("cswnbtnodekey");return"UsePaging="+f.UsePaging+"&ViewNum="+f.viewid+"&IDPrefix="+e+"&IsFirstLoad=false&ParentNodeKey="+v+"&IncludeNodeRequired=false&IncludeNodeKey="},success:function(v,
u,y){var F="";a(y.responseXML).children().first().children().each(function(){F+=w(a(this))});return F}}},ui:{select_limit:1,initially_select:i},themes:n,core:{initially_open:t},types:{types:l,max_children:-2,max_depth:-2},plugins:k}).bind("load_node.jstree",function(){a("."+e+"check").unbind("click");a("."+e+"check").click(function(){return g(h,a(this))})}).bind("select_node.jstree",function(v,u){var y=jsTreeGetSelected(h),F={nodeid:y.id,nodename:y.text,iconurl:y.iconurl,cswnbtnodekey:y.$item.attr("cswnbtnodekey"),
nodespecies:y.$item.attr("species"),viewid:f.viewid};if(F.nodespecies==="More"){y="";var N=u.inst._get_parent(u.rslt.obj);if(N!==-1)y=N.attr("cswnbtnodekey");if(y===undefined)y="";CswAjaxXml({url:j,data:"UsePaging="+f.UsePaging+"&ViewNum="+f.viewid+"&IDPrefix="+e+"&IsFirstLoad=false&ParentNodeKey="+y+"&IncludeNodeRequired=false&IncludeNodeKey="+F.cswnbtnodekey,success:function(P){function ba(){Z.length>0&&h.jstree("create","#"+ea,"after",{attr:{id:Z.attr("id"),rel:Z.attr("rel"),cswnbtnodekey:Z.attr("cswnbtnodekey"),
species:Z.attr("species")},data:Z.children("content").children("name").text(),state:Z.attr("state")},function(){ea===Z.attr("id")&&h.jstree("remove","#"+e+F.nodeid+'[species="More"]');ea=Z.attr("id");Z=Z.next();ba()},true,true)}var ea=e+F.nodeid,Z=P.children().first();ba()}})}else{a("."+e+"check").attr("checked","");f.onSelectNode(F)}});a("."+e+"check").click(function(){return g(h,a(this))});h.find("li").each(function(){var v=a(this);v.children("ins").attr("id",v.attr("id")+"_expand")})}else h.append("No Results")}});
return h},selectNode:function(d){var f={newnodeid:"",newcswnbtnodekey:""};d&&a.extend(f,d);d=a(this).children(".treediv");var e=d.attr("id");d.jstree("select_node","#"+e+f.newnodeid)}};a.fn.CswNodeTree=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswNodeTree")}})(jQuery);(function(a){var g={init:function(b){var d={ID:"",NodeTypesUrl:"/NbtWebApp/wsNBT.asmx/getNodeTypes",nodetypeid:"",onSelect:function(){},onSuccess:function(){}};b&&a.extend(d,b);b=a(this);b.contents().remove();var f=a('<select id="'+d.ID+'_sel" />').appendTo(b);f.change(function(){d.onSelect(f.val())});CswAjaxXml({url:d.NodeTypesUrl,data:"",success:function(e){e.children("nodetype").each(function(){var h=a(this);f.append('<option value="'+h.attr("id")+'">'+h.attr("name")+"</option>")});d.onSuccess()}});
return f},value:function(){return a(this).val()}};a.fn.CswNodeTypeSelect=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswNodeTypeSelect")}})(jQuery);(function(a){var g={init:function(b){var d={ID:"",Value:"",MinValue:"",MaxValue:"",Precision:"",ReadOnly:false,Required:false,onchange:function(){}};b&&a.extend(d,b);b=a(this);b.contents().remove();if(d.ReadOnly)b.append(d.Value);else{b=b.CswInput("init",{ID:d.ID,type:CswInput_Types.text,value:d.Value,cssclass:"textinput number",onChange:d.onchange});if(d.MinValue!==undefined){jQuery.validator.addMethod(d.ID+"_validateFloatMinValue",function(f,e){return this.optional(e)||validateFloatMinValue(a(e).val(),
d.MinValue)},"Number must be greater than or equal to "+d.MinValue);b.addClass(d.ID+"_validateFloatMinValue")}if(d.MaxValue!==undefined){jQuery.validator.addMethod(d.ID+"_validateFloatMaxValue",function(f,e){return this.optional(e)||validateFloatMaxValue(a(e).val(),d.MaxValue)},"Number must be less than or equal to "+d.MaxValue);b.addClass(d.ID+"_validateFloatMaxValue")}if(d.Precision===undefined||d.Precision<=0){jQuery.validator.addMethod(d.ID+"_validateInteger",function(f,e){return this.optional(e)||
validateInteger(a(e).val())},"Value must be an integer");b.addClass(d.ID+"_validateInteger")}else{jQuery.validator.addMethod(d.ID+"_validateFloatPrecision",function(f,e){return this.optional(e)||validateFloatPrecision(a(e).val(),d.Precision)},"Value must be numeric");b.addClass(d.ID+"_validateFloatPrecision")}d.Required&&b.addClass("required")}},value:function(){return a(this).find("input").val()},setValue:function(b){a(this).find("input").CswInput("set",{value:b})}};a.fn.CswNumberTextBox=function(b){if(g[b])return g[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswNumberTextBox")}})(jQuery);(function(a){a.CswQueryString=function(){for(var g={},b,d=/\+/g,f=/([^&=]+)=?([^&]*)/g,e=window.location.search.substring(1);b=f.exec(e);)g[decodeURIComponent(b[1].replace(d," "))]=decodeURIComponent(b[2].replace(d," "));return g}})(jQuery);(function(a){a.fn.CswQuickLaunch=function(g){var b={Url:"/NbtWebApp/wsNBT.asmx/getQuickLaunchItems",onLinkClick:function(){},onSuccess:function(){}};g&&a.extend(b,g);var d=a(this);CswAjaxXml({url:b.Url,data:"{ UserId: '' }",success:function(f){var e=a('<div id="quicklaunchdiv"><ul id="launchitems"></ul></div>').appendTo(d).children();f.children("items").children("item").each(function(){var h=a(this),j={type:h.attr("type"),viewmode:h.attr("viewmode"),text:h.attr("text"),url:h.attr("url"),viewid:h.attr("itemid")};
switch(j.type){case "view":a('<li><a href="#'+j.text+"_"+j.type+"_"+j.viewmode+"_"+j.viewid+'">'+j.text+"</a></li>").appendTo(e).children("a").click(function(){b.onLinkClick(j);return false});break;case "action":a("<li><a href="+j.url+">"+j.text+"</a></li>").appendTo(e)}});b.onSuccess()}});return this}})(jQuery);var CswSearch_CssClasses={nodetype_select:{name:"csw_search_nodetype_select"},property_select:{name:"csw_search_property_select"}};
(function(a){a.fn.CswSearch=function(g){function b(n){var l={$link:"",advancedIsHidden:false};n&&a.extend(l,n);if("Advanced"===l.$link.text()||!l.advancedIsHidden){a("."+ViewBuilder_CssClasses.subfield_select.name).each(function(){a(this).show()});a("."+ViewBuilder_CssClasses.filter_select.name).each(function(){a(this).show()});a("."+ViewBuilder_CssClasses.default_filter.name).each(function(){a(this).hide()});l.$link.text("Simple");l.advancedIsHidden=true}else if("Simple"===l.$link.text()||l.advancedIsHidden){a("."+
ViewBuilder_CssClasses.subfield_select.name).each(function(){a(this).hide()});a("."+ViewBuilder_CssClasses.filter_select.name).each(function(){a(this).hide()});a("."+ViewBuilder_CssClasses.default_filter.name).each(function(){a(this).show()});l.$link.text("Advanced");l.advancedIsHidden=false}return l.advancedIsHidden}function d(){for(var n=2;n<=i.propsCount;){var l=i.$searchTable.CswTable("cell",n,1).attr({align:"right"}),t=a("<span>&nbsp;and&nbsp;</span>");l.append(t);n++}var s=1;i.$propsXml.children("property").each(function(){var w=
a(this),C=i.$searchTable.CswTable("cell",s,2),v=makeId({ID:"viewbuilderpropid",suffix:w.attr("viewbuilderpropid"),prefix:i.ID});C.CswDOM("span",{ID:v,value:w.attr("metadatatypename"),cssclass:ViewBuilder_CssClasses.metadatatype_static.name}).attr("relatedidtype",w.attr("relatedidtype"));i.selectedSubfieldVal="";i.selectedFilterVal="";C=w.attr("filtarbitraryid");i.$searchTable.CswViewPropFilter("init",{ID:i.ID,propRow:s,firstColumn:3,includePropertyName:true,$propsXml:w,filtarbitraryid:C,advancedIsHidden:i.advancedIsHidden});
s++});i.bottomRow=s;i.bottomCell=1;i.searchtype="viewsearch";h()}function f(){var n=i.$searchTable.CswTable("cell",1,2).empty(),l=makeId({ID:"nodetype_select",prefix:i.ID});l=a(xmlToString(i.$nodeTypesXml.children("select"))).attr("id",l).attr("name",l).attr("class",CswSearch_CssClasses.nodetype_select.name).change(function(){var t=a(this);t={nodetypeorobjectclassid:t.val(),relatedidtype:t.find(":selected").attr("title"),cswnbtnodekey:"",$parent:i.$searchTable,$nodeTypesSelect:t};a.extend(i,t);e()});
i.$nodeTypesSelect=l;i.relatedidtype=l.find(":selected").attr("title");i.nodetypeorobjectclassid!==""&&l.val(i.nodetypeorobjectclassid).attr("selected",true);n.append(l);n=i.$searchTable.CswTable("cell",1,3).empty();l=makeId({ID:"property_select",prefix:i.ID});l=a(xmlToString(i.$propsXml.children("properties").children("select"))).attr("id",l).attr("name",l).attr("class",CswSearch_CssClasses.property_select.name).change(function(){var t=a(this).val(),s={propertyid:t,selectedSubfieldVal:"",selectedFilterVal:"",
$selectedPropXml:i.$propsXml.children("propertyfilters").children("property[viewbuilderpropid="+t+"]")};a.extend(i,s);i.$searchTable.CswViewPropFilter("init",{ID:i.ID,propRow:1,firstColumn:3,includePropertyName:false,$propsXml:i.$selectedPropXml,viewbuilderpropid:t,advancedIsHidden:i.advancedIsHidden})});i.propertyid!==""&&l.val(i.propertyid).attr("selected",true);n.append(l);i.propertyid=l.find(":selected").val();i.$selectedPropXml=i.$propsXml.children("propertyfilters").children("property[viewbuilderpropid="+
i.propertyid+"]");i.$searchTable.CswViewPropFilter("init",{ID:i.ID,propRow:1,firstColumn:3,includePropertyName:false,$propsXml:i.$selectedPropXml,viewbuilderpropid:i.propertyid,advancedIsHidden:i.advancedIsHidden});i.bottomRow=i.propsCount+1;i.bottomCell=2;i.searchtype="nodetypesearch";h()}function e(){CswAjaxXml({url:i.getNewPropsUrl,data:"RelatedIdType="+i.relatedidtype+"&NodeTypeOrObjectClassId="+i.nodetypeorobjectclassid+"&IdPrefix="+i.ID+"&NodeKey="+i.cswnbtnodekey,success:function(n){i.$propsXml=
n;f()}})}function h(){var n=i.$searchTable,l=i.bottomCell,t=l+1,s=i.bottomRow;if(i.searchtype==="nodetypesearch"){n=i.$searchTable.CswTable("cell",i.bottomRow,i.bottomCell).empty();t=makeId({prefix:i.ID,ID:"split_cell_table"});n=n.CswTable("init",{ID:t,cellpadding:1,cellspacing:1,cellalign:"left",align:"left"});l=1;t=2;s=1}l=n.CswTable("cell",s,l).empty();var w=makeId({ID:"clear_button",prefix:i.ID});l.CswButton({ID:w,enabledText:"Clear",disabledText:"Clear",disableOnClick:false,onclick:function(){k.empty();
var v=makeId({prefix:i.ID,ID:"search_tbl"});i.$searchTable=k.CswTable("init",{ID:v,cellpadding:1,cellspacing:1,cellalign:"center",align:"center"});switch(i.searchtype){case "nodetypesearch":f();case "viewsearch":d()}}});n=n.CswTable("cell",s,t).empty();t=makeId({ID:"advanced_options",prefix:i.ID});var C=n.CswDOM("link",{ID:t,href:"#advanced",value:"Advanced"}).click(function(){i.advancedIsHidden=b({$link:C,advancedIsHidden:i.advancedIsHidden})});n=i.$searchTable.CswTable("cell",i.bottomRow,i.searchBtnCell).attr({align:"right"}).empty();
t=makeId({ID:"search_button",prefix:i.ID});n.CswButton({ID:t,enabledText:"Search",disabledText:"Searching",onclick:function(){m()}})}function j(){CswAjaxXml({url:i.getClientSearchXmlUrl,data:"ViewIdNum="+i.viewid+"&SelectedNodeTypeIdNum="+i.nodetypeorobjectclassid+"&IdPrefix="+i.ID+"&NodeKey="+i.cswnbtnodekey,success:function(n){k.empty();i.searchtype=n.attr("searchtype");var l=makeId({prefix:i.ID,ID:"search_tbl"});i.$searchTable=k.CswTable("init",{ID:l,cellpadding:1,cellspacing:1,cellalign:"left",
align:"center"});i.$searchTable.css("background-color","0099FF");i.$searchTable.attr("frame","border");switch(i.searchtype){case "nodetypesearch":i.$nodeTypesXml=n.children("nodetypes");i.$propsXml=n.children("viewbuilderprops");f();break;case "viewsearch":i.$propsXml=n.children("properties");i.propsCount=n.children("properties").children("property").size();d()}}})}function m(){var n,l=[],t;switch(i.searchtype){case "nodetypesearch":t=i.doNodeSearchUrl;var s=i.$nodeTypesSelect.val();i.relatedidtype=
i.$nodeTypesSelect.find(":selected").attr("title");a("."+CswSearch_CssClasses.property_select.name).each(function(){var w=a(this),C=w.text(),v=w.val();C=i.$propsXml.children("propertyfilters").children('property[propname="'+C+'"][viewbuilderpropid="'+v+'"]').attr("fieldtype");w=w.CswViewPropFilter("getFilterJson",{nodetypeorobjectclassid:s,relatedidtype:i.relatedidtype,fieldtype:C,ID:i.ID,$parent:i.$searchTable,viewbuilderpropid:v,advancedIsHidden:i.advancedIsHidden});l.push(w)});n={viewbuilderprops:l};
break;case "viewsearch":t=i.doViewSearchUrl;i.$propsXml.children("property").each(function(){var w=a(this),C=w.attr("filtarbitraryid");w=w.CswViewPropFilter("getFilterJson",{ID:i.ID,$parent:i.$searchTable,filterarbitraryid:C});l.push(w)});n={viewprops:l,viewid:i.viewid}}n&&CswAjaxJSON({url:t,data:'{SearchJson: "'+jsonToString(n)+'"}',success:function(w){i.viewid=w.sessionviewid;i.searchtype="viewsearch";j();i.onSearchSubmit({viewid:w.sessionviewid,viewmode:w.viewmode})}})}var i={$parent:"",$searchTable:"",
getNewPropsUrl:"/NbtWebApp/wsNBT.asmx/getNodeTypeSearchProps",doViewSearchUrl:"/NbtWebApp/wsNBT.asmx/doViewSearch",doNodeSearchUrl:"/NbtWebApp/wsNBT.asmx/doNodeTypeSearch",getSearchableViewsUrl:"/NbtWebApp/wsNBT.asmx/getSearchableViews",getClientSearchXmlUrl:"/NbtWebApp/wsNBT.asmx/getClientSearchXml",viewid:"",nodetypeorobjectclassid:"",propertyid:"",cswnbtnodekey:"",relatedidtype:"",ID:"",propsCount:1,advancedIsHidden:true,$propsXml:"",$selectedPropXml:"",$nodeTypesXml:"",$nodeTypesSelect:"",onSearchSubmit:function(){},
selectedPropVal:"",selectedSubfieldVal:"",selectedFilterVal:"",bottomRow:2,bottomCell:1,propRow:"",clearBtnCell:1,searchBtnCell:6,searchtype:""};g&&a.extend(i,g);g=a(this);i.$searchTable=g.CswDOM("div",{ID:i.ID});var k=i.$searchTable.CswDOM("span").CswDOM("div",{ID:"search_criteria_div",prefix:i.ID});j();return i.$searchTable}})(jQuery);(function(a){a.fn.CswTable=function(g){function b(h){return h.children("tbody").children("tr").length}function d(h){h=h.children("tbody").children("tr");for(var j=0,m=0;m<h.length;m++){var i=a(h[m]).children("td");if(i.length>j)j=i.length}return j}function f(h,j,m){var i=null;if(h.length>0&&j!==undefined&&j!==""&&m!==undefined&&m!==""){if(j<=0){log("error: row must be greater than 1, got: "+j);j=1}if(m<=0){log("error: col must be greater than 1, got: "+m);m=1}for(;j>h.children("tbody").children("tr").length;)h.append("<tr></tr>");
for(i=a(h.children("tbody").children("tr")[j-1]);m>i.children("td").length;){var k=h.attr("cellalign");if(i.children("td").length===0&&h.attr("FirstCellRightAlign")=="true"||i.children("td").length%2===0&&h.attr("OddCellRightAlign")=="true")k="right";k=a('<td class="'+h.attr("cellcssclass")+'" align="'+k+'" valign="'+h.attr("cellvalign")+'"></td>').appendTo(i);h.trigger("CswTable_onCreateCell",[h,k,j,i.children("td").length])}i=a(i.children("td")[m-1])}return i}var e={init:function(h){var j={ID:"",
prefix:"",suffix:"",TableCssClass:"",CellCssClass:"",cellpadding:0,cellspacing:0,cellalign:"top",width:"",align:"",cellalign:"",cellvalign:"top",onCreateCell:function(){},FirstCellRightAlign:false,OddCellRightAlign:false};h&&a.extend(j,h);h=makeId({ID:j.ID,prefix:j.prefix,suffix:j.suffix});h=a('<table id="'+h+'"></table>');h.addClass(j.TableCssClass);h.attr("width",j.width);h.attr("align",j.align);h.attr("cellpadding",j.cellpadding);h.attr("cellspacing",j.cellspacing);h.attr("border","0");h.attr("cellalign",
j.cellalign);h.attr("cellvalign",j.cellvalign);h.attr("cellcssclass",j.CellCssClass);h.attr("FirstCellRightAlign",j.FirstCellRightAlign);h.attr("OddCellRightAlign",j.OddCellRightAlign);h.bind("CswTable_onCreateCell",function(m,i,k,n,l){j.onCreateCell(m,i,k,n,l);m.stopPropagation()});h.trigger("CswTable_onCreateCell",[h,h.find("td"),1,1]);a(this).append(h);return h},cell:function(h,j){var m=a(this);return f(m,h,j)},maxrows:function(){return b(a(this))},maxcolumns:function(){return d(a(this))},finish:function(h){for(var j=
a(this),m=b(j),i=d(j),k=1;k<=m;k++)for(var n=1;n<=i;n++){var l=f(j,k,n);if(l.contents().length===0)h!==null?h(l,k,n):l.append("&nbsp;")}},findRow:function(h){var j=a(this).children("tbody").children("tr");if(h!==""&&h!==null)j=j.filter(h);return j},findCell:function(h){var j=a(this).children("tbody").children("tr").children("td");if(h!==""&&h!==null)j=j.filter(h);return j},rowFindCell:function(h,j){var m=h.children("td");if(j!==""&&j!==null)m=m.filter(j);return m}};if(e[g])return e[g].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return e.init.apply(this,arguments);else a.error("Method "+g+" does not exist on CswTable")}})(jQuery);(function(a){var g={init:function(b){var d={ID:"",prefix:"",Checked:"",ReadOnly:false,Required:false,onchange:function(){}};b&&a.extend(d,b);b=a(this);b.empty();var f=makeId({prefix:d.prefix,ID:d.ID});if(d.Checked===""||d.Checked===undefined||d.Checked===null)d.Checked="null";if(d.ReadOnly)switch(d.Checked){case "true":b.append("Yes");break;case "false":b.append("No")}else{var e;switch(d.Checked){case "true":e=CswImageButton_ButtonType.CheckboxTrue;break;case "false":e=CswImageButton_ButtonType.CheckboxFalse;
break;default:e=CswImageButton_ButtonType.CheckboxNull}b.CswImageButton({ID:f,ButtonType:e,AlternateText:d.Checked,onClick:function(h){var j=d.Required,m=h.attr("alt"),i=CswImageButton_ButtonType.CheckboxNull,k="null";if(m==="null"){i=CswImageButton_ButtonType.CheckboxTrue;k="true"}else if(m==="false")if(j==="true"){i=CswImageButton_ButtonType.CheckboxTrue;k="true"}else{i=CswImageButton_ButtonType.CheckboxNull;k="null"}else if(m==="true"){i=CswImageButton_ButtonType.CheckboxFalse;k="false"}h.attr("alt",
k);h=i;d.onchange();return h}})}},value:function(){return a(this).attr("alt")}};a.fn.CswTristateCheckBox=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswTristateCheckBox")}})(jQuery);var CswViewEditor_WizardSteps={step1:{step:1,description:"Choose a View"},step2:{step:2,description:"Edit View Attributes"},step3:{step:3,description:"Add Relationships"},step4:{step:4,description:"Select Properties"},step5:{step:5,description:"Set Filters"},step6:{step:6,description:"Fine Tuning"}};
(function(a){a.fn.CswViewEditor=function(g){function b(E){switch(E){case CswViewEditor_WizardSteps.step2.step:CswAjaxXml({url:i.ViewInfoUrl,data:"ViewId="+f(u,i.ColumnViewId),success:function(S){Q=S;ea.val(Q.attr("viewname"));Z.val(Q.attr("category"));if(ga.getvisibilityselect()!==undefined){ga.getvisibilityselect().val(Q.attr("visibility")).trigger("change");ga.getvisroleselect().val("nodes_"+Q.attr("visibilityroleid"));ga.getvisuserselect().val("nodes_"+Q.attr("visibilityuserid"))}Q.attr("formobile")===
"true"&&sa.attr("checked","true");S=Q.attr("mode");wa.text(S);ka.CswNumberTextBox("setValue",Q.attr("width"));if(S==="Grid"){ca.show();ka.show()}else{ca.hide();ka.hide()}}});break;case CswViewEditor_WizardSteps.step3.step:if(Q!==undefined){Q.attr("viewname",ea.val());Q.attr("category",Z.val());Q.attr("visibility",ga.getvisibilityselect().val());E=ga.getvisroleselect().val();isNullOrEmpty(E)||(E=E.substr(6));var J=ga.getvisuserselect().val();isNullOrEmpty(J)||(J=J.substr(6));Q.attr("visibilityroleid",
E);Q.attr("visibilityuserid",J);Q.attr("formobile",sa.attr("checked")==="true");Q.attr("width",ka.CswNumberTextBox("value"))}j(CswViewEditor_WizardSteps.step3.step,la);break;case CswViewEditor_WizardSteps.step4.step:j(CswViewEditor_WizardSteps.step4.step,ta);break;case CswViewEditor_WizardSteps.step5.step:j(CswViewEditor_WizardSteps.step5.step,ma);break;case CswViewEditor_WizardSteps.step6.step:j(CswViewEditor_WizardSteps.step6.step,na.CswTable("cell",1,1))}}function d(E,J){var S=false;if(a("#"+i.ID+
"_all:checked").length>0)S=true;C.text("");w.CswWizard("button","next","disable");CswAjaxJSON({url:i.ViewGridUrl,data:"{ All: "+S+" }",success:function(O){v.empty();var T=a('<div id="'+i.ID+'_gp" style="width:100%; height:20px;" />').appendTo(v),D=a('<table id="'+i.ID+'_gt" />').appendTo(v);a.extend(O,{autowidth:true,height:180,onSelectRow:function(K,Y){if(Y){N.CswButton("enable");P.CswButton("enable")}else{N.CswButton("disable");P.CswButton("disable")}C.text(f(D,i.ColumnViewName));w.CswWizard("button",
"next","enable")},pager:T});D.jqGrid(O).hideCol(i.ColumnViewId);if(J!==undefined){D.setSelection(e(D,J));D.CswNodeGrid("scrollToSelectedRow")}E(D)}})}function f(E,J){var S=E.jqGrid("getGridParam","selrow");return E.jqGrid("getCell",S,J)}function e(E,J){var S=E.jqGrid("getCol",i.ColumnViewId,true),O=0,T;for(T in S)if(S[T].value===J)O=S[T].id;return O}function h(E,J,S){var O,T,D;IsAdministrator({Yes:function(){E.CswTable("cell",J,1).append(S);var K=E.CswTable("cell",J,2),Y=E.attr("id");O=a('<select id="'+
Y+'_vissel" />').appendTo(K);O.append('<option value="User">User:</option>');O.append('<option value="Role">Role:</option>');O.append('<option value="Global">Global</option>');T=K.CswNodeSelect("init",{ID:Y+"_visrolesel",objectclass:"RoleClass"}).hide();D=K.CswNodeSelect("init",{ID:Y+"_visusersel",objectclass:"UserClass"});O.change(function(){var H=O.val();if(H==="Role"){T.show();D.hide()}else if(H==="User"){T.hide();D.show()}else{T.hide();D.hide()}})}});return{getvisibilityselect:function(){return O},
getvisroleselect:function(){return T},getvisuserselect:function(){return D}}}function j(E,J){var S=m(E,Q);J.jstree({html_data:{data:S.htmlstring},ui:{select_limit:1},types:{types:S.types,max_children:-2,max_depth:-2},plugins:["themes","html_data","ui","types","crrm"]});J.find(".vieweditor_childselect").change(function(){var D=a(this),K=D.find("option:selected").data("optionviewxml");D.attr("arbid")==="root"?a(K).appendTo(Q):a(K).appendTo(Q.find('[arbitraryid="'+D.attr("arbid")+'"]'));j(E,J)});J.find(".vieweditor_deletespan").each(function(){var D=
a(this);D.CswImageButton({ButtonType:CswImageButton_ButtonType.Delete,AlternateText:"Delete",ID:D.attr("arbid")+"_delete",onClick:function(K){K=K.parent();Q.find('[arbitraryid="'+K.attr("arbid")+'"]').remove();j(E,J);return CswImageButton_ButtonType.None}})});E===CswViewEditor_WizardSteps.step5.step&&J.find(".vieweditor_addfilter").each(function(){var D=a(this),K=D.CswTable({ID:i.ID+"_propfilttbl"});K.css("display","inline-table");K.CswViewPropFilter("init",{viewxml:xmlToString(Q),proparbitraryid:D.attr("proparbid"),
filtarbitraryid:"",viewbuilderpropid:"",ID:i.ID,propRow:1,firstColumn:1,includePropertyName:false,selectedSubfieldVal:"",selectedFilterVal:"",autoFocusInput:false});K.CswTable("cell",1,5).CswButton("init",{ID:"addfiltbtn",prefix:i.ID,enabledText:"Add",disabledText:"Adding",onclick:function(){var Y=K.CswViewPropFilter("getFilterJson",{ID:i.ID,$parent:D,proparbitraryid:D.attr("proparbid")});K.CswViewPropFilter("makeFilter",{viewxml:xmlToString(Q),filtJson:Y,onSuccess:function(H){var W=Q.find('[arbitraryid="'+
D.attr("proparbid")+'"]');a(xmlToString(H)).appendTo(W);j(E,J)}})}})});if(E===CswViewEditor_WizardSteps.step6.step){var O=na.CswTable("cell",1,2),T=f(u,i.ColumnViewMode);J.find(".vieweditor_viewrootlink").click(function(){O.empty()});J.find(".vieweditor_viewrellink").click(function(){$a=a(this);O.empty();var D=Q.find('[arbitraryid="'+$a.attr("arbid")+'"]'),K=O.CswTable({ID:i.ID+"_editrel",FirstCellRightAlign:true});K.CswTable("cell",1,1).append("Allow Deleting");var Y=K.CswTable("cell",1,2).CswInput("init",
{ID:i.ID+"_adcb",type:CswInput_Types.checkbox});D.attr("allowdelete").toLowerCase()=="true"&&Y.attr("checked","true");K.CswTable("cell",2,1).append("Group By");var H=a('<select id="'+i.ID+'_gbs" />').appendTo(K.CswTable("cell",2,2));CswAjaxXml({url:i.PropNamesUrl,data:"Type="+D.attr("secondtype")+"&Id="+D.attr("secondid"),success:function(V){H.empty();a('<option value="">[None]</option>').appendTo(H);V.children().each(function(){var da=a(this),ia=a('<option value="'+da.attr("propid")+'">'+da.attr("propname")+
"</option>").appendTo(H).data("propxml",da);D.attr("groupbypropid")===da.attr("propid")&&D.attr("groupbyproptype")===da.attr("proptype")&&D.attr("groupbypropname")===da.attr("propname")&&ia.attr("selected","true")})}});var W;if(T==="Tree"){K.CswTable("cell",3,1).append("Show In Tree");W=K.CswTable("cell",3,2).CswInput("init",{ID:i.ID+"_stcb",type:CswInput_Types.checkbox});D.attr("showintree").toLowerCase()=="true"&&W.attr("checked","true")}K.CswTable("cell",4,2).CswButton({ID:i.ID+"_saverel",enabledText:"Apply",
disableOnClick:false,onclick:function(){W!==undefined&&D.attr("showintree",W.is(":checked"));D.attr("allowdelete",Y.is(":checked"));if(H.val()!==""){var V=H.find(":selected").data("propxml");D.attr("groupbypropid",V.attr("propid"));D.attr("groupbyproptype",V.attr("proptype"));D.attr("groupbypropname",V.attr("propname"))}else{D.attr("groupbypropid","");D.attr("groupbyproptype","");D.attr("groupbypropname","")}}})});J.find(".vieweditor_viewproplink").click(function(){$a=a(this);O.empty();if(T==="Grid"){var D=
Q.find('[arbitraryid="'+$a.attr("arbid")+'"]'),K=O.CswTable({ID:i.ID+"_editprop",FirstCellRightAlign:true});K.CswTable("cell",1,1).append("Sort By");var Y=K.CswTable("cell",1,2).CswInput("init",{ID:i.ID+"_sortcb",type:CswInput_Types.checkbox});D.attr("sortby").toLowerCase()=="true"&&Y.attr("checked","true");K.CswTable("cell",2,1).append("Grid Column Order");var H=K.CswTable("cell",2,2).CswInput("init",{ID:i.ID+"_gcotb",type:CswInput_Types.text});H.val(D.attr("order"));K.CswTable("cell",3,1).append("Grid Column Width (in characters)");
var W=K.CswTable("cell",3,2).CswInput("init",{ID:i.ID+"_gcwtb",type:CswInput_Types.text});W.val(D.attr("width"));K.CswTable("cell",4,2).CswButton({ID:i.ID+"_saveprop",enabledText:"Apply",disableOnClick:false,onclick:function(){D.attr("sortby",Y.is(":checked"));D.attr("order",H.val());D.attr("width",W.val())}})}});J.find(".vieweditor_viewfilterlink").click(function(){$a=a(this);O.empty();var D=Q.find('[arbitraryid="'+$a.attr("arbid")+'"]'),K=O.CswTable({ID:i.ID+"_editfilt",FirstCellRightAlign:true});
K.CswTable("cell",1,1).append("Case Sensitive");var Y=a('<input type="checkbox" id="'+i.ID+'_casecb" />').appendTo(K.CswTable("cell",1,2));D.attr("casesensitive").toLowerCase()==="true"&&Y.attr("checked","true");K.CswTable("cell",4,2).CswButton({ID:i.ID+"_savefilt",enabledText:"Apply",disableOnClick:false,onclick:function(){D.attr("casesensitive",Y.is(":checked"))}})})}}function m(E,J){var S={},O=J.attr("arbitraryid"),T=J.get(0).nodeName,D,K,Y=false,H=true,W;if(T.toLowerCase()==="treeview"){if(E===
CswViewEditor_WizardSteps.step3.step)H=false;O="root";D=J.attr("viewname");K="root";S.root={icon:{image:J.attr("iconfilename")}};W="vieweditor_viewrootlink"}else if(T.toLowerCase()==="relationship"){if(E===CswViewEditor_WizardSteps.step3.step)H=false;if(E===CswViewEditor_WizardSteps.step4.step)H=false;D=J.attr("secondname");T=J.attr("propname");if(T!==""&&T!==undefined)D+=J.attr("propowner")==="First"?" (by "+J.attr("firstname")+"'s "+T+")":" (by "+T+")";K=J.attr("secondtype")+"_"+J.attr("secondid");
S[K]={icon:{image:J.attr("secondiconfilename")}};W="vieweditor_viewrellink"}else if(T.toLowerCase()==="property"){if(E<=CswViewEditor_WizardSteps.step3.step)Y=true;if(E===CswViewEditor_WizardSteps.step5.step)H=false;D=J.attr("name");K="property";S.property={icon:{image:"Images/view/property.gif"}};W="vieweditor_viewproplink"}else if(T.toLowerCase()==="filter"){if(E<=CswViewEditor_WizardSteps.step4.step)Y=true;D=J.attr("subfieldname")+" "+J.attr("filtermode")+" "+J.attr("value");K="filter";S.filter=
{icon:{image:"Images/view/filter.gif"}};W="vieweditor_viewfilterlink"}var V="";if(!Y){V='<li id="'+O+'" ';V+='    rel="'+K+'" ';V+='    class="jstree-open" ';V+=">";V+=' <a href="#" class="'+W+'" arbid="'+O+'">'+D+"</a>";if(O!=="root")V+=' <span style="" class="vieweditor_deletespan" arbid="'+O+'"></span>';V+="<ul>";J.children().each(function(){var da=m(E,a(this));V+=da.htmlstring;a.extend(S,da.types)});if(!H)if(E===CswViewEditor_WizardSteps.step5.step)V+='<li><span class="vieweditor_addfilter" proparbid="'+
O+'"></span></li>';else{V+='<li><select id="'+E+"_"+O+'_child" arbid="'+O+'" class="vieweditor_childselect"></select></li>';CswAjaxXml({url:i.ChildOptionsUrl,data:"StepNo="+E+"&ArbitraryId="+O+"&ViewXml="+xmlToString(Q),success:function(da){var ia=a("#"+E+"_"+O+"_child");ia.empty();ia.append('<option value="">Select...</option>');da.children().each(function(){var fa=a(this),ha=a(fa.attr("value"));a('<option value="'+ha.attr("arbitraryid")+'">'+fa.attr("name")+"</option>").appendTo(ia).data("optionviewxml",
fa.attr("value"))})}})}V+="</ul>";V+="</li>"}return{htmlstring:V,types:S}}var i={ViewGridUrl:"/NbtWebApp/wsNBT.asmx/getViewGrid",ViewInfoUrl:"/NbtWebApp/wsNBT.asmx/getViewInfo",SaveViewUrl:"/NbtWebApp/wsNBT.asmx/saveViewInfo",CopyViewUrl:"/NbtWebApp/wsNBT.asmx/copyView",DeleteViewUrl:"/NbtWebApp/wsNBT.asmx/deleteView",ChildOptionsUrl:"/NbtWebApp/wsNBT.asmx/getViewChildOptions",PropNamesUrl:"/NbtWebApp/wsNBT.asmx/getPropNames",viewid:"",ID:"vieweditor",ColumnViewName:"VIEWNAME",ColumnViewId:"NODEVIEWID",
ColumnViewMode:"VIEWMODE",onCancel:function(){},onFinish:function(){},stepsToExecute:[1,2,3,4,5,6]};g&&a.extend(i,g);g=[CswViewEditor_WizardSteps.step1,CswViewEditor_WizardSteps.step2,CswViewEditor_WizardSteps.step3,CswViewEditor_WizardSteps.step4,CswViewEditor_WizardSteps.step5,CswViewEditor_WizardSteps.step6];for(var k={},n=0,l=0;l<g.length;l++){var t=g[l];if(-1!==a.inArray(t.step,i.stepsToExecute)){n++;var s={};s[n]=t.description;a.extend(k,s)}}g=a(this);g=a("<div></div>").appendTo(g);var w=g.CswWizard("init",
{ID:i.ID+"_wizard",Title:"Edit View",StepCount:n,Steps:k,FinishText:"Save and Finish",onNext:b,onPrevious:function(E){switch(E){case CswViewEditor_WizardSteps.step3.step:j(CswViewEditor_WizardSteps.step3.step,la);break;case CswViewEditor_WizardSteps.step4.step:j(CswViewEditor_WizardSteps.step4.step,ta);break;case CswViewEditor_WizardSteps.step5.step:j(CswViewEditor_WizardSteps.step5.step,ma);break;case CswViewEditor_WizardSteps.step6.step:j(CswViewEditor_WizardSteps.step6.step,na.CswTable("cell",
1,1))}},onBeforePrevious:function(E){return E!==CswViewEditor_WizardSteps.step2.step||confirm("You will lose any changes made to the current view if you continue.  Are you sure?")},onCancel:i.onCancel,onFinish:function(){var E=f(u,i.ColumnViewId);CswAjaxXml({url:i.SaveViewUrl,data:"ViewId="+E+"&ViewXml="+xmlToString(Q),success:function(){i.onFinish(E,f(u,i.ColumnViewMode))}})}});if(-1!==a.inArray(CswViewEditor_WizardSteps.step1.step,i.stepsToExecute)){k=w.CswWizard("div",CswViewEditor_WizardSteps.step1.step);
k.append("A <em>View</em> controls the arrangement of information you see in a tree or grid.  Views are useful for defining a user's workflow or for creating elaborate search criteria. This wizard will take you step by step through the process of creating a new View or editing an existing View.<br/><br/>");k.append("Select a View to Edit:&nbsp;");var C=a('<span id="'+i.ID+'_selviewname" style="font-weight: bold"></span>').appendTo(k),v=a("<div></div>").appendTo(k),u,y=function(E){u=E};d(y,i.viewid);
n=k.CswTable({ID:i.ID+"_1_btntbl",width:"100%"});k=n.CswTable("cell",1,1);n=n.CswTable("cell",1,2);n.attr("align","right");var F=a("<div></div>").appendTo(n);IsAdministrator({Yes:function(){F.CswInput("init",{ID:i.ID+"_all",type:CswInput_Types.checkbox,onChange:function(){d(y)}});F.append("Show Other Roles/Users")}});var N=k.CswButton({ID:i.ID+"_copyview",enabledText:"Copy View",disableOnClick:true,onclick:function(){var E=f(u,i.ColumnViewId);E!==""&&E!==undefined&&CswAjaxJSON({url:i.CopyViewUrl,
data:"{ ViewId: "+E+" }",success:function(J){d(y,J.copyviewid)},error:function(){N.CswButton("enable")}})}});N.CswButton("disable");var P=k.CswButton({ID:i.ID+"_deleteview",enabledText:"Delete View",disableOnClick:true,onclick:function(){var E=f(u,i.ColumnViewId);E!==""&&E!==undefined&&confirm("Are you sure you want to delete: "+f(u,i.ColumnViewName))&&CswAjaxJSON({url:i.DeleteViewUrl,data:"{ ViewId: "+E+" }",success:function(){d(y);N.CswButton("disable")},error:function(){P.CswButton("enable")}})}});
P.CswButton("disable");var ba=k.CswButton({ID:i.ID+"_newview",enabledText:"Create New View",disableOnClick:false,onclick:function(){a.CswDialog("AddViewDialog",{onAddView:function(E){u=d(y,E)},onClose:function(){ba.CswButton("enable")},makeVisibilitySelect:h})}});w.CswWizard("button","next","disable")}if(-1!==a.inArray(CswViewEditor_WizardSteps.step2.step,i.stepsToExecute)){k=w.CswWizard("div",CswViewEditor_WizardSteps.step2.step).CswTable({ID:i.ID+"_tbl2",FirstCellRightAlign:true});k.CswTable("cell",
1,1).append("View Name:");var ea=k.CswTable("cell",1,2).CswInput("init",{ID:i.ID+"_viewname",type:CswInput_Types.text});k.CswTable("cell",2,1).append("Category:");var Z=k.CswTable("cell",2,2).CswInput("init",{ID:i.ID+"_category",type:CswInput_Types.text}),ga=h(k,3,"View Visibility:");k.CswTable("cell",4,1).append("For Mobile:");var sa=k.CswTable("cell",4,2).CswInput("init",{ID:i.ID+"_formobile",type:CswInput_Types.checkbox});k.CswTable("cell",5,1).append("Display Mode:");var wa=k.CswTable("cell",
5,2).append('<span id="'+i.ID+'_displaymode"></span>'),ca=k.CswTable("cell",6,1).append("Grid Width (in characters):"),ka=k.CswTable("cell",6,2);ka.CswNumberTextBox("init",{ID:i.ID+"_gridwidth",Value:"",MinValue:"1",MaxValue:"",Precision:"0",onchange:function(){}})}if(-1!==a.inArray(CswViewEditor_WizardSteps.step3.step,i.stepsToExecute)){k=w.CswWizard("div",CswViewEditor_WizardSteps.step3.step);k.append("Add relationships from the select boxes below:<br/><br/>");var la=a("<div />").appendTo(k)}if(-1!==
a.inArray(CswViewEditor_WizardSteps.step4.step,i.stepsToExecute)){k=w.CswWizard("div",CswViewEditor_WizardSteps.step4.step);k.append("Add properties from the select boxes below:<br/><br/>");var ta=a("<div />").appendTo(k)}if(-1!==a.inArray(CswViewEditor_WizardSteps.step5.step,i.stepsToExecute)){k=w.CswWizard("div",CswViewEditor_WizardSteps.step5.step);k.append("Add filters by selecting properties from the tree:<br/><br/>");var ma=a("<div />").appendTo(k)}if(-1!==a.inArray(CswViewEditor_WizardSteps.step6.step,
i.stepsToExecute)){k=w.CswWizard("div",CswViewEditor_WizardSteps.step6.step);k.append("Select what you want to edit from the tree:<br/><br/>");var na=k.CswTable({ID:i.ID+"_6_tbl"})}b(i.stepsToExecute[0]);var Q;return g}})(jQuery);var ViewBuilder_CssClasses={subfield_select:{name:"csw_viewbuilder_subfield_select"},filter_select:{name:"csw_viewbuilder_filter_select"},default_filter:{name:"csw_viewbuilder_default_filter"},filter_value:{name:"csw_viewbuilder_filter_value"},metadatatype_static:{name:"csw_viewbuilder_metadatatype_static"}};
(function(a){function g(d,f){var e="";e={proparbitraryid:"",filtarbitraryid:"",viewbuilderpropid:"",ID:""};f&&a.extend(e,f);return e=e.filtarbitraryid!==""&&e.filtarbitraryid!==undefined?makeId({ID:d+"_filtarbitraryid",prefix:e.ID,suffix:e.filtarbitraryid}):e.viewbuilderpropid!==""&&e.viewbuilderpropid!==undefined?makeId({ID:d+"_viewbuilderpropid",prefix:e.ID,suffix:e.viewbuilderpropid}):e.proparbitraryid!==""&&e.proparbitraryid!==undefined?makeId({ID:d+"_proparbitraryid",prefix:e.ID,suffix:e.proparbitraryid}):
e.ID!==""&&e.ID!==undefined?makeId({ID:d,prefix:e.ID}):d}var b={init:function(d){function f(m){e.$propsXml.attr("viewbuilderpropid");var i=e.$propsXml.attr("propname");if(e.includePropertyName){var k=h.CswTable("cell",e.propRow,e.firstColumn).empty(),n=g(i,m);k.CswDOM("span",{ID:n,value:i})}k=e.$propsXml.attr("fieldtype");var l=e.$propsXml.children("defaultsubfield").attr("filter");n=h.CswTable("cell",e.propRow,e.firstColumn+1).empty();var t=g("default_filter",m);l=n.CswDOM("span",{ID:t,value:l,cssclass:ViewBuilder_CssClasses.default_filter.name}).attr({align:"center"});
e.advancedIsHidden||l.hide();l=g("subfield_select",m);var s=a(xmlToString(e.$propsXml.children("subfields").children("select"))).attr("id",l).attr("name",l).attr("class",ViewBuilder_CssClasses.subfield_select.name).change(function(){var C={selectedSubfieldVal:a(this).val(),selectedFilterVal:""};a.extend(e,C);f(m)});e.selectedSubfieldVal!==""&&s.val(e.selectedSubfieldVal).attr("selected",true);n.append(s);e.advancedIsHidden&&s.hide();t=s.find(":selected").val();n=s.find(":selected").attr("defaultvalue");
l=h.CswTable("cell",e.propRow,e.firstColumn+2).empty();var w=g("filter_select",m);t=a(xmlToString(e.$propsXml.children("propertyfilters").children("subfield[column="+t+"]").children("select"))).attr("id",w).attr("name",w).attr("class",ViewBuilder_CssClasses.filter_select.name).change(function(){var C=a(this);C={selectedSubfieldVal:s.val(),selectedFilterVal:C.val()};a.extend(e,C);f(m)});e.selectedFilterVal!==""&&t.val(e.selectedFilterVal).attr("selected",true);l.append(t);e.advancedIsHidden&&t.hide();
l=h.CswTable("cell",e.propRow,e.firstColumn+3).empty();t=g("propfilter_input",m);if(k==="List")l.append(a(xmlToString(e.$propsXml.children("filtersoptions").children("select"))));else if(k==="Logical")l.CswTristateCheckBox("init",{ID:t,Checked:n});else{k={value:n,placeholder:""};if(k.value===""||k.value===undefined){e.placeholder=i;if(e.placeholder!==s.find(":selected").text())e.placeholder+="'s "+s.find(":selected").text()}l.CswInput("init",{ID:t,type:CswInput_Types.text,cssclass:ViewBuilder_CssClasses.filter_value.name,
value:k.value,placeholder:k.placeholder,width:"200px",autofocus:e.autoFocusInput,autocomplete:"on"})}}var e={getNewPropsUrl:"/NbtWebApp/wsNBT.asmx/getViewPropFilterUI",viewid:"",viewxml:"",$propsXml:"",proparbitraryid:"",filtarbitraryid:"",viewbuilderpropid:"",ID:"",propRow:1,firstColumn:3,includePropertyName:false,advancedIsHidden:false,selectedSubfieldVal:"",selectedFilterVal:"",autoFocusInput:false};d&&a.extend(e,d);var h=a(this),j={proparbitraryid:e.proparbitraryid,filtarbitraryid:e.filtarbitraryid,
viewbuilderpropid:e.viewbuilderpropid,ID:e.ID};(e.$propsXml===""||e.$propsXml===undefined)&&e.proparbitraryid!==""&&e.proparbitraryid!==undefined?CswAjaxXml({url:e.getNewPropsUrl,data:"ViewXml="+e.viewxml+"&PropArbitraryId="+e.proparbitraryid,success:function(m){e.$propsXml=m.children("propertyfilters").children("property");j.filtarbitraryid=e.$propsXml.attr("filtarbitraryid");f(j)}}):f(j);return h},getFilterJson:function(d){var f=a(this),e={nodetypeorobjectclassid:"",relatedidtype:"",fieldtype:f.attr("fieldtype"),
ID:"",$parent:"",proparbitraryid:"",filtarbitraryid:f.attr("filtarbitraryid"),viewbuilderpropid:""};d&&a.extend(e,d);var h={proparbitraryid:e.proparbitraryid,filtarbitraryid:e.filtarbitraryid,viewbuilderpropid:e.viewbuilderpropid,ID:e.ID},j=g("propfilter_input",h),m=g("filtersoptions_select",h);d=g("subfield_select",h);h=g("filter_select",h);var i={};j=e.$parent.CswInput("findandget",{ID:j});switch(e.fieldtype){case "Logical":m=j.CswTristateCheckBox("value");break;case "List":m=e.$parent.CswDOM("findelement",
{ID:m}).find(":selected").val();break;default:m=j.val()}if(m!==""){d=e.$parent.CswDOM("findelement",{ID:d}).find(":selected").text();h=e.$parent.CswDOM("findelement",{ID:h}).find(":selected").val();f=f.attr("proptype");i={nodetypeorobjectclassid:e.nodetypeorobjectclassid,relatedidtype:e.relatedidtype,proptype:f,viewbuilderpropid:e.viewbuilderpropid,filtarbitraryid:e.filtarbitraryid,proparbitraryid:e.proparbitraryid,relatedidtype:e.relatedidtype,subfield:d,filter:h,filtervalue:m}}return i},makeFilter:function(d){var f=
{url:"/NbtWebApp/wsNBT.asmx/makeViewPropFilter",viewxml:"",filtJson:"",onSuccess:function(){}};d&&a.extend(f,d);CswAjaxXml({url:f.url,data:"ViewXml="+f.viewxml+"&PropFiltJson="+jsonToString(f.filtJson),success:function(e){f.onSuccess(e)}})}};a.fn.CswViewPropFilter=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswViewPropFilter")}})(jQuery);(function(a){function g(d){var f={ID:"",ClickDelay:300,iconurl:"",type:"",viewid:"",viewname:"",viewmode:"",actionid:"",actionurl:"",reportid:"",onSelect:function(){},$selectdiv:""};d&&a.extend(f,d);d=a("<div></div>");var e=d.CswTable("init",{ID:f.ID+"selectedtbl"}),h=e.CswTable("cell",1,1);h=a("<div />").appendTo(h);h.css("background-image",f.iconurl);h.css("width","18px");h.css("height","18px");e.CswTable("cell",1,2).append(f.viewname);f.$selectdiv.CswComboBox("TopContent",d);f.$selectdiv.attr("selectedValue",
f.viewid);setTimeout(function(){f.$selectdiv.CswComboBox("toggle")},f.ClickDelay);f.onSelect({iconurl:f.iconurl,type:f.type,viewid:f.viewid,viewname:f.viewname,viewmode:f.viewmode,actionid:f.actionid,actionurl:f.actionurl,reportid:f.reportid})}var b={init:function(d){var f={ID:"",onSelect:function(){},onSuccess:function(){},ClickDelay:300};d&&a.extend(f,d);var e=a(this);e.contents().remove();$viewtreediv=a("<div/>");e.CswComboBox("init",{ID:f.ID+"_combo",TopContent:"Select a View",SelectContent:$viewtreediv,
Width:"266px"});$viewtreediv.CswViewTree({onSelect:function(h){g({ID:f.ID,ClickDelay:f.ClickDelay,iconurl:h.iconurl,type:h.type,viewid:h.viewid,viewname:h.viewname,viewmode:h.viewmode,actionid:h.actionid,actionurl:h.actionurl,reportid:h.reportid,onSelect:f.onSelect,$selectdiv:e})},onSuccess:f.onSuccess});return e},value:function(){return a(this).attr("selectedValue")}};a.fn.CswViewSelect=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||
!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswViewSelect")}})(jQuery);(function(a){a.fn.CswViewTree=function(g){var b={ViewUrl:"/NbtWebApp/wsNBT.asmx/getViewTree",viewid:"",onSelect:function(){},onSuccess:function(){}};g&&a.extend(b,g);var d=a(this);d.contents().remove();CswAjaxXml({url:b.ViewUrl,data:"",success:function(f){var e=f.find("types").text();e=a.parseJSON(e);f=f.find("tree").children("root");f=xmlToString(f);d.jstree({xml_data:{data:f,xsl:"nest"},ui:{select_limit:1},core:{initially_open:["root"]},types:{types:e},plugins:["themes","xml_data","ui","types"]}).bind("select_node.jstree",
function(){var h=jsTreeGetSelected(d);h={iconurl:h.iconurl,type:h.$item.attr("type"),viewid:h.$item.attr("viewid"),viewname:h.text,viewmode:h.$item.attr("viewmode"),actionid:h.$item.attr("actionid"),actionurl:h.$item.attr("actionurl"),reportid:h.$item.attr("reportid")};b.onSelect(h)});b.onSuccess()}});return this}})(jQuery);(function(a){function g(e){var h={cellset:"",row:"",column:"",RemoveWelcomeItemUrl:"",onSuccess:function(){}};e&&a.extend(h,e);e=a(h.cellset[2][1]);if(e.length>0){e=e.children("input").attr("welcomeid");CswAjaxJSON({url:h.RemoveWelcomeItemUrl,data:'{ "RoleId": "", "WelcomeId": "'+e+'" }',success:function(){h.onSuccess()}})}}function b(e){var h={AddWelcomeItemUrl:"",type:"",viewid:"",nodetypeid:"",text:"",iconfilename:"",onSuccess:function(){},onError:function(){}};e&&a.extend(h,e);CswAjaxJSON({url:h.AddWelcomeItemUrl,
data:'{ "RoleId": "", "Type": "'+h.type+'", "ViewId": "'+h.viewid+'", "NodeTypeId": "'+h.nodetypeid+'", "Text": "'+h.text+'", "IconFileName": "'+h.iconfilename+'" }',success:function(){h.onSuccess()},error:o.onError})}function d(e,h,j,m){h=a(h[2][1]);if(h.length>0){h=h.children("input").attr("welcomeid");CswAjaxJSON({url:e,data:'{ "RoleId": "", "WelcomeId": "'+h+'", "NewRow": "'+j+'", "NewColumn": "'+m+'" }',success:function(){}})}}var f={initTable:function(e){var h={Url:"/NbtWebApp/wsNBT.asmx/getWelcomeItems",
MoveWelcomeItemUrl:"/NbtWebApp/wsNBT.asmx/moveWelcomeItems",RemoveWelcomeItemUrl:"/NbtWebApp/wsNBT.asmx/deleteWelcomeItem",onLinkClick:function(){},onSearchClick:function(){},onAddClick:function(){},onAddComponent:function(){}};e&&a.extend(h,e);var j=a(this);CswAjaxXml({url:h.Url,data:"RoleId=",success:function(m){var i=a('<div id="welcomediv"></div>').appendTo(j).css("text-align","center").css("font-size","1.2em").CswLayoutTable("init",{ID:"welcometable",cellset:{rows:2,columns:1},TableCssClass:"WelcomeTable",
cellpadding:10,align:"center",onSwap:function(k,n){var l={cellset:n.cellset,row:n.row,column:n.column,swapcellset:n.swapcellset,swaprow:n.swaprow,swapcolumn:n.swapcolumn,MoveWelcomeItemUrl:h.MoveWelcomeItemUrl},t={cellset:"",row:"",column:"",swapcellset:"",swaprow:"",swapcolumn:"",MoveWelcomeItemUrl:""};l&&a.extend(t,l);d(t.MoveWelcomeItemUrl,t.cellset,t.swaprow,t.swapcolumn);d(t.MoveWelcomeItemUrl,t.swapcellset,t.row,t.column)},showConfigButton:true,showAddButton:true,showRemoveButton:true,onAddClick:function(){a.CswDialog("AddWelcomeItemDialog",
{onAdd:h.onAddComponent})},onRemove:function(k,n){g({cellset:n.cellset,row:n.row,column:n.column,RemoveWelcomeItemUrl:h.RemoveWelcomeItemUrl})}});m.children().each(function(){var k=a(this),n=i.CswLayoutTable("cellset",k.attr("displayrow"),k.attr("displaycol")),l=n[1][1];n=n[2][1];k.attr("buttonicon")!==undefined&&k.attr("buttonicon")!==""&&l.append(a('<a href=""><img border="0" src="'+k.attr("buttonicon")+'"/></a>'));var t={type:k.attr("type"),viewmode:k.attr("viewmode"),itemid:k.attr("itemid"),text:k.attr("text"),
iconurl:k.attr("iconurl"),viewid:k.attr("viewid"),actionid:k.attr("actionid"),reportid:k.attr("reportid"),linktype:k.attr("linktype")};switch(t.linktype){case "Link":n.append(a('<a href="">'+t.text+"</a>"));n.find("a").click(function(){h.onLinkClick(t);return false});l.find("a").click(function(){h.onLinkClick(t);return false});break;case "Search":n.append(a('<a href="">'+t.text+"</a>"));n.find("a").click(function(){h.onSearchClick(t);return false});l.find("a").click(function(){h.onSearchClick(t);
return false});break;case "Text":n.append("<span>"+t.text+"</span>");break;case "Add":n.append(a('<a href="">'+t.text+"</a>"));n.find("a").click(function(){h.onAddClick(k.attr("nodetypeid"));return false});l.find("a").click(function(){h.onAddClick(k.attr("nodetypeid"));return false})}n.CswInput("init",{ID:k.attr("welcomeid"),type:CswInput_Types.hidden}).attr("welcomeid",k.attr("welcomeid"))})}})},getAddItemForm:function(e){var h={AddWelcomeItemUrl:"/NbtWebApp/wsNBT.asmx/addWelcomeItem",onAdd:function(){}};
e&&a.extend(h,e);e=a(this).CswTable("init",{ID:"addwelcomeitem_tbl"});a("<span>Type:</span>").appendTo(e.CswTable("cell",1,1));var j=a('<select id="welcome_type" name="welcome_type"></select>').appendTo(e.CswTable("cell",1,2));j.append('<option value="Add" selected>Add</option>');j.append('<option value="Link">Link</option>');j.append('<option value="Search">Search</option>');j.append('<option value="Text">Text</option>');var m=a("<span>View:</span>").appendTo(e.CswTable("cell",2,1)).hide(),i=e.CswTable("cell",
2,2).CswViewSelect({ID:"welcome_viewsel"}).hide(),k=a("<span>Add New:</span>").appendTo(e.CswTable("cell",3,1)),n=e.CswTable("cell",3,2).CswNodeTypeSelect({ID:"welcome_ntsel"});a("<span>Text:</span>").appendTo(e.CswTable("cell",4,1));var l=e.CswTable("cell",4,2).CswInput("init",{ID:"welcome_text",type:CswInput_Types.text}),t=a("<span>Use Button:</span>").appendTo(e.CswTable("cell",5,1)),s=a('<select id="welcome_button" />').appendTo(e.CswTable("cell",5,2));s.append('<option value="blank.gif"></option>');
var w=a('<img id="welcome_btnimg" />').appendTo(e.CswTable("cell",6,2)),C=e.CswTable("cell",7,2).CswButton({ID:"welcome_add",enabledText:"Add",disabledText:"Adding",onclick:function(){b({AddWelcomeItemUrl:h.AddWelcomeItemUrl,type:j.val(),viewid:i.CswViewSelect("value"),nodetypeid:n.CswNodeTypeSelect("value"),text:l.val(),iconfilename:s.val(),onSuccess:h.onAdd,onError:function(){C.CswButton("enable")}})}});e.CswTable("cell",7,2).append(C);s.change(function(){w.attr("src","Images/biggerbuttons/"+s.val())});
j.change(function(){var v={$typeselect:j,$viewselect_label:m,$viewselect:i,$ntselect_label:k,$ntselect:n,$buttonsel_label:t,$buttonsel:s,$buttonimg:w},u={$typeselect:"",$viewselect_label:"",$viewselect:"",$ntselect_label:"",$ntselect:"",$buttonsel_label:"",$buttonsel:"",$buttonimg:""};v&&a.extend(u,v);switch(u.$typeselect.val()){case "Add":u.$viewselect_label.hide();u.$viewselect.hide();u.$ntselect_label.show();u.$ntselect.show();u.$buttonsel_label.show();u.$buttonsel.show();u.$buttonimg.show();break;
case "Link":u.$viewselect_label.show();u.$viewselect.show();u.$ntselect_label.hide();u.$ntselect.hide();u.$buttonsel_label.show();u.$buttonsel.show();u.$buttonimg.show();break;case "Search":u.$viewselect_label.show();u.$viewselect.show();u.$ntselect_label.hide();u.$ntselect.hide();u.$buttonsel_label.show();u.$buttonsel.show();u.$buttonimg.show();break;case "Text":u.$viewselect_label.hide();u.$viewselect.hide();u.$ntselect_label.hide();u.$ntselect.hide();u.$buttonsel_label.hide();u.$buttonsel.hide();
u.$buttonimg.hide()}});CswAjaxXml({url:"/NbtWebApp/wsNBT.asmx/getWelcomeButtonIconList",success:function(v){v.children().each(function(){var u=a(this).attr("filename");u!=="blank.gif"&&s.append('<option value="'+u+'">'+u+"</option>")})}})}};a.fn.CswWelcome=function(e){if(f[e])return f[e].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof e==="object"||!e)return f.init.apply(this,arguments);else a.error("Method "+e+" does not exist on CswWelcome")}})(jQuery);(function(a){function g(f){return parseInt(f.find(".CswWizard_StepLinkDivSelected").attr("stepno"))}function b(f,e){var h=f.attr("stepcount");if(e>0&&e<=h){f.find(".CswWizard_StepLinkDiv").removeClass("CswWizard_StepLinkDivSelected");f.find(".CswWizard_StepLinkDiv[stepno="+e+"]").addClass("CswWizard_StepLinkDivSelected");f.find(".CswWizard_StepDiv").hide();f.find(".CswWizard_StepDiv[stepno="+e+"]").show();var j=a("#"+f.attr("id")+"_prev");e===1?j.CswButton("disable"):j.CswButton("enable");j=a("#"+
f.attr("id")+"_next");e>=h?j.CswButton("disable"):j.CswButton("enable")}}var d={init:function(f){var e={ID:"",Title:"A Wizard",StepCount:1,Steps:{1:"Default"},SelectedStep:1,FinishText:"Finish",onNext:function(){},onPrevious:function(){},onBeforeNext:function(){return true},onBeforePrevious:function(){return true},onFinish:function(){},onCancel:function(){}};f&&a.extend(e,f);var h=a(this).CswTable({ID:e.ID,TableCssClass:"CswWizard_WizardTable"});h.attr("stepcount",e.StepCount);h.CswTable("cell",1,
1).addClass("CswWizard_TitleCell").attr("colspan",2).append(e.Title);f=h.CswTable("cell",2,1).attr("rowspan",2).addClass("CswWizard_IndexCell");for(var j=h.CswTable("cell",2,2).addClass("CswWizard_StepsCell"),m=h.CswTable("cell",3,1).addClass("CswWizard_ButtonsCell"),i=1;i<=e.StepCount;i++){var k=e.Steps[i];a('<div class="CswWizard_StepLinkDiv" stepno="'+i+'">'+i+".&nbsp;"+k+"</div>").appendTo(f);a('<div class="CswWizard_StepDiv" id="'+e.ID+"_"+i+'" stepno="'+i+'" ><span class="CswWizard_StepTitle">'+
k+'</span><br/></br><div id="'+e.ID+"_"+i+'_content"></div></div>').appendTo(j)}j=m.CswTable({ID:e.ID+"_btntbl",width:"100%"});f=j.CswTable("cell",1,1).attr("align","right").attr("width","65%");j=j.CswTable("cell",1,2).attr("align","right").attr("width","35%");f.CswButton("init",{ID:e.ID+"_prev",enabledText:"< Previous",disableOnClick:false,onclick:function(){var n=g(h);if(e.onBeforePrevious(n)){b(h,n-1);e.onPrevious(n-1)}}});f.CswButton("init",{ID:e.ID+"_next",enabledText:"Next >",disableOnClick:false,
onclick:function(){var n=g(h);if(e.onBeforeNext(n)){b(h,n+1);e.onNext(n+1)}}});f.CswButton("init",{ID:e.ID+"_finish",enabledText:e.FinishText,onclick:e.onFinish});j.CswButton("init",{ID:e.ID+"_cancel",enabledText:"Cancel",onclick:e.onCancel});b(h,e.SelectedStep);return h},div:function(f){return a(this).find(".CswWizard_StepDiv[stepno="+f+"] div")},button:function(f,e){var h=a(this);switch(f){case "previous":a("#"+h.attr("id")+"_prev").CswButton(e);break;case "next":a("#"+h.attr("id")+"_next").CswButton(e);
break;case "finish":a("#"+h.attr("id")+"_finish").CswButton(e);break;case "cancel":a("#"+h.attr("id")+"_cancel").CswButton(e)}}};a.fn.CswWizard=function(f){if(d[f])return d[f].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof f==="object"||!f)return d.init.apply(this,arguments);else a.error("Method "+f+" does not exist on CswWizard")}})(jQuery);function CswAjaxJSON(a){var g={url:"",data:"",onloginfail:function(){},success:function(){},error:function(){},formobile:false};a&&$.extend(g,a);$.ajax({type:"POST",url:g.url,dataType:"json",contentType:"application/json; charset=utf-8",data:g.data,success:function(b,d,f){b=$.parseJSON(b.d);if(b.error!==undefined){_handleAjaxError(f,{message:b.error.message,detail:b.error.detail},"");g.error()}else if(g.formobile){f=tryParseString(b.AuthenticationStatus,"");_handleAuthenticationStatus({status:f,success:g.success(b),
failure:g.onloginfail})}else g.success(b)},error:function(b,d,f){_handleAjaxError(b,{message:"A Webservices Error Occurred",detail:d},f);g.error()}})}
function CswAjaxXml(a){var g={url:"",data:"",onloginfail:function(){},success:function(){},error:function(){},formobile:false};a&&$.extend(g,a);g.url!==""&&$.ajax({type:"POST",url:g.url,dataType:"xml",data:g.data,success:function(b,d,f){d=$(f.responseXML);b=d.children().first();if(b.first().get(0).nodeName==="error"){_handleAjaxError(f,{message:b.attr("message"),detail:b.attr("detail")},"");g.error()}else if(g.formobile){f=tryParseString(d.find("AuthenticationStatus").text(),"");_handleAuthenticationStatus({status:f,
success:g.success(b),failure:g.onloginfail})}else g.success(b)},error:function(b,d,f){_handleAjaxError(b,{message:"A Webservices Error Occurred",detail:d},f);g.error()}})}function _handleAjaxError(a,g){var b=$("#ErrorDiv");b.length>0?b.CswErrorMessage({message:g.message,detail:g.detail}):log(g.message+"; "+g.detail)}
function _handleAuthenticationStatus(){var a={status:"",success:function(){},failure:function(){}};if(!isNullOrEmpty(a.status)&&a.status!=="Authenticated"){alert(a.status);a.failure()}else a.success()}function xmlToString(a){var g="";if(a!==""&&a!==undefined){(g=a.get(0).xml)||(g=(new XMLSerializer).serializeToString(a.get(0)));g||$.error("Browser does not support XML operations necessary to convert to string")}return g}
function jsonToString(a){if(typeof a==="object"){var g="{",b=true,d;for(d in a)if(a.hasOwnProperty(d)){b||(g+=",");g+=" '"+d+"': ";g+=jsonToString(a[d]);b=false}g+="}"}else g="'"+safeJsonParam(a)+"'";return g}function safeJsonParam(a){var g="";if(a!==undefined)g=a.toString().replace(/'/g,"\\'");return g}var changed=0,checkChangesEnabled=true;function setChanged(){if(checkChangesEnabled)changed=1}function unsetChanged(){if(checkChangesEnabled)changed=0}
function checkChanges(){if(checkChangesEnabled&&changed===1)return"If you continue, you will lose any changes made on this page.  To save your changes, click Cancel and then click the Save button."}
function manuallyCheckChanges(){var a=true;if(checkChangesEnabled&&changed===1)if(a=confirm("Are you sure you want to navigate away from this page?\n\nIf you continue, you will lose any changes made on this page.  To save your changes, click Cancel and then click the Save button.\n\nPress OK to continue, or Cancel to stay on the current page."))changed=0;return a}
function initCheckChanges(){window.onbeforeunload=window.onbeforeunload!==null&&window.onbeforeunload!==undefined?function(){var a=window.onbeforeunload;return a()?checkChanges():false}:function(){return checkChanges()}}window.onload=window.onload!==null&&window.onload!==undefined?new Function("initCheckChanges(); var f="+window.onload+"; return f();"):function(){initCheckChanges()};
function IsAdministrator(a){var g={Yes:function(){},No:function(){}};a&&$.extend(g,a);CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/isAdministrator",success:function(b){b.Administrator==="true"?g.Yes():g.No()}})}function copyNode(a){var g={nodeid:"",nodekey:"",onSuccess:function(){},onError:function(){}};a&&$.extend(g,a);CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/CopyNode",data:'{ "NodePk":"'+g.nodeid+'" }',success:function(b){g.onSuccess(b.NewNodeId,"")},error:g.onError})}
function deleteNodes(a){var g={nodeids:[],nodekeys:[],onSuccess:function(){},onError:function(){}};a&&$.extend(g,a);datastr=JSON.stringify({NodePks:g.nodeids,NodeKeys:g.nodekeys},"'");CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/DeleteNodes",data:datastr,success:function(){g.onSuccess("","")},error:g.onError})}
function jsTreeGetSelected(a){var g=a.attr("id");$SelectedItem=a.jstree("get_selected");return{iconurl:$SelectedItem.children("a").children("ins").css("background-image"),id:$SelectedItem.attr("id").substring(g.length),text:$SelectedItem.children("a").first().text().trim(),$item:$SelectedItem}}function GoHome(){$.CswCookie("clear",CswCookieName.CurrentView.ViewId);$.CswCookie("clear",CswCookieName.CurrentView.ViewMode);window.location="NewMain.html"}
function HandleMenuItem(a){var g={$ul:"",$itemxml:"",onLogout:function(){},onAlterNode:function(){},onSearch:{onViewSearch:function(){},onGenericSearch:function(){}},onMultiEdit:function(){},onEditView:function(){},Multi:false,NodeCheckTreeId:""};a&&$.extend(g,a);if(g.$itemxml.attr("href")!==undefined&&g.$itemxml.attr("href")!=="")a=$('<li><a href="'+g.$itemxml.attr("href")+'">'+g.$itemxml.attr("text")+"</a></li>").appendTo(g.$ul);else if(g.$itemxml.attr("popup")!==undefined&&g.$itemxml.attr("popup")!==
"")a=$('<li class="headermenu_dialog"><a href="#">'+g.$itemxml.attr("text")+"</a></li>").appendTo(g.$ul).click(function(){$.CswDialog("OpenDialog",g.$itemxml.attr("text"),g.$itemxml.attr("popup"));return false});else if(g.$itemxml.attr("action")!==undefined&&g.$itemxml.attr("action")!==""){a=$('<li><a href="#">'+g.$itemxml.attr("text")+"</a></li>").appendTo(g.$ul);var b=a.children("a");switch(g.$itemxml.attr("action")){case "About":b.click(function(){$.CswDialog("AboutDialog");return false});break;
case "AddNode":b.click(function(){$.CswDialog("AddNodeDialog",{nodetypeid:g.$itemxml.attr("nodetypeid"),relatednodeid:g.$itemxml.attr("relatednodeid"),onAddNode:g.onAlterNode});return false});break;case "DeleteNode":b.click(function(){$.CswDialog("DeleteNodeDialog",{nodename:g.$itemxml.attr("nodename"),nodeid:g.$itemxml.attr("nodeid"),onDeleteNode:g.onAlterNode,NodeCheckTreeId:g.NodeCheckTreeId,Multi:g.Multi});return false});break;case "editview":b.click(function(){g.onEditView(g.$itemxml.attr("viewid"));
return false});break;case "CopyNode":b.click(function(){$.CswDialog("CopyNodeDialog",{nodename:g.$itemxml.attr("nodename"),nodeid:g.$itemxml.attr("nodeid"),onCopyNode:g.onAlterNode});return false});break;case "Home":b.click(function(){GoHome();return false});break;case "Logout":b.click(function(){g.onLogout();return false});break;case "Profile":b.click(function(){$.CswDialog("EditNodeDialog",{nodeid:g.$itemxml.attr("userid"),cswnbtnodekey:"",filterToPropId:"",title:"User Profile",onEditNode:function(){}});
return false});break;case "ViewSearch":b.click(function(){g.onSearch.onViewSearch()});break;case "GenericSearch":b.click(function(){g.onSearch.onGenericSearch()});break;case "multiedit":b.click(g.onMultiEdit)}}else a=$("<li>"+g.$itemxml.attr("text")+"</li>").appendTo(g.$ul);return a}function openPopup(a,g,b){a=window.open(a,null,"height="+g+", width="+b+", status=no, resizable=yes, scrollbars=yes, toolbar=yes, location=no, menubar=yes");a.focus();return a}
function validateTime(a){var g=true,b=/^(\d?\d):(\d\d)\s?([APap][Mm])?$/g.exec(a);if(b===null)g=false;else{a=parseInt(b[1]);b=parseInt(b[2]);if(a<0||a>=24||b<0||b>=60)g=false}return g}function validateFloatMinValue(a,g){var b=parseFloat(a),d=parseFloat(g),f=true;if(d!==undefined)if(b===undefined||b<d)f=false;return f}function validateFloatMaxValue(a,g){var b=parseFloat(a),d=parseFloat(g),f=true;if(d!==undefined)if(b===undefined||b>d)f=false;return f}
function validateFloatPrecision(a,g){var b=true,d;d=g>0?/^\-?\d*\.?\d*$/g:/^\-?\d*$/g;if(b&&!d.test(a))b=false;return b}function validateInteger(a){return/^\-?\d*$/g.test(a)}function startsWith(a,g){return a.substr(0,g.length)===g}function getTimeString(a){var g="",b=a.getHours();a=a.getMinutes();if(a<10)a="0"+a;g=b%12+":"+a+" ";g+=b>11?"PM":"AM";return g}
function makeId(a){var g={ID:"",prefix:"",suffix:"",Delimiter:"_"};a&&$.extend(g,a);a=g.ID;if(g.prefix!==""&&a!=="")a=g.prefix+g.Delimiter+a;if(g.suffix!==""&&a!=="")a+=g.Delimiter+g.suffix;return a}function isNullOrEmpty(a){return a===""||a===undefined||a===null}function isNumeric(a){var g=false;if(!isNullOrEmpty(a))if(parseInt(a)!==NaN)g=true;return g}
function isTrue(a){var g;if(a==="true"||a===true||a==="1"||a===1)g=true;else if(a==="false"||a===false||a==="0"||a===0)g=false;else log("isTrue() was called on "+a+", which is not a boolean.");return g}function tryParseString(a,g){var b=g;isNullOrEmpty(a)||(b=a);return b}function iterate(a){var g,b;for(b in a)g=g+b+"="+a[b]+"<br><br>";a=window.open("","popup");a!==null?a.document.write(g):console.log("iterate() error: No popup!")}function log(a){try{console.log(a)}catch(g){alert(a)}}
if(typeof String.prototype.trim!=="function")String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("barcode").text().trim();if(b.ReadOnly)d.append(f);else{d=d.CswTable("init",{ID:b.ID+"_tbl"});f=d.CswTable("cell",1,1).CswInput("init",{ID:b.ID,type:CswInput_Types.text,cssclass:"textinput",onChange:b.onchange,value:f});d=d.CswTable("cell",1,2);a("<div/>").appendTo(d).CswImageButton({ButtonType:CswImageButton_ButtonType.Print,AlternateText:"",ID:b.ID+"_print",onClick:function(){a.CswDialog("OpenDialog",
b.ID+"_dialog","Popup_PrintLabel.aspx?nodeid="+b.nodeid+"&propid="+b.ID);return CswImageButton_ButtonType.None}});b.Required&&f.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("barcode").text(d.val())}};a.fn.CswFieldTypeBarcode=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeBarcode")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();b=b.$propxml.children("value").text().trim();d.append(b)},save:function(){}};a.fn.CswFieldTypeComposite=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeComposite")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("value").text().trim();if(f==="1/1/0001")f="";if(b.ReadOnly)d.append(f);else{d=d.CswInput("init",{ID:b.ID,type:CswInput_Types.text,value:f,onChange:b.onchange,cssclass:"textinput date"});d.datepicker();b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("value").text(d.val())}};a.fn.CswFieldTypeDate=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,
1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeDate")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("href").text().trim(),e=b.$propxml.children("name").text().trim(),h=d.CswTable("init",{ID:b.ID+"_tbl"});d=h.CswTable("cell",1,1);var j=h.CswTable("cell",1,2);h=h.CswTable("cell",1,3);d.append('<a href="'+f+'" target="_blank">'+e+"</a>");if(!b.ReadOnly){a("<div/>").appendTo(j).CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID+"_edit",onClick:function(){a.CswDialog("FileUploadDialog",
{url:"/NbtWebApp/wsNBT.asmx/fileForProp",params:{PropId:b.$propxml.attr("id")},onSuccess:function(){b.onReload()}});return CswImageButton_ButtonType.None}});a("<div/>").appendTo(h).CswImageButton({ButtonType:CswImageButton_ButtonType.Clear,AlternateText:"Clear",ID:b.ID+"_clr",onClick:function(){confirm("Are you sure you want to clear this file?")&&CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/clearProp",data:'{ "PropId": "'+b.$propxml.attr("id")+'", "IncludeBlob": "true" }',success:function(){b.onReload()}});
return CswImageButton_ButtonType.None}})}},save:function(){}};a.fn.CswFieldTypeFile=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeFile")}})(jQuery);(function(a){var g={init:function(b){function d(l){var t={reinit:true};l&&a.extend(l,t);i.CswNodeGrid("init",l)}var f=a(this);f.empty();var e=makeId({prefix:b.ID,ID:"grid_as_fieldtype_menu"});e=a('<div id="'+e+'" name="'+e+'"></div>');var h=makeId({prefix:b.ID,ID:"grid_as_fieldtype_search"}),j=a('<div id="'+h+'" name="'+h+'"></div>'),m=makeId({prefix:b.ID,ID:"grid_as_fieldtype"}),i=a('<div id="'+m+'" name="'+m+'"></div>'),k=b.$propxml.children("viewid").text().trim(),n={viewid:k,nodeid:b.nodeid,cswnbtnodekey:b.cswnbtnodekey,
readonly:b.ReadOnly,reinit:false,onEditNode:function(){d(n)},onAddNode:function(){d(n)},onDeleteNode:function(){d(n)}};i.CswNodeGrid("init",n);e.CswMenuMain({viewid:k,nodeid:b.nodeid,cswnbtnodekey:b.cswnbtnodekey,onAddNode:function(){d(n)},onSearch:{onViewSearch:function(){j.empty();j.CswSearch({viewid:k,cswnbtnodekey:b.cswnbtnodekey,ID:h,onSearchSubmit:function(){d(n)}});j.is(":hidden")?j.show():j.hide()},onGenericSearch:function(){}},onEditView:function(){b.onEditView(k)}});f.append(e,a("<br/><br/>"),
i)},save:function(){}};a.fn.CswFieldTypeGrid=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeGrid")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("href").text().trim(),e=b.$propxml.children("href").attr("width"),h=b.$propxml.children("href").attr("height"),j=b.$propxml.children("name").text().trim(),m=d.CswTable("init",{ID:b.ID+"_tbl"});d=m.CswTable("cell",1,1).attr("colspan","3");var i=m.CswTable("cell",2,1).attr("width",e-36),k=m.CswTable("cell",2,2).attr("align","right");m=m.CswTable("cell",2,3).attr("align","right");if(j!==""){a('<a href="'+
f+'" target="_blank"><img src="'+f+'" alt="'+j+'" width="'+e+'" height="'+h+'"/></a>').appendTo(d);i.append('<a href="'+f+'" target="_blank">'+j+"</a>")}if(!b.ReadOnly){a("<div/>").appendTo(k).CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID+"_edit",onClick:function(){a.CswDialog("FileUploadDialog",{url:"/NbtWebApp/wsNBT.asmx/fileForProp",params:{PropId:b.$propxml.attr("id")},onSuccess:function(){b.onReload()}});return CswImageButton_ButtonType.None}});a("<div/>").appendTo(m).CswImageButton({ButtonType:CswImageButton_ButtonType.Clear,
AlternateText:"Clear",ID:b.ID+"_clr",onClick:function(){confirm("Are you sure you want to clear this image?")&&CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/clearProp",data:'{ "PropId": "'+b.$propxml.attr("id")+'", "IncludeBlob": "true" }',success:function(){b.onReload()}});return CswImageButton_ButtonType.None}})}},save:function(){}};a.fn.CswFieldTypeImage=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);
else a.error("Method "+b+" does not exist on CswFieldTypeImage")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("text").text().trim(),e=b.$propxml.children("href").text().trim();if(b.ReadOnly)d.append(Value);else{var h=d.CswTable("init",{ID:b.ID+"_tbl"});a('<a href="'+e+'" target="_blank">'+f+"</a>&nbsp;&nbsp;").appendTo(h.CswTable("cell",1,1));a("<div/>").appendTo(h.CswTable("cell",1,2)).CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID+"_edit",Required:b.Required,onClick:function(){j.show();
return CswImageButton_ButtonType.None}});var j=d.CswTable("init",{ID:b.ID+"_edittbl"}).hide();a("<span>Text</span>").appendTo(j.CswTable("cell",1,1));d=j.CswTable("cell",1,2).CswInput("init",{ID:b.ID+"_text",type:CswInput_Types.text,value:f,onChange:b.onchange});a("<span>URL</span>").appendTo(j.CswTable("cell",2,1));f=j.CswTable("cell",2,2).CswInput("init",{ID:b.ID+"_href",type:CswInput_Types.text,value:e,onChange:b.onchange});if(b.Required&&e===""){j.show();d.addClass("required");f.addClass("required")}}},
save:function(b){var d=b.$propdiv.find("#"+b.ID+"_text"),f=b.$propdiv.find("#"+b.ID+"_href");b.$propxml.children("text").text(d.val());b.$propxml.children("href").text(f.val())}};a.fn.CswFieldTypeLink=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeLink")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("value").text().trim(),e=b.$propxml.children("options").text().trim();if(b.ReadOnly)d.append(f);else{d=a('<select id="'+b.ID+'" name="'+b.ID+'" class="selectinput" />"').appendTo(d).change(b.onchange);e=e.split(",");for(var h=0;h<e.length;h++)d.append('<option value="'+e[h]+'">'+e[h]+"</option>");d.val(f);b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("select");b.$propxml.children("value").text(d.val())}};
a.fn.CswFieldTypeList=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeList")}})(jQuery);(function(a){a.fn.CswFieldTypeLocation=function(g){function b(f,e,h,j,m){if(e==="root")e="";f.CswComboBox("TopContent",h);if(f.attr("value")!==e){f.attr("value",e);m()}setTimeout(function(){f.CswComboBox("close")},300)}var d={init:function(f){var e=a(this);e.contents().remove();var h=f.$propxml.children("nodeid").text().trim(),j=f.$propxml.children("nodekey").text().trim(),m=f.$propxml.children("name").text().trim(),i=f.$propxml.children("path").text().trim(),k=f.$propxml.children("viewid").text().trim();
if(f.ReadOnly)e.append(i);else{e=e.CswTable("init",{ID:f.ID+"_tbl"});var n=e.CswTable("cell",1,1);n.attr("colspan","2");n.append(i+"<br/>");i=e.CswTable("cell",2,1);var l=a('<div class="locationselect" value="'+h+'"/>').appendTo(i);h=a("<div />").CswNodeTree("init",{ID:f.ID,viewid:k,nodeid:h,cswnbtnodekey:j,onSelectNode:function(t){b(l,t.nodeid,t.nodename,t.iconurl,f.onchange)},SelectFirstChild:false,UsePaging:false});l.CswComboBox("init",{ID:f.ID+"_combo",TopContent:m,SelectContent:h,Width:"266px"})}},
save:function(f){var e=f.$propdiv.find(".locationselect");f.$propxml.children("nodeid").text(e.attr("value"))}};if(d[g])return d[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return d.init.apply(this,arguments);else a.error("Method "+g+" does not exist on CswFieldTypeLocation")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();b.$propxml.children("value").text().trim();d.append("[Not Implemented Yet]")},save:function(){}};a.fn.CswFieldTypeLocationContents=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeLocationContents")}})(jQuery);(function(a){var g={init:function(b){$Div=a(this);b={Checked:b.$propxml.children("checked").text().trim(),Required:b.Required,ReadOnly:b.ReadOnly,onchange:b.onchange};$Div.CswTristateCheckBox("init",b)},save:function(b){$Div=b.$propdiv.find("div");var d=$Div.CswTristateCheckBox("value");b.$propxml.children("checked").text(d)}};a.fn.CswFieldTypeLogical=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);
else a.error("Method "+b+" does not exist on CswFieldTypeLogical")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("logicalsetxml");d=a("<div />").appendTo(d);var e=[],h=0;f.find("item").first().children("column").each(function(){var i=a(this).attr("field");if(i!=="name"&&i!="key"){e[h]=i;h++}});var j=[],m=0;f.find("item").each(function(){for(var i=a(this),k=[],n=0,l=0;l<e.length;l++){var t=i.children('column[field="'+e[l]+'"]').attr("value");k[n]=t==="True";n++}i={label:i.children('column[field="name"]').attr("value"),
key:i.children('column[field="key"]').attr("value"),values:k};j[m]=i;m++});d.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:e,data:j,onchange:b.onchange})},save:function(b){var d=b.$propxml.children("logicalsetxml");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var f=0;f<b.length;f++)for(var e=0;e<b[f].length;e++){var h=b[f][e],j=d.find('item:has(column[field="key"][value="'+h.key+'"])').find('column[field="'+h.collabel+'"]');if(h.checked&&j.attr("value")==="False")j.attr("value",
"True");else!h.checked&&j.attr("value")==="True"&&j.attr("value","False")}}};a.fn.CswFieldTypeLogicalSet=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeLogicalSet")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("text").text().trim(),e=b.$propxml.children("text").attr("rows"),h=b.$propxml.children("text").attr("columns");if(b.ReadOnly)d.append(f);else{d=a('<textarea id="'+b.ID+'" name="'+b.ID+'" rows="'+e+'" cols="'+h+'">'+f+"</textarea>").appendTo(d).change(b.onchange);b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("textarea");b.$propxml.children("text").text(d.val())}};a.fn.CswFieldTypeMemo=
function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeMemo")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("startdatetime").text().trim(),e=b.$propxml.children("value").text().trim(),h=b.$propxml.children("units").text().trim();d=d.CswTable("init",{ID:b.ID+"_tbl"});var j=d.CswTable("cell",1,1),m=d.CswTable("cell",1,2);j.append(e+"&nbsp;"+h);if(!b.ReadOnly){m.CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID,onClick:function(){i.show()}});var i=d.CswTable("cell",2,2).CswTable("init",
{ID:b.ID+"_edittbl"});i.CswTable("cell",1,1).append("Start Date");i.CswTable("cell",1,2).CswInput("init",{ID:b.ID+"_sd",type:CswInput_Types.text,cssclass:"textinput date",value:f,onChange:b.onchange}).datepicker();i.CswTable("cell",3,1).append("Units");b=a('<select id="'+b.ID+'_units" />').appendTo(i.CswTable("cell",3,2)).change(b.onchange);f=a('<option value="hours">hours</option>').appendTo(b);h==="hours"&&f.attr("selected","true");b=a('<option value="days">days</option>').appendTo(b);h==="days"&&
b.attr("selected","true");i.hide()}},save:function(b){var d=b.$propdiv.find("#"+b.ID+"_sd").val(),f=b.$propdiv.find("#"+b.ID+"_units").val();b.$propxml.children("startdatetime").text(d);b.$propxml.children("units").text(f)}};a.fn.CswFieldTypeMTBF=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeMTBF")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("options");b.$propxml.children("NodeType").text().trim();var e=b.$propxml.children("NodeType").attr("SelectMode");d=a("<div />").appendTo(d);var h=[],j=0;f.find("item").each(function(){var m=a(this);m={label:m.children('column[field="NodeTypeName"]').attr("value"),key:m.children('column[field="nodetypeid"]').attr("value"),values:[m.children('column[field="Include"]').attr("value")==="True"]};h[j]=m;
j++});d.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:["Include"],data:h,UseRadios:e==="Single",Required:b.Required,onchange:b.onchange})},save:function(b){var d=b.$propxml.children("options");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var f=0;f<b.length;f++){var e=b[f][0],h=d.find('item:has(column[field="nodetypeid"][value="'+e.key+'"])').find('column[field="Include"]');if(e.checked&&h.attr("value")==="False")h.attr("value","True");else!e.checked&&h.attr("value")===
"True"&&h.attr("value","False")}}};a.fn.CswFieldTypeNodeTypeSelect=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeNodeTypeSelect")}})(jQuery);(function(a){var g={init:function(b){a(this).CswNumberTextBox({ID:b.ID,Value:b.$propxml.children("value").text().trim(),MinValue:b.$propxml.children("value").attr("minvalue"),MaxValue:b.$propxml.children("value").attr("maxvalue"),Precision:b.$propxml.children("value").attr("precision"),ReadOnly:b.ReadOnly,Required:b.Required,onchange:b.onchange})},save:function(b){b.$propxml.children("value").text(b.$propdiv.CswNumberTextBox("value"))}};a.fn.CswFieldTypeNumber=function(b){if(g[b])return g[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeNumber")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();if(!b.ReadOnly){var f=d.CswTable("init",{ID:b.ID+"_tbl"});d=f.CswTable("cell",1,1);f=f.CswTable("cell",2,1);d.CswInput("init",{ID:b.ID+"_pwd1",type:CswInput_Types.password,cssclass:"textinput",onChange:b.onchange});f.CswInput("init",{ID:b.ID+"_pwd2",type:CswInput_Types.password,cssclass:"textinput password2",onChange:b.onchange});jQuery.validator.addMethod("password2",function(){var e=a("#"+b.ID+"_pwd1").val(),h=a("#"+b.ID+"_pwd2").val();
return e===""&&h===""||e===h},"Passwords do not match!")}},save:function(b){var d=b.$propdiv.find("input#"+b.ID+"_pwd1").val();d!==""&&b.$propxml.children("newpassword").text(d)}};a.fn.CswFieldTypePassword=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypePassword")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("value").text().trim();f+="&nbsp;";a('<div id="'+b.ID+'" class="staticvalue">'+f+"</div>").appendTo(d)},save:function(){}};a.fn.CswFieldTypePropertyReference=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypePropertyReference")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();d.CswNumberTextBox({ID:b.ID+"_qty",Value:b.$propxml.children("value").text().trim(),MinValue:b.$propxml.children("value").attr("minvalue"),MaxValue:b.$propxml.children("value").attr("maxvalue"),Precision:b.$propxml.children("value").attr("precision"),ReadOnly:b.ReadOnly,Required:b.Required,onchange:b.onchange});var f=b.$propxml.children("units").contents().first().text(),e=a('<select id="'+b.ID+'_units" />').appendTo(d).change(b.onchange);
b.$propxml.children("units").children().each(function(){var h=a(this).attr("value"),j=a('<option value="'+h+'">'+h+"</option>").appendTo(e);f===h&&j.attr("selected","true")})},save:function(b){b.$propxml.children("value").text(b.$propdiv.CswNumberTextBox("value"));var d=b.$propdiv.find("#"+b.ID+"_units").val();b.$propxml.children("units").text(d)}};a.fn.CswFieldTypeQuantity=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,
arguments);else a.error("Method "+b+" does not exist on CswFieldTypeQuantity")}})(jQuery);(function(a){function g(d,f,e,h){d=d.split(",");var j=true,m=f.val(),i=h.val();if(m!==""&&i===""){j=false;for(var k=0;k<d.length;k++)if(d[k]===m)j=true}if(j){f.removeClass("CswFieldTypeQuestion_OOC");if(i===""){e.hide();h.hide()}}else{f.addClass("CswFieldTypeQuestion_OOC");e.show();h.show()}}var b={init:function(d){var f=a(this);f.contents().remove();var e=d.$propxml.children("answer").text().trim(),h=d.$propxml.children("allowedanswers").text().trim(),j=d.$propxml.children("compliantanswers").text().trim(),
m=d.$propxml.children("comments").text().trim(),i=d.$propxml.children("correctiveaction").text().trim(),k=d.$propxml.children("dateanswered").text().trim(),n=d.$propxml.children("datecorrected").text().trim();d.$propxml.children("iscompliant").text().trim();if(d.ReadOnly){f.append("Answer: "+e);k!==""&&f.append(" ("+k+")");f.append("<br/>");f.append("Corrective Action: "+i);n!==""&&f.append(" ("+n+")");f.append("<br/>");f.append("Comments: "+m+"<br/>")}else{f=f.CswTable("init",{ID:d.ID+"_tbl",FirstCellRightAlign:true});
f.CswTable("cell",1,1).append("Answer");h=h.split(",");var l=a('<select id="'+d.ID+'_ans" />').appendTo(f.CswTable("cell",1,2)).change(function(){g(j,l,s,w);d.onchange()});k=a('<option value=""></option>').appendTo(l);for(n=0;n<h.length;n++){var t=h[n];k=a('<option value="'+t+'">'+t+"</option>").appendTo(l);t===e&&k.attr("selected","true")}var s=f.CswTable("cell",2,1).append("Corrective Action"),w=a('<textarea id="'+d.ID+'_cor" />').appendTo(f.CswTable("cell",2,2)).text(i).change(function(){g(j,l,
s,w);d.onchange()});f.CswTable("cell",3,1).append("Comments");a('<textarea id="'+d.ID+'_com" />').appendTo(f.CswTable("cell",3,2)).text(m).change(d.onchange);g(j,l,s,w)}},save:function(d){var f=d.$propdiv.find("#"+d.ID+"_ans").val(),e=d.$propdiv.find("#"+d.ID+"_cor").val(),h=d.$propdiv.find("#"+d.ID+"_com").val();d.$propxml.children("answer").text(f);d.$propxml.children("correctiveaction").text(e);d.$propxml.children("comments").text(h)}};a.fn.CswFieldTypeQuestion=function(d){if(b[d])return b[d].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswFieldTypeQuestion")}})(jQuery);(function(a){a.fn.CswFieldTypeRelationship=function(g){var b={init:function(d){var f=a(this);f.contents().remove();var e=d.$propxml.children("nodeid").text().trim();if(d.relatednodeid!==""&&d.relatednodeid!==undefined&&(e===""||e===undefined))e=d.relatednodeid;var h=d.$propxml.children("name").text().trim(),j=d.$propxml.children("nodetypeid").text().trim(),m=d.$propxml.children("options");if(d.ReadOnly)f.append(h);else{f=f.CswTable("init",{ID:d.ID+"_tbl"});h=f.CswTable("cell",1,1);var i=a('<select id="'+
d.ID+'" name="'+d.ID+'" class="selectinput" />"').appendTo(h).change(d.onchange);m.children().each(function(){var k=a(this);i.append('<option value="'+k.attr("id")+'">'+k.attr("value")+"</option>")});i.val(e);if(j!==""){e=f.CswTable("cell",1,2);a("<div />").appendTo(e).CswImageButton({ButtonType:CswImageButton_ButtonType.Add,AlternateText:"Add New",onClick:function(){a.CswDialog("AddNodeDialog",{nodetypeid:j,onAddNode:function(){d.onReload()}});return CswImageButton_ButtonType.None}})}d.Required&&
i.addClass("required")}},save:function(d){var f=d.$propdiv.find("select");d.$propxml.children("nodeid").text(f.val())}};if(b[g])return b[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return b.init.apply(this,arguments);else a.error("Method "+g+" does not exist on CswFieldTypeRelationship")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("sequence").text().trim();if(b.ReadOnly)d.append(f);else{d=d.CswInput("init",{ID:b.ID,type:CswInput_Types.text,cssclass:"textinput",onChange:b.onchange,value:f});b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("sequence").text(d.val())}};a.fn.CswFieldTypeSequence=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));
else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeSequence")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("text").text().trim(),e=parseInt(b.$propxml.children("text").attr("columns"));b=parseInt(b.$propxml.children("text").attr("rows"));var h="auto",j="",m="";if(e>0&&b>0){h="scroll";j=Math.round(e+2-e/2.25)+"em";m=Math.round(b+2.5+b/5)+"em"}else if(e>0)j=Math.round(e-e/2.25)+"em";else if(b>0)m=Math.round(b+0.5+b/5)+"em";a('<div class="staticvalue" style="overflow: '+h+"; width: "+j+"; height: "+m+';">'+
f+"</div>").appendTo(d)},save:function(){}};a.fn.CswFieldTypeStatic=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeStatic")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("text").text().trim(),e=b.$propxml.children("text").attr("length");if(b.ReadOnly)d.append(f);else{d=d.CswInput("init",{ID:b.ID,type:CswInput_Types.text,value:f,cssclass:"textinput",width:e,onChange:b.onchange});b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("text").text(d.val())}};a.fn.CswFieldTypeText=function(b){if(g[b])return g[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeText")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("value").text().trim();if(b.ReadOnly)d.append(f);else{var e=d.CswInput("init",{ID:b.ID,type:CswInput_Types.text,cssclass:"textinput validateTime",onChange:b.onchange,value:f});d.CswButton("init",{ID:b.ID+"_now",disableOnClick:false,onclick:function(){e.val(getTimeString(new Date))},enabledText:"Now"});jQuery.validator.addMethod("validateTime",function(h,j){return this.optional(j)||validateTime(a(j).val())},
"Enter a valid time (e.g. 12:30 PM)");b.Required&&e.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("value").text(d.val())}};a.fn.CswFieldTypeTime=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeTime")}})(jQuery);(function(a){function g(e,h,j){e=e.CswTable("init",{ID:h,cellalign:"center"});e.CswTable("cell",1,1).append("Su");e.CswTable("cell",1,2).append("M");e.CswTable("cell",1,3).append("Tu");e.CswTable("cell",1,4).append("W");e.CswTable("cell",1,5).append("Th");e.CswTable("cell",1,6).append("F");e.CswTable("cell",1,7).append("Sa");for(var m=1;m<=7;m++)e.CswTable("cell",2,m).CswInput("init",{ID:h+"_"+m,type:CswInput_Types.checkbox,onChange:j,value:m})}function b(e,h){a('[name="'+e+'"]').attr("checked","");
for(var j=h.split(","),m=0;m<j.length;m++)switch(j[m]){case "Sunday":a("#"+e+"_1").attr("checked","true");break;case "Monday":a("#"+e+"_2").attr("checked","true");break;case "Tuesday":a("#"+e+"_3").attr("checked","true");break;case "Wednesday":a("#"+e+"_4").attr("checked","true");break;case "Thursday":a("#"+e+"_5").attr("checked","true");break;case "Friday":a("#"+e+"_6").attr("checked","true");break;case "Saturday":a("#"+e+"_7").attr("checked","true")}}function d(e){var h="";a('[name="'+e+'"]').each(function(){var j=
a(this);if(j.attr("checked")!==""){if(h!=="")h+=",";switch(j.attr("value")){case "1":h+="Sunday";break;case "2":h+="Monday";break;case "3":h+="Tuesday";break;case "4":h+="Wednesday";break;case "5":h+="Thursday";break;case "6":h+="Friday";break;case "7":h+="Saturday"}}});return h}var f={init:function(e){var h=a(this);h.contents().remove();var j=e.$propxml.children("Interval").attr("text");h.append('<span id="'+e.ID+'_textvalue">'+j+"</span>");if(!e.ReadOnly){var m=h.CswTable("init",{ID:e.ID+"_tbl",
cellspacing:5});h=m.CswTable("cell",1,1).CswInput("init",{ID:e.ID+"_type_weekly",name:e.ID+"_type",type:CswInput_Types.radio,value:"weekly"});m.CswTable("cell",1,2).append("<span>&nbsp;Weekly</span>");h.click(function(){n.show();l.hide();P.hide();e.onchange()});j=m.CswTable("cell",2,1).CswInput("init",{ID:e.ID+"_type_monthly",name:e.ID+"_type",type:CswInput_Types.radio,value:"monthly"});m.CswTable("cell",2,2).append("<span>&nbsp;Monthly</span>");j.click(function(){n.hide();l.show();P.hide();e.onchange()});
var i=m.CswTable("cell",3,1).CswInput("init",{ID:e.ID+"_type_yearly",name:e.ID+"_type",type:CswInput_Types.radio,value:"yearly"});m.CswTable("cell",3,2).append("<span>&nbsp;Yearly</span>");i.click(function(){n.hide();l.hide();P.show();e.onchange()});var k=m.CswTable("cell",1,3);k.attr("rowspan","3");var n=a("<div />").appendTo(k).addClass("CswFieldTypeTimeInterval_Div");m=n.CswTable("init",{ID:e.ID+"_weeklytbl",cellalign:"center",FirstCellRightAlign:true});m.CswTable("cell",1,1).append("Every:");
g(m.CswTable("cell",1,2),e.ID+"_weeklyday",e.onchange);m.CswTable("cell",2,1).append("Starting On:");m=m.CswTable("cell",2,2).CswInput("init",{ID:e.ID+"_weekly_sd",type:CswInput_Types.text,cssclass:"textinput date",onChange:e.onchange});m.datepicker();var l=a("<div />").appendTo(k).addClass("CswFieldTypeTimeInterval_Div");l.append("Every ");for(var t=a('<select id="'+e.ID+'_monthly_rate"/>').appendTo(l).change(e.onchange),s=1;s<=12;s++)t.append('<option value="'+s+'">'+s+"</option>");l.append(" Month(s)<br/>");
var w=l.CswInput("init",{ID:e.ID+"_monthly_by_date",name:e.ID+"_monthly",type:CswInput_Types.radio,onChange:e.onchange,value:"MonthlyByDate"});l.append("On Day of Month:&nbsp;");var C=a('<select id="'+e.ID+'_monthly_date" />').appendTo(l).change(e.onchange);for(s=1;s<=31;s++)C.append('<option value="'+s+'">'+s+"</option>");l.append("<br/>");var v=l.CswInput("init",{ID:e.ID+"_monthly_by_day",name:e.ID+"_monthly",type:CswInput_Types.radio,onChange:e.onchange,value:"MonthlyByWeekAndDay"});l.append("Every&nbsp;");
var u=a('<select id="'+e.ID+'_monthly_week" />').appendTo(l);u.append('<option value="1">First:</option>');u.append('<option value="2">Second:</option>');u.append('<option value="3">Third:</option>');u.append('<option value="4">Fourth:</option>');l.append("<br/>");g(l,e.ID+"_monthly_day",e.onchange);l.append("<br/>Starting On:&nbsp;");var y=a('<select id="'+e.ID+'_monthly_startMonth" />').appendTo(l).change(e.onchange);for(s=1;s<=12;s++)y.append('<option value="'+s+'">'+s+"</option>");l.append("/");
var F=a('<select id="'+e.ID+'_monthly_startYear" />').appendTo(l).change(e.onchange),N=(new Date).getFullYear();for(s=N-10;s<=N+10;s++)F.append('<option value="'+s+'">'+s+"</option>");F.val(N);var P=a("<div />").appendTo(k).addClass("CswFieldTypeTimeInterval_Div");P.append("Every Year, Starting On:<br/>");k=P.CswInput("init",{ID:e.ID+"_yearly_sd",type:CswInput_Types.text,cssclass:"textinput date",onChange:e.onchange});k.datepicker();s=e.$propxml.children("interval").children("rateintervalvalue");
switch(s.children("ratetype").text()){case "WeeklyByDay":h.attr("checked","true");n.show();l.hide();P.hide();b(e.ID+"_weeklyday",s.children("weeklyday").text());m.val(s.children("startingdate").text());w.attr("checked","true");break;case "MonthlyByDate":j.attr("checked","true");n.hide();l.show();P.hide();w.attr("checked","true");t.val(s.children("monthlyfrequency").text());C.val(s.children("monthlydate").text());y.val(s.children("startingmonth").text());F.val(s.children("startingyear").text());break;
case "MonthlyByWeekAndDay":j.attr("checked","true");n.hide();l.show();P.hide();v.attr("checked","true");u.val(s.children("monthlyweek").text());b(e.ID+"_monthly_day",s.children("monthlyday").text());y.val(s.children("startingmonth").text());F.val(s.children("startingyear").text());break;case "YearlyByDate":i.attr("checked","true");n.hide();l.show();P.hide();k.val(s.children("yearlydate").text());w.attr("checked","true")}}},save:function(e){var h=a('[name="'+e.ID+'_type"]:checked').attr("value");e.$propxml.children().remove();
var j=a("<interval />").appendTo(e.$propxml),m=a("<rateintervalvalue />").appendTo(j);switch(h){case "weekly":a("<ratetype>WeeklyByDay</ratetype>").appendTo(m);a("<weeklyday>"+d(e.ID+"_weeklyday")+"</weeklyday>").appendTo(m);a("<startingdate>"+a("#"+e.ID+"_weekly_sd").val()+"</startingdate>").appendTo(m);break;case "monthly":h=a('[name="'+e.ID+'_monthly"]:checked').attr("value");a("<ratetype>"+h+"</ratetype>").appendTo(m);a("<monthlyfrequency>"+a("#"+e.ID+"_monthly_rate").val()+"</monthlyfrequency>").appendTo(m);
if(h==="MonthlyByDate")a("<monthlydate>"+a("#"+e.ID+"_monthly_date").val()+"</monthlydate>").appendTo(m);else{a("<monthlyweek>"+a("#"+e.ID+"_monthly_week").val()+"</monthlyweek>").appendTo(m);a("<monthlyday>"+d(e.ID+"_monthly_day")+"</monthlyday>").appendTo(m)}a("<startingmonth>"+a("#"+e.ID+"_monthly_startMonth").val()+"</startingmonth>").appendTo(m);a("<startingyear>"+a("#"+e.ID+"_monthly_startYear").val()+"</startingyear>").appendTo(m);break;case "yearly":a("<ratetype>YearlyByDate</ratetype>").appendTo(m);
a("<yearlydate>"+a("#"+e.ID+"_yearly_sd").val()+"</yearlydate>").appendTo(m)}j.find("*").andSelf().each(function(){a(this).attr("xmlns","")})}};a.fn.CswFieldTypeTimeInterval=function(e){if(f[e])return f[e].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof e==="object"||!e)return f.init.apply(this,arguments);else a.error("Method "+e+" does not exist on CswFieldTypeTimeInterval")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();b.$propxml.children("NodeId").text().trim();var f=b.$propxml.children("options");d=a("<div />").appendTo(d);var e=[],h=0;f.children().each(function(){var j=a(this);j={label:j.children('column[field="User Name"]').attr("value"),key:j.children('column[field="UserId"]').attr("value"),values:[j.children('column[field="Include"]').attr("value")==="True"]};e[h]=j;h++});d.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:["Include"],data:e,
UseRadios:false,Required:b.Required,onchange:b.onchange})},save:function(b){var d=b.$propxml.children("options");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var f=0;f<b.length;f++){var e=b[f][0],h=d.find('user:has(column[field="UserId"][value="'+e.key+'"])').find('column[field="Include"]');if(e.checked&&h.attr("value")==="False")h.attr("value","True");else!e.checked&&h.attr("value")==="True"&&h.attr("value","False")}}};a.fn.CswFieldTypeUserSelect=function(b){if(g[b])return g[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeUserSelect")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();b.$propxml.children("viewid").text().trim();var f=b.$propxml.children("options"),e=b.$propxml.children("viewid").attr("SelectMode");d=a("<div />").appendTo(d);var h=[],j=0;f.children().each(function(){var m=a(this);m={label:m.children('column[field="View Name"]').attr("value"),key:m.children('column[field="nodeviewid"]').attr("value"),values:[m.children('column[field="Include"]').attr("value")==="True"]};h[j]=m;j++});d.CswCheckBoxArray("init",
{ID:b.ID+"_cba",cols:["Include"],data:h,UseRadios:e==="Single",Required:b.Required,onchange:b.onchange})},save:function(b){var d=b.$propxml.children("options");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var f=0;f<b.length;f++){var e=b[f][0],h=d.find('user:has(column[field="nodeviewid"][value="'+e.key+'"])').find('column[field="Include"]');if(e.checked&&h.attr("value")==="False")h.attr("value","True");else!e.checked&&h.attr("value")==="True"&&h.attr("value",
"False")}}};a.fn.CswFieldTypeViewPickList=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeViewPickList")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("viewid").text().trim(),e=b.$propxml.children("viewmode").text().trim().toLowerCase();b.$propxml.children("name").text().trim();d=d.CswTable("init",{ID:b.ID+"_tbl"});d.CswTable("cell",1,1).CswImageButton({ID:b.ID+"_view",ButtonType:CswImageButton_ButtonType.View,AlternateText:"View",Required:b.Required,onClick:function(){a.CswCookie("set",CswCookieName.CurrentView.ViewId,f);a.CswCookie("set",CswCookieName.CurrentView.ViewMode,
e);a.CswCookie("clear",CswCookieName.CurrentNode.NodeId,b.viewid);a.CswCookie("clear",CswCookieName.CurrentNode.NodeKey,b.viewmode);window.location="NewMain.html";return CswImageButton_ButtonType.None}});b.ReadOnly||d.CswTable("cell",1,2).CswImageButton({ID:b.ID+"_edit",ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",Required:b.Required,onClick:function(){window.location="EditView.aspx?step=2&return=NewMain.html&viewid="+f;return CswImageButton_ButtonType.None}})},save:function(){}};
a.fn.CswFieldTypeViewReference=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeViewReference")}})(jQuery);$.CswFieldTypeFactory=function(a){var g={nodeid:"",fieldtype:"",$propdiv:"",$propxml:"",onchange:function(){},onReload:function(){},cswnbtnodekey:"",ID:"",Required:"",ReadOnly:"",EditMode:"Edit",onEditView:function(){}},b={make:function(d){d&&$.extend(g,d);g.ID=g.$propxml.attr("id");g.Required=g.$propxml.attr("required")==="true"||g.Required;g.ReadOnly=g.$propxml.attr("readonly")==="true"||g.ReadOnly||g.EditMode==="PrintReport";switch(g.fieldtype){case "Barcode":g.$propdiv.CswFieldTypeBarcode("init",
g);break;case "Composite":g.$propdiv.CswFieldTypeComposite("init",g);break;case "Date":g.$propdiv.CswFieldTypeDate("init",g);break;case "File":g.$propdiv.CswFieldTypeFile("init",g);break;case "Grid":g.$propdiv.CswFieldTypeGrid("init",g);break;case "Image":g.$propdiv.CswFieldTypeImage("init",g);break;case "Link":g.$propdiv.CswFieldTypeLink("init",g);break;case "List":g.$propdiv.CswFieldTypeList("init",g);break;case "Location":g.$propdiv.CswFieldTypeLocation("init",g);break;case "LocationContents":g.$propdiv.CswFieldTypeLocationContents("init",
g);break;case "Logical":g.$propdiv.CswFieldTypeLogical("init",g);break;case "LogicalSet":g.$propdiv.CswFieldTypeLogicalSet("init",g);break;case "Memo":g.$propdiv.CswFieldTypeMemo("init",g);break;case "MTBF":g.$propdiv.CswFieldTypeMTBF("init",g);break;case "NodeTypeSelect":g.$propdiv.CswFieldTypeNodeTypeSelect("init",g);break;case "Number":g.$propdiv.CswFieldTypeNumber("init",g);break;case "Password":g.$propdiv.CswFieldTypePassword("init",g);break;case "PropertyReference":g.$propdiv.CswFieldTypePropertyReference("init",
g);break;case "Quantity":g.$propdiv.CswFieldTypeQuantity("init",g);break;case "Question":g.$propdiv.CswFieldTypeQuestion("init",g);break;case "Relationship":g.$propdiv.CswFieldTypeRelationship("init",g);break;case "Sequence":g.$propdiv.CswFieldTypeSequence("init",g);break;case "Static":g.$propdiv.CswFieldTypeStatic("init",g);break;case "Text":g.$propdiv.CswFieldTypeText("init",g);break;case "Time":g.$propdiv.CswFieldTypeTime("init",g);break;case "TimeInterval":g.$propdiv.CswFieldTypeTimeInterval("init",
g);break;case "UserSelect":g.$propdiv.CswFieldTypeUserSelect("init",g);break;case "ViewPickList":g.$propdiv.CswFieldTypeViewPickList("init",g);break;case "ViewReference":g.$propdiv.CswFieldTypeViewReference("init",g);break;default:g.$propdiv.append(g.$propxml.attr("init",g))}},save:function(d){d&&$.extend(g,d);g.ID=g.$propxml.attr("id");g.Required=g.$propxml.attr("required")==="true";g.ReadOnly=g.$propxml.attr("readonly")==="true";switch(g.fieldtype){case "Barcode":g.$propdiv.CswFieldTypeBarcode("save",
g);break;case "Composite":g.$propdiv.CswFieldTypeComposite("save",g);break;case "Date":g.$propdiv.CswFieldTypeDate("save",g);break;case "File":g.$propdiv.CswFieldTypeFile("save",g);break;case "Grid":g.$propdiv.CswFieldTypeGrid("save",g);break;case "Image":g.$propdiv.CswFieldTypeImage("save",g);break;case "Link":g.$propdiv.CswFieldTypeLink("save",g);break;case "List":g.$propdiv.CswFieldTypeList("save",g);break;case "Location":g.$propdiv.CswFieldTypeLocation("save",g);break;case "LocationContents":g.$propdiv.CswFieldTypeLocationContents("save",
g);break;case "Logical":g.$propdiv.CswFieldTypeLogical("save",g);break;case "LogicalSet":g.$propdiv.CswFieldTypeLogicalSet("save",g);break;case "Memo":g.$propdiv.CswFieldTypeMemo("save",g);break;case "MTBF":g.$propdiv.CswFieldTypeMTBF("save",g);break;case "NodeTypeSelect":g.$propdiv.CswFieldTypeNodeTypeSelect("save",g);break;case "Number":g.$propdiv.CswFieldTypeNumber("save",g);break;case "Password":g.$propdiv.CswFieldTypePassword("save",g);break;case "PropertyReference":g.$propdiv.CswFieldTypePropertyReference("save",
g);break;case "Quantity":g.$propdiv.CswFieldTypeQuantity("save",g);break;case "Question":g.$propdiv.CswFieldTypeQuestion("save",g);break;case "Relationship":g.$propdiv.CswFieldTypeRelationship("save",g);break;case "Sequence":g.$propdiv.CswFieldTypeSequence("save",g);break;case "Static":g.$propdiv.CswFieldTypeStatic("save",g);break;case "Text":g.$propdiv.CswFieldTypeText("save",g);break;case "Time":g.$propdiv.CswFieldTypeTime("save",g);break;case "TimeInterval":g.$propdiv.CswFieldTypeTimeInterval("save",
g);break;case "UserSelect":g.$propdiv.CswFieldTypeUserSelect("save",g);break;case "ViewPickList":g.$propdiv.CswFieldTypeViewPickList("save",g);break;case "ViewReference":g.$propdiv.CswFieldTypeViewReference("save",g)}}};if(b[a])return b[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return b.init.apply(this,arguments);else $.error("Method "+a+" does not exist on "+PluginName)};
