(function(a){a.fn.CswAttrDom=function(g,b){var d=a(this),f=undefined;f=arguments.length===1?d.prop(g):d.prop(g,b);if(f===undefined||g==="cellpadding"||g==="cellspacing"||g==="rowspan"||g==="colspan")f=arguments.length===1?d.attr(g):d.attr(g,b);return f}})(jQuery);(function(a){a.fn.CswAttrXml=function(g,b){var d=a(this),f=undefined;switch(arguments.length){case 1:f=d.attr(g);break;case 2:f=d.attr(g,b)}return f}})(jQuery);(function(a){function g(d){d.length>0&&d.button({label:d.CswAttrDom("disabledText"),disabled:true})}var b={init:function(d){var f={ID:"",enabledText:"",disabledText:"",hasText:true,disableOnClick:true,inputType:"button",primaryicon:"",secondaryicon:"",ReadOnly:false,onclick:function(){}};d&&a.extend(f,d);d=a(this);var e=a("<input />").CswAttrDom("type",f.inputType).CswAttrDom("id",f.ID).CswAttrDom("name",f.ID);e.CswAttrDom("enabledText",f.enabledText);e.CswAttrDom("disabledText",f.disabledText);var h=
{text:f.hasText,label:f.enabledText,disabled:f.ReadOnly,icons:{primary:f.primaryicon,secondary:f.secondaryicon}};if(h.disabled)h.label=f.disabledText;e.button(h).click(function(){f.disableOnClick&&g(e);f.onclick()});d.append(e);return e},enable:function(){var d=a(this);d.length>0&&d.button({label:d.CswAttrDom("enabledText"),disabled:false})},disable:function(){var d=a(this);g(d)}};a.fn.CswButton=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d===
"object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswButton")}})(jQuery);(function(a){a.fn.CswCheckBoxArray=function(g){var b={init:function(d){var f={ID:"",cols:["col1","col2","col3"],data:[{label:"row1",key:1,values:[true,false,true]},{label:"row2",key:2,values:[false,true,false]},{label:"row3",key:3,values:[true,false,true]}],HeightInRows:4,UseRadios:false,Required:false,onchange:function(){}};d&&a.extend(f,d);var e="checkbox";if(f.UseRadios)e="radio";d=a(this);d.contents().remove();var h=a("<div/>").appendTo(d),k=h.CswTable("init",{ID:f.ID+"_tbl"});h.css("height",
25*f.HeightInRows+"px");h.addClass("cbarraydiv");k.addClass("cbarraytable");h=1;for(var l=0;l<f.cols.length;l++){var j=k.CswTable("cell",h,l+2);j.addClass("cbarraycell");j.append(f.cols[l])}h++;if(f.UseRadios&&!f.Required){l=k.CswTable("cell",h,1);l.addClass("cbarraycell");l.append("[none]");for(l=0;l<f.cols.length;l++){j=k.CswTable("cell",h,l+2);j.addClass("cbarraycell");var m=f.ID+"_none";j=a('<input type="'+e+'" class="CBACheckBox_'+f.ID+'" id="'+m+'" name="'+f.ID+'" />').appendTo(j).click(f.onchange);
j.CswAttrDom("key","");j.CswAttrDom("rowlabel","[none]");j.CswAttrDom("collabel",f.cols[l]);j.CswAttrDom("row",-1);j.CswAttrDom("col",l);j.CswAttrDom("checked","true")}}h++;for(var n=0;n<f.data.length;n++){var i=f.data[n];l=k.CswTable("cell",h+n,1);l.addClass("cbarraycell");l.append(i.label);for(l=0;l<f.cols.length;l++){j=k.CswTable("cell",h+n,l+2);j.addClass("cbarraycell");m=f.ID+"_"+n+"_"+l;j=a('<input type="'+e+'" class="CBACheckBox_'+f.ID+'" id="'+m+'" name="'+f.ID+'" />').appendTo(j).click(f.onchange);
j.CswAttrDom("key",i.key);j.CswAttrDom("rowlabel",i.label);j.CswAttrDom("collabel",f.cols[l]);j.CswAttrDom("row",n);j.CswAttrDom("col",l);i.values[l]&&j.CswAttrDom("checked","true")}}if(!f.UseRadios){e="Check All";if(a(".CBACheckBox_"+f.ID).not(":checked").length===0)e="Uncheck All";var s=a('<div style="text-align: right"><a href="#">'+e+"</a></div>").appendTo(d).children("a");s.click(function(){var t=f.ID;if(a(".CBACheckBox_"+t).not(":checked").length>0){a(".CBACheckBox_"+t).CswAttrDom("checked",
"checked");s.text("Uncheck all")}else{a(".CBACheckBox_"+t).removeAttr("checked");s.text("Check all")}return false})}},getdata:function(d){var f={ID:""};d&&a.extend(f,d);var e=[];a(this).find(".CBACheckBox_"+f.ID).each(function(){var h=a(this),k=parseInt(h.CswAttrDom("row")),l=parseInt(h.CswAttrDom("col"));if(e[k]===undefined)e[k]=[];e[k][l]={key:h.CswAttrDom("key"),rowlabel:h.CswAttrDom("rowlabel"),collabel:h.CswAttrDom("collabel"),checked:h.CswAttrDom("checked")}});return e}};if(b[g])return b[g].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return b.init.apply(this,arguments);else a.error("Method "+g+" does not exist on "+PluginName)}})(jQuery);(function(a){a.fn.CswComboBox=function(g){function b(f,e){f.toggleClass("CswComboBox_TopDiv_click");e.toggle()}var d={init:function(f){var e={ID:"",TopContent:"",SelectContent:"This ComboBox Is Empty!",Width:"180px"};f&&a.extend(e,f);f=a(this);f.contents().remove();var h=a('<div id="'+e.ID+'_top" class="CswComboBox_TopDiv"></div>').appendTo(f).css("width",e.Width),k=h.CswTable("init",{ID:e.ID+"_tbl"});k.CswAttrDom("width","100%");$cell1=k.CswTable("cell",1,1);$cell1.CswAttrDom("width","100%");$cell1.append(e.TopContent);
$cell2=k.CswTable("cell",1,2);$cell2.addClass("CswComboBox_ImageCell");var l=a('<div id="'+e.ID+'_child" class="CswComboBox_ChildDiv">').appendTo(f).css("width",e.Width).append(e.SelectContent).hover(function(){},function(){l.hide()});$cell1.click(function(){b(h,l)});$cell2.CswImageButton({ButtonType:CswImageButton_ButtonType.Select,ID:e.ID+"_top_img",AlternateText:"",onClick:function(){b(h,l)}})},TopContent:function(f){var e=a(this).children(".CswComboBox_TopDiv").children("table").CswTable("cell",
1,1);e.text("");e.contents().remove();e.append(f)},toggle:function(){var f=a(this),e=f.children(".CswComboBox_TopDiv");f=f.children(".CswComboBox_ChildDiv");b(e,f)},close:function(){var f=a(this),e=f.children(".CswComboBox_TopDiv");f=f.children(".CswComboBox_ChildDiv");e.removeClass("CswComboBox_TopDiv_click");f.hide()}};if(d[g])return d[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return d.init.apply(this,arguments);else a.error("Method "+g+" does not exist on "+
PluginName)}})(jQuery);var CswCookieName={SessionId:"CswSessionId",Username:"csw_username",CurrentView:{ViewId:"csw_currentviewid",ViewMode:"csw_currentviewmode"},CurrentNode:{NodeId:"csw_currentnodeid",NodeKey:"csw_currentnodekey"},CurrentTabId:"csw_currenttabid"};
(function(a){a.CswCookie=function(g){var b={get:function(d){d=a.cookie(d);if(d==undefined)d="";return d},set:function(d,f){a.cookie(d,f)},clear:function(d){a.cookie(d,"")},clearAll:function(){for(var d in CswCookieName)if(CswCookieName.hasOwnProperty(d)){a.cookie(CswCookieName[d],null);for(var f in CswCookieName[d])CswCookieName[d].hasOwnProperty(f)&&a.cookie(CswCookieName[d][f],null)}}};if(b[g])return b[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return b.init.apply(this,
arguments);else a.error("Method "+g+" does not exist on CswCookie")}})(jQuery);(function(a){a.fn.CswDashboard=function(g){var b={Url:"/NbtWebApp/wsNBT.asmx/getDashboard",onSuccess:function(){}};g&&a.extend(b,g);var d=a(this);CswAjaxXml({url:b.Url,data:"",success:function(f){var e=d.CswTable("init",{ID:"DashboardTable"});e.addClass("DashboardTable");var h=e.append("<tr />");f.children().each(function(){var k=a(this),l="";l=k.CswAttrXml("href")!==undefined?'<td class="DashboardCell">  <a target="_blank" href="'+k.CswAttrXml("href")+'">    <div title="'+k.CswAttrXml("text")+'" id="'+
k.CswAttrXml("id")+'" class="'+k.CswAttrXml("id")+'" />  </a></td>':'<td class="DashboardCell">  <div title="'+k.CswAttrXml("text")+'" id="'+k.CswAttrXml("id")+'" class="'+k.CswAttrXml("id")+'" /></td>';h.append(l)});b.onSuccess()}});return this}})(jQuery);(function(a){function g(d,f,e){d.dialog({modal:true,width:f,height:e,close:function(){d.remove()}})}var b={AddWelcomeItemDialog:function(d){var f={onAdd:function(){}};d&&a.extend(f,d);var e=a("<div></div>");e.CswWelcome("getAddItemForm",{onAdd:function(){e.dialog("close");f.onAdd()}});g(e,400,400)},AddViewDialog:function(d){var f={ID:"addviewdialog",onAddView:function(){},makeVisibilitySelect:function(){}};d&&a.extend(f,d);var e=a("<div></div>");d=e.CswTable("init",{ID:f.ID+"_tbl",FirstCellRightAlign:true});
d.CswTable("cell",1,1).append("Name:");var h=d.CswTable("cell",1,2).CswInput("init",{ID:f.ID+"_nametb",type:CswInput_Types.text,cssclass:"textinput"});d.CswTable("cell",2,1).append("Display Mode:");var k=a('<select id="'+f.ID+'_dmsel" />').appendTo(d.CswTable("cell",2,2));k.append('<option value="List">List</option>');k.append('<option value="Tree">Tree</option>');k.append('<option value="Grid">Grid</option>');var l=f.makeVisibilitySelect(d,3,"Available to:"),j=e.CswButton({ID:f.ID+"_submit",enabledText:"Create View",
disabledText:"Creating View",onclick:function(){var m={};m.ViewName=h.val();m.ViewMode=k.val();m.Visibility=l.getvisibilityselect().val();m.VisibilityRoleId=l.getvisroleselect().val();m.VisibilityUserId=l.getvisuserselect().val();CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/createView",data:jsonToString(m),success:function(n){e.dialog("close");f.onAddView(n.newviewid)},error:function(){j.CswButton("enable")}})}});e.CswButton({ID:f.ID+"_cancel",enabledText:"Cancel",disabledText:"Canceling",onclick:function(){e.dialog("close")}});
g(e,400,200)},AddNodeDialog:function(d){var f={nodetypeid:"",relatednodeid:"",onAddNode:function(){}};d&&a.extend(f,d);var e=a("<div></div>");e.CswNodeTabs({nodetypeid:f.nodetypeid,relatednodeid:f.relatednodeid,EditMode:"AddInPopup",onSave:function(h,k){e.dialog("close");f.onAddNode(h,k)}});g(e,800,600)},EditNodeDialog:function(d){var f={nodeid:"",cswnbtnodekey:"",filterToPropId:"",title:"",onEditNode:function(){}};d&&a.extend(f,d);var e=a("<div></div>");e.CswNodeTabs({nodeid:f.nodeid,cswnbtnodekey:f.cswnbtnodekey,
filterToPropId:f.filterToPropId,EditMode:"EditInPopup",title:f.title,onSave:function(h,k){e.dialog("close");f.onEditNode(h,k)}});f.filterToPropId!==""?g(e,600,400):g(e,900,600)},CopyNodeDialog:function(d){var f={nodename:"",nodeid:"",cswnbtnodekey:"",onCopyNode:function(){}};d&&a.extend(f,d);var e=a("<div>Copying: "+f.nodename+"<br/><br/></div>"),h=e.CswButton({ID:"copynode_submit",enabledText:"Copy",disabledText:"Copying",onclick:function(){copyNode({nodeid:f.nodeid,nodekey:f.nodekey,onSuccess:function(k,
l){e.dialog("close");f.onCopyNode(k,l)},onError:function(){h.CswButton("enable")}})}});e.CswButton({ID:"copynode_cancel",enabledText:"Cancel",disabledText:"Canceling",onclick:function(){e.dialog("close")}});g(e,400,300)},DeleteNodeDialog:function(d){var f={nodename:"",nodeid:"",cswnbtnodekey:"",onDeleteNode:function(){},Multi:false,NodeCheckTreeId:""};d&&a.extend(f,d);var e=a("<div><span>Are you sure you want to delete:</span></div>"),h=[],k=[];if(f.Multi)a("."+f.NodeCheckTreeId+"_check:checked").each(function(){var j=
a(this);h[h.length]=j.CswAttrDom("nodeid");e.append('<br/><span style="padding-left: 10px;">'+j.CswAttrDom("nodename")+"</span>")});else{e.append("<span>"+f.nodename+"?</span>");h[0]=f.nodeid;k[0]=f.cswnbtnodekey}e.append("<br/><br/>");var l=e.CswButton({ID:"deletenode_submit",enabledText:"Delete",disabledText:"Deleting",onclick:function(){deleteNodes({nodeids:h,nodekeys:k,onSuccess:function(j,m){e.dialog("close");f.onDeleteNode(j,m)},onError:function(){l.CswButton("enable")}})}});e.CswButton({ID:"deletenode_cancel",
enabledText:"Cancel",disabledText:"Canceling",onclick:function(){e.dialog("close")}});g(e,400,200)},AboutDialog:function(){var d=a("<div></div>");CswAjaxXml({url:"/NbtWebApp/wsNBT.asmx/getAbout",data:"",success:function(f){d.append("NBT Assembly Version: "+f.children("assembly").text()+"<br/><br/>");var e=d.CswTable("init",{ID:"abouttable"}),h=1;f.children("component").each(function(){var k=e.CswTable("cell",h,1),l=e.CswTable("cell",h,2),j=e.CswTable("cell",h,3);k.css("padding","2px 5px 2px 5px");
l.css("padding","2px 5px 2px 5px");j.css("padding","2px 5px 2px 5px");var m=a(this);k.append(m.children("name").text());l.append(m.children("version").text());j.append(m.children("copyright").text());h++})}});g(d,600,400)},SearchDialog:function(){},FileUploadDialog:function(d){var f={url:"",params:{},onSuccess:function(){}};d&&a.extend(f,d);var e=a("<div></div>");new qq.FileUploader({element:e.get(0),action:f.url,params:f.params,debug:false,onComplete:function(){e.dialog("close");f.onSuccess()}});
e.CswButton({ID:"fileupload_cancel",enabledText:"Cancel",disabledText:"Canceling",onclick:function(){e.dialog("close")}});g(e,400,300)},ShowLicenseDialog:function(d){var f={GetLicenseUrl:"/NbtWebApp/wsNBT.asmx/getLicense",AcceptLicenseUrl:"/NbtWebApp/wsNBT.asmx/acceptLicense",onAccept:function(){},onDecline:function(){}};d&&a.extend(f,d);var e=a('<div align="center"></div>');e.append("Service Level Agreement<br/>");var h=a('<textarea id="license" disabled="true" rows="30" cols="80"></textarea>').appendTo(e);
e.append("<br/>");CswAjaxJSON({url:f.GetLicenseUrl,success:function(l){h.text(l.license)}});var k=e.CswButton({ID:"license_accept",enabledText:"I Accept",disabledText:"Accepting...",onclick:function(){CswAjaxJSON({url:f.AcceptLicenseUrl,success:function(){e.dialog("close");f.onAccept()},error:function(){k.CswButton("enable")}})}});e.CswButton({ID:"license_decline",enabledText:"I Decline",disabledText:"Declining...",onclick:function(){e.dialog("close");f.onDecline()}});g(e,800,600)},PrintLabelDialog:function(d){var f=
{ID:"print_label",GetPrintLabelsUrl:"/NbtWebApp/wsNBT.asmx/getLabels",GetEPLTextUrl:"/NbtWebApp/wsNBT.asmx/getEPLText",nodeid:"",propid:""};d&&a.extend(f,d);var e=a('<div align="center"></div>');e.append("Select a Label to Print:<br/>");var h=a("<div />").appendTo(e),k;CswAjaxJSON({url:f.GetPrintLabelsUrl,data:JSON.stringify({PropId:f.propid}),success:function(j){if(j.labels.length>0){k=a('<select id="'+f.ID+'_labelsel"></select>');for(var m=0;m<j.labels.length;m++){var n=j.labels[m];k.append('<option value="'+
n.nodeid+'">'+n.name+"</option>")}k.appendTo(h);l.CswButton("enable")}else{l.hide();h.append("<span>No labels have been assigned!</span>")}}});var l=e.CswButton({ID:"print_label_print",enabledText:"Print",disableOnClick:false,onclick:function(){var j={PropId:f.propid,PrintLabelNodeId:k.val()};CswAjaxJSON({url:f.GetEPLTextUrl,data:JSON.stringify(j),success:function(m){var n=a("#labelx").get(0);n.EPLScript=m.epl;n.Print()}})}});l.CswButton("disable");e.CswButton({ID:"print_label_close",enabledText:"Close",
disabledText:"Closing...",onclick:function(){e.dialog("close")}});d=a('<div style="display: none; border: 1px solid red;"></div>').appendTo(e);a("<OBJECT ID='labelx' Name='labelx' classid='clsid:A8926827-7F19-48A1-A086-B1A5901DB7F0' codebase='CafLabelPrintUtil.cab#version=0,1,6,0' width=500 height=300 align=center hspace=0 vspace=0></OBJECT>").appendTo(d);g(e,400,300)},OpenDialog:function(d,f){var e=a('<div id="'+d+'"></div>');e.load(f,{},function(){e.appendTo("body").dialog()})},CloseDialog:function(d){a("#"+
d).dialog("close").remove()}};a.CswDialog=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswDialog")}})(jQuery);(function(a){var g={div:function(b){var d={ID:"",prefix:"",suffix:"",value:"",cssclass:""};b&&a.extend(d,b);b=a(this);var f=a("<div></div>"),e=makeId(d);if(e!==""){f.CswAttrDom("id",e);f.CswAttrDom("name",e)}d.cssclass!==""&&f.CswAttrDom("class",d.cssclass);d.value!==""&&f.text(d.value);b.append(f);return f},span:function(b){var d={ID:"",prefix:"",suffix:"",value:"",cssclass:""};b&&a.extend(d,b);b=a(this);var f=a("<span></span>"),e=makeId(d);if(e!==""){f.CswAttrDom("id",e);f.CswAttrDom("name",e)}d.cssclass!==
""&&f.CswAttrDom("class",d.cssclass);d.value!==""&&f.text(d.value);b.append(f);return f},link:function(b){var d={ID:"",prefix:"",suffix:"",value:"",type:"",media:"all",target:"",rel:"",cssclass:"",onClick:function(){}};b&&a.extend(d,b);b=a(this);var f=a("<a></a>"),e=makeId(d);e!==""&&f.CswAttrDom("id",e);d.href!==""&&f.CswAttrDom("href",d.href);d.value!==""&&f.text(d.value);d.cssclass!==""&&f.CswAttrDom("class",d.cssclass);d.type!==""&&f.CswAttrDom("type",d.type);d.rel!==""&&f.CswAttrDom("rel",d.rel);
d.media!==""&&f.CswAttrDom("media",d.media);d.target!==""&&f.CswAttrDom("target",d.target);d.onClick!==undefined&&f.click(function(){d.onClick()});b.append(f);return f},"break":function(b){var d={count:1};b&&a.extend(d,b);b=a(this);for(var f=0;f<d.count;){b.append(a("<br/>"));f++}},getchildren:function(b){var d={ID:"",prefix:"",suffix:""};b&&a.extend(d,b);b=a(this);var f;d=makeId(d);if(d!=="")f=b.children("#"+d);return f},findelement:function(b){var d={ID:"",prefix:"",suffix:""};b&&a.extend(d,b);
b=a(this);var f;d=makeId(d);if(d!=="")f=b.find("#"+d);return f}};a.fn.CswDOM=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswDOM")}})(jQuery);(function(a){a.fn.CswErrorMessage=function(g){var b={message:"",detail:""};g&&a.extend(b,g);var d=a(this);d.show();g="error_"+(new Date).getTime();var f=a("<div />").appendTo(d).CswAttrDom("id",g).addClass("CswErrorMessage_ErrorMessage"),e=f.CswTable("init",{id:makeId({prefix:g,id:"tbl"}),width:"100%"}),h=e.CswTable("cell",1,1).CswAttrDom("width","100%"),k=e.CswTable("cell",1,2),l=e.CswTable("cell",2,1);a('<a href="#">'+b.message+"</a>").appendTo(h).click(function(){l.toggle()});l.append(b.detail);
l.hide();k.CswImageButton({ButtonType:CswImageButton_ButtonType.Delete,AlternateText:"Hide",ID:makeId({prefix:g,id:"hidebtn"}),onClick:function(){f.remove();d.children().length===0&&d.hide();return CswImageButton_ButtonType.None}});return f}})(jQuery);var CswImageButton_ButtonType={None:-1,Add:27,ArrowNorth:28,ArrowEast:29,ArrowSouth:30,ArrowWest:31,Calendar:6,CheckboxFalse:18,CheckboxNull:19,CheckboxTrue:20,Clear:4,Clock:10,ClockGrey:11,Configure:26,Delete:4,Edit:3,Fire:5,PageFirst:23,PagePrevious:24,PageNext:25,PageLast:22,PinActive:17,PinInactive:15,Print:2,Refresh:9,SaveStatus:13,Select:32,ToggleActive:1,ToggleInactive:0,View:8};
(function(a){a.fn.CswImageButton=function(g){function b(e){if(e!==undefined&&e!==CswImageButton_ButtonType.None){f.get(0).style.background="url('Images/buttons/buttons18.gif') 0px "+e*-18+"px no-repeat";f.unbind("mouseover");f.unbind("mouseout");f.unbind("mousedown");f.unbind("mouseup");f.bind("mouseover",function(){this.style.backgroundPosition="-18px "+e*-18+"px"});f.bind("mouseout",function(){this.style.backgroundPosition="0px "+e*-18+"px"});f.bind("mousedown",function(){this.style.backgroundPosition=
"-36px "+e*-18+"px"});f.bind("mouseup",function(){this.style.backgroundPosition="-18px "+e*-18+"px"})}}var d={ButtonType:CswImageButton_ButtonType.None,Active:false,AlternateText:"",ID:"",Required:false,onClick:function(){return CswImageButton_ButtonType.None}};g&&a.extend(d,g);$Div=a(this);var f=a('<div id="'+d.ID+'" class="divbutton" alt="'+d.AlternateText+'" />"').appendTo($Div).css("display","inline-block").click(function(){var e=d.onClick(f);b(e);return false});b(d.ButtonType);return f}})(jQuery);var CswInput_Types={button:{id:0,name:"button",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},checkbox:{id:1,name:"checkbox",placeholder:false,autocomplete:false,value:{required:true,allowed:true}},color:{id:2,name:"color",placeholder:false,autocomplete:true,value:{required:false,allowed:true}},date:{id:3,name:"date",placeholder:false,autocomplete:true,value:{required:false,allowed:true}},datetime:{id:4,name:"datetime",placeholder:false,autocomplete:false,value:{required:false,
allowed:true}},"datetime-local":{value:5,name:"datetime-local",placeholder:false,autocomplete:true,value:{required:false,allowed:true}},email:{id:6,name:"email",placeholder:true,autocomplete:true,value:{required:false,allowed:true}},file:{id:7,name:"file",placeholder:false,autocomplete:false,value:{required:false,allowed:false}},hidden:{id:8,name:"hidden",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},image:{id:9,name:"image",placeholder:false,autocomplete:false,value:{required:false,
allowed:true}},month:{id:10,name:"month",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},number:{id:11,name:"number",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},password:{id:12,name:"password",placeholder:true,value:{required:false,allowed:true}},radio:{id:13,name:"radio",placeholder:false,autocomplete:false,value:{required:true,allowed:true}},range:{id:14,name:"range",placeholder:false,autocomplete:true,value:{required:false,allowed:true}},
reset:{id:15,name:"reset",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},search:{id:16,name:"search",placeholder:true,autocomplete:true,value:{required:false,allowed:true}},submit:{id:17,name:"submit",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},tel:{id:18,name:"button",placeholder:true,autocomplete:true,value:{required:false,allowed:true}},text:{id:19,name:"text",placeholder:true,autocomplete:true,value:{required:false,allowed:true}},time:{id:20,
name:"time",placeholder:false,autocomplete:true,value:{required:false,allowed:true}},url:{id:21,name:"url",placeholder:true,autocomplete:true,value:{required:false,allowed:true}},week:{id:22,name:"week",placeholder:false,autocomplete:false,value:{required:false,allowed:true}}};
(function(a){var g={init:function(b){var d={ID:"",name:"",type:CswInput_Types.text,placeholder:"",cssclass:"",value:"",width:"200px",autofocus:false,autocomplete:"on",onChange:function(){}};b&&a.extend(d,b);if(isNullOrEmpty(d.name))d.name=d.ID;b=a(this);var f=a("<input />");if(d.ID!==""){f.CswAttrDom("id",d.ID);f.CswAttrDom("name",d.name)}if(d.type!==""&&d.type!==undefined){f.CswAttrDom("type",d.type.name);d.type.autocomplete===true&&d.autocomplete==="on"&&f.CswAttrDom("autocomplete","on");if(d.type.value.required===
true||d.value!==""&&d.value!==undefined){if(d.value===undefined)d.value="";f.val(d.value)}}d.cssclass!==""&&f.CswAttrDom("class",d.cssclass);d.width!==""&&f.CswAttrDom({width:d.width});d.autofocus===true&&f.CswAttrDom("autofocus");d.onChange!==undefined&&f.change(function(){d.onChange()});b.append(f);return f},findandget:function(b){var d={ID:""};b&&a.extend(d,b);b=a(this);var f;if(d.ID!==""&&d.ID!==undefined)f=b.find("#"+d.ID);return f},findandset:function(b){var d=false,f={ID:"",value:""};b&&a.extend(f,
b);b=a(this);if(f.ID!==""&&f.ID!==undefined&&f.value!==undefined){b=b.find("#"+f.ID);if(b.size()>0){b.val(f.value);d=true}}return d},set:function(b){var d=false,f={value:""};b&&a.extend(f,b);b=a(this);if(b.size()>0&&f.value!==undefined){b.val(f.value);d=true}return d}};a.fn.CswInput=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswInput")}})(jQuery);(function(a){a.fn.CswLayoutTable=function(g){function b(n,i,s){for(var t=parseInt(n.CswAttrDom("cellset_rows")),w=parseInt(n.CswAttrDom("cellset_columns")),C=[],v=1;v<=t;v++)for(var u=1;u<=w;u++){if(C[v]===undefined)C[v]=[];C[v][u]=k(n,i,s,v,u,t,w)}return C}function d(n){return n.CswAttrDom("removemode")==="true"}function f(n){return n.CswAttrDom("configmode")==="true"}function e(n,i){i.find("#"+n.CswAttrDom("id")+"addbtn").hide();i.find("#"+n.CswAttrDom("id")+"rembtn").hide();i.find("#"+n.CswAttrDom("id")+
"addcolumnbtn").hide();i.find("#"+n.CswAttrDom("id")+"addrowbtn").hide();n.CswTable("findCell",".CswLayoutTable_cell").removeClass("CswLayoutTable_configcell");n.CswAttrDom("configmode","false");n.trigger(n.CswAttrDom("id")+"CswLayoutTable_onConfigOff",i)}function h(n,i){i.find("#"+n.CswAttrDom("id")+"addbtn").show();i.find("#"+n.CswAttrDom("id")+"rembtn").show();i.find("#"+n.CswAttrDom("id")+"addcolumnbtn").show();i.find("#"+n.CswAttrDom("id")+"addrowbtn").show();parseInt(n.CswAttrDom("cellset_rows"));
parseInt(n.CswAttrDom("cellset_columns"));n.CswTable("finish",null);n.CswTable("findCell",".CswLayoutTable_cell").addClass("CswLayoutTable_configcell");n.CswAttrDom("configmode","true");n.trigger(n.CswAttrDom("id")+"CswLayoutTable_onConfigOn",i)}function k(n,i,s,t,w,C,v){if(i<1)i=1;if(s<1)s=1;return n.CswTable("cell",(i-1)*C+t,(s-1)*v+w)}function l(n,i,s,t,w,C){var v=Math.ceil(s/w),u=Math.ceil(t/C);s=parseInt(w-s%w);t=parseInt(C-t%C);i.CswAttrDom("row",v).CswAttrDom("column",u).CswAttrDom("cellsetrow",
s).CswAttrDom("cellsetcolumn",t).click(function(){if(d(n)){var A=a(".CswLayoutTable_remove");A.length>0&&n.trigger(n.CswAttrDom("id")+"CswLayoutTable_onRemove",{table:n,cellset:b(n,v,u),row:A.CswAttrDom("row"),column:A.CswAttrDom("column")});A.children().hide();A.removeClass("CswLayoutTable_remove")}}).drag(function(A,E){if(f(n)){n.CswTable("findCell",".CswLayoutTable_swapcell").removeClass("CswLayoutTable_swapcell");n.CswTable("findCell",'[row="'+v+'"][column="'+u+'"]').addClass("CswLayoutTable_dragcell");
var N=j(n,v,u,w,C,E);N.length>0&&N.addClass("CswLayoutTable_swapcell")}}).drop(function(A,E){if(f(n)){n.CswTable("findCell",".CswLayoutTable_swapcell").removeClass("CswLayoutTable_swapcell");var N=n.CswTable("findCell",'[row="'+v+'"][column="'+u+'"]');N.removeClass("CswLayoutTable_dragcell");var S=j(n,v,u,w,C,E);if(S.length>0){n.trigger(n.CswAttrDom("id")+"CswLayoutTable_onSwap",{table:n,cellset:b(n,v,u),swapcellset:b(n,S.first().CswAttrDom("row"),S.first().CswAttrDom("column")),row:v,column:u,swaprow:S.first().CswAttrDom("row"),
swapcolumn:S.first().CswAttrDom("column")});var ca=a("<div />");for(r=1;r<=w;r++)for(c=1;c<=C;c++){var ea=N.filter('[cellsetrow="'+r+'"][cellsetcolumn="'+c+'"]'),W=S.filter('[cellsetrow="'+r+'"][cellsetcolumn="'+c+'"]');ea.contents().appendTo(ca);W.contents().appendTo(ea);ca.contents().appendTo(W)}}}}).hover(function(){var A=a(this);f(n)&&A.addClass("CswLayoutTable_hover");d(n)&&n.CswTable("findCell",'[row="'+A.CswAttrDom("row")+'"][column="'+A.CswAttrDom("column")+'"]').addClass("CswLayoutTable_remove")},
function(){var A=a(this);f(n)&&A.removeClass("CswLayoutTable_hover");d(n)&&n.CswTable("findCell",'[row="'+A.CswAttrDom("row")+'"][column="'+A.CswAttrDom("column")+'"]').removeClass("CswLayoutTable_remove")})}function j(n){var i=a(".CswLayoutTable_hover");return n.CswTable("findCell",'[row="'+i.CswAttrDom("row")+'"][column="'+i.CswAttrDom("column")+'"]')}var m={init:function(n){var i={ID:"",cellset:{rows:1,columns:1},onSwap:function(){},onAddClick:function(){},onConfigOn:function(){},onConfigOff:function(){},
onRemove:function(){},TableCssClass:"",CellCssClass:"",cellpadding:0,cellspacing:0,width:"",align:"",showConfigButton:false,showAddButton:false,showRemoveButton:false,OddCellRightAlign:false,ReadOnly:false};n&&a.extend(i,n);n=a(this);var s=a("<div />").appendTo(n).css({"float":"right"});i.ReadOnly&&s.hide();var t=n.CswTable("init",{ID:i.ID,TableCssClass:i.TableCssClass+" CswLayoutTable_table",CellCssClass:i.CellCssClass+" CswLayoutTable_cell",cellpadding:i.cellpadding,cellspacing:i.cellspacing,OddCellRightAlign:i.OddCellRightAlign,
width:i.width,align:i.align,onCreateCell:function(C,v,u,A,E){l(v,u,A,E,i.cellset.rows,i.cellset.columns)}}).CswAttrDom("cellset_rows",i.cellset.rows).CswAttrDom("cellset_columns",i.cellset.columns);t.CswAttrDom("configmode","false");t.bind(i.ID+"CswLayoutTable_onSwap",i.onSwap);t.bind(i.ID+"CswLayoutTable_onRemove",i.onRemove);t.bind(i.ID+"CswLayoutTable_onConfigOn",i.onConfigOn);t.bind(i.ID+"CswLayoutTable_onConfigOff",i.onConfigOff);var w=s.CswTable("init",{ID:i.ID+"_buttontbl"});i.showAddButton&&
w.CswTable("cell",1,1).CswImageButton({ButtonType:CswImageButton_ButtonType.Add,AlternateText:"Add",ID:i.ID+"addbtn",onClick:function(){i.onAddClick();return CswImageButton_ButtonType.None}}).hide();i.showRemoveButton&&w.CswTable("cell",1,2).CswImageButton({ButtonType:CswImageButton_ButtonType.Delete,AlternateText:"Remove",ID:i.ID+"rembtn",onClick:function(){var C=a(this);if(d(t)){t.CswAttrDom("removemode","false");C.removeClass("CswLayoutTable_removeEnabled")}else{t.CswAttrDom("removemode","true");
C.addClass("CswLayoutTable_removeEnabled")}return CswImageButton_ButtonType.None}}).hide();if(i.showConfigButton){w.CswTable("cell",1,3).CswImageButton({ButtonType:CswImageButton_ButtonType.ArrowEast,AlternateText:"Add Column",ID:i.ID+"addcolumnbtn",onClick:function(){var C=parseInt(t.CswAttrDom("cellset_rows")),v=parseInt(t.CswAttrDom("cellset_columns")),u=t.CswTable("maxrows"),A=t.CswTable("maxcolumns");k(t,u/C,A/v+1,C,v,C,v);t.CswTable("finish",null);f(t)&&t.CswTable("findCell",".CswLayoutTable_cell").addClass("CswLayoutTable_configcell");
return CswImageButton_ButtonType.None}}).hide();w.CswTable("cell",1,4).CswImageButton({ButtonType:CswImageButton_ButtonType.ArrowSouth,AlternateText:"Add Row",ID:i.ID+"addrowbtn",onClick:function(){var C=parseInt(t.CswAttrDom("cellset_rows")),v=parseInt(t.CswAttrDom("cellset_columns")),u=t.CswTable("maxrows"),A=t.CswTable("maxcolumns");k(t,u/C+1,A/v,C,v,C,v);t.CswTable("finish",null);f(t)&&t.CswTable("findCell",".CswLayoutTable_cell").addClass("CswLayoutTable_configcell");return CswImageButton_ButtonType.None}}).hide();
w.CswTable("cell",1,5).CswImageButton({ButtonType:CswImageButton_ButtonType.Configure,AlternateText:"Configure",ID:i.ID+"configbtn",onClick:function(){f(t)?e(t,w):h(t,w);return CswImageButton_ButtonType.None}})}return t},cellset:function(n,i){var s=a(this);return b(s,n,i)},isConfig:function(){var n=a(this);return f(n)},toggleConfig:function(){var n=a(this),i=a("#"+n.CswAttrDom("id")+"_buttontbl");f(n)?e(n,i):h(n,i)},ConfigOn:function(){var n=a(this),i=a("#"+n.CswAttrDom("id")+"_buttontbl");h(n,i)},
ConfigOff:function(){var n=a(this),i=a("#"+n.CswAttrDom("id")+"_buttontbl");e(n,i)}};if(m[g])return m[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return m.init.apply(this,arguments);else a.error("Method "+g+" does not exist on CswLayoutTable")}})(jQuery);(function(a){a.fn.CswLogin=function(g){function b(e){var h={DeauthenticateUrl:"/NbtWebApp/wsNBT.asmx/deauthenticate",onDeauthenticate:function(){}};e&&a.extend(h,e);CswAjaxJSON({url:h.DeauthenticateUrl,data:"",success:function(){a.CswCookie("clear",CswCookieName.Username);h.onDeauthenticate()}})}function d(e,h){var k="",l=true;switch(e.AuthenticationStatus){case "Failed":k="Login Failed";break;case "Locked":k="Your account is locked.  Please see your account administrator.";break;case "Deactivated":k=
"Your account is deactivated.  Please see your account administrator.";break;case "TooManyUsers":k="Too many users are currently connected.  Try again later.";break;case "NonExistentAccessId":k="Login Failed";break;case "NonExistentSession":k="Login Failed";break;case "Unknown":k="An Unknown Error Occurred";break;case "ExpiredPassword":l=false;a.CswDialog("EditNodeDialog",{nodeid:e.nodeid,cswnbtnodekey:e.cswnbtnodekey,filterToPropId:e.passwordpropid,title:"Your password has expired.  Please change it now:",
onEditNode:function(){h()}});break;case "ShowLicense":l=false;a.CswDialog("ShowLicenseDialog",{onAccept:function(){h()},onDecline:function(){b()}})}a("#loginmsg").CswErrorMessage({message:k});a("#login_password").val("");l&&a("#login_button").CswButton("enable")}var f={login:function(e){var h={AuthenticateUrl:"/NbtWebApp/wsNBT.asmx/authenticate",onAuthenticate:function(){}};e&&a.extend(h,e);e=a.CswCookie("get",CswCookieName.SessionId);if(e!==undefined&&e!==""&&e!==null)h.onAuthenticate(a.CswCookie("get",
CswCookieName.Username));else{var k=a('<div id="logindiv" align="center">  <form>    <table>    <tr>      <td align="right"></td>      <td id="loginmsg" style="display: none;"></td>    </tr>    <tr>      <td align="right">Customer ID:</td>      <td><input type="text" name="accessid" id="login_accessid" /></td>    </tr>    <tr>      <td align="right">User Name:</td>      <td><input type="text" name="username" id="login_username" /></td>    </tr>    <tr>      <td align="right">Password:</td>      <td><input type="password" name="password" id="login_password" /></td>    </tr>    <tr>      <td align="right"></td>      <td id="login_button_cell">           </td>    </tr>    <tr>      <td></td>      <td></td>    </tr>  </table> </form> </div> <br/><br/><br/> <div id="assemblydiv" width="100%" align="right"></div>').appendTo(a(this));
a("#assemblydiv").load("_Assembly.txt");a("#login_accessid").focus();var l=a("#login_button_cell").CswButton({ID:"login_button",enabledText:"Login",disabledText:"Logging in...",onclick:function(){function j(s){a.CswCookie("set",CswCookieName.Username,s);k.remove();h.onAuthenticate(s)}a("#loginmsg").hide().children().remove();var m=a("#login_accessid").val(),n=a("#login_username").val(),i=a("#login_password").val();CswAjaxJSON({url:h.AuthenticateUrl,data:"{AccessId: '"+m+"', UserName: '"+n+"', Password: '"+
i+"'}",success:function(s){auth=s.AuthenticationStatus;auth==="Authenticated"?j(n):d(s,j,l)},error:function(){l.CswButton("enable")}})}})}},logout:function(e){b(e)}};if(f[g])return f[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return f.init.apply(this,arguments);else a.error("Method "+g+" does not exist on CswLogin")}})(jQuery);(function(a){a.fn.CswMenu=function(g){function b(){$this=a(this);d();$this.find("ul.subnav").slideDown("fast").show()}function d(){e.find("ul").stop(true,true);e.find("ul.subnav").slideUp("fast")}var f={};g&&a.extend(f,g);var e=a(this);e.children("li").click(b).hover(b,d);e.find(".subnav").children("li").click(function(h){d();h&&h.stopPropagation()});return this}})(jQuery);(function(a){a.fn.CswMenuHeader=function(g){var b={Url:"/NbtWebApp/wsNBT.asmx/getHeaderMenu",onLogout:function(){},onSuccess:function(){}};g&&a.extend(b,g);var d=a(this);CswAjaxXml({url:b.Url,data:"",success:function(f){var e=a('<ul class="topnav"></ul>');d.text("").append(e);f.children().each(function(){var h=a(this);if(h.CswAttrXml("text")!==undefined){var k=HandleMenuItem({$ul:e,$itemxml:h,onLogout:b.onLogout});if(h.children().length>1){var l=a('<ul class="subnav"></ul>').appendTo(k);h.children().each(function(){HandleMenuItem({$ul:l,
$itemxml:a(this),onLogout:b.onLogout})})}}});e.CswMenu();b.onSuccess()}});return this}})(jQuery);(function(a){a.fn.CswMenuMain=function(g){var b={Url:"/NbtWebApp/wsNBT.asmx/getMainMenu",viewid:"",nodeid:"",cswnbtnodekey:"",onAddNode:function(){},onMultiEdit:function(){},onSearch:{onViewSearch:function(){},onGenericSearch:function(){}},onEditView:function(){},Multi:false,NodeCheckTreeId:""};g&&a.extend(b,g);var d=a(this);CswAjaxXml({url:b.Url,data:"ViewNum="+b.viewid+"&SafeNodeKey="+b.cswnbtnodekey,success:function(f){var e=a('<ul class="topnav"></ul>');d.text("").append(e);f.children().each(function(){var h=
a(this);if(h.CswAttrXml("text")!==undefined){var k={$ul:e,$itemxml:h,onAlterNode:b.onAddNode,onMultiEdit:b.onMultiEdit,onEditView:b.onEditView,onSearch:b.onSearch,Multi:b.Multi,NodeCheckTreeId:b.NodeCheckTreeId},l=HandleMenuItem(k);if(h.children().length>=1){var j=a('<ul class="subnav"></ul>').appendTo(l);h.children().each(function(){var m={$ul:j,$itemxml:a(this)};a.extend(k,m);HandleMenuItem(k)})}}});e.CswMenu()}});return this}})(jQuery);var debug=false,profiler=$createProfiler();debug||profiler.disable();
(function(a){a.fn.CswMobile=function(g){function b(p){var q='<input type="textbox" id="login_accessid" placeholder="Access Id"/><br>';q+='<input type="textbox" id="login_username" placeholder="User Name"/><br>';q+='<input type="password" id="login_password" placeholder="Password"/><br>';q+='<a id="loginsubmit" data-role="button" href="#">Continue</a>';v({DivId:"logindiv",HeaderText:"Login to ChemSW Fire Inspection",content:q,HideSearchButton:true,HideRefreshButton:true,HideLogoutButton:true});a("#loginsubmit").click(S);
p&&a.mobile.changePage(a("#logindiv"),"fade",false,true)}function d(p){v({DivId:"sorrycharliediv",HeaderText:"Sorry Charlie!",content:"You must have internet connectivity to login.",HideSearchButton:true,HideRefreshButton:true,HideLogoutButton:true});p&&a.mobile.changePage(a("#sorrycharliediv"),"fade",false,true)}function f(p){setTimeout("$('#"+p+"').remove();",K.DivRemovalDelay)}function e(p){if(a("#viewsdiv").hasClass("ui-page-active")){v({DivId:"loadingdiv",HeaderText:"Please wait",content:"Loading...",
HideSearchButton:true,HideOnlineButton:true,HideRefreshButton:true,HideLogoutButton:true,HideHelpButton:true});a.mobile.changePage(a("#loadingdiv"),"fade",false,true);setTimeout(function(){h(true);f("loadingdiv")},K.DivRemovalDelay)}else h(p)}function h(p){a("#viewsdiv").remove();j({level:0,DivId:"viewsdiv",HeaderText:"Views",HideRefreshButton:true,HideSearchButton:true,ChangePage:p})}function k(){var p=a(".onlineStatus");if(p.hasClass("offline")){p.removeClass("offline").addClass("online").text("Online");
a(".refresh").css("visibility","");e(false)}if(a("#sorrycharliediv").length>0){b(true);f("sorrycharliediv")}}function l(){return a(".onlineStatus").hasClass("offline")}function j(p){var q={ParentId:"",level:1,DivId:"",HeaderText:"",HideRefreshButton:false,HideSearchButton:false,ChangePage:false};p&&a.extend(q,p);p=true;if(q.level===1)da=q.DivId;if(a("#"+q.DivId).length===0)if(q.level===0)if(l())F(function(x){m({ParentId:q.ParentId,DivId:q.DivId,HeaderText:q.HeaderText,$xml:a(x),parentlevel:q.level,
HideRefreshButton:q.HideRefreshButton,HideSearchButton:q.HideSearchButton,ChangePage:q.ChangePage})});else{debug&&log("Starting "+K.ViewUrl);CswAjaxXml({async:false,formobile:Q,url:K.ViewUrl,data:"SessionId="+fa+"&ParentId="+q.DivId+"&ForMobile="+Q,onloginfail:function(){ca()},success:function(x){debug&&log("On Success "+K.ViewUrl);q.level===1&&G(q.DivId,q.HeaderText,x);m({ParentId:q.ParentId,DivId:q.DivId,HeaderText:q.HeaderText,$xml:a(x),parentlevel:q.level,HideRefreshButton:q.HideRefreshButton,
HideSearchButton:q.HideSearchButton,ChangePage:q.ChangePage})}})}else if(q.level===1)T(da,function(x){if(isNullOrEmpty(x)){if(!l()){debug&&log("Starting "+K.ViewUrl);CswAjaxXml({async:false,formobile:Q,url:K.ViewUrl,data:"SessionId="+fa+"&ParentId="+q.DivId+"&ForMobile="+Q,onloginfail:function(){ca()},success:function(B){debug&&log("On Success "+K.ViewUrl);q.level===1&&G(q.DivId,q.HeaderText,B);ga=a(B);m({ParentId:q.ParentId,DivId:q.DivId,HeaderText:q.HeaderText,$xml:a(B),parentlevel:q.level,HideRefreshButton:q.HideRefreshButton,
HideSearchButton:q.HideSearchButton,ChangePage:q.ChangePage})}})}}else{ga=a(x);m({ParentId:q.ParentId,DivId:q.DivId,HeaderText:q.HeaderText,$xml:a(x),parentlevel:q.level,HideRefreshButton:q.HideRefreshButton,HideSearchButton:q.HideSearchButton,ChangePage:q.ChangePage})}});else{if(!isNullOrEmpty(ga)){var z=ga.find("#"+q.DivId);m({ParentId:q.ParentId,DivId:q.DivId,HeaderText:q.HeaderText,$xml:z.children("subitems").first(),parentlevel:q.level,HideRefreshButton:q.HideRefreshButton,HideSearchButton:q.HideSearchButton,
ChangePage:q.ChangePage})}}else p=false;return p}function m(p){var q={ParentId:"",DivId:"",HeaderText:"",$xml:"",parentlevel:"",HideRefreshButton:false,HideSearchButton:false,ChangePage:false};p&&a.extend(q,p);debugger;var z=i();pa="";qa=function(){};q.$xml.children().each(function(){z+=n(this,q.DivId,q.parentlevel)});z+="</ul>";$divhtml=v({ParentId:q.ParentId,level:q.parentlevel,DivId:q.DivId,HeaderText:q.HeaderText,content:z,HideRefreshButton:q.HideRefreshButton,HideSearchButton:q.HideSearchButton});
qa($divhtml);q.ChangePage&&a.mobile.changePage(a("#"+q.DivId),"slide",false,true)}function n(p,q,z){var x=a(p),B=x.CswAttrXml("id"),J=x.CswAttrXml("name"),y=!isNullOrEmpty(B),L=p.nodeName;p=x.next().CswAttrXml("id");var V=x.prev().CswAttrXml("id"),M="";switch(L){case "SEARCHES":break;case "NODE":M+=s(x);break;case "PROP":var H=x.CswAttrXml("tab");y=x.CswAttrXml("fieldtype");var X=x.CswAttrXml("gestalt");if(X==="NaN")X="";L=x.prevAll('[fieldtype="'+y+'"]').andSelf().length;var ha=x.siblings('[fieldtype="'+
y+'"]').andSelf().length;if(pa!==H){isNullOrEmpty(pa)||(M+="</ul>"+i());M+='<li data-role="list-divider">'+H+"</li>";pa=H}switch(y){case "Logical":M+='<li id="'+B+'_li"><a href="#'+B+'">'+J+"</a></li>";H=x.children("checked").text();X=x.children("required").text();if(isNullOrEmpty(H))H="";if(isNullOrEmpty(X))X="";M+='<div class="lisubstitute ui-li ui-btn-up-c">';M+=w(B,"_ans","_ans2",H,X);M+="</div>";break;case "Question":M+='<li id="'+B+'_li"><a href="#'+B+'">'+J+"</a></li>";H=x.children("answer").text();
X=x.children("allowedanswers").text();var ba=x.children("compliantanswers").text(),U=x.children("correctiveaction").text();if(isNullOrEmpty(H))H="";if(isNullOrEmpty(X))X="";if(isNullOrEmpty(ba))ba="";if(isNullOrEmpty(U))U="";M+='<div class="lisubstitute ui-li ui-btn-up-c">';M+=C(q,B,"_ans","_ans2","_cor","_li","_propname",X,H,ba);M+="</div>";if(!isNullOrEmpty(H)&&(","+ba+",").indexOf(","+H+",")<0&&isNullOrEmpty(U)){var ua=qa;qa=function(ra){ra.find("#"+B+"_li div").addClass("OOC");ua(ra)}}break;default:M+=
'<li id="'+B+'_li">';M+=' <a href="#'+B+'">'+J+"</a>";M+=' <p class="ui-li-aside">'+X+"</p>";M+="</li>"}H="";isNullOrEmpty(V)||(H+='<a href="#'+V+'" data-role="button" data-icon="arrow-u" data-inline="true" data-theme="'+K.Theme+'" data-transition="slideup" data-back="true">Previous</a>');isNullOrEmpty(p)||(H+='<a href="#'+p+'" data-role="button" data-icon="arrow-d" data-inline="true" data-theme="'+K.Theme+'" data-transition="slideup">Next</a>');if(y==="Question")H+="&nbsp;"+L+"&nbsp;of&nbsp;"+ha;
v({ParentId:q,level:z,DivId:B,HeaderText:J,toolbar:H,content:t(x,q)});break;default:M+="<li>";M+=y?'<a href="#'+B+'">'+J+"</a>":J;M+="</li>"}return M}function i(p){var q='<ul data-role="listview" ';isNullOrEmpty(p)||(q+='id="'+p+'"');q+=">";return q}function s(p){var q="",z=p.CswAttrXml("id"),x=p.CswAttrXml("name"),B="";if(!isNullOrEmpty(p.CswAttrXml("iconfilename"))&&!isNullOrEmpty(p.CswAttrXml("iconfilename")))B="images/icons/"+p.CswAttrXml("iconfilename");switch(p.CswAttrXml("objectclass")){case "InspectionDesignClass":var J=
p.find('prop[ocpname="Due Date"]').CswAttrXml("gestalt"),y=p.find('prop[ocpname="Location"]').CswAttrXml("gestalt"),L=p.find('prop[ocpname="Target"]').CswAttrXml("gestalt"),V=p.find('prop[ocpname="Status"]').CswAttrXml("gestalt"),M=0;p.find('prop[fieldtype="Question"]').each(function(){isNullOrEmpty(a(this).children("Answer").text())&&M++});q+="<li>";isNullOrEmpty(B)||(q+='<img src="'+B+'" class="ui-li-icon"/>');q+='<h3><a href="#'+z+'">'+x+"</a></h3>";q+="<p>"+y+"</p>";q+="<p>"+L+"</p>";q+="<p>"+
V+", Due: "+J+"</p>";q+='<span id="'+z+'_unansweredcnt" class="ui-li-count">'+M+"</span>";q+="</li>";break;default:q+="<li>";isNullOrEmpty(B)||(q+='<img src="'+B+'" class="ui-li-icon"/>');q+='<a href="#'+z+'">'+x+"</a>";q+="</li>"}return q}function t(p,q){var z=p.CswAttrXml("id"),x=p.CswAttrXml("fieldtype"),B=p.CswAttrXml("name"),J=isTrue(p.CswAttrXml("readonly")),y=tryParseString,L=p.children("text");ret=L.text();L=L.html();if(!isNullOrEmpty(L))if(L.substr(0,11)==="<\!--[CDATA[")ret=L.substr(11,
L.length-11-5);var V=y(ret,""),M=tryParseString(p.children("value").text(),""),H=tryParseString(p.children("href").text(),""),X=tryParseString(p.children("checked").text(),""),ha=tryParseString(p.children("required").text(),""),ba=tryParseString(p.children("units").text(),""),U=tryParseString(p.children("answer").text(),""),ua=tryParseString(p.children("allowedanswers").text(),""),ra=tryParseString(p.children("correctiveaction").text(),""),ya=tryParseString(p.children("comments").text(),""),va=tryParseString(p.children("compliantanswers").text(),
"");L=tryParseString(p.children("options").text(),"");if(M=="NaN")M="";y='<div id="'+z+'_propname"';if(x==="Question"&&!(U===""||(","+va+",").indexOf(","+U+",")>=0))y+=' class="OOC"';y+=">"+B+"</div><br/>";if(J)y+=p.CswAttrXml("gestalt");else switch(x){case "Date":y+='<input type="text" name="'+z+'" value="'+M+'" />';break;case "Link":y+='<a href="'+H+'">'+V+"</a>";break;case "List":y+='<select name="'+z+'">';z=M;x=L.split(",");for(B=0;B<x.length;B++){y+='<option value="'+x[B]+'"';if(z===x[B])y+=
" selected";y+=isNullOrEmpty(x[B])?">[blank]</option>":">"+x[B]+"</option>"}y+="</select>";break;case "Logical":y+=w(z,"_ans2","_ans",X,ha);break;case "Memo":y+='<textarea name="'+z+'">'+V+"</textarea>";break;case "Number":y+='<input type="number" name="'+z+'" value="'+M+'"';y+="/>";break;case "Password":y+=string.Empty;break;case "Quantity":y+='<input type="text" name="'+z+'_qty" value="'+M+'" />';y+=ba;break;case "Question":y+=C(q,z,"_ans2","_ans","_cor","_li","_propname",ua,U,va);y+='<textarea id="'+
z+'_cor" name="'+z+'_cor" placeholder="Corrective Action"';if(U===""||(","+va+",").indexOf(","+U+",")>=0)y+='style="display: none"';y+='onchange="';y+="var $cor = $(this); ";y+="if($cor.CswAttrDom('value') === '') { ";y+="  $('#"+z+"_li div').addClass('OOC'); ";y+="  $('#"+z+"_propname').addClass('OOC'); ";y+="} else {";y+="  $('#"+z+"_li div').removeClass('OOC'); ";y+="  $('#"+z+"_propname').removeClass('OOC'); ";y+="}";y+='">';y+=ra;y+="</textarea>";y+='<textarea name="'+z+'_com" placeholder="Comments">';
y+=ya;y+="</textarea>";break;case "Static":y+=V;break;case "Text":y+='<input type="text" name="'+z+'" value="'+V+'" />';break;case "Time":y+='<input type="text" name="'+z+'" value="'+M+'" />';break;default:y+=p.CswAttrXml("gestalt")}return y}function w(p,q,z,x,B){var J='<fieldset class="csw_fieldset" data-role="controlgroup" data-type="horizontal" data-role="fieldcontain">',y=["Null","True","False"];if(isTrue(B))y=["True","False"];for(B=0;B<y.length;B++){var L;switch(y[B]){case "Null":L="?";break;
case "True":L="Yes";break;case "False":L="No"}J+='<input type="radio" name="'+p+q+'" id="'+p+q+"_"+y[B]+'" value="'+y[B]+'" ';if(!isTrue(x)&&!isTrue(y[B])||isTrue(x)&&isTrue(y[B])||isNullOrEmpty(x)&&isNullOrEmpty(y[B]))J+="checked";J+=' onclick="';for(var V=0;V<y.length;V++)J+=y[V]===y[B]?" $('#"+p+q+"_"+y[V]+"').siblings('label').addClass('ui-btn-active');":" $('#"+p+q+"_"+y[V]+"').siblings('label').removeClass('ui-btn-active');";J+=" var $otherradio; ";for(V=0;V<y.length;V++){J+=" $otherradio = $('#"+
p+z+"_"+y[V]+"'); ";if(y[V]===y[B]){J+=" $otherradio.CswAttrDom('checked', true); ";J+=" $otherradio.siblings('label').addClass('ui-btn-active'); "}else{J+=" $otherradio.CswAttrDom('checked', false); ";J+=" $otherradio.siblings('label').removeClass('ui-btn-active'); "}}J+='" />';J+='<label for="'+p+q+"_"+y[B]+'">'+L+"</label>"}J+="</fieldset>";return J}function C(p,q,z,x,B,J,y,L,V,M){var H='<fieldset class="csw_fieldset" id="'+q+'_fieldset" data-role="controlgroup" data-type="horizontal" data-role="fieldcontain">';
L=L.split(",");for(var X=0;X<L.length;X++){var ha=L[X].replace(/'/gi,"");H+='<input type="radio" name="'+q+z+'" id="'+q+z+"_"+ha+'" value="'+L[X]+'" ';if(V===L[X])H+=" checked";H+=' onclick="';for(var ba=0;ba<L.length;ba++){var U=L[ba].replace(/'/gi,"");H+=L[ba]===L[X]?" $('#"+q+z+"_"+U+"').siblings('label').addClass('ui-btn-active');":" $('#"+q+z+"_"+U+"').siblings('label').removeClass('ui-btn-active');"}H+=" var $otherradio; ";for(ba=0;ba<L.length;ba++){U=L[ba].replace(/'/gi,"");H+=" $otherradio = $('#"+
q+x+"_"+U+"'); ";if(L[ba]===L[X]){H+=" $otherradio.CswAttrDom('checked', true); ";H+=" $otherradio.siblings('label').addClass('ui-btn-active'); "}else{H+=" $otherradio.CswAttrDom('checked', false); ";H+=" $otherradio.siblings('label').removeClass('ui-btn-active'); "}}if((","+M+",").indexOf(","+L[X]+",")>=0){H+=" $('#"+q+B+"').css('display', 'none'); ";H+=" $('#"+q+J+" div').removeClass('OOC'); ";H+=" $('#"+q+y+"').removeClass('OOC'); "}else{H+=" var $cor = $('#"+q+B+"'); ";H+=" $cor.css('display', ''); ";
H+=" if($cor.CswAttrDom('value') === '') { ";H+="   $('#"+q+J+" div').addClass('OOC'); ";H+="   $('#"+q+y+"').addClass('OOC'); ";H+=" } else {";H+="   $('#"+q+J+" div').removeClass('OOC'); ";H+="   $('#"+q+y+"').removeClass('OOC'); ";H+=" } "}if(isNullOrEmpty(V)){H+=" if(! $('#"+q+"_fieldset').CswAttrDom('answered')) { ";H+="   var $cntspan = $('#"+p+"_unansweredcnt'); ";H+="   $cntspan.text(parseInt($cntspan.text()) - 1); ";H+="   $('#"+q+"_fieldset').CswAttrDom('answered', 'true'); ";H+=" }"}H+=
' " />';H+='            <label for="'+q+z+"_"+ha+'">'+L[X]+"</label>"}H+="</fieldset>";return H}function v(p){var q={ParentId:undefined,level:1,DivId:"",HeaderText:"",toolbar:"",content:"",HideSearchButton:false,HideOnlineButton:false,HideRefreshButton:false,HideLogoutButton:false,HideHelpButton:false,backicon:undefined,backtransition:undefined};p&&a.extend(q,p);p='<div id="'+q.DivId+'" data-role="page"><div data-role="header" data-theme="'+K.Theme+'" data-position="fixed">';p+='<a href="#'+q.ParentId+
'" id="'+q.DivId+'_back" data-back="true" ';isNullOrEmpty(q.backtransition)||(p+=' data-transition="'+q.backtransition+'" ');isNullOrEmpty(q.ParentId)||(p+=' style="visibility: hidden;" ');p+=' data-icon="';p+=isNullOrEmpty(q.backicon)?"arrow-l":q.backicon;p+='">Back</a>';p+="<h1>"+q.HeaderText+"</h1>";q.HideSearchButton||(p+='    <a href="#" id="'+q.DivId+'_searchopen">Search</a>');p+='    <div class="toolbar" data-role="controlgroup" data-type="horizontal">'+q.toolbar+'    </div>  </div>  <div data-role="content" data-theme="'+
K.Theme+'">'+q.content+'  </div>  <div data-role="footer" data-theme="'+K.Theme+'" data-position="fixed">';if(!q.HideOnlineButton){p+='    <a href="#" id="'+q.DivId+'_gosynchstatus" data-transition="slideup">';p+=l()?'    <div class="onlineStatus offline">Offline</div>':'    <div class="onlineStatus online">Online</div>';p+="    </a>"}q.HideRefreshButton||(p+='    <a href="#" id="'+q.DivId+'_refresh" class="refresh">Refresh</a>');q.HideLogoutButton||(p+='    <a href="#" id="'+q.DivId+'_logout">Logout</a>');
p+='     <a rel="external" href="Login.aspx?redir=n">Full Site</a>';q.HideHelpButton||(p+='    <a href="#" id="'+q.DivId+'_help">Help</a>');p+="  </div></div>";p=a(p);a("body").append(p);p.page();A(q.DivId,q.ParentId,q.level,p);return p}function u(p){var q="";p=a("#"+p).find('div[data-role="header"] #'+p+"_back");if(p.length>0)q=p.CswAttrDom("href").substr(1);return q}function A(p,q,z,x){x.find("#"+p+"_searchopen").click(function(B){wa(p,B)}).end().find("#"+p+"_gosynchstatus").click(function(){a("#synchstatus_back").CswAttrDom("href",
"#"+p);a("#synchstatus_back").css("visibility","");a.mobile.changePage(a("#synchstatus"),"slideup")}).end().find("#"+p+"_refresh").click(function(B){B.stopPropagation();B.preventDefault();return ea(p,B)}).end().find("#"+p+"_logout").click(function(B){B.stopPropagation();B.preventDefault();ca()}).end().find("#"+p+"_back").click(function(){p!=="synchstatus"&&p.indexOf("prop_")!==0&&setTimeout("$('div[id*=\""+p+"\"]').remove();",K.DivRemovalDelay);return true}).end().find("#"+p+"_help").click(function(){a.mobile.changePage(a("#help"),
"slideup")}).end().find("input").change(function(B){ka(p,B)}).end().find("textarea").change(function(B){ka(p,B)}).end().find("select").change(function(B){ka(p,B)}).end().find("li a").click(function(B){if(j({ParentId:p,level:z+1,DivId:a(this).CswAttrDom("href").substr(1),HeaderText:a(this).text(),ChangePage:true})){B.stopPropagation();B.preventDefault()}}).end()}function E(p,q){if(p){a("#ss_pendingchangecnt").text("Yes");a(".onlineStatus").addClass("pendingchanges")}else{a("#ss_pendingchangecnt").text("No");
a(".onlineStatus").removeClass("pendingchanges")}if(q){var z=new Date;a("#ss_lastsynch").text(z.toLocaleDateString()+" "+z.toLocaleTimeString())}}function N(){return a("#ss_pendingchangecnt").text()!=="Yes"||confirm("You have pending unsaved changes.  These changes will be lost.  Continue?")}function S(){ja=a("#login_username").val();var p=a("#login_password").val(),q=a("#login_accessid").val();if(!l()){p={AccessId:q,UserName:ja,Password:p};debug&&log("Starting "+K.AuthenticateUrl);CswAjaxJSON({formobile:Q,
url:K.AuthenticateUrl,data:jsonToString(p),onloginfail:function(){ca()},success:function(){debug&&log("On Success "+K.AuthenticateUrl);D(fa,ja);e(true);f("logindiv")}})}}function ca(){N()&&ma(function(){window.location.href=window.location.pathname})}function ea(p){if(!l())if(N()){v({DivId:"loadingdiv",HeaderText:"Please wait",content:"Loading...",HideSearchButton:true,HideOnlineButton:true,HideRefreshButton:true,HideLogoutButton:true,HideHelpButton:true});a.mobile.changePage(a("#loadingdiv"),"fade",
false,true);setTimeout(function(){W(p)},K.DivRemovalDelay)}return false}function W(p){for(var q="";!isNullOrEmpty(p)&&p.substr(0,7)!=="viewid_";){q=u(p);a('div[id*="'+p+'"]').remove();p=q}if(!isNullOrEmpty(p)){var z=p,x=a("#"+z).find('div[data-role="header"] h1').text();a('div[id*="'+z+'"]').remove();debug&&log("Starting "+K.ViewUrl);CswAjaxXml({async:false,formobile:Q,url:K.ViewUrl,data:"SessionId="+fa+"&ParentId="+z+"&ForMobile="+Q,onloginfail:function(){ca()},success:function(B){debug&&log("Starting "+
K.ViewUrl);ga=a(B);R(z,B,"0");m({ParentId:"viewsdiv",DivId:z,HeaderText:x,$xml:a(B),parentlevel:1,HideRefreshButton:false,HideSearchButton:true,ChangePage:true});f("loadingdiv")}})}}function ka(p,q){var z=a(q.target),x=z.CswAttrDom("name"),B=z.val();if(!isNullOrEmpty(ga)){ga.find("#"+p).andSelf().find("prop").each(function(){var J=a(this),y=J.CswAttrXml("id"),L=J.CswAttrXml("fieldtype");J.CswAttrXml("name");var V=J.children("text"),M=J.children("value");J.children("href");J.children("options");var H=
J.children("checked");J.children("required");J.children("units");var X=J.children("answer");J.children("allowedanswers");var ha=J.children("correctiveaction"),ba=J.children("comments");J.children("compliantanswers");var U=null;switch(L){case "Date":if(x===y)U=M;break;case "List":if(x===y)U=M;break;case "Logical":if(x===y+"_ans"||x===y+"_ans2")U=H;break;case "Memo":if(x===y)U=V;break;case "Number":if(x===y)U=M;break;case "Quantity":if(x===y+"_qty")U=M;break;case "Question":if(x===y+"_com")U=ba;else if(x===
y+"_ans"||x===y+"_ans2")U=X;else if(x===y+"_cor")U=ha;break;case "Text":if(x===y)U=V;break;case "Time":if(x===y)U=M}if(!isNullOrEmpty(U)){U.text(B);J.CswAttrXml("wasmodified","1")}});R(da,ga.wrap("<wrapper />").parent().html(),"1");E(true,false)}}function wa(p){a("#"+p+"_searchprop").val();a("#"+p+"_searchfor").val();T(da,function(q){if(!isNullOrEmpty(q)){q=a(q);var z='<select id="'+p+'_searchprop" name="'+p+'_searchprop">';q.closest("result").find("searches").children().each(function(){var x=a(this);
z+='<option value="'+x.CswAttrXml("id")+'">'+x.CswAttrXml("name")+"</option>"});z+='</select><input type="search" name="'+p+'_searchfor" id="'+p+'_searchfor" value="" placeholder="Search" /><input type="button" id="'+p+'_searchgo" data-inline="true" value="Go" /> <div id="'+p+'_searchresults"></div>';v({ParentId:p,DivId:p+"_searchdiv",HeaderText:"Search",content:z,HideSearchButton:true,HideRefreshButton:true,backicon:"arrow-u"});a("#"+p+"_searchgo").click(function(x){sa(p,x)});a.mobile.changePage(a("#"+
p+"_searchdiv"),"slideup",false,true)}})}function sa(p){var q=a("#"+p+"_searchprop").val(),z=a("#"+p+"_searchfor").val();T(da,function(x){if(!isNullOrEmpty(x)){x=a(x);var B=i(p+"_searchresultslist"),J=0;x.find("node").each(function(){var y=a(this);if(!isNullOrEmpty(y.CswAttrXml(q)))if(y.CswAttrXml(q).toLowerCase().indexOf(z.toLowerCase())>=0){J++;B+=n(this,p,1,false)}});if(J===0)B+="<li>No Results</li>";B+="</ul>";x=a("#"+p+"_searchresults");x.children().remove();x.append(B);a("#"+p+"_searchresultslist").listview();
A(p+"_searchdiv",p,1,x)}})}function aa(p,q,z){window.openDatabase?ia.transaction(function(x){x.executeSql(p,q,z,ta)}):console.log("database is not opened")}function ma(p){aa("DROP TABLE IF EXISTS configvars; ",null,function(){aa("DROP TABLE IF EXISTS views; ",null,function(){isNullOrEmpty(p)||p()})})}function na(p){aa("CREATE TABLE IF NOT EXISTS configvars   (id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,    varname TEXT NOT NULL,    varval TEXT);",null,function(){aa("CREATE TABLE IF NOT EXISTS views   (id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,    rootid TEXT NOT NULL,    rootname TEXT NOT NULL,    viewxml TEXT,    wasmodified INTEGER );",
null,p)})}function ta(p,q){console.log("Database Error: "+q.message+" (Code "+q.code+")");return true}function la(p,q,z){aa("select varval from configvars where varname=?;",[p],function(x,B){0===B.rows.length?aa("insert into configvars (varname, varval) values ( ?, ? );",[p,q],function(){isNullOrEmpty(z)||z()}):aa("update configvars set varval = ? where varname = ?",[q,p],function(){isNullOrEmpty(z)||z()})})}function P(p,q){aa("select varval from configvars where varname=?;",[p],function(z,x){if(x.rows.length>
0){var B=x.rows.item(0);q(B.varval)}else q("")})}function D(p,q,z){la("username",q,function(){la("sessionid",p,function(){isNullOrEmpty(z)||z()})})}function G(p,q,z){isNullOrEmpty(p)||aa("INSERT INTO views (rootid, rootname, viewxml, wasmodified) VALUES (?, ?, ?, 0);",[p,q,z])}function R(p,q,z){isNullOrEmpty(p)||aa("UPDATE views SET wasmodified = ?, viewxml = ? WHERE rootid = ?;",[z,q,p])}function O(p){aa("SELECT rootid, viewxml FROM views WHERE wasmodified = 1 ORDER BY id DESC;",[],function(q,z){if(z.rows.length>
0){E(true,true);var x=z.rows.item(0);p(x.rootid,x.viewxml)}else{E(false,true);p("","")}})}function T(p,q){isNullOrEmpty(p)||aa("SELECT viewxml FROM views WHERE rootid = ? ORDER BY id DESC;",[p],function(z,x){if(x.rows.length>0){var B=x.rows.item(0);q(B.viewxml)}else q("")})}function F(p){aa("SELECT rootid, rootname FROM views ORDER BY rootname;",[],function(q,z){for(var x="",B=0;B<z.rows.length;B++){var J=z.rows.item(B);x+='<view id="'+J.rootid+'" name="'+J.rootname+'" />'}p("<result>"+x+"</result>")})}
function I(){xa=setTimeout(Y,K.PollingInterval)}function Y(p,q){var z=K.ConnectTestUrl;if(K.RandomConnectionFailure)z=K.ConnectTestRandomFailUrl;debug&&log("Starting "+z);CswAjaxXml({formobile:Q,url:z,data:"",onloginfail:function(){ca()},success:function(){debug&&log("On Success "+z);k();Z(true);isNullOrEmpty(p)||p()},error:function(){isNullOrEmpty(q)||q();I()}})}function Z(p){if(isNullOrEmpty(fa))p&&I();else O(function(q,z){if(!isNullOrEmpty(q)&&!isNullOrEmpty(z)){debug&&log("Starting "+K.UpdateUrl);
CswAjaxXml({formobile:Q,url:K.UpdateUrl,data:"SessionId="+fa+"&ParentId="+UpdatedViewXml+"&UpdatedViewXml="+z.replace(/'/gi,"\\'"),onloginfail:function(){p&&I()},success:function(x){debug&&log("On Success "+K.UpdateUrl);R(q,x,"0");p&&I()},error:function(){p&&I()}})}else p&&I()})}if(debug){profiler.instrumentObjectFunctions(a.find,"$.find.");profiler.instrumentObjectFunctions(a,"$.");profiler.instrumentObjectFunctions(a.fn,"$.fn.");profiler.instrumentObjectFunctions(a.mobile,"$.mobile.")}var K={DBShortName:"Mobile.html",
DBVersion:"1.0",DBDisplayName:"Mobile.html",DBMaxSize:65536,ViewUrl:"/NbtWebApp/wsNBT.asmx/RunView",ConnectTestUrl:"/NbtWebApp/wsNBT.asmx/ConnectTest",ConnectTestRandomFailUrl:"/NbtWebApp/wsNBT.asmx/ConnectTestRandomFail",UpdateUrl:"/NbtWebApp/wsNBT.asmx/UpdateProperties",MainPageUrl:"/NbtWebApp/Mobile.html",AuthenticateUrl:"/NbtWebApp/wsNBT.asmx/Authenticate",Theme:"a",PollingInterval:3E4,DivRemovalDelay:1E3,RandomConnectionFailure:false};g&&a.extend(K,g);var Q=true,da,ia,ja,fa,ga,oa="initialloadingdiv";
if(window.location.hash.length>0){g=window.location.hash.substr(1);if(a("#"+g).length===0&&g!=="viewsdiv"&&g!=="logindiv")oa=g}v({DivId:oa,HeaderText:"Please wait",content:"Loading...",HideSearchButton:true,HideOnlineButton:true,HideRefreshButton:true,HideLogoutButton:true,HideHelpButton:true});(function(){var p="";p+='<p>Pending Unsynched Changes: <span id="ss_pendingchangecnt">No</span></p>';p+='<p>Last synch: <span id="ss_lastsynch"></span></p>';p+='<a id="ss_forcesynch" href="#" data-role="button">Force Synch Now</a>';
p+='<a id="ss_gooffline" href="#" data-role="button">Go Offline</a>';$divhtml=v({DivId:"synchstatus",HeaderText:"Synch Status",content:p,HideSearchButton:true,HideRefreshButton:true});$divhtml.find("#ss_forcesynch").click(function(q){Z(false);q.preventDefault()}).end().find("#ss_gooffline").click(function(q){q.preventDefault();if(l()){clearTimeout(xa);I();k();a("#ss_gooffline span").text("Go Offline")}else{clearTimeout(xa);q=a(".onlineStatus");if(q.hasClass("online")){q.removeClass("online").addClass("offline").text("Offline");
a(".refresh").css("visibility","hidden");e(false)}if(a("#logindiv").length>0){d(true);f("logindiv")}a("#ss_gooffline span").text("Go Online")}})})();(function(){var p="";p+="<p>Help</p>";$divhtml=v({DivId:"help",HeaderText:"Help",content:p,HideSearchButton:true,HideRefreshButton:true})})();(function(p,q){ia=openDatabase(K.DBShortName,K.DBVersion,K.DBDisplayName,K.DBMaxSize);p?ma(function(){na(q)}):na(q)})(false,function(){P("sessionid",function(p){if(isNullOrEmpty(p))Y(function(){b(true);f(oa)},function(){d(true);
f(oa)});else{fa=p;e(true);f(oa);I()}})});debug&&profiler.instrumentFunction(b,"_loadLoginDiv");debug&&profiler.instrumentFunction(d,"_loadSorryCharlieDiv");debug&&profiler.instrumentFunction(f,"removeDiv");debug&&profiler.instrumentFunction(e,"reloadViews");debug&&profiler.instrumentFunction(h,"continueReloadViews");debug&&profiler.instrumentFunction(j,"_loadDivContents");var pa,qa;debug&&profiler.instrumentFunction(m,"_processViewXml");debug&&profiler.instrumentFunction(n,"_loadLoginDiv_makeListItemFromXml");
debug&&profiler.instrumentFunction(s,"_makeObjectClassContent");debug&&profiler.instrumentFunction(v,"_addPageDivToBody");var xa;log($dumpProfileHTML(profiler));return this}})(jQuery);(function(a){var g={init:function(b){var d={GridUrl:"/NbtWebApp/wsNBT.asmx/getGrid",viewid:"",ID:"",nodeid:"",cswnbtnodekey:"",gridTableID:"gridTable",gridPagerID:"gridPager",reinit:false,onEditNode:function(){},onDeleteNode:function(){}};b&&a.extend(d,b);b=a(this);d.reinit&&b.empty();var f=makeId({ID:d.gridTableID,prefix:d.ID}),e=b.CswTable("init",{ID:f});f=makeId({ID:d.gridPagerID,prefix:d.ID});var h=b.CswDOM("div",{ID:f}).css("width","100%").css("height","20px");CswAjaxJSON({url:d.GridUrl,data:"{ViewPk: '"+
d.viewid+"', 'SafeNodeKey': '"+d.cswnbtnodekey+"'}",success:function(k){jqGridOpt=k.jqGridOpt;if(jqGridOpt.width==="")jqGridOpt.width=650;k={autoencode:true,caption:"",datatype:"local",emptyrecords:"No Results",height:"300",multiselect:true,pager:h,rowList:[10,25,50],rowNum:10,shrinkToFit:true,sortname:"",sortorder:"asc",toppager:false,viewrecords:true};a.extend(k,jqGridOpt);if(k.rowNum>=50)k.toppager=true;e.jqGrid(k).navGrid("#"+h.CswAttrDom("id"),{cloneToTop:false,edit:true,edittext:"",edittitle:"Edit row",
editfunc:function(l){var j={cswnbtnodekey:"",nodeid:"",onEditNode:d.onEditNode};if(l!==null){j.cswnbtnodekey=e.jqGrid("getCell",l,"cswnbtnodekey");a.CswDialog("EditNodeDialog",j)}else alert("Please select a row to edit");return j.CswNbtNodeKey},add:false,del:true,deltext:"",deltitle:"Delete row",delfunc:function(l){var j={cswnbtnodekey:"",nodeid:"",nodename:"",onDeleteNode:d.onDeleteNode};if(l!==null){j.cswnbtnodekey=e.jqGrid("getCell",l,"cswnbtnodekey");j.nodename=e.jqGrid("getCell",l,"nodename");
a.CswDialog("DeleteNodeDialog",j)}else alert("Please select a row to delete");return j.cswnbtnodekey},search:true,searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",view:true,viewtext:"",viewtitle:"View row"},{},{},{},{caption:"Search...",Find:"Find",Reset:"Reset",odata:["equal","not equal","less","less or equal","greater","greater or equal","begins with","does not begin with","is in","is not in","ends with","does not end with",
"contains","does not contain"],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],matchText:"match",rulesText:"rules"},{})}});return e},scrollToSelectedRow:function(){var b=a(this),d=b.jqGrid("getGridParam","selrow"),f=null;try{f=b.find("tbody").find("tr:first").outerHeight()}catch(e){}f=f||23;d=b.getInd(d);b.closest(".ui-jqgrid-bdiv").scrollTop(f*(d-1))}};a.fn.CswNodeGrid=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,
arguments);else a.error("Method "+b+" does not exist on "+PluginName)}})(jQuery);(function(a){var g={init:function(b){var d={ID:"",NodesUrl:"/NbtWebApp/wsNBT.asmx/getNodes",nodetypeid:"",objectclassid:"",objectclass:"",onSelect:function(){},onSuccess:function(){}};b&&a.extend(d,b);b=a(this);var f=a('<select id="'+d.ID+'_nodeselect" />').appendTo(b);f.change(function(){d.onSelect(f.val())});CswAjaxXml({url:d.NodesUrl,data:"NodeTypeId="+d.nodetypeid+"&ObjectClassId="+d.objectclassid+"&ObjectClass="+d.objectclass,success:function(e){e.children("node").each(function(){var h=a(this);
f.append('<option value="'+h.CswAttrXml("id")+'">'+h.CswAttrXml("name")+"</option>")});d.onSuccess()}});return f},value:function(){return a(this).val()}};a.fn.CswNodeSelect=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswNodeSelect")}})(jQuery);(function(a){a.fn.CswNodeTabs=function(g){function b(i,s){CswAjaxXml({url:m.PropsUrl,data:"EditMode="+m.EditMode+"&NodeId="+m.nodeid+"&SafeNodeKey="+m.cswnbtnodekey+"&TabId="+s+"&NodeTypeId="+m.nodetypeid,success:function(t){var w=i.children("form");w.contents().remove();m.title!==""&&w.append(m.title);var C=w.CswLayoutTable("init",{ID:m.ID+"_props",OddCellRightAlign:true,ReadOnly:m.EditMode==="PrintReport",cellset:{rows:1,columns:2},onSwap:function(u,A){d(A)},showConfigButton:m.filterToPropId===
"",onConfigOn:function(){t.children().each(function(){var u=a(this),A=C.CswLayoutTable("cellset",u.CswAttrXml("displayrow"),u.CswAttrXml("displaycol"))[1][2],E=A.children("#"+u.CswAttrXml("id")+"_subproptable"),N={fieldtype:u.CswAttrXml("fieldtype"),nodeid:m.nodeid,relatednodeid:m.relatednodeid,propid:u.CswAttrXml("id"),$propdiv:A.children("div"),$propxml:u,onchange:function(){},onReload:function(){b(i,s)},cswnbtnodekey:m.cswnbtnodekey};E.length>0&&k(N,m.SinglePropUrl,m.EditMode,m.cswnbtnodekey,u.CswAttrXml("id"),
m.nodetypeid,u,A,i,s,true)})},onConfigOff:function(){t.children().each(function(){var u=a(this),A=C.CswLayoutTable("cellset",u.CswAttrXml("displayrow"),u.CswAttrXml("displaycol"))[1][2],E=A.children("#"+u.CswAttrXml("id")+"_subproptable"),N={fieldtype:u.CswAttrXml("fieldtype"),nodeid:m.nodeid,relatednodeid:m.relatednodeid,propid:u.CswAttrXml("id"),$propdiv:A.children("div"),$propxml:u,onchange:function(){},onReload:function(){b(i,s)},cswnbtnodekey:m.cswnbtnodekey};E.length>0&&k(N,m.SinglePropUrl,
m.EditMode,m.cswnbtnodekey,u.CswAttrXml("id"),m.nodetypeid,u,A,i,s,false)})}});e(C,t,i,s);if(m.EditMode!=="PrintReport")var v=w.CswButton({ID:"SaveTab",enabledText:"Save Changes",disabledText:"Saving...",onclick:function(){l(w,C,t,v)}});w.validate({highlight:function(u){u=a(u);u.CswAttrDom("csw_invalid","1");u.animate({backgroundColor:"#ff6666"})},unhighlight:function(u){var A=a(u);if(A.CswAttrDom("csw_invalid")==="1"){A.css("background-color","#66ff66");A.CswAttrDom("csw_invalid","0");setTimeout(function(){A.animate({backgroundColor:"transparent"})},
500)}}})}})}function d(i){f(i.cellset[1][2].children("div").first(),i.swaprow,i.swapcolumn);f(i.swapcellset[1][2].children("div").first(),i.row,i.column)}function f(i,s,t){if(i.length>0){i=i.CswAttrDom("propid");CswAjaxJSON({url:m.MovePropUrl,data:'{ "PropId": "'+i+'", "NewRow": "'+s+'", "NewColumn": "'+t+'", "EditMode": "'+m.EditMode+'" }',success:function(){}})}}function e(i,s,t,w,C){s.children().each(function(){var v=a(this),u=v.CswAttrXml("id"),A=v.CswAttrXml("fieldtype"),E=i.CswLayoutTable("cellset",
v.CswAttrXml("displayrow"),v.CswAttrXml("displaycol"));if((v.CswAttrXml("display")!=="false"||C)&&A!=="Image"&&A!=="Grid"&&(m.filterToPropId===""||m.filterToPropId===u)){A=E[1][1];A.addClass("propertylabel");v.CswAttrXml("helptext")!==""?a('<a href="#" title="'+v.CswAttrXml("helptext")+'" onclick="return false;">'+v.CswAttrXml("name")+"</a>").appendTo(A):A.append(v.CswAttrXml("name"));m.ShowCheckboxes&&v.CswAttrXml("copyable")==="true"&&A.CswInput("init",{ID:"check_"+u,type:CswInput_Types.checkbox,
value:Value,cssclass:m.ID+"_check"}).CswAttrDom("propid",u)}u=E[1][2];u.addClass("propertyvaluecell");h(u,v,t,w,C)})}function h(i,s,t,w,C){i.empty();if((s.CswAttrXml("display")!=="false"||C)&&(m.filterToPropId===""||m.filterToPropId===s.CswAttrXml("id"))){var v={fieldtype:s.CswAttrXml("fieldtype"),nodeid:m.nodeid,relatednodeid:m.relatednodeid,propid:s.CswAttrXml("id"),$propdiv:a("<div/>").appendTo(i),$propxml:s,onchange:function(){},onReload:function(){b(t,w)},cswnbtnodekey:m.cswnbtnodekey,EditMode:m.EditMode,
onEditView:m.onEditView};v.$propdiv.CswAttrDom("nodeid",v.nodeid);v.$propdiv.CswAttrDom("propid",v.propid);v.$propdiv.CswAttrDom("cswnbtnodekey",v.cswnbtnodekey);v.onchange=function(){m.onPropertyChange(v.propid,s.CswAttrXml("name"))};if(s.CswAttrXml("hassubprops")==="true")v.onchange=function(){k(v,m.SinglePropUrl,m.EditMode,m.cswnbtnodekey,s.CswAttrXml("id"),m.nodetypeid,s,i,t,w,false);m.onPropertyChange(v.propid,s.CswAttrXml("name"))};a.CswFieldTypeFactory("make",v);var u=s.children("subprops");
if(u.length>0&&u.children('[display != "false"]').length>0||C){var A=i.CswLayoutTable("init",{ID:v.propid+"_subproptable",OddCellRightAlign:true,ReadOnly:m.EditMode==="PrintReport",cellset:{rows:1,columns:2},onSwap:function(E,N){d(N)},showConfigButton:false});e(A,u,t,w,C);C?A.CswLayoutTable("ConfigOn"):A.CswLayoutTable("ConfigOff")}}}function k(i,s,t,w,C,v,u,A,E,N,S){a.CswFieldTypeFactory("save",i);CswAjaxXml({url:s,data:"EditMode="+t+"&NodeId="+m.nodeid+"&SafeNodeKey="+w+"&PropId="+C+"&NodeTypeId="+
v+"&NewPropXml="+xmlToString(u),success:function(ca){h(A,ca.children().first(),E,N,S)}})}function l(i,s,t,w){if(i.valid()){j(s,t);i={EditMode:m.EditMode,NodeId:m.nodeid,SafeNodeKey:m.cswnbtnodekey,NodeTypeId:m.nodetypeid,ViewId:a.CswCookie("get",CswCookieName.CurrentView.ViewId),NewPropsXml:xmlToString(t)};CswAjaxJSON({url:m.SavePropUrl,data:jsonToString(i),success:function(C){if(m.ShowCheckboxes){var v=a("."+m.NodeCheckTreeId+"_check:checked"),u=a("."+m.ID+"_check:checked");if(v.length>0&&u.length>
0){var A="{ SourceNodeKey: '"+m.cswnbtnodekey+"', CopyNodeIds: [",E=true;v.each(function(){var N=a(this).CswAttrDom("nodeid");E||(A+=",");A+="'"+N+"'";E=false});A+="], PropIds: [";E=true;u.each(function(){var N=a(this).CswAttrDom("propid");E||(A+=",");A+="'"+N+"'";E=false});A+="] }";CswAjaxJSON({url:m.CopyPropValuesUrl,data:A})}}m.onSave(C.nodeid,C.cswnbtnodekey)},error:function(){w.CswButton("enable")}})}else w.CswButton("enable")}function j(i,s){s.children().each(function(){var t={$propxml:a(this),
$propdiv:"",$propCell:"",fieldtype:"",nodeid:m.nodeid,cswnbtnodekey:m.cswnbtnodekey};t.fieldtype=t.$propxml.CswAttrXml("fieldtype");var w=i.CswLayoutTable("cellset",t.$propxml.CswAttrXml("displayrow"),t.$propxml.CswAttrXml("displaycol"));t.$propcell=w[1][2];t.$propdiv=t.$propcell.children("div").first();a.CswFieldTypeFactory("save",t);if(t.$propxml.CswAttrXml("hassubprops")==="true"){w=t.$propxml.children("subprops");if(w.length>0&&w.children('[display != "false"]').length>0){t=t.$propcell.children("#"+
t.$propxml.CswAttrXml("id")+"_subproptable").first();t.length>0&&j(t,w)}}})}var m={ID:"",TabsUrl:"/NbtWebApp/wsNBT.asmx/getTabs",SinglePropUrl:"/NbtWebApp/wsNBT.asmx/getSingleProp",PropsUrl:"/NbtWebApp/wsNBT.asmx/getProps",MovePropUrl:"/NbtWebApp/wsNBT.asmx/moveProp",SavePropUrl:"/NbtWebApp/wsNBT.asmx/saveProps",CopyPropValuesUrl:"/NbtWebApp/wsNBT.asmx/copyPropValues",nodeid:"",relatednodeid:"",tabid:"",cswnbtnodekey:"",nodetypeid:"",filterToPropId:"",title:"",EditMode:"Edit",onSave:function(){},
onBeforeTabSelect:function(){return true},onTabSelect:function(){},onPropertyChange:function(){},ShowCheckboxes:false,NodeCheckTreeId:"",onEditView:function(){}};g&&a.extend(m,g);g=a(this);var n=a('<div id="'+m.ID+'_tabdiv" />').appendTo(g);(function(){CswAjaxXml({url:m.TabsUrl,data:"EditMode="+m.EditMode+"&NodeId="+m.nodeid+"&SafeNodeKey="+m.cswnbtnodekey+"&NodeTypeId="+m.nodetypeid,success:function(i){n.contents().remove();var s=[],t=0,w=0;i.children().each(function(){$tab=a(this);if(m.EditMode===
"PrintReport"||s.length===0)s[s.length]=a("<div><ul></ul></div>").appendTo(n);var A=s[s.length-1];A.children("ul").append('<li><a href="#'+$tab.CswAttrXml("id")+'">'+$tab.CswAttrXml("name")+"</a></li>");A.append('<div id="'+$tab.CswAttrXml("id")+'"><form id="'+$tab.CswAttrXml("id")+'_form" /></div>');if($tab.CswAttrXml("id")===m.tabid)t=w;w++});for(var C in s){var v=s[C];v.tabs({selected:t,select:function(A,E){if(m.onBeforeTabSelect(S)){var N=a(v.children("div")[E.index]),S=N.CswAttrDom("id");b(N,
S);m.onTabSelect(S)}else return false}});i=a(v.children("div")[v.tabs("option","selected")]);var u=i.CswAttrDom("id");b(i,u);m.onTabSelect(u)}}})})(m);if(m.EditMode!=="PrintReport"){g=a('<div id="'+m.ID+'_linkdiv" align="right"/>').appendTo(g);a('<a href="#">As Report</a>').appendTo(g).click(function(){openPopup("NewNodeReport.html?nodeid="+m.nodeid+"&cswnbtnodekey="+m.cswnbtnodekey,600,800)})}return this}})(jQuery);(function(a){function g(d,f){return jsTreeGetSelected(d).$item.CswAttrDom("rel")===f.CswAttrDom("rel")}var b={init:function(d){var f={ID:"",ViewTreeUrl:"/NbtWebApp/wsNBT.asmx/getTreeOfView",NodeTreeUrl:"/NbtWebApp/wsNBT.asmx/getTreeOfNode",viewid:"",viewmode:"",nodeid:"",cswnbtnodekey:"",IncludeNodeRequired:false,UsePaging:true,onSelectNode:function(){},onViewChange:function(){},SelectFirstChild:true,ShowCheckboxes:false};d&&a.extend(f,d);var e=f.ID+"_",h=a('<div id="'+e+'" class="treediv" />').appendTo(a(this)),
k=f.ViewTreeUrl;d="UsePaging="+f.UsePaging+"&ViewNum="+f.viewid+"&IDPrefix="+e+"&IsFirstLoad=true&ParentNodeKey=&IncludeNodeRequired="+f.IncludeNodeRequired+"&IncludeNodeKey=";if(f.cswnbtnodekey!==undefined)d+=f.cswnbtnodekey;if(f.viewid===""||f.viewid===undefined){k=f.NodeTreeUrl;d="IDPrefix="+e+"&NodePk="+f.nodeid}CswAjaxXml({url:k,data:d,success:function(l){var j="",m=["themes","html_data","ui","types","crrm"],n;if(f.nodeid!==undefined&&f.nodeid!=="")j=e+f.nodeid;var i=l.children("viewid").text();
if(f.viewid!==i){f.onViewChange(i);f.viewid=i}i=l.find('item[id="'+j+'"]');if(j===""||i.length===0)if(f.SelectFirstChild)if(f.viewmode==="list"){j=l.find("item").first().CswAttrXml("id");n={dots:false}}else{j=l.find("item").first().find("item").first().CswAttrXml("id");n={dots:true}}else j=e+"root";i=l.find('item[id="'+j+'"]');var s=[],t=0;i.parents("item").andSelf().each(function(){s[t]=a(this).CswAttrXml("id");t++});i=l.find("types").text();i=a.parseJSON(i);l=l.find("tree").children("root");if(l.length>
0){var w=function(v){var u=v.CswAttrXml("id").substring(e.length),A=v.children("content").children("name").text(),E='<li id="'+v.CswAttrXml("id")+'" ';E+='    rel="'+v.CswAttrXml("rel")+'" ';E+='    species="'+v.CswAttrXml("species")+'" ';E+='    class="jstree-'+v.CswAttrXml("state")+'" ';if(v.CswAttrXml("cswnbtnodekey")!==undefined)E+='    cswnbtnodekey="'+v.CswAttrXml("cswnbtnodekey").replace(/"/g,"&quot;")+'"';E+=">";if(f.ShowCheckboxes)E+='  <input type="checkbox" class="'+e+'check" id="check_'+
u+'" rel="'+v.CswAttrXml("rel")+'" nodeid="'+u+'" nodename="'+A+'"></input>';E+='  <a href="#">'+A+"</a>";if(v.children("item").length>0){E+="<ul>";v.children("item").each(function(){E+=w(a(this))});E+="</ul>"}E+="</li>";return E},C="<ul>";l.children().each(function(){C+=w(a(this))});C+="</ul>";h.jstree({html_data:{data:C,ajax:{type:"POST",url:k,dataType:"xml",data:function(v){v=v.CswAttrXml("cswnbtnodekey");return"UsePaging="+f.UsePaging+"&ViewNum="+f.viewid+"&IDPrefix="+e+"&IsFirstLoad=false&ParentNodeKey="+
v+"&IncludeNodeRequired=false&IncludeNodeKey="},success:function(v,u,A){var E="";a(A.responseXML).children().first().children().each(function(){E+=w(a(this))});return E}}},ui:{select_limit:1,initially_select:j},themes:n,core:{initially_open:s},types:{types:i,max_children:-2,max_depth:-2},plugins:m}).bind("load_node.jstree",function(){a("."+e+"check").unbind("click");a("."+e+"check").click(function(){return g(h,a(this))})}).bind("select_node.jstree",function(v,u){var A=jsTreeGetSelected(h),E={nodeid:A.id,
nodename:A.text,iconurl:A.iconurl,cswnbtnodekey:A.$item.CswAttrDom("cswnbtnodekey"),nodespecies:A.$item.CswAttrDom("species"),viewid:f.viewid};if(E.nodespecies==="More"){A="";var N=u.inst._get_parent(u.rslt.obj);if(N!==-1)A=N.CswAttrDom("cswnbtnodekey");if(A===undefined)A="";CswAjaxXml({url:k,data:"UsePaging="+f.UsePaging+"&ViewNum="+f.viewid+"&IDPrefix="+e+"&IsFirstLoad=false&ParentNodeKey="+A+"&IncludeNodeRequired=false&IncludeNodeKey="+E.cswnbtnodekey,success:function(S){function ca(){W.length>
0&&h.jstree("create","#"+ea,"after",{attr:{id:W.CswAttrXml("id"),rel:W.CswAttrXml("rel"),cswnbtnodekey:W.CswAttrXml("cswnbtnodekey"),species:W.CswAttrXml("species")},data:W.children("content").children("name").text(),state:W.CswAttrXml("state")},function(){ea===W.CswAttrXml("id")&&h.jstree("remove","#"+e+E.nodeid+'[species="More"]');ea=W.CswAttrXml("id");W=W.next();ca()},true,true)}var ea=e+E.nodeid,W=S.children().first();ca()}})}else{a("."+e+"check").CswAttrDom("checked","");f.onSelectNode(E)}});
a("."+e+"check").click(function(){return g(h,a(this))});h.find("li").each(function(){var v=a(this);v.children("ins").CswAttrDom("id",v.CswAttrDom("id")+"_expand")})}else h.append("No Results")}});return h},selectNode:function(d){var f={newnodeid:"",newcswnbtnodekey:""};d&&a.extend(f,d);d=a(this).children(".treediv");var e=d.CswAttrDom("id");d.jstree("select_node","#"+e+f.newnodeid)}};a.fn.CswNodeTree=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d===
"object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswNodeTree")}})(jQuery);(function(a){var g={init:function(b){var d={ID:"",NodeTypesUrl:"/NbtWebApp/wsNBT.asmx/getNodeTypes",nodetypeid:"",onSelect:function(){},onSuccess:function(){}};b&&a.extend(d,b);b=a(this);b.contents().remove();var f=a('<select id="'+d.ID+'_sel" />').appendTo(b);f.change(function(){d.onSelect(f.val())});CswAjaxXml({url:d.NodeTypesUrl,data:"",success:function(e){e.children("nodetype").each(function(){var h=a(this);f.append('<option value="'+h.CswAttrXml("id")+'">'+h.CswAttrXml("name")+"</option>")});
d.onSuccess()}});return f},value:function(){return a(this).val()}};a.fn.CswNodeTypeSelect=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswNodeTypeSelect")}})(jQuery);(function(a){var g={init:function(b){var d={ID:"",Value:"",MinValue:"",MaxValue:"",Precision:"",ReadOnly:false,Required:false,onchange:function(){}};b&&a.extend(d,b);b=a(this);b.contents().remove();if(d.ReadOnly)b.append(d.Value);else{b=b.CswInput("init",{ID:d.ID,type:CswInput_Types.text,value:d.Value,cssclass:"textinput number",onChange:d.onchange});if(d.MinValue!==undefined){jQuery.validator.addMethod(d.ID+"_validateFloatMinValue",function(f,e){return this.optional(e)||validateFloatMinValue(a(e).val(),
d.MinValue)},"Number must be greater than or equal to "+d.MinValue);b.addClass(d.ID+"_validateFloatMinValue")}if(d.MaxValue!==undefined){jQuery.validator.addMethod(d.ID+"_validateFloatMaxValue",function(f,e){return this.optional(e)||validateFloatMaxValue(a(e).val(),d.MaxValue)},"Number must be less than or equal to "+d.MaxValue);b.addClass(d.ID+"_validateFloatMaxValue")}if(d.Precision===undefined||d.Precision<=0){jQuery.validator.addMethod(d.ID+"_validateInteger",function(f,e){return this.optional(e)||
validateInteger(a(e).val())},"Value must be an integer");b.addClass(d.ID+"_validateInteger")}else{jQuery.validator.addMethod(d.ID+"_validateFloatPrecision",function(f,e){return this.optional(e)||validateFloatPrecision(a(e).val(),d.Precision)},"Value must be numeric");b.addClass(d.ID+"_validateFloatPrecision")}d.Required&&b.addClass("required")}},value:function(){return a(this).find("input").val()},setValue:function(b){a(this).find("input").CswInput("set",{value:b})}};a.fn.CswNumberTextBox=function(b){if(g[b])return g[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswNumberTextBox")}})(jQuery);(function(a){a.CswQueryString=function(){for(var g={},b,d=/\+/g,f=/([^&=]+)=?([^&]*)/g,e=window.location.search.substring(1);b=f.exec(e);)g[decodeURIComponent(b[1].replace(d," "))]=decodeURIComponent(b[2].replace(d," "));return g}})(jQuery);(function(a){a.fn.CswQuickLaunch=function(g){var b={Url:"/NbtWebApp/wsNBT.asmx/getQuickLaunchItems",onLinkClick:function(){},onSuccess:function(){}};g&&a.extend(b,g);var d=a(this);CswAjaxXml({url:b.Url,data:"{ UserId: '' }",success:function(f){var e=a('<div id="quicklaunchdiv"><ul id="launchitems"></ul></div>').appendTo(d).children();f.children("items").children("item").each(function(){var h=a(this),k={launchtype:h.CswAttrXml("launchtype"),viewmode:h.CswAttrXml("viewmode"),text:h.CswAttrXml("text"),
url:h.CswAttrXml("url"),viewid:h.CswAttrXml("itemid")};switch(k.launchtype){case "View":case "view":a('<li><a href="#'+k.text+"_"+k.type+"_"+k.viewmode+"_"+k.viewid+'">'+k.text+"</a></li>").appendTo(e).children("a").click(function(){b.onLinkClick(k);return false});break;case "Action":case "action":a("<li><a href="+k.url+">"+k.text+"</a></li>").appendTo(e)}});b.onSuccess()}});return this}})(jQuery);var CswSearch_CssClasses={nodetype_select:{name:"csw_search_nodetype_select"},property_select:{name:"csw_search_property_select"}};
(function(a){a.fn.CswSearch=function(g){function b(n){var i={$link:"",advancedIsHidden:false};n&&a.extend(i,n);if("Advanced"===i.$link.text()||!i.advancedIsHidden){a("."+ViewBuilder_CssClasses.subfield_select.name).each(function(){a(this).show()});a("."+ViewBuilder_CssClasses.filter_select.name).each(function(){a(this).show()});a("."+ViewBuilder_CssClasses.default_filter.name).each(function(){a(this).hide()});i.$link.text("Simple");i.advancedIsHidden=true}else if("Simple"===i.$link.text()||i.advancedIsHidden){a("."+
ViewBuilder_CssClasses.subfield_select.name).each(function(){a(this).hide()});a("."+ViewBuilder_CssClasses.filter_select.name).each(function(){a(this).hide()});a("."+ViewBuilder_CssClasses.default_filter.name).each(function(){a(this).show()});i.$link.text("Advanced");i.advancedIsHidden=false}return i.advancedIsHidden}function d(){for(var n=2;n<=j.propsCount;){var i=j.$searchTable.CswTable("cell",n,1).CswAttrDom({align:"right"}),s=a("<span>&nbsp;and&nbsp;</span>");i.append(s);n++}var t=1;j.$propsXml.children("property").each(function(){var w=
a(this),C=j.$searchTable.CswTable("cell",t,2),v=makeId({ID:"viewbuilderpropid",suffix:w.CswAttrXml("viewbuilderpropid"),prefix:j.ID});C.CswDOM("span",{ID:v,value:w.CswAttrXml("metadatatypename"),cssclass:ViewBuilder_CssClasses.metadatatype_static.name}).CswAttrDom("relatedidtype",w.CswAttrXml("relatedidtype"));j.selectedSubfieldVal="";j.selectedFilterVal="";C=w.CswAttrXml("filtarbitraryid");j.$searchTable.CswViewPropFilter("init",{ID:j.ID,propRow:t,firstColumn:3,includePropertyName:true,$propsXml:w,
filtarbitraryid:C,advancedIsHidden:j.advancedIsHidden});t++});j.bottomRow=t;j.bottomCell=1;j.searchtype="viewsearch";h()}function f(){var n=j.$searchTable.CswTable("cell",1,2).empty(),i=makeId({ID:"nodetype_select",prefix:j.ID});i=a(xmlToString(j.$nodeTypesXml.children("select"))).CswAttrDom("id",i).CswAttrDom("name",i).CswAttrDom("class",CswSearch_CssClasses.nodetype_select.name).change(function(){var s=a(this);s={nodetypeorobjectclassid:s.val(),relatedidtype:s.find(":selected").CswAttrDom("title"),
cswnbtnodekey:"",$parent:j.$searchTable,$nodeTypesSelect:s};a.extend(j,s);e()});j.$nodeTypesSelect=i;j.relatedidtype=i.find(":selected").CswAttrDom("title");j.nodetypeorobjectclassid!==""&&i.val(j.nodetypeorobjectclassid).CswAttrDom("selected",true);n.append(i);n=j.$searchTable.CswTable("cell",1,3).empty();i=makeId({ID:"property_select",prefix:j.ID});i=a(xmlToString(j.$propsXml.children("properties").children("select"))).CswAttrDom("id",i).CswAttrDom("name",i).CswAttrDom("class",CswSearch_CssClasses.property_select.name).change(function(){var s=
a(this).val(),t={propertyid:s,selectedSubfieldVal:"",selectedFilterVal:"",$selectedPropXml:j.$propsXml.children("propertyfilters").children("property[viewbuilderpropid="+s+"]")};a.extend(j,t);j.$searchTable.CswViewPropFilter("init",{ID:j.ID,propRow:1,firstColumn:3,includePropertyName:false,$propsXml:j.$selectedPropXml,viewbuilderpropid:s,advancedIsHidden:j.advancedIsHidden})});j.propertyid!==""&&i.val(j.propertyid).CswAttrDom("selected",true);n.append(i);j.propertyid=i.find(":selected").val();j.$selectedPropXml=
j.$propsXml.children("propertyfilters").children("property[viewbuilderpropid="+j.propertyid+"]");j.$searchTable.CswViewPropFilter("init",{ID:j.ID,propRow:1,firstColumn:3,includePropertyName:false,$propsXml:j.$selectedPropXml,viewbuilderpropid:j.propertyid,advancedIsHidden:j.advancedIsHidden});j.bottomRow=j.propsCount+1;j.bottomCell=2;j.searchtype="nodetypesearch";h()}function e(){CswAjaxXml({url:j.getNewPropsUrl,data:"RelatedIdType="+j.relatedidtype+"&NodeTypeOrObjectClassId="+j.nodetypeorobjectclassid+
"&IdPrefix="+j.ID+"&NodeKey="+j.cswnbtnodekey,success:function(n){j.$propsXml=n;f()}})}function h(){var n=j.$searchTable,i=j.bottomCell,s=i+1,t=j.bottomRow;if(j.searchtype==="nodetypesearch"){n=j.$searchTable.CswTable("cell",j.bottomRow,j.bottomCell).empty();s=makeId({prefix:j.ID,ID:"split_cell_table"});n=n.CswTable("init",{ID:s,cellpadding:1,cellspacing:1,cellalign:"left",align:"left"});i=1;s=2;t=1}i=n.CswTable("cell",t,i).empty();var w=makeId({ID:"clear_button",prefix:j.ID});i.CswButton({ID:w,enabledText:"Clear",
disabledText:"Clear",disableOnClick:false,onclick:function(){m.empty();var v=makeId({prefix:j.ID,ID:"search_tbl"});j.$searchTable=m.CswTable("init",{ID:v,cellpadding:1,cellspacing:1,cellalign:"center",align:"center"});switch(j.searchtype){case "nodetypesearch":f();case "viewsearch":d()}}});n=n.CswTable("cell",t,s).empty();s=makeId({ID:"advanced_options",prefix:j.ID});var C=n.CswDOM("link",{ID:s,href:"#advanced",value:"Advanced"}).click(function(){j.advancedIsHidden=b({$link:C,advancedIsHidden:j.advancedIsHidden})});
n=j.$searchTable.CswTable("cell",j.bottomRow,j.searchBtnCell).CswAttrDom({align:"right"}).empty();s=makeId({ID:"search_button",prefix:j.ID});n.CswButton({ID:s,enabledText:"Search",disabledText:"Searching",onclick:function(){l()}})}function k(){CswAjaxXml({url:j.getClientSearchXmlUrl,data:"ViewIdNum="+j.viewid+"&SelectedNodeTypeIdNum="+j.nodetypeorobjectclassid+"&IdPrefix="+j.ID+"&NodeKey="+j.cswnbtnodekey,success:function(n){m.empty();j.searchtype=n.CswAttrXml("searchtype");var i=makeId({prefix:j.ID,
ID:"search_tbl"});j.$searchTable=m.CswTable("init",{ID:i,cellpadding:1,cellspacing:1,cellalign:"left",align:"center"});j.$searchTable.css("background-color","0099FF");j.$searchTable.CswAttrXml("frame","border");switch(j.searchtype){case "nodetypesearch":j.$nodeTypesXml=n.children("nodetypes");j.$propsXml=n.children("viewbuilderprops");f();break;case "viewsearch":j.$propsXml=n.children("properties");j.propsCount=n.children("properties").children("property").size();d()}}})}function l(){var n,i=[],s;
switch(j.searchtype){case "nodetypesearch":s=j.doNodeSearchUrl;var t=j.$nodeTypesSelect.val();j.relatedidtype=j.$nodeTypesSelect.find(":selected").CswAttrDom("title");a("."+CswSearch_CssClasses.property_select.name).each(function(){var w=a(this),C=w.text(),v=w.val();C=j.$propsXml.children("propertyfilters").children('property[propname="'+C+'"][viewbuilderpropid="'+v+'"]').CswAttrDom("fieldtype");w=w.CswViewPropFilter("getFilterJson",{nodetypeorobjectclassid:t,relatedidtype:j.relatedidtype,fieldtype:C,
ID:j.ID,$parent:j.$searchTable,viewbuilderpropid:v,advancedIsHidden:j.advancedIsHidden});i.push(w)});n={viewbuilderprops:i};break;case "viewsearch":s=j.doViewSearchUrl;j.$propsXml.children("property").each(function(){var w=a(this),C=w.CswAttrXml("filtarbitraryid");w=w.CswViewPropFilter("getFilterJson",{ID:j.ID,$parent:j.$searchTable,filterarbitraryid:C});i.push(w)});n={viewprops:i,viewid:j.viewid}}n&&CswAjaxJSON({url:s,data:'{SearchJson: "'+jsonToString(n)+'"}',success:function(w){j.viewid=w.sessionviewid;
j.searchtype="viewsearch";k();j.onSearchSubmit({viewid:w.sessionviewid,viewmode:w.viewmode})}})}var j={$parent:"",$searchTable:"",getNewPropsUrl:"/NbtWebApp/wsNBT.asmx/getNodeTypeSearchProps",doViewSearchUrl:"/NbtWebApp/wsNBT.asmx/doViewSearch",doNodeSearchUrl:"/NbtWebApp/wsNBT.asmx/doNodeTypeSearch",getSearchableViewsUrl:"/NbtWebApp/wsNBT.asmx/getSearchableViews",getClientSearchXmlUrl:"/NbtWebApp/wsNBT.asmx/getClientSearchXml",viewid:"",nodetypeorobjectclassid:"",propertyid:"",cswnbtnodekey:"",relatedidtype:"",
ID:"",propsCount:1,advancedIsHidden:true,$propsXml:"",$selectedPropXml:"",$nodeTypesXml:"",$nodeTypesSelect:"",onSearchSubmit:function(){},selectedPropVal:"",selectedSubfieldVal:"",selectedFilterVal:"",bottomRow:2,bottomCell:1,propRow:"",clearBtnCell:1,searchBtnCell:6,searchtype:""};g&&a.extend(j,g);g=a(this);j.$searchTable=g.CswDOM("div",{ID:j.ID});var m=j.$searchTable.CswDOM("span").CswDOM("div",{ID:"search_criteria_div",prefix:j.ID});k();return j.$searchTable}})(jQuery);(function(a){a.fn.CswTable=function(g){function b(h){return h.children("tbody").children("tr").length}function d(h){h=h.children("tbody").children("tr");for(var k=0,l=0;l<h.length;l++){var j=a(h[l]).children("td");if(j.length>k)k=j.length}return k}function f(h,k,l){var j=null;if(h.length>0&&k!==undefined&&k!==""&&l!==undefined&&l!==""){if(k<=0){log("error: row must be greater than 1, got: "+k);k=1}if(l<=0){log("error: col must be greater than 1, got: "+l);l=1}for(;k>h.children("tbody").children("tr").length;)h.append("<tr></tr>");
for(j=a(h.children("tbody").children("tr")[k-1]);l>j.children("td").length;){var m=h.CswAttrDom("cellalign");if(j.children("td").length===0&&isTrue(h.CswAttrDom("FirstCellRightAlign"))||j.children("td").length%2===0&&isTrue(h.CswAttrDom("OddCellRightAlign")))m="right";m=a('<td class="'+h.CswAttrDom("cellcssclass")+'" align="'+m+'" valign="'+h.CswAttrDom("cellvalign")+'"></td>').appendTo(j);h.trigger("CswTable_onCreateCell",[h,m,k,j.children("td").length])}j=a(j.children("td")[l-1])}return j}var e=
{init:function(h){var k={ID:"",prefix:"",suffix:"",TableCssClass:"",CellCssClass:"",cellpadding:0,cellspacing:0,cellalign:"top",width:"",align:"",cellalign:"",cellvalign:"top",onCreateCell:function(){},FirstCellRightAlign:false,OddCellRightAlign:false};h&&a.extend(k,h);h=makeId({ID:k.ID,prefix:k.prefix,suffix:k.suffix});h=a('<table id="'+h+'"></table>');h.addClass(k.TableCssClass);h.CswAttrDom("width",k.width);h.CswAttrDom("align",k.align);h.CswAttrDom("cellpadding",k.cellpadding);h.CswAttrDom("cellspacing",
k.cellspacing);h.CswAttrDom("border","0");h.CswAttrDom("cellalign",k.cellalign);h.CswAttrDom("cellvalign",k.cellvalign);h.CswAttrDom("cellcssclass",k.CellCssClass);h.CswAttrDom("FirstCellRightAlign",k.FirstCellRightAlign);h.CswAttrDom("OddCellRightAlign",k.OddCellRightAlign);h.bind("CswTable_onCreateCell",function(l,j,m,n,i){k.onCreateCell(l,j,m,n,i);l.stopPropagation()});h.trigger("CswTable_onCreateCell",[h,h.find("td"),1,1]);a(this).append(h);return h},cell:function(h,k){var l=a(this);return f(l,
h,k)},maxrows:function(){return b(a(this))},maxcolumns:function(){return d(a(this))},finish:function(h){for(var k=a(this),l=b(k),j=d(k),m=1;m<=l;m++)for(var n=1;n<=j;n++){var i=f(k,m,n);if(i.contents().length===0)h!==null?h(i,m,n):i.append("&nbsp;")}},findRow:function(h){var k=a(this).children("tbody").children("tr");if(h!==""&&h!==null)k=k.filter(h);return k},findCell:function(h){var k=a(this).children("tbody").children("tr").children("td");if(h!==""&&h!==null)k=k.filter(h);return k},rowFindCell:function(h,
k){var l=h.children("td");if(k!==""&&k!==null)l=l.filter(k);return l}};if(e[g])return e[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return e.init.apply(this,arguments);else a.error("Method "+g+" does not exist on CswTable")}})(jQuery);(function(a){var g={init:function(b){var d={ID:"",prefix:"",Checked:"",ReadOnly:false,Required:false,onchange:function(){}};b&&a.extend(d,b);b=a(this);b.empty();var f=makeId({prefix:d.prefix,ID:d.ID});if(d.Checked===""||d.Checked===undefined||d.Checked===null)d.Checked="null";if(d.ReadOnly)switch(d.Checked){case "true":b.append("Yes");break;case "false":b.append("No")}else{var e;switch(d.Checked){case "true":e=CswImageButton_ButtonType.CheckboxTrue;break;case "false":e=CswImageButton_ButtonType.CheckboxFalse;
break;default:e=CswImageButton_ButtonType.CheckboxNull}b.CswImageButton({ID:f,ButtonType:e,AlternateText:d.Checked,onClick:function(h){var k=d.Required,l=h.CswAttrDom("alt"),j=CswImageButton_ButtonType.CheckboxNull,m="null";if(l==="null"){j=CswImageButton_ButtonType.CheckboxTrue;m="true"}else if(l==="false")if(k==="true"){j=CswImageButton_ButtonType.CheckboxTrue;m="true"}else{j=CswImageButton_ButtonType.CheckboxNull;m="null"}else if(l==="true"){j=CswImageButton_ButtonType.CheckboxFalse;m="false"}h.CswAttrDom("alt",
m);h=j;d.onchange();return h}})}},value:function(){return a(this).CswAttrDom("alt")}};a.fn.CswTristateCheckBox=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswTristateCheckBox")}})(jQuery);var CswViewEditor_WizardSteps={step1:{step:1,description:"Choose a View"},step2:{step:2,description:"Edit View Attributes"},step3:{step:3,description:"Add Relationships"},step4:{step:4,description:"Select Properties"},step5:{step:5,description:"Set Filters"},step6:{step:6,description:"Fine Tuning"}};
(function(a){a.fn.CswViewEditor=function(g){function b(D){u=D}function d(D,G){var R=false;if(a("#"+i.ID+"_all:checked").length>0)R=true;C.text("");i.startingStep===1&&w.CswWizard("button","next","disable");CswAjaxJSON({url:i.ViewGridUrl,data:"{ All: "+R+" }",success:function(O){v.empty();var T=a('<div id="'+i.ID+'_gp" style="width:100%; height:20px;" />').appendTo(v),F=a('<table id="'+i.ID+'_gt" />').appendTo(v);a.extend(O,{autowidth:true,height:180,onSelectRow:function(I,Y){if(Y){E.CswButton("enable");
N.CswButton("enable")}else{E.CswButton("disable");N.CswButton("disable")}C.text(h(F));w.CswWizard("button","next","enable")},pager:T});F.jqGrid(O).hideCol(i.ColumnViewId);if(G!==undefined){F.setSelection(l(F,G));F.CswNodeGrid("scrollToSelectedRow")}D(F)}})}function f(D){var G="";return G=i.startingStep===1?k(D,i.ColumnViewId):i.viewid}function e(D){var G="";return G=i.startingStep===1?k(D,i.ColumnViewMode):i.viewmode}function h(D){var G="";return G=i.startingStep===1?k(D,i.ColumnViewName):i.viewname}
function k(D,G){var R=D.jqGrid("getGridParam","selrow");return D.jqGrid("getCell",R,G)}function l(D,G){var R=D.jqGrid("getCol",i.ColumnViewId,true),O=0,T;for(T in R)if(R[T].value.toString()===G.toString())O=R[T].id;return O}function j(D,G,R){var O,T,F;IsAdministrator({Yes:function(){D.CswTable("cell",G,1).append(R);var I=D.CswTable("cell",G,2),Y=D.CswAttrDom("id");O=a('<select id="'+Y+'_vissel" />').appendTo(I);O.append('<option value="User">User:</option>');O.append('<option value="Role">Role:</option>');
O.append('<option value="Global">Global</option>');T=I.CswNodeSelect("init",{ID:Y+"_visrolesel",objectclass:"RoleClass"}).hide();F=I.CswNodeSelect("init",{ID:Y+"_visusersel",objectclass:"UserClass"});O.change(function(){var Z=O.val();if(Z==="Role"){T.show();F.hide()}else if(Z==="User"){T.hide();F.show()}else{T.hide();F.hide()}})}});return{getvisibilityselect:function(){return O},getvisroleselect:function(){return T},getvisuserselect:function(){return F}}}function m(D,G){var R=n(D,P);G.jstree({html_data:{data:R.htmlstring},
ui:{select_limit:1},types:{types:R.types,max_children:-2,max_depth:-2},plugins:["themes","html_data","ui","types","crrm"]});G.find(".vieweditor_childselect").change(function(){var F=a(this),I=F.find("option:selected").data("optionviewxml");F.CswAttrDom("arbid")==="root"?a(I).appendTo(P):a(I).appendTo(P.find('[arbitraryid="'+F.CswAttrDom("arbid")+'"]'));m(D,G)});G.find(".vieweditor_deletespan").each(function(){var F=a(this);F.CswImageButton({ButtonType:CswImageButton_ButtonType.Delete,AlternateText:"Delete",
ID:F.CswAttrDom("arbid")+"_delete",onClick:function(I){I=I.parent();P.find('[arbitraryid="'+I.CswAttrDom("arbid")+'"]').remove();m(D,G);return CswImageButton_ButtonType.None}})});D===CswViewEditor_WizardSteps.step5.step&&G.find(".vieweditor_addfilter").each(function(){var F=a(this),I=F.CswTable({ID:i.ID+"_propfilttbl"});I.css("display","inline-table");I.CswViewPropFilter("init",{viewxml:xmlToString(P),proparbitraryid:F.CswAttrDom("proparbid"),filtarbitraryid:"",viewbuilderpropid:"",ID:i.ID,propRow:1,
firstColumn:1,includePropertyName:false,selectedSubfieldVal:"",selectedFilterVal:"",autoFocusInput:false});I.CswTable("cell",1,5).CswButton("init",{ID:"addfiltbtn",prefix:i.ID,enabledText:"Add",disabledText:"Adding",onclick:function(){var Y=I.CswViewPropFilter("getFilterJson",{ID:i.ID,$parent:F,proparbitraryid:F.CswAttrDom("proparbid")});I.CswViewPropFilter("makeFilter",{viewxml:xmlToString(P),filtJson:Y,onSuccess:function(Z){var K=P.find('[arbitraryid="'+F.CswAttrDom("proparbid")+'"]');a(xmlToString(Z)).appendTo(K);
m(D,G)}})}})});if(D===CswViewEditor_WizardSteps.step6.step){var O=la.CswTable("cell",1,2),T=e(u);G.find(".vieweditor_viewrootlink").click(function(){O.empty()});G.find(".vieweditor_viewrellink").click(function(){$a=a(this);O.empty();var F=P.find('[arbitraryid="'+$a.CswAttrDom("arbid")+'"]'),I=O.CswTable({ID:i.ID+"_editrel",FirstCellRightAlign:true});I.CswTable("cell",1,1).append("Allow Deleting");var Y=I.CswTable("cell",1,2).CswInput("init",{ID:i.ID+"_adcb",type:CswInput_Types.checkbox});F.CswAttrXml("allowdelete").toLowerCase()==
"true"&&Y.CswAttrDom("checked","true");I.CswTable("cell",2,1).append("Group By");var Z=a('<select id="'+i.ID+'_gbs" />').appendTo(I.CswTable("cell",2,2));CswAjaxXml({url:i.PropNamesUrl,data:"Type="+F.CswAttrXml("secondtype")+"&Id="+F.CswAttrXml("secondid"),success:function(Q){Z.empty();a('<option value="">[None]</option>').appendTo(Z);Q.children().each(function(){var da=a(this),ia=a('<option value="'+da.CswAttrXml("propid")+'">'+da.CswAttrXml("propname")+"</option>").appendTo(Z).data("propxml",da);
F.CswAttrXml("groupbypropid")===da.CswAttrXml("propid")&&F.CswAttrXml("groupbyproptype")===da.CswAttrXml("proptype")&&F.CswAttrXml("groupbypropname")===da.CswAttrXml("propname")&&ia.CswAttrDom("selected","true")})}});var K;if(T==="Tree"){I.CswTable("cell",3,1).append("Show In Tree");K=I.CswTable("cell",3,2).CswInput("init",{ID:i.ID+"_stcb",type:CswInput_Types.checkbox});F.CswAttrXml("showintree").toLowerCase()=="true"&&K.CswAttrDom("checked","true")}I.CswTable("cell",4,2).CswButton({ID:i.ID+"_saverel",
enabledText:"Apply",disableOnClick:false,onclick:function(){K!==undefined&&F.CswAttrXml("showintree",K.is(":checked"));F.CswAttrXml("allowdelete",Y.is(":checked"));if(Z.val()!==""){var Q=Z.find(":selected").data("propxml");F.CswAttrXml("groupbypropid",Q.CswAttrXml("propid"));F.CswAttrXml("groupbyproptype",Q.CswAttrXml("proptype"));F.CswAttrXml("groupbypropname",Q.CswAttrXml("propname"))}else{F.CswAttrXml("groupbypropid","");F.CswAttrXml("groupbyproptype","");F.CswAttrXml("groupbypropname","")}}})});
G.find(".vieweditor_viewproplink").click(function(){$a=a(this);O.empty();if(T==="Grid"){var F=P.find('[arbitraryid="'+$a.CswAttrDom("arbid")+'"]'),I=O.CswTable({ID:i.ID+"_editprop",FirstCellRightAlign:true});I.CswTable("cell",1,1).append("Sort By");var Y=I.CswTable("cell",1,2).CswInput("init",{ID:i.ID+"_sortcb",type:CswInput_Types.checkbox});F.CswAttrXml("sortby").toLowerCase()=="true"&&Y.CswAttrDom("checked","true");I.CswTable("cell",2,1).append("Grid Column Order");var Z=I.CswTable("cell",2,2).CswInput("init",
{ID:i.ID+"_gcotb",type:CswInput_Types.text});Z.val(F.CswAttrXml("order"));I.CswTable("cell",3,1).append("Grid Column Width (in characters)");var K=I.CswTable("cell",3,2).CswInput("init",{ID:i.ID+"_gcwtb",type:CswInput_Types.text});K.val(F.CswAttrXml("width"));I.CswTable("cell",4,2).CswButton({ID:i.ID+"_saveprop",enabledText:"Apply",disableOnClick:false,onclick:function(){F.CswAttrXml("sortby",Y.is(":checked"));F.CswAttrXml("order",Z.val());F.CswAttrXml("width",K.val())}})}});G.find(".vieweditor_viewfilterlink").click(function(){$a=
a(this);O.empty();var F=P.find('[arbitraryid="'+$a.CswAttrDom("arbid")+'"]'),I=O.CswTable({ID:i.ID+"_editfilt",FirstCellRightAlign:true});I.CswTable("cell",1,1).append("Case Sensitive");var Y=a('<input type="checkbox" id="'+i.ID+'_casecb" />').appendTo(I.CswTable("cell",1,2));F.CswAttrXml("casesensitive").toLowerCase()==="true"&&Y.CswAttrDom("checked","true");I.CswTable("cell",4,2).CswButton({ID:i.ID+"_savefilt",enabledText:"Apply",disableOnClick:false,onclick:function(){F.CswAttrXml("casesensitive",
Y.is(":checked"))}})})}}function n(D,G){var R={},O=G.CswAttrXml("arbitraryid"),T=G.get(0).nodeName,F,I,Y=false,Z=true,K;if(T.toLowerCase()==="treeview"){if(D===CswViewEditor_WizardSteps.step3.step)Z=false;O="root";F=G.CswAttrXml("viewname");I="root";R.root={icon:{image:G.CswAttrXml("iconfilename")}};K="vieweditor_viewrootlink"}else if(T.toLowerCase()==="relationship"){if(D===CswViewEditor_WizardSteps.step3.step)Z=false;if(D===CswViewEditor_WizardSteps.step4.step)Z=false;F=G.CswAttrXml("secondname");
T=G.CswAttrXml("propname");if(T!==""&&T!==undefined)F+=G.CswAttrXml("propowner")==="First"?" (by "+G.CswAttrXml("firstname")+"'s "+T+")":" (by "+T+")";I=G.CswAttrXml("secondtype")+"_"+G.CswAttrXml("secondid");R[I]={icon:{image:G.CswAttrXml("secondiconfilename")}};K="vieweditor_viewrellink"}else if(T.toLowerCase()==="property"){if(D<=CswViewEditor_WizardSteps.step3.step)Y=true;if(D===CswViewEditor_WizardSteps.step5.step)Z=false;F=G.CswAttrXml("name");I="property";R.property={icon:{image:"Images/view/property.gif"}};
K="vieweditor_viewproplink"}else if(T.toLowerCase()==="filter"){if(D<=CswViewEditor_WizardSteps.step4.step)Y=true;F=G.CswAttrXml("subfieldname")+" "+G.CswAttrXml("filtermode")+" "+G.CswAttrXml("value");I="filter";R.filter={icon:{image:"Images/view/filter.gif"}};K="vieweditor_viewfilterlink"}var Q="";if(!Y){Q='<li id="'+O+'" ';Q+='    rel="'+I+'" ';Q+='    class="jstree-open" ';Q+=">";Q+=' <a href="#" class="'+K+'" arbid="'+O+'">'+F+"</a>";if(O!=="root")Q+=' <span style="" class="vieweditor_deletespan" arbid="'+
O+'"></span>';Q+="<ul>";G.children().each(function(){var da=n(D,a(this));Q+=da.htmlstring;a.extend(R,da.types)});if(!Z)if(D===CswViewEditor_WizardSteps.step5.step)Q+='<li><span class="vieweditor_addfilter" proparbid="'+O+'"></span></li>';else{Q+='<li><select id="'+D+"_"+O+'_child" arbid="'+O+'" class="vieweditor_childselect"></select></li>';CswAjaxXml({url:i.ChildOptionsUrl,data:"StepNo="+D+"&ArbitraryId="+O+"&ViewXml="+xmlToString(P),success:function(da){var ia=a("#"+D+"_"+O+"_child");ia.empty();
ia.append('<option value="">Select...</option>');da.children().each(function(){var ja=a(this),fa=a(ja.CswAttrXml("value"));a('<option value="'+fa.CswAttrXml("arbitraryid")+'">'+ja.CswAttrXml("name")+"</option>").appendTo(ia).data("optionviewxml",ja.CswAttrXml("value"))})}})}Q+="</ul>";Q+="</li>"}return{htmlstring:Q,types:R}}var i={ViewGridUrl:"/NbtWebApp/wsNBT.asmx/getViewGrid",ViewInfoUrl:"/NbtWebApp/wsNBT.asmx/getViewInfo",SaveViewUrl:"/NbtWebApp/wsNBT.asmx/saveViewInfo",CopyViewUrl:"/NbtWebApp/wsNBT.asmx/copyView",
DeleteViewUrl:"/NbtWebApp/wsNBT.asmx/deleteView",ChildOptionsUrl:"/NbtWebApp/wsNBT.asmx/getViewChildOptions",PropNamesUrl:"/NbtWebApp/wsNBT.asmx/getPropNames",viewid:"",viewname:"",viewmode:"",ID:"vieweditor",ColumnViewName:"VIEWNAME",ColumnViewId:"NODEVIEWID",ColumnViewMode:"VIEWMODE",onCancel:function(){},onFinish:function(){},startingStep:1};g&&a.extend(i,g);var s=[CswViewEditor_WizardSteps.step1,CswViewEditor_WizardSteps.step2,CswViewEditor_WizardSteps.step3,CswViewEditor_WizardSteps.step4,CswViewEditor_WizardSteps.step5,
CswViewEditor_WizardSteps.step6],t={};for(g=1;g<=s.length;g++)t[g]=s[g-1].description;g=a(this);g=a("<div></div>").appendTo(g);var w=g.CswWizard("init",{ID:i.ID+"_wizard",Title:"Edit View",StepCount:s.length,Steps:t,StartingStep:i.startingStep,FinishText:"Save and Finish",onNext:function(D){switch(D){case CswViewEditor_WizardSteps.step2.step:CswAjaxXml({url:i.ViewInfoUrl,data:"ViewId="+f(u),success:function(R){P=R;ca.val(P.CswAttrXml("viewname"));ea.val(P.CswAttrXml("category"));if(P.CswAttrXml("visibility")!==
"Property")if(W.getvisibilityselect()!==undefined){W.getvisibilityselect().val(P.CswAttrXml("visibility")).trigger("change");W.getvisroleselect().val("nodes_"+P.CswAttrXml("visibilityroleid"));W.getvisuserselect().val("nodes_"+P.CswAttrXml("visibilityuserid"))}P.CswAttrXml("formobile")==="true"&&ka.CswAttrDom("checked","true");R=P.CswAttrXml("mode");wa.text(R);aa.CswNumberTextBox("setValue",P.CswAttrXml("width"));if(R==="Grid"){sa.show();aa.show()}else{sa.hide();aa.hide()}}});break;case CswViewEditor_WizardSteps.step3.step:if(P!==
undefined){P.CswAttrXml("viewname",ca.val());P.CswAttrXml("category",ea.val());if(P.CswAttrXml("visibility")!=="Property"){P.CswAttrXml("visibility",W.getvisibilityselect().val());D=W.getvisroleselect().val();isNullOrEmpty(D)||(D=D.substr(6));var G=W.getvisuserselect().val();isNullOrEmpty(G)||(G=G.substr(6));P.CswAttrXml("visibilityroleid",D);P.CswAttrXml("visibilityuserid",G)}P.CswAttrXml("formobile",ka.CswAttrDom("checked")==="true");P.CswAttrXml("width",aa.CswNumberTextBox("value"))}m(CswViewEditor_WizardSteps.step3.step,
ma);break;case CswViewEditor_WizardSteps.step4.step:m(CswViewEditor_WizardSteps.step4.step,na);break;case CswViewEditor_WizardSteps.step5.step:m(CswViewEditor_WizardSteps.step5.step,ta);break;case CswViewEditor_WizardSteps.step6.step:m(CswViewEditor_WizardSteps.step6.step,la.CswTable("cell",1,1))}},onPrevious:function(D){switch(D){case CswViewEditor_WizardSteps.step3.step:m(CswViewEditor_WizardSteps.step3.step,ma);break;case CswViewEditor_WizardSteps.step4.step:m(CswViewEditor_WizardSteps.step4.step,
na);break;case CswViewEditor_WizardSteps.step5.step:m(CswViewEditor_WizardSteps.step5.step,ta);break;case CswViewEditor_WizardSteps.step6.step:m(CswViewEditor_WizardSteps.step6.step,la.CswTable("cell",1,1))}},onBeforePrevious:function(D){return D!==CswViewEditor_WizardSteps.step2.step||confirm("You will lose any changes made to the current view if you continue.  Are you sure?")},onCancel:i.onCancel,onFinish:function(){var D=f(u);CswAjaxXml({url:i.SaveViewUrl,data:"ViewId="+D+"&ViewXml="+xmlToString(P),
success:function(){i.onFinish(D,e(u))}})}});s=w.CswWizard("div",CswViewEditor_WizardSteps.step1.step);s.append("A <em>View</em> controls the arrangement of information you see in a tree or grid.  Views are useful for defining a user's workflow or for creating elaborate search criteria. This wizard will take you step by step through the process of creating a new View or editing an existing View.<br/><br/>");s.append("Select a View to Edit:&nbsp;");var C=a('<span id="'+i.ID+'_selviewname" style="font-weight: bold"></span>').appendTo(s),
v=a("<div></div>").appendTo(s),u;d(b,i.viewid);t=s.CswTable({ID:i.ID+"_1_btntbl",width:"100%"});s=t.CswTable("cell",1,1);t=t.CswTable("cell",1,2);t.CswAttrDom("align","right");var A=a("<div></div>").appendTo(t);IsAdministrator({Yes:function(){A.CswInput("init",{ID:i.ID+"_all",type:CswInput_Types.checkbox,onChange:function(){d(b)}});A.append("Show Other Roles/Users")}});var E=s.CswButton({ID:i.ID+"_copyview",enabledText:"Copy View",disableOnClick:true,onclick:function(){var D=f(u);D!==""&&D!==undefined&&
CswAjaxJSON({url:i.CopyViewUrl,data:"{ ViewId: "+D+" }",success:function(G){d(b,G.copyviewid)},error:function(){E.CswButton("enable")}})}});E.CswButton("disable");var N=s.CswButton({ID:i.ID+"_deleteview",enabledText:"Delete View",disableOnClick:true,onclick:function(){var D=f(u);D!==""&&D!==undefined&&confirm("Are you sure you want to delete: "+h(u))&&CswAjaxJSON({url:i.DeleteViewUrl,data:"{ ViewId: "+D+" }",success:function(){d(b);E.CswButton("disable")},error:function(){N.CswButton("enable")}})}});
N.CswButton("disable");var S=s.CswButton({ID:i.ID+"_newview",enabledText:"Create New View",disableOnClick:false,onclick:function(){a.CswDialog("AddViewDialog",{onAddView:function(D){u=d(b,D)},onClose:function(){S.CswButton("enable")},makeVisibilitySelect:j})}});s=w.CswWizard("div",CswViewEditor_WizardSteps.step2.step).CswTable({ID:i.ID+"_tbl2",FirstCellRightAlign:true});s.CswTable("cell",1,1).append("View Name:");var ca=s.CswTable("cell",1,2).CswInput("init",{ID:i.ID+"_viewname",type:CswInput_Types.text});
s.CswTable("cell",2,1).append("Category:");var ea=s.CswTable("cell",2,2).CswInput("init",{ID:i.ID+"_category",type:CswInput_Types.text}),W;if(i.startingStep===1)W=j(s,3,"View Visibility:");s.CswTable("cell",4,1).append("For Mobile:");var ka=s.CswTable("cell",4,2).CswInput("init",{ID:i.ID+"_formobile",type:CswInput_Types.checkbox});s.CswTable("cell",5,1).append("Display Mode:");var wa=s.CswTable("cell",5,2).append('<span id="'+i.ID+'_displaymode"></span>'),sa=s.CswTable("cell",6,1).append("Grid Width (in characters):"),
aa=s.CswTable("cell",6,2);aa.CswNumberTextBox("init",{ID:i.ID+"_gridwidth",Value:"",MinValue:"1",MaxValue:"",Precision:"0",onchange:function(){}});s=w.CswWizard("div",CswViewEditor_WizardSteps.step3.step);s.append("Add relationships from the select boxes below:<br/><br/>");var ma=a("<div />").appendTo(s);s=w.CswWizard("div",CswViewEditor_WizardSteps.step4.step);s.append("Add properties from the select boxes below:<br/><br/>");var na=a("<div />").appendTo(s);s=w.CswWizard("div",CswViewEditor_WizardSteps.step5.step);
s.append("Add filters by selecting properties from the tree:<br/><br/>");var ta=a("<div />").appendTo(s);s=w.CswWizard("div",CswViewEditor_WizardSteps.step6.step);s.append("Select what you want to edit from the tree:<br/><br/>");var la=s.CswTable({ID:i.ID+"_6_tbl"}),P;return g}})(jQuery);var ViewBuilder_CssClasses={subfield_select:{name:"csw_viewbuilder_subfield_select"},filter_select:{name:"csw_viewbuilder_filter_select"},default_filter:{name:"csw_viewbuilder_default_filter"},filter_value:{name:"csw_viewbuilder_filter_value"},metadatatype_static:{name:"csw_viewbuilder_metadatatype_static"}};
(function(a){function g(d,f){var e="";e={proparbitraryid:"",filtarbitraryid:"",viewbuilderpropid:"",ID:""};f&&a.extend(e,f);return e=e.filtarbitraryid!==""&&e.filtarbitraryid!==undefined?makeId({ID:d+"_filtarbitraryid",prefix:e.ID,suffix:e.filtarbitraryid}):e.viewbuilderpropid!==""&&e.viewbuilderpropid!==undefined?makeId({ID:d+"_viewbuilderpropid",prefix:e.ID,suffix:e.viewbuilderpropid}):e.proparbitraryid!==""&&e.proparbitraryid!==undefined?makeId({ID:d+"_proparbitraryid",prefix:e.ID,suffix:e.proparbitraryid}):
e.ID!==""&&e.ID!==undefined?makeId({ID:d,prefix:e.ID}):d}var b={init:function(d){function f(l){e.$propsXml.CswAttrXml("viewbuilderpropid");var j=e.$propsXml.CswAttrXml("propname");if(e.includePropertyName){var m=h.CswTable("cell",e.propRow,e.firstColumn).empty(),n=g(j,l);m.CswDOM("span",{ID:n,value:j})}m=e.$propsXml.CswAttrXml("fieldtype");var i=e.$propsXml.children("defaultsubfield").CswAttrXml("filter");n=h.CswTable("cell",e.propRow,e.firstColumn+1).empty();var s=g("default_filter",l);i=n.CswDOM("span",
{ID:s,value:i,cssclass:ViewBuilder_CssClasses.default_filter.name}).CswAttrDom({align:"center"});e.advancedIsHidden||i.hide();i=g("subfield_select",l);var t=a(xmlToString(e.$propsXml.children("subfields").children("select"))).CswAttrDom("id",i).CswAttrDom("name",i).CswAttrDom("class",ViewBuilder_CssClasses.subfield_select.name).change(function(){var C={selectedSubfieldVal:a(this).val(),selectedFilterVal:""};a.extend(e,C);f(l)});e.selectedSubfieldVal!==""&&t.val(e.selectedSubfieldVal).CswAttrDom("selected",
true);n.append(t);e.advancedIsHidden&&t.hide();s=t.find(":selected").val();n=t.find(":selected").CswAttrDom("defaultvalue");i=h.CswTable("cell",e.propRow,e.firstColumn+2).empty();var w=g("filter_select",l);s=a(xmlToString(e.$propsXml.children("propertyfilters").children("subfield[column="+s+"]").children("select"))).CswAttrDom("id",w).CswAttrDom("name",w).CswAttrDom("class",ViewBuilder_CssClasses.filter_select.name).change(function(){var C=a(this);C={selectedSubfieldVal:t.val(),selectedFilterVal:C.val()};
a.extend(e,C);f(l)});e.selectedFilterVal!==""&&s.val(e.selectedFilterVal).CswAttrDom("selected",true);i.append(s);e.advancedIsHidden&&s.hide();i=h.CswTable("cell",e.propRow,e.firstColumn+3).empty();s=g("propfilter_input",l);if(m==="List")i.append(a(xmlToString(e.$propsXml.children("filtersoptions").children("select"))));else if(m==="Logical")i.CswTristateCheckBox("init",{ID:s,Checked:n});else{m={value:n,placeholder:""};if(m.value===""||m.value===undefined){e.placeholder=j;if(e.placeholder!==t.find(":selected").text())e.placeholder+=
"'s "+t.find(":selected").text()}i.CswInput("init",{ID:s,type:CswInput_Types.text,cssclass:ViewBuilder_CssClasses.filter_value.name,value:m.value,placeholder:m.placeholder,width:"200px",autofocus:e.autoFocusInput,autocomplete:"on"})}}var e={getNewPropsUrl:"/NbtWebApp/wsNBT.asmx/getViewPropFilterUI",viewid:"",viewxml:"",$propsXml:"",proparbitraryid:"",filtarbitraryid:"",viewbuilderpropid:"",ID:"",propRow:1,firstColumn:3,includePropertyName:false,advancedIsHidden:false,selectedSubfieldVal:"",selectedFilterVal:"",
autoFocusInput:false};d&&a.extend(e,d);var h=a(this),k={proparbitraryid:e.proparbitraryid,filtarbitraryid:e.filtarbitraryid,viewbuilderpropid:e.viewbuilderpropid,ID:e.ID};(e.$propsXml===""||e.$propsXml===undefined)&&e.proparbitraryid!==""&&e.proparbitraryid!==undefined?CswAjaxXml({url:e.getNewPropsUrl,data:"ViewXml="+e.viewxml+"&PropArbitraryId="+e.proparbitraryid,success:function(l){e.$propsXml=l.children("propertyfilters").children("property");k.filtarbitraryid=e.$propsXml.CswAttrXml("filtarbitraryid");
f(k)}}):f(k);return h},getFilterJson:function(d){var f=a(this),e={nodetypeorobjectclassid:"",relatedidtype:"",fieldtype:f.CswAttrXml("fieldtype"),ID:"",$parent:"",proparbitraryid:"",filtarbitraryid:f.CswAttrXml("filtarbitraryid"),viewbuilderpropid:""};d&&a.extend(e,d);var h={proparbitraryid:e.proparbitraryid,filtarbitraryid:e.filtarbitraryid,viewbuilderpropid:e.viewbuilderpropid,ID:e.ID},k=g("propfilter_input",h),l=g("filtersoptions_select",h);d=g("subfield_select",h);h=g("filter_select",h);var j=
{};k=e.$parent.CswInput("findandget",{ID:k});switch(e.fieldtype){case "Logical":l=k.CswTristateCheckBox("value");break;case "List":l=e.$parent.CswDOM("findelement",{ID:l}).find(":selected").val();break;default:l=k.val()}if(l!==""){d=e.$parent.CswDOM("findelement",{ID:d}).find(":selected").text();h=e.$parent.CswDOM("findelement",{ID:h}).find(":selected").val();f=f.CswAttrXml("proptype");j={nodetypeorobjectclassid:e.nodetypeorobjectclassid,relatedidtype:e.relatedidtype,proptype:f,viewbuilderpropid:e.viewbuilderpropid,
filtarbitraryid:e.filtarbitraryid,proparbitraryid:e.proparbitraryid,relatedidtype:e.relatedidtype,subfield:d,filter:h,filtervalue:l}}return j},makeFilter:function(d){var f={url:"/NbtWebApp/wsNBT.asmx/makeViewPropFilter",viewxml:"",filtJson:"",onSuccess:function(){}};d&&a.extend(f,d);CswAjaxXml({url:f.url,data:"ViewXml="+f.viewxml+"&PropFiltJson="+jsonToString(f.filtJson),success:function(e){f.onSuccess(e)}})}};a.fn.CswViewPropFilter=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,
1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswViewPropFilter")}})(jQuery);(function(a){function g(d){var f={ID:"",ClickDelay:300,iconurl:"",type:"",viewid:"",viewname:"",viewmode:"",actionid:"",actionurl:"",reportid:"",onSelect:function(){},$selectdiv:""};d&&a.extend(f,d);d=a("<div></div>");var e=d.CswTable("init",{ID:f.ID+"selectedtbl"}),h=e.CswTable("cell",1,1);h=a("<div />").appendTo(h);h.css("background-image",f.iconurl);h.css("width","18px");h.css("height","18px");e.CswTable("cell",1,2).append(f.viewname);f.$selectdiv.CswComboBox("TopContent",d);f.$selectdiv.CswAttrDom("selectedValue",
f.viewid);setTimeout(function(){f.$selectdiv.CswComboBox("toggle")},f.ClickDelay);f.onSelect({iconurl:f.iconurl,type:f.type,viewid:f.viewid,viewname:f.viewname,viewmode:f.viewmode,actionid:f.actionid,actionurl:f.actionurl,reportid:f.reportid})}var b={init:function(d){var f={ID:"",onSelect:function(){},onSuccess:function(){},ClickDelay:300};d&&a.extend(f,d);var e=a(this);e.contents().remove();$viewtreediv=a("<div/>");e.CswComboBox("init",{ID:f.ID+"_combo",TopContent:"Select a View",SelectContent:$viewtreediv,
Width:"266px"});$viewtreediv.CswViewTree({onSelect:function(h){g({ID:f.ID,ClickDelay:f.ClickDelay,iconurl:h.iconurl,type:h.type,viewid:h.viewid,viewname:h.viewname,viewmode:h.viewmode,actionid:h.actionid,actionurl:h.actionurl,reportid:h.reportid,onSelect:f.onSelect,$selectdiv:e})},onSuccess:f.onSuccess});return e},value:function(){return a(this).CswAttrDom("selectedValue")}};a.fn.CswViewSelect=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||
!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswViewSelect")}})(jQuery);(function(a){a.fn.CswViewTree=function(g){var b={ViewUrl:"/NbtWebApp/wsNBT.asmx/getViewTree",viewid:"",onSelect:function(){},onSuccess:function(){}};g&&a.extend(b,g);var d=a(this);d.contents().remove();CswAjaxXml({url:b.ViewUrl,data:"",success:function(f){var e=f.find("types").text();e=a.parseJSON(e);f=f.find("tree").children("root");f=xmlToString(f);d.jstree({xml_data:{data:f,xsl:"nest"},ui:{select_limit:1},core:{initially_open:["root"]},types:{types:e},plugins:["themes","xml_data","ui","types"]}).bind("select_node.jstree",
function(){var h=jsTreeGetSelected(d);h={iconurl:h.iconurl,type:h.$item.CswAttrXml("viewtype"),viewid:h.$item.CswAttrXml("viewid"),viewname:h.text,viewmode:h.$item.CswAttrXml("viewmode"),actionid:h.$item.CswAttrXml("actionid"),actionurl:h.$item.CswAttrXml("actionurl"),reportid:h.$item.CswAttrXml("reportid")};b.onSelect(h)});b.onSuccess()}});return this}})(jQuery);(function(a){function g(e){var h={cellset:"",row:"",column:"",RemoveWelcomeItemUrl:"",onSuccess:function(){}};e&&a.extend(h,e);e=a(h.cellset[2][1]);if(e.length>0){e=e.children("input").CswAttrDom("welcomeid");CswAjaxJSON({url:h.RemoveWelcomeItemUrl,data:'{ "RoleId": "", "WelcomeId": "'+e+'" }',success:function(){h.onSuccess()}})}}function b(e){var h={AddWelcomeItemUrl:"",type:"",viewid:"",nodetypeid:"",text:"",iconfilename:"",onSuccess:function(){},onError:function(){}};e&&a.extend(h,e);CswAjaxJSON({url:h.AddWelcomeItemUrl,
data:'{ "RoleId": "", "Type": "'+h.type+'", "ViewId": "'+h.viewid+'", "NodeTypeId": "'+h.nodetypeid+'", "Text": "'+h.text+'", "IconFileName": "'+h.iconfilename+'" }',success:function(){h.onSuccess()},error:o.onError})}function d(e,h,k,l){h=a(h[2][1]);if(h.length>0){h=h.children("input").CswAttrDom("welcomeid");CswAjaxJSON({url:e,data:'{ "RoleId": "", "WelcomeId": "'+h+'", "NewRow": "'+k+'", "NewColumn": "'+l+'" }',success:function(){}})}}var f={initTable:function(e){var h={Url:"/NbtWebApp/wsNBT.asmx/getWelcomeItems",
MoveWelcomeItemUrl:"/NbtWebApp/wsNBT.asmx/moveWelcomeItems",RemoveWelcomeItemUrl:"/NbtWebApp/wsNBT.asmx/deleteWelcomeItem",onLinkClick:function(){},onSearchClick:function(){},onAddClick:function(){},onAddComponent:function(){}};e&&a.extend(h,e);var k=a(this);CswAjaxXml({url:h.Url,data:"RoleId=",success:function(l){var j=a('<div id="welcomediv"></div>').appendTo(k).css("text-align","center").css("font-size","1.2em").CswLayoutTable("init",{ID:"welcometable",cellset:{rows:2,columns:1},TableCssClass:"WelcomeTable",
cellpadding:10,align:"center",onSwap:function(m,n){var i={cellset:n.cellset,row:n.row,column:n.column,swapcellset:n.swapcellset,swaprow:n.swaprow,swapcolumn:n.swapcolumn,MoveWelcomeItemUrl:h.MoveWelcomeItemUrl},s={cellset:"",row:"",column:"",swapcellset:"",swaprow:"",swapcolumn:"",MoveWelcomeItemUrl:""};i&&a.extend(s,i);d(s.MoveWelcomeItemUrl,s.cellset,s.swaprow,s.swapcolumn);d(s.MoveWelcomeItemUrl,s.swapcellset,s.row,s.column)},showConfigButton:true,showAddButton:true,showRemoveButton:true,onAddClick:function(){a.CswDialog("AddWelcomeItemDialog",
{onAdd:h.onAddComponent})},onRemove:function(m,n){g({cellset:n.cellset,row:n.row,column:n.column,RemoveWelcomeItemUrl:h.RemoveWelcomeItemUrl})}});l.children().each(function(){var m=a(this),n=j.CswLayoutTable("cellset",m.CswAttrXml("displayrow"),m.CswAttrXml("displaycol")),i=n[1][1];n=n[2][1];m.CswAttrXml("buttonicon")!==undefined&&m.CswAttrXml("buttonicon")!==""&&i.append(a('<a href=""><img border="0" src="'+m.CswAttrXml("buttonicon")+'"/></a>'));var s={type:m.CswAttrXml("type"),viewmode:m.CswAttrXml("viewmode"),
itemid:m.CswAttrXml("itemid"),text:m.CswAttrXml("text"),iconurl:m.CswAttrXml("iconurl"),viewid:m.CswAttrXml("viewid"),actionid:m.CswAttrXml("actionid"),reportid:m.CswAttrXml("reportid"),linktype:m.CswAttrXml("linktype")};switch(s.linktype){case "Link":n.append(a('<a href="">'+s.text+"</a>"));n.find("a").click(function(){h.onLinkClick(s);return false});i.find("a").click(function(){h.onLinkClick(s);return false});break;case "Search":n.append(a('<a href="">'+s.text+"</a>"));n.find("a").click(function(){h.onSearchClick(s);
return false});i.find("a").click(function(){h.onSearchClick(s);return false});break;case "Text":n.append("<span>"+s.text+"</span>");break;case "Add":n.append(a('<a href="">'+s.text+"</a>"));n.find("a").click(function(){h.onAddClick(m.CswAttrXml("nodetypeid"));return false});i.find("a").click(function(){h.onAddClick(m.CswAttrXml("nodetypeid"));return false})}n.CswInput("init",{ID:m.CswAttrXml("welcomeid"),type:CswInput_Types.hidden}).CswAttrDom("welcomeid",m.CswAttrXml("welcomeid"))})}})},getAddItemForm:function(e){var h=
{AddWelcomeItemUrl:"/NbtWebApp/wsNBT.asmx/addWelcomeItem",onAdd:function(){}};e&&a.extend(h,e);e=a(this).CswTable("init",{ID:"addwelcomeitem_tbl"});a("<span>Type:</span>").appendTo(e.CswTable("cell",1,1));var k=a('<select id="welcome_type" name="welcome_type"></select>').appendTo(e.CswTable("cell",1,2));k.append('<option value="Add" selected>Add</option>');k.append('<option value="Link">Link</option>');k.append('<option value="Search">Search</option>');k.append('<option value="Text">Text</option>');
var l=a("<span>View:</span>").appendTo(e.CswTable("cell",2,1)).hide(),j=e.CswTable("cell",2,2).CswViewSelect({ID:"welcome_viewsel"}).hide(),m=a("<span>Add New:</span>").appendTo(e.CswTable("cell",3,1)),n=e.CswTable("cell",3,2).CswNodeTypeSelect({ID:"welcome_ntsel"});a("<span>Text:</span>").appendTo(e.CswTable("cell",4,1));var i=e.CswTable("cell",4,2).CswInput("init",{ID:"welcome_text",type:CswInput_Types.text}),s=a("<span>Use Button:</span>").appendTo(e.CswTable("cell",5,1)),t=a('<select id="welcome_button" />').appendTo(e.CswTable("cell",
5,2));t.append('<option value="blank.gif"></option>');var w=a('<img id="welcome_btnimg" />').appendTo(e.CswTable("cell",6,2)),C=e.CswTable("cell",7,2).CswButton({ID:"welcome_add",enabledText:"Add",disabledText:"Adding",onclick:function(){b({AddWelcomeItemUrl:h.AddWelcomeItemUrl,type:k.val(),viewid:j.CswViewSelect("value"),nodetypeid:n.CswNodeTypeSelect("value"),text:i.val(),iconfilename:t.val(),onSuccess:h.onAdd,onError:function(){C.CswButton("enable")}})}});e.CswTable("cell",7,2).append(C);t.change(function(){w.CswAttrDom("src",
"Images/biggerbuttons/"+t.val())});k.change(function(){var v={$typeselect:k,$viewselect_label:l,$viewselect:j,$ntselect_label:m,$ntselect:n,$buttonsel_label:s,$buttonsel:t,$buttonimg:w},u={$typeselect:"",$viewselect_label:"",$viewselect:"",$ntselect_label:"",$ntselect:"",$buttonsel_label:"",$buttonsel:"",$buttonimg:""};v&&a.extend(u,v);switch(u.$typeselect.val()){case "Add":u.$viewselect_label.hide();u.$viewselect.hide();u.$ntselect_label.show();u.$ntselect.show();u.$buttonsel_label.show();u.$buttonsel.show();
u.$buttonimg.show();break;case "Link":u.$viewselect_label.show();u.$viewselect.show();u.$ntselect_label.hide();u.$ntselect.hide();u.$buttonsel_label.show();u.$buttonsel.show();u.$buttonimg.show();break;case "Search":u.$viewselect_label.show();u.$viewselect.show();u.$ntselect_label.hide();u.$ntselect.hide();u.$buttonsel_label.show();u.$buttonsel.show();u.$buttonimg.show();break;case "Text":u.$viewselect_label.hide();u.$viewselect.hide();u.$ntselect_label.hide();u.$ntselect.hide();u.$buttonsel_label.hide();
u.$buttonsel.hide();u.$buttonimg.hide()}});CswAjaxXml({url:"/NbtWebApp/wsNBT.asmx/getWelcomeButtonIconList",success:function(v){v.children().each(function(){var u=a(this).CswAttrDom("filename");u!=="blank.gif"&&t.append('<option value="'+u+'">'+u+"</option>")})}})}};a.fn.CswWelcome=function(e){if(f[e])return f[e].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof e==="object"||!e)return f.init.apply(this,arguments);else a.error("Method "+e+" does not exist on CswWelcome")}})(jQuery);(function(a){function g(f){return parseInt(f.find(".CswWizard_StepLinkDivSelected").CswAttrDom("stepno"))}function b(f,e){var h=f.CswAttrDom("stepcount"),k=f.CswAttrDom("startingstep");if(e>0&&e<=h){f.find(".CswWizard_StepLinkDiv").removeClass("CswWizard_StepLinkDivSelected");f.find(".CswWizard_StepLinkDiv[stepno="+e+"]").addClass("CswWizard_StepLinkDivSelected");f.find(".CswWizard_StepDiv").hide();f.find(".CswWizard_StepDiv[stepno="+e+"]").show();var l=a("#"+f.CswAttrDom("id")+"_prev");e<=k?l.CswButton("disable"):
l.CswButton("enable");k=a("#"+f.CswAttrDom("id")+"_next");e>=h?k.CswButton("disable"):k.CswButton("enable")}}var d={init:function(f){var e={ID:"",Title:"A Wizard",StepCount:1,Steps:{1:"Default"},StartingStep:1,SelectedStep:1,FinishText:"Finish",onNext:function(){},onPrevious:function(){},onBeforeNext:function(){return true},onBeforePrevious:function(){return true},onFinish:function(){},onCancel:function(){}};f&&a.extend(e,f);if(e.StartingStep>e.SelectedStep)e.SelectedStep=e.StartingStep;var h=a(this).CswTable({ID:e.ID,
TableCssClass:"CswWizard_WizardTable"});h.CswAttrDom("stepcount",e.StepCount);h.CswAttrDom("startingstep",e.StartingStep);h.CswTable("cell",1,1).addClass("CswWizard_TitleCell").CswAttrDom("colspan",2).append(e.Title);f=h.CswTable("cell",2,1).CswAttrDom("rowspan",2).addClass("CswWizard_IndexCell");for(var k=h.CswTable("cell",2,2).addClass("CswWizard_StepsCell"),l=h.CswTable("cell",3,1).addClass("CswWizard_ButtonsCell"),j=1;j<=e.StepCount;j++){var m=e.Steps[j];a('<div class="CswWizard_StepLinkDiv" stepno="'+
j+'">'+j+".&nbsp;"+m+"</div>").appendTo(f);a('<div class="CswWizard_StepDiv" id="'+e.ID+"_"+j+'" stepno="'+j+'" ><span class="CswWizard_StepTitle">'+m+'</span><br/></br><div id="'+e.ID+"_"+j+'_content"></div></div>').appendTo(k)}k=l.CswTable({ID:e.ID+"_btntbl",width:"100%"});f=k.CswTable("cell",1,1).CswAttrDom("align","right").CswAttrDom("width","65%");k=k.CswTable("cell",1,2).CswAttrDom("align","right").CswAttrDom("width","35%");f.CswButton("init",{ID:e.ID+"_prev",enabledText:"< Previous",disableOnClick:false,
onclick:function(){var n=g(h);if(e.onBeforePrevious(n)){b(h,n-1);e.onPrevious(n-1)}}});f.CswButton("init",{ID:e.ID+"_next",enabledText:"Next >",disableOnClick:false,onclick:function(){var n=g(h);if(e.onBeforeNext(n)){b(h,n+1);e.onNext(n+1)}}});f.CswButton("init",{ID:e.ID+"_finish",enabledText:e.FinishText,onclick:e.onFinish});k.CswButton("init",{ID:e.ID+"_cancel",enabledText:"Cancel",onclick:e.onCancel});b(h,e.SelectedStep);e.onNext(e.SelectedStep);return h},div:function(f){return a(this).find(".CswWizard_StepDiv[stepno="+
f+"] div")},button:function(f,e){var h=a(this);switch(f){case "previous":a("#"+h.CswAttrDom("id")+"_prev").CswButton(e);break;case "next":a("#"+h.CswAttrDom("id")+"_next").CswButton(e);break;case "finish":a("#"+h.CswAttrDom("id")+"_finish").CswButton(e);break;case "cancel":a("#"+h.CswAttrDom("id")+"_cancel").CswButton(e)}}};a.fn.CswWizard=function(f){if(d[f])return d[f].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof f==="object"||!f)return d.init.apply(this,arguments);else a.error("Method "+
f+" does not exist on CswWizard")}})(jQuery);function CswAjaxJSON(a){var g={url:"",data:"",onloginfail:function(){},success:function(){},error:function(){},formobile:false};a&&$.extend(g,a);$.ajax({type:"POST",url:g.url,dataType:"json",contentType:"application/json; charset=utf-8",data:g.data,success:function(b,d,f){b=$.parseJSON(b.d);if(b.error!==undefined){_handleAjaxError(f,{message:b.error.message,detail:b.error.detail},"");g.error()}else if(g.formobile){f=tryParseString(b.AuthenticationStatus,"");_handleAuthenticationStatus({status:f,success:g.success(b),
failure:g.onloginfail})}else g.success(b)},error:function(b,d,f){_handleAjaxError(b,{message:"A Webservices Error Occurred",detail:d},f);g.error()}})}
function CswAjaxXml(a){var g={url:"",data:"",onloginfail:function(){},success:function(){},error:function(){},formobile:false};a&&$.extend(g,a);g.url!==""&&$.ajax({type:"POST",url:g.url,dataType:"xml",data:g.data,success:function(b,d,f){d=$(f.responseXML);b=d.children().first();if(b.first().get(0).nodeName==="error"){_handleAjaxError(f,{message:b.CswAttrXml("message"),detail:b.CswAttrXml("detail")},"");g.error()}else if(g.formobile){f=tryParseString(d.find("AuthenticationStatus").text(),"");_handleAuthenticationStatus({status:f,
success:g.success(b),failure:g.onloginfail})}else g.success(b)},error:function(b,d,f){_handleAjaxError(b,{message:"A Webservices Error Occurred",detail:d},f);g.error()}})}function _handleAjaxError(a,g){var b=$("#ErrorDiv");b.length>0?b.CswErrorMessage({message:g.message,detail:g.detail}):log(g.message+"; "+g.detail)}
function _handleAuthenticationStatus(){var a={status:"",success:function(){},failure:function(){}};if(!isNullOrEmpty(a.status)&&a.status!=="Authenticated"){alert(a.status);a.failure()}else a.success()}function xmlToString(a){var g="";if(a!==""&&a!==undefined){(g=a.get(0).xml)||(g=(new XMLSerializer).serializeToString(a.get(0)));g||$.error("Browser does not support XML operations necessary to convert to string")}return g}
function jsonToString(a){if(typeof a==="object"){var g="{",b=true,d;for(d in a)if(a.hasOwnProperty(d)){b||(g+=",");g+=" '"+d+"': ";g+=jsonToString(a[d]);b=false}g+="}"}else g="'"+safeJsonParam(a)+"'";return g}function safeJsonParam(a){var g="";if(a!==undefined)g=a.toString().replace(/'/g,"\\'");return g}var changed=0,checkChangesEnabled=true;function setChanged(){if(checkChangesEnabled)changed=1}function unsetChanged(){if(checkChangesEnabled)changed=0}
function checkChanges(){if(checkChangesEnabled&&changed===1)return"If you continue, you will lose any changes made on this page.  To save your changes, click Cancel and then click the Save button."}
function manuallyCheckChanges(){var a=true;if(checkChangesEnabled&&changed===1)if(a=confirm("Are you sure you want to navigate away from this page?\n\nIf you continue, you will lose any changes made on this page.  To save your changes, click Cancel and then click the Save button.\n\nPress OK to continue, or Cancel to stay on the current page."))changed=0;return a}
function initCheckChanges(){window.onbeforeunload=window.onbeforeunload!==null&&window.onbeforeunload!==undefined?function(){var a=window.onbeforeunload;return a()?checkChanges():false}:function(){return checkChanges()}}window.onload=window.onload!==null&&window.onload!==undefined?new Function("initCheckChanges(); var f="+window.onload+"; return f();"):function(){initCheckChanges()};
function IsAdministrator(a){var g={Yes:function(){},No:function(){}};a&&$.extend(g,a);CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/isAdministrator",success:function(b){b.Administrator==="true"?g.Yes():g.No()}})}function copyNode(a){var g={nodeid:"",nodekey:"",onSuccess:function(){},onError:function(){}};a&&$.extend(g,a);CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/CopyNode",data:'{ "NodePk":"'+g.nodeid+'" }',success:function(b){g.onSuccess(b.NewNodeId,"")},error:g.onError})}
function deleteNodes(a){var g={nodeids:[],nodekeys:[],onSuccess:function(){},onError:function(){}};a&&$.extend(g,a);datastr=JSON.stringify({NodePks:g.nodeids,NodeKeys:g.nodekeys},"'");CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/DeleteNodes",data:datastr,success:function(){g.onSuccess("","")},error:g.onError})}
function jsTreeGetSelected(a){var g=a.CswAttrDom("id");$SelectedItem=a.jstree("get_selected");return{iconurl:$SelectedItem.children("a").children("ins").css("background-image"),id:$SelectedItem.CswAttrDom("id").substring(g.length),text:$SelectedItem.children("a").first().text().trim(),$item:$SelectedItem}}function GoHome(){$.CswCookie("clear",CswCookieName.CurrentView.ViewId);$.CswCookie("clear",CswCookieName.CurrentView.ViewMode);window.location="NewMain.html"}
function HandleMenuItem(a){var g={$ul:"",$itemxml:"",onLogout:function(){},onAlterNode:function(){},onSearch:{onViewSearch:function(){},onGenericSearch:function(){}},onMultiEdit:function(){},onEditView:function(){},Multi:false,NodeCheckTreeId:""};a&&$.extend(g,a);if(g.$itemxml.CswAttrXml("href")!==undefined&&g.$itemxml.CswAttrXml("href")!=="")a=$('<li><a href="'+g.$itemxml.CswAttrXml("href")+'">'+g.$itemxml.CswAttrXml("text")+"</a></li>").appendTo(g.$ul);else if(g.$itemxml.CswAttrXml("popup")!==undefined&&
g.$itemxml.CswAttrXml("popup")!=="")a=$('<li class="headermenu_dialog"><a href="#">'+g.$itemxml.CswAttrXml("text")+"</a></li>").appendTo(g.$ul).click(function(){$.CswDialog("OpenDialog",g.$itemxml.CswAttrXml("text"),g.$itemxml.CswAttrXml("popup"));return false});else if(g.$itemxml.CswAttrXml("action")!==undefined&&g.$itemxml.CswAttrXml("action")!==""){a=$('<li><a href="#">'+g.$itemxml.CswAttrXml("text")+"</a></li>").appendTo(g.$ul);var b=a.children("a");switch(g.$itemxml.CswAttrXml("action")){case "About":b.click(function(){$.CswDialog("AboutDialog");
return false});break;case "AddNode":b.click(function(){$.CswDialog("AddNodeDialog",{nodetypeid:g.$itemxml.CswAttrXml("nodetypeid"),relatednodeid:g.$itemxml.CswAttrXml("relatednodeid"),onAddNode:g.onAlterNode});return false});break;case "DeleteNode":b.click(function(){$.CswDialog("DeleteNodeDialog",{nodename:g.$itemxml.CswAttrXml("nodename"),nodeid:g.$itemxml.CswAttrXml("nodeid"),onDeleteNode:g.onAlterNode,NodeCheckTreeId:g.NodeCheckTreeId,Multi:g.Multi});return false});break;case "editview":b.click(function(){g.onEditView(g.$itemxml.CswAttrXml("viewid"));
return false});break;case "CopyNode":b.click(function(){$.CswDialog("CopyNodeDialog",{nodename:g.$itemxml.CswAttrXml("nodename"),nodeid:g.$itemxml.CswAttrXml("nodeid"),onCopyNode:g.onAlterNode});return false});break;case "PrintLabel":b.click(function(){$.CswDialog("PrintLabelDialog",{nodeid:g.$itemxml.CswAttrXml("nodeid"),propid:g.$itemxml.CswAttrXml("propid")});return false});break;case "Home":b.click(function(){GoHome();return false});break;case "Logout":b.click(function(){g.onLogout();return false});
break;case "Profile":b.click(function(){$.CswDialog("EditNodeDialog",{nodeid:g.$itemxml.CswAttrXml("userid"),cswnbtnodekey:"",filterToPropId:"",title:"User Profile",onEditNode:function(){}});return false});break;case "ViewSearch":b.click(function(){g.onSearch.onViewSearch()});break;case "GenericSearch":b.click(function(){g.onSearch.onGenericSearch()});break;case "multiedit":b.click(g.onMultiEdit)}}else a=$("<li>"+g.$itemxml.CswAttrXml("text")+"</li>").appendTo(g.$ul);return a}
function openPopup(a,g,b){a=window.open(a,null,"height="+g+", width="+b+", status=no, resizable=yes, scrollbars=yes, toolbar=yes, location=no, menubar=yes");a.focus();return a}function validateTime(a){var g=true,b=/^(\d?\d):(\d\d)\s?([APap][Mm])?$/g.exec(a);if(b===null)g=false;else{a=parseInt(b[1]);b=parseInt(b[2]);if(a<0||a>=24||b<0||b>=60)g=false}return g}function validateFloatMinValue(a,g){var b=parseFloat(a),d=parseFloat(g),f=true;if(d!==undefined)if(b===undefined||b<d)f=false;return f}
function validateFloatMaxValue(a,g){var b=parseFloat(a),d=parseFloat(g),f=true;if(d!==undefined)if(b===undefined||b>d)f=false;return f}function validateFloatPrecision(a,g){var b=true,d;d=g>0?/^\-?\d*\.?\d*$/g:/^\-?\d*$/g;if(b&&!d.test(a))b=false;return b}function validateInteger(a){return/^\-?\d*$/g.test(a)}function startsWith(a,g){return a.substr(0,g.length)===g}function getTimeString(a){var g="",b=a.getHours();a=a.getMinutes();if(a<10)a="0"+a;g=b%12+":"+a+" ";g+=b>11?"PM":"AM";return g}
function makeId(a){var g={ID:"",prefix:"",suffix:"",Delimiter:"_"};a&&$.extend(g,a);a=g.ID;if(g.prefix!==""&&a!=="")a=g.prefix+g.Delimiter+a;if(g.suffix!==""&&a!=="")a+=g.Delimiter+g.suffix;return a}function isNullOrEmpty(a){return a===""||a===undefined||a===null}function isNumeric(a){var g=false;if(!isNullOrEmpty(a))if(parseInt(a)!==NaN)g=true;return g}
function isTrue(a){var g;if(a==="true"||a===true||a==="1"||a===1)g=true;else if(a==="false"||a===false||a==="0"||a===0)g=false;else log("isTrue() was called on "+a+", which is not a boolean.");return g}function tryParseString(a,g){var b=g;isNullOrEmpty(a)||(b=a);return b}function iterate(a){var g,b;for(b in a)g=g+b+"="+a[b]+"<br><br>";a=window.open("","popup");a!==null?a.document.write(g):console.log("iterate() error: No popup!")}function log(a){try{console.log(a)}catch(g){alert(a)}}
if(typeof String.prototype.trim!=="function")String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("barcode").text().trim();if(b.ReadOnly)d.append(f);else{d=d.CswTable("init",{ID:b.ID+"_tbl"});f=d.CswTable("cell",1,1).CswInput("init",{ID:b.ID,type:CswInput_Types.text,cssclass:"textinput",onChange:b.onchange,value:f});d=d.CswTable("cell",1,2);a("<div/>").appendTo(d).CswImageButton({ButtonType:CswImageButton_ButtonType.Print,AlternateText:"",ID:b.ID+"_print",onClick:function(){a.CswDialog("PrintLabelDialog",
{nodeid:b.nodeid,propid:b.ID});return CswImageButton_ButtonType.None}});b.Required&&f.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("barcode").text(d.val())}};a.fn.CswFieldTypeBarcode=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeBarcode")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();b=b.$propxml.children("value").text().trim();d.append(b)},save:function(){}};a.fn.CswFieldTypeComposite=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeComposite")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("value").text().trim();if(f==="1/1/0001")f="";if(b.ReadOnly)d.append(f);else{d=d.CswInput("init",{ID:b.ID,type:CswInput_Types.text,value:f,onChange:b.onchange,cssclass:"textinput date"});d.datepicker();b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("value").text(d.val())}};a.fn.CswFieldTypeDate=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,
1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeDate")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("href").text().trim(),e=b.$propxml.children("name").text().trim(),h=d.CswTable("init",{ID:b.ID+"_tbl"});d=h.CswTable("cell",1,1);var k=h.CswTable("cell",1,2);h=h.CswTable("cell",1,3);d.append('<a href="'+f+'" target="_blank">'+e+"</a>");if(!b.ReadOnly){a("<div/>").appendTo(k).CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID+"_edit",onClick:function(){a.CswDialog("FileUploadDialog",
{url:"/NbtWebApp/wsNBT.asmx/fileForProp",params:{PropId:b.$propxml.CswAttrXml("id")},onSuccess:function(){b.onReload()}});return CswImageButton_ButtonType.None}});a("<div/>").appendTo(h).CswImageButton({ButtonType:CswImageButton_ButtonType.Clear,AlternateText:"Clear",ID:b.ID+"_clr",onClick:function(){confirm("Are you sure you want to clear this file?")&&CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/clearProp",data:'{ "PropId": "'+b.$propxml.CswAttrXml("id")+'", "IncludeBlob": "true" }',success:function(){b.onReload()}});
return CswImageButton_ButtonType.None}})}},save:function(){}};a.fn.CswFieldTypeFile=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeFile")}})(jQuery);(function(a){var g={init:function(b){function d(i){var s={reinit:true};i&&a.extend(i,s);j.CswNodeGrid("init",i)}var f=a(this);f.empty();var e=makeId({prefix:b.ID,ID:"grid_as_fieldtype_menu"});e=a('<div id="'+e+'" name="'+e+'"></div>');var h=makeId({prefix:b.ID,ID:"grid_as_fieldtype_search"}),k=a('<div id="'+h+'" name="'+h+'"></div>'),l=makeId({prefix:b.ID,ID:"grid_as_fieldtype"}),j=a('<div id="'+l+'" name="'+l+'"></div>'),m=b.$propxml.children("viewid").text().trim(),n={viewid:m,nodeid:b.nodeid,cswnbtnodekey:b.cswnbtnodekey,
readonly:b.ReadOnly,reinit:false,onEditNode:function(){d(n)},onDeleteNode:function(){d(n)}};j.CswNodeGrid("init",n);e.CswMenuMain({viewid:m,nodeid:b.nodeid,cswnbtnodekey:b.cswnbtnodekey,onAddNode:function(){d(n)},onSearch:{onViewSearch:function(){k.empty();k.CswSearch({viewid:m,cswnbtnodekey:b.cswnbtnodekey,ID:h,onSearchSubmit:function(){d(n)}});k.is(":hidden")?k.show():k.hide()},onGenericSearch:function(){}},onEditView:function(){b.onEditView(m)}});f.append(e,a("<br/><br/>"),j)},save:function(){}};
a.fn.CswFieldTypeGrid=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeGrid")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("href").text().trim(),e=b.$propxml.children("href").CswAttrXml("width"),h=b.$propxml.children("href").CswAttrXml("height"),k=b.$propxml.children("name").text().trim(),l=d.CswTable("init",{ID:b.ID+"_tbl"});d=l.CswTable("cell",1,1).CswAttrDom("colspan","3");var j=l.CswTable("cell",2,1).CswAttrDom("width",e-36),m=l.CswTable("cell",2,2).CswAttrDom("align","right");l=l.CswTable("cell",2,3).CswAttrDom("align",
"right");if(k!==""){a('<a href="'+f+'" target="_blank"><img src="'+f+'" alt="'+k+'" width="'+e+'" height="'+h+'"/></a>').appendTo(d);j.append('<a href="'+f+'" target="_blank">'+k+"</a>")}if(!b.ReadOnly){a("<div/>").appendTo(m).CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID+"_edit",onClick:function(){a.CswDialog("FileUploadDialog",{url:"/NbtWebApp/wsNBT.asmx/fileForProp",params:{PropId:b.$propxml.CswAttrXml("id")},onSuccess:function(){b.onReload()}});return CswImageButton_ButtonType.None}});
a("<div/>").appendTo(l).CswImageButton({ButtonType:CswImageButton_ButtonType.Clear,AlternateText:"Clear",ID:b.ID+"_clr",onClick:function(){confirm("Are you sure you want to clear this image?")&&CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/clearProp",data:'{ "PropId": "'+b.$propxml.CswAttrXml("id")+'", "IncludeBlob": "true" }',success:function(){b.onReload()}});return CswImageButton_ButtonType.None}})}},save:function(){}};a.fn.CswFieldTypeImage=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,
1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeImage")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("text").text().trim(),e=b.$propxml.children("href").text().trim();if(b.ReadOnly)d.append(Value);else{var h=d.CswTable("init",{ID:b.ID+"_tbl"});a('<a href="'+e+'" target="_blank">'+f+"</a>&nbsp;&nbsp;").appendTo(h.CswTable("cell",1,1));a("<div/>").appendTo(h.CswTable("cell",1,2)).CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID+"_edit",Required:b.Required,onClick:function(){k.show();
return CswImageButton_ButtonType.None}});var k=d.CswTable("init",{ID:b.ID+"_edittbl"}).hide();a("<span>Text</span>").appendTo(k.CswTable("cell",1,1));d=k.CswTable("cell",1,2).CswInput("init",{ID:b.ID+"_text",type:CswInput_Types.text,value:f,onChange:b.onchange});a("<span>URL</span>").appendTo(k.CswTable("cell",2,1));f=k.CswTable("cell",2,2).CswInput("init",{ID:b.ID+"_href",type:CswInput_Types.text,value:e,onChange:b.onchange});if(b.Required&&e===""){k.show();d.addClass("required");f.addClass("required")}}},
save:function(b){var d=b.$propdiv.find("#"+b.ID+"_text"),f=b.$propdiv.find("#"+b.ID+"_href");b.$propxml.children("text").text(d.val());b.$propxml.children("href").text(f.val())}};a.fn.CswFieldTypeLink=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeLink")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("value").text().trim(),e=b.$propxml.children("options").text().trim();if(b.ReadOnly)d.append(f);else{d=a('<select id="'+b.ID+'" name="'+b.ID+'" class="selectinput" />"').appendTo(d).change(b.onchange);e=e.split(",");for(var h=0;h<e.length;h++)d.append('<option value="'+e[h]+'">'+e[h]+"</option>");d.val(f);b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("select");b.$propxml.children("value").text(d.val())}};
a.fn.CswFieldTypeList=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeList")}})(jQuery);(function(a){a.fn.CswFieldTypeLocation=function(g){function b(f,e,h,k,l){if(e==="root")e="";f.CswComboBox("TopContent",h);if(f.val()!==e){f.val(e);l()}setTimeout(function(){f.CswComboBox("close")},300)}var d={init:function(f){var e=a(this);e.contents().remove();var h=f.$propxml.children("nodeid").text().trim(),k=f.$propxml.children("nodekey").text().trim(),l=f.$propxml.children("name").text().trim(),j=f.$propxml.children("path").text().trim(),m=f.$propxml.children("viewid").text().trim();if(f.ReadOnly)e.append(j);
else{e=e.CswTable("init",{ID:f.ID+"_tbl"});var n=e.CswTable("cell",1,1);n.CswAttrDom("colspan","2");n.append(j+"<br/>");j=e.CswTable("cell",2,1);var i=a('<div class="locationselect" value="'+h+'"/>').appendTo(j);h=a("<div />").CswNodeTree("init",{ID:f.ID,viewid:m,nodeid:h,cswnbtnodekey:k,onSelectNode:function(s){b(i,s.nodeid,s.nodename,s.iconurl,f.onchange)},SelectFirstChild:false,UsePaging:false});i.CswComboBox("init",{ID:f.ID+"_combo",TopContent:l,SelectContent:h,Width:"266px"})}},save:function(f){var e=
f.$propdiv.find(".locationselect");f.$propxml.children("nodeid").text(e.val())}};if(d[g])return d[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return d.init.apply(this,arguments);else a.error("Method "+g+" does not exist on CswFieldTypeLocation")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();b.$propxml.children("value").text().trim();d.append("[Not Implemented Yet]")},save:function(){}};a.fn.CswFieldTypeLocationContents=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeLocationContents")}})(jQuery);(function(a){var g={init:function(b){$Div=a(this);b={Checked:b.$propxml.children("checked").text().trim(),Required:b.Required,ReadOnly:b.ReadOnly,onchange:b.onchange};$Div.CswTristateCheckBox("init",b)},save:function(b){$Div=b.$propdiv.find("div");var d=$Div.CswTristateCheckBox("value");b.$propxml.children("checked").text(d)}};a.fn.CswFieldTypeLogical=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);
else a.error("Method "+b+" does not exist on CswFieldTypeLogical")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("logicalsetxml");d=a("<div />").appendTo(d);var e=[],h=0;f.find("item").first().children("column").each(function(){var j=a(this).CswAttrXml("field");if(j!=="name"&&j!="key"){e[h]=j;h++}});var k=[],l=0;f.find("item").each(function(){for(var j=a(this),m=[],n=0,i=0;i<e.length;i++){var s=j.children('column[field="'+e[i]+'"]').CswAttrXml("value");m[n]=s==="True";n++}j={label:j.children('column[field="name"]').CswAttrXml("value"),
key:j.children('column[field="key"]').CswAttrXml("value"),values:m};k[l]=j;l++});d.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:e,data:k,onchange:b.onchange})},save:function(b){var d=b.$propxml.children("logicalsetxml");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var f=0;f<b.length;f++)for(var e=0;e<b[f].length;e++){var h=b[f][e],k=d.find('item:has(column[field="key"][value="'+h.key+'"])').find('column[field="'+h.collabel+'"]');if(h.checked&&k.CswAttrXml("value")===
"False")k.CswAttrXml("value","True");else!h.checked&&k.CswAttrXml("value")==="True"&&k.CswAttrXml("value","False")}}};a.fn.CswFieldTypeLogicalSet=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeLogicalSet")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("text").text().trim(),e=b.$propxml.children("text").CswAttrXml("rows"),h=b.$propxml.children("text").CswAttrXml("columns");if(b.ReadOnly)d.append(f);else{d=a('<textarea id="'+b.ID+'" name="'+b.ID+'" rows="'+e+'" cols="'+h+'">'+f+"</textarea>").appendTo(d).change(b.onchange);b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("textarea");b.$propxml.children("text").text(d.val())}};
a.fn.CswFieldTypeMemo=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeMemo")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("startdatetime").text().trim(),e=b.$propxml.children("value").text().trim(),h=b.$propxml.children("units").text().trim();d=d.CswTable("init",{ID:b.ID+"_tbl"});var k=d.CswTable("cell",1,1),l=d.CswTable("cell",1,2);k.append(e+"&nbsp;"+h);if(!b.ReadOnly){l.CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID,onClick:function(){j.show()}});var j=d.CswTable("cell",2,2).CswTable("init",
{ID:b.ID+"_edittbl"});j.CswTable("cell",1,1).append("Start Date");j.CswTable("cell",1,2).CswInput("init",{ID:b.ID+"_sd",type:CswInput_Types.text,cssclass:"textinput date",value:f,onChange:b.onchange}).datepicker();j.CswTable("cell",3,1).append("Units");b=a('<select id="'+b.ID+'_units" />').appendTo(j.CswTable("cell",3,2)).change(b.onchange);f=a('<option value="hours">hours</option>').appendTo(b);h==="hours"&&f.CswAttrDom("selected","true");b=a('<option value="days">days</option>').appendTo(b);h===
"days"&&b.CswAttrDom("selected","true");j.hide()}},save:function(b){var d=b.$propdiv.find("#"+b.ID+"_sd").val(),f=b.$propdiv.find("#"+b.ID+"_units").val();b.$propxml.children("startdatetime").text(d);b.$propxml.children("units").text(f)}};a.fn.CswFieldTypeMTBF=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeMTBF")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("options");b.$propxml.children("NodeType").text().trim();var e=b.$propxml.children("NodeType").CswAttrXml("SelectMode");d=a("<div />").appendTo(d);var h=[],k=0;f.find("item").each(function(){var l=a(this);l={label:l.children('column[field="NodeTypeName"]').CswAttrXml("value"),key:l.children('column[field="nodetypeid"]').CswAttrXml("value"),values:[l.children('column[field="Include"]').CswAttrXml("value")===
"True"]};h[k]=l;k++});d.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:["Include"],data:h,UseRadios:e==="Single",Required:b.Required,onchange:b.onchange})},save:function(b){var d=b.$propxml.children("options");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var f=0;f<b.length;f++){var e=b[f][0],h=d.find('item:has(column[field="nodetypeid"][value="'+e.key+'"])').find('column[field="Include"]');if(e.checked&&h.CswAttrXml("value")==="False")h.CswAttrXml("value","True");
else!e.checked&&h.CswAttrXml("value")==="True"&&h.CswAttrXml("value","False")}}};a.fn.CswFieldTypeNodeTypeSelect=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeNodeTypeSelect")}})(jQuery);(function(a){var g={init:function(b){a(this).CswNumberTextBox({ID:b.ID,Value:b.$propxml.children("value").text().trim(),MinValue:b.$propxml.children("value").CswAttrXml("minvalue"),MaxValue:b.$propxml.children("value").CswAttrXml("maxvalue"),Precision:b.$propxml.children("value").CswAttrXml("precision"),ReadOnly:b.ReadOnly,Required:b.Required,onchange:b.onchange})},save:function(b){b.$propxml.children("value").text(b.$propdiv.CswNumberTextBox("value"))}};a.fn.CswFieldTypeNumber=function(b){if(g[b])return g[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeNumber")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();if(!b.ReadOnly){var f=d.CswTable("init",{ID:b.ID+"_tbl"});d=f.CswTable("cell",1,1);f=f.CswTable("cell",2,1);d.CswInput("init",{ID:b.ID+"_pwd1",type:CswInput_Types.password,cssclass:"textinput",onChange:b.onchange});f.CswInput("init",{ID:b.ID+"_pwd2",type:CswInput_Types.password,cssclass:"textinput password2",onChange:b.onchange});jQuery.validator.addMethod("password2",function(){var e=a("#"+b.ID+"_pwd1").val(),h=a("#"+b.ID+"_pwd2").val();
return e===""&&h===""||e===h},"Passwords do not match!")}},save:function(b){var d=b.$propdiv.find("input#"+b.ID+"_pwd1").val();d!==""&&b.$propxml.children("newpassword").text(d)}};a.fn.CswFieldTypePassword=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypePassword")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("value").text().trim();f+="&nbsp;";a('<div id="'+b.ID+'" class="staticvalue">'+f+"</div>").appendTo(d)},save:function(){}};a.fn.CswFieldTypePropertyReference=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypePropertyReference")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();d.CswNumberTextBox({ID:b.ID+"_qty",Value:b.$propxml.children("value").text().trim(),MinValue:b.$propxml.children("value").CswAttrXml("minvalue"),MaxValue:b.$propxml.children("value").CswAttrXml("maxvalue"),Precision:b.$propxml.children("value").CswAttrXml("precision"),ReadOnly:b.ReadOnly,Required:b.Required,onchange:b.onchange});var f=b.$propxml.children("units").contents().first().text(),e=a('<select id="'+b.ID+'_units" />').appendTo(d).change(b.onchange);
b.$propxml.children("units").children().each(function(){var h=a(this).CswAttrXml("value"),k=a('<option value="'+h+'">'+h+"</option>").appendTo(e);f===h&&k.CswAttrDom("selected","true")})},save:function(b){b.$propxml.children("value").text(b.$propdiv.CswNumberTextBox("value"));var d=b.$propdiv.find("#"+b.ID+"_units").val();b.$propxml.children("units").text(d)}};a.fn.CswFieldTypeQuantity=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||
!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeQuantity")}})(jQuery);(function(a){function g(d,f,e,h){d=d.split(",");var k=true,l=f.val(),j=h.val();if(l!==""&&j===""){k=false;for(var m=0;m<d.length;m++)if(d[m]===l)k=true}if(k){f.removeClass("CswFieldTypeQuestion_OOC");if(j===""){e.hide();h.hide()}}else{f.addClass("CswFieldTypeQuestion_OOC");e.show();h.show()}}var b={init:function(d){var f=a(this);f.contents().remove();var e=d.$propxml.children("answer").text().trim(),h=d.$propxml.children("allowedanswers").text().trim(),k=d.$propxml.children("compliantanswers").text().trim(),
l=d.$propxml.children("comments").text().trim(),j=d.$propxml.children("correctiveaction").text().trim(),m=d.$propxml.children("dateanswered").text().trim(),n=d.$propxml.children("datecorrected").text().trim();d.$propxml.children("iscompliant").text().trim();if(d.ReadOnly){f.append("Answer: "+e);m!==""&&f.append(" ("+m+")");f.append("<br/>");f.append("Corrective Action: "+j);n!==""&&f.append(" ("+n+")");f.append("<br/>");f.append("Comments: "+l+"<br/>")}else{f=f.CswTable("init",{ID:d.ID+"_tbl",FirstCellRightAlign:true});
f.CswTable("cell",1,1).append("Answer");h=h.split(",");var i=a('<select id="'+d.ID+'_ans" />').appendTo(f.CswTable("cell",1,2)).change(function(){g(k,i,t,w);d.onchange()});m=a('<option value=""></option>').appendTo(i);for(n=0;n<h.length;n++){var s=h[n];m=a('<option value="'+s+'">'+s+"</option>").appendTo(i);s===e&&m.CswAttrDom("selected","true")}var t=f.CswTable("cell",2,1).append("Corrective Action"),w=a('<textarea id="'+d.ID+'_cor" />').appendTo(f.CswTable("cell",2,2)).text(j).change(function(){g(k,
i,t,w);d.onchange()});f.CswTable("cell",3,1).append("Comments");a('<textarea id="'+d.ID+'_com" />').appendTo(f.CswTable("cell",3,2)).text(l).change(d.onchange);g(k,i,t,w)}},save:function(d){var f=d.$propdiv.find("#"+d.ID+"_ans").val(),e=d.$propdiv.find("#"+d.ID+"_cor").val(),h=d.$propdiv.find("#"+d.ID+"_com").val();d.$propxml.children("answer").text(f);d.$propxml.children("correctiveaction").text(e);d.$propxml.children("comments").text(h)}};a.fn.CswFieldTypeQuestion=function(d){if(b[d])return b[d].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswFieldTypeQuestion")}})(jQuery);(function(a){a.fn.CswFieldTypeRelationship=function(g){var b={init:function(d){var f=a(this);f.contents().remove();var e=d.$propxml.children("nodeid").text().trim();if(d.relatednodeid!==""&&d.relatednodeid!==undefined&&(e===""||e===undefined))e=d.relatednodeid;var h=d.$propxml.children("name").text().trim(),k=d.$propxml.children("nodetypeid").text().trim(),l=d.$propxml.children("options");if(d.ReadOnly)f.append(h);else{f=f.CswTable("init",{ID:d.ID+"_tbl"});h=f.CswTable("cell",1,1);var j=a('<select id="'+
d.ID+'" name="'+d.ID+'" class="selectinput" />"').appendTo(h).change(d.onchange);l.children().each(function(){var m=a(this);j.append('<option value="'+m.CswAttrXml("id")+'">'+m.CswAttrXml("value")+"</option>")});j.val(e);if(k!==""){e=f.CswTable("cell",1,2);a("<div />").appendTo(e).CswImageButton({ButtonType:CswImageButton_ButtonType.Add,AlternateText:"Add New",onClick:function(){a.CswDialog("AddNodeDialog",{nodetypeid:k,onAddNode:function(){d.onReload()}});return CswImageButton_ButtonType.None}})}d.Required&&
j.addClass("required")}},save:function(d){var f=d.$propdiv.find("select");d.$propxml.children("nodeid").text(f.val())}};if(b[g])return b[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return b.init.apply(this,arguments);else a.error("Method "+g+" does not exist on CswFieldTypeRelationship")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("sequence").text().trim();if(b.ReadOnly)d.append(f);else{d=d.CswInput("init",{ID:b.ID,type:CswInput_Types.text,cssclass:"textinput",onChange:b.onchange,value:f});b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("sequence").text(d.val())}};a.fn.CswFieldTypeSequence=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));
else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeSequence")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("text").text().trim(),e=parseInt(b.$propxml.children("text").CswAttrXml("columns"));b=parseInt(b.$propxml.children("text").CswAttrXml("rows"));var h="auto",k="",l="";if(e>0&&b>0){h="scroll";k=Math.round(e+2-e/2.25)+"em";l=Math.round(b+2.5+b/5)+"em"}else if(e>0)k=Math.round(e-e/2.25)+"em";else if(b>0)l=Math.round(b+0.5+b/5)+"em";a('<div class="staticvalue" style="overflow: '+h+"; width: "+k+"; height: "+
l+';">'+f+"</div>").appendTo(d)},save:function(){}};a.fn.CswFieldTypeStatic=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeStatic")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("text").text().trim(),e=b.$propxml.children("text").CswAttrXml("length");if(b.ReadOnly)d.append(f);else{d=d.CswInput("init",{ID:b.ID,type:CswInput_Types.text,value:f,cssclass:"textinput",width:e,onChange:b.onchange});b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("text").text(d.val())}};a.fn.CswFieldTypeText=function(b){if(g[b])return g[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeText")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("value").text().trim();if(b.ReadOnly)d.append(f);else{var e=d.CswInput("init",{ID:b.ID,type:CswInput_Types.text,cssclass:"textinput validateTime",onChange:b.onchange,value:f});d.CswButton("init",{ID:b.ID+"_now",disableOnClick:false,onclick:function(){e.val(getTimeString(new Date))},enabledText:"Now"});jQuery.validator.addMethod("validateTime",function(h,k){return this.optional(k)||validateTime(a(k).val())},
"Enter a valid time (e.g. 12:30 PM)");b.Required&&e.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("value").text(d.val())}};a.fn.CswFieldTypeTime=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeTime")}})(jQuery);(function(a){function g(e,h,k,l){e=e.CswTable("init",{ID:h,cellalign:"center"});e.CswTable("cell",1,1).append("Su");e.CswTable("cell",1,2).append("M");e.CswTable("cell",1,3).append("Tu");e.CswTable("cell",1,4).append("W");e.CswTable("cell",1,5).append("Th");e.CswTable("cell",1,6).append("F");e.CswTable("cell",1,7).append("Sa");for(var j=1;j<=7;j++){var m=CswInput_Types.checkbox;if(l)m=CswInput_Types.radio;e.CswTable("cell",2,j).CswInput("init",{ID:h+"_"+j,name:h,type:m,onChange:k,value:j})}}function b(e,
h){a('[name="'+e+'"]').CswAttrDom("checked","");for(var k=h.split(","),l=0;l<k.length;l++)switch(k[l]){case "Sunday":a("#"+e+"_1").CswAttrDom("checked","true");break;case "Monday":a("#"+e+"_2").CswAttrDom("checked","true");break;case "Tuesday":a("#"+e+"_3").CswAttrDom("checked","true");break;case "Wednesday":a("#"+e+"_4").CswAttrDom("checked","true");break;case "Thursday":a("#"+e+"_5").CswAttrDom("checked","true");break;case "Friday":a("#"+e+"_6").CswAttrDom("checked","true");break;case "Saturday":a("#"+
e+"_7").CswAttrDom("checked","true")}}function d(e){var h="";a('[name="'+e+'"]').each(function(){var k=a(this);if(isTrue(k.CswAttrDom("checked"))){if(h!=="")h+=",";switch(k.val()){case "1":h+="Sunday";break;case "2":h+="Monday";break;case "3":h+="Tuesday";break;case "4":h+="Wednesday";break;case "5":h+="Thursday";break;case "6":h+="Friday";break;case "7":h+="Saturday"}}});return h}var f={init:function(e){var h=a(this);h.contents().remove();var k=e.$propxml.children("Interval").CswAttrXml("text");
h.append('<span id="'+e.ID+'_textvalue">'+k+"</span>");if(!e.ReadOnly){var l=h.CswTable("init",{ID:e.ID+"_tbl",cellspacing:5});h=l.CswTable("cell",1,1).CswInput("init",{ID:e.ID+"_type_weekly",name:e.ID+"_type",type:CswInput_Types.radio,value:"weekly"});l.CswTable("cell",1,2).append("<span>&nbsp;Weekly</span>");h.click(function(){n.show();i.hide();S.hide();e.onchange()});k=l.CswTable("cell",2,1).CswInput("init",{ID:e.ID+"_type_monthly",name:e.ID+"_type",type:CswInput_Types.radio,value:"monthly"});
l.CswTable("cell",2,2).append("<span>&nbsp;Monthly</span>");k.click(function(){n.hide();i.show();S.hide();e.onchange()});var j=l.CswTable("cell",3,1).CswInput("init",{ID:e.ID+"_type_yearly",name:e.ID+"_type",type:CswInput_Types.radio,value:"yearly"});l.CswTable("cell",3,2).append("<span>&nbsp;Yearly</span>");j.click(function(){n.hide();i.hide();S.show();e.onchange()});var m=l.CswTable("cell",1,3);m.CswAttrDom("rowspan","3");var n=a("<div />").appendTo(m).addClass("CswFieldTypeTimeInterval_Div");l=
n.CswTable("init",{ID:e.ID+"_weeklytbl",cellalign:"center",FirstCellRightAlign:true});l.CswTable("cell",1,1).append("Every:");g(l.CswTable("cell",1,2),e.ID+"_weeklyday",e.onchange,false);l.CswTable("cell",2,1).append("Starting On:");l=l.CswTable("cell",2,2).CswInput("init",{ID:e.ID+"_weekly_sd",type:CswInput_Types.text,cssclass:"textinput date",onChange:e.onchange});l.datepicker();var i=a("<div />").appendTo(m).addClass("CswFieldTypeTimeInterval_Div");i.append("Every ");for(var s=a('<select id="'+
e.ID+'_monthly_rate"/>').appendTo(i).change(e.onchange),t=1;t<=12;t++)s.append('<option value="'+t+'">'+t+"</option>");i.append(" Month(s)<br/>");var w=i.CswInput("init",{ID:e.ID+"_monthly_by_date",name:e.ID+"_monthly",type:CswInput_Types.radio,onChange:e.onchange,value:"MonthlyByDate"});i.append("On Day of Month:&nbsp;");var C=a('<select id="'+e.ID+'_monthly_date" />').appendTo(i).change(e.onchange);for(t=1;t<=31;t++)C.append('<option value="'+t+'">'+t+"</option>");i.append("<br/>");var v=i.CswInput("init",
{ID:e.ID+"_monthly_by_day",name:e.ID+"_monthly",type:CswInput_Types.radio,onChange:e.onchange,value:"MonthlyByWeekAndDay"});i.append("Every&nbsp;");var u=a('<select id="'+e.ID+'_monthly_week" />').appendTo(i);u.append('<option value="1">First:</option>');u.append('<option value="2">Second:</option>');u.append('<option value="3">Third:</option>');u.append('<option value="4">Fourth:</option>');i.append("<br/>");g(i,e.ID+"_monthly_day",e.onchange,true);i.append("<br/>Starting On:&nbsp;");var A=a('<select id="'+
e.ID+'_monthly_startMonth" />').appendTo(i).change(e.onchange);for(t=1;t<=12;t++)A.append('<option value="'+t+'">'+t+"</option>");i.append("/");var E=a('<select id="'+e.ID+'_monthly_startYear" />').appendTo(i).change(e.onchange),N=(new Date).getFullYear();for(t=N-10;t<=N+10;t++)E.append('<option value="'+t+'">'+t+"</option>");E.val(N);var S=a("<div />").appendTo(m).addClass("CswFieldTypeTimeInterval_Div");S.append("Every Year, Starting On:<br/>");m=S.CswInput("init",{ID:e.ID+"_yearly_sd",type:CswInput_Types.text,
cssclass:"textinput date",onChange:e.onchange});m.datepicker();t=e.$propxml.children("interval").children("rateintervalvalue");switch(t.children("ratetype").text()){case "WeeklyByDay":h.CswAttrDom("checked","true");n.show();i.hide();S.hide();b(e.ID+"_weeklyday",t.children("weeklyday").text());l.val(t.children("startingdate").text());w.CswAttrDom("checked","true");break;case "MonthlyByDate":k.CswAttrDom("checked","true");n.hide();i.show();S.hide();w.CswAttrDom("checked","true");s.val(t.children("monthlyfrequency").text());
C.val(t.children("monthlydate").text());A.val(t.children("startingmonth").text());E.val(t.children("startingyear").text());break;case "MonthlyByWeekAndDay":k.CswAttrDom("checked","true");n.hide();i.show();S.hide();v.CswAttrDom("checked","true");u.val(t.children("monthlyweek").text());b(e.ID+"_monthly_day",t.children("monthlyday").text());A.val(t.children("startingmonth").text());E.val(t.children("startingyear").text());break;case "YearlyByDate":j.CswAttrDom("checked","true");n.hide();i.show();S.hide();
m.val(t.children("yearlydate").text());w.CswAttrDom("checked","true")}}},save:function(e){var h=a('[name="'+e.ID+'_type"]:checked').val();e.$propxml.children().remove();var k=a("<interval />").appendTo(e.$propxml),l=a("<rateintervalvalue />").appendTo(k);switch(h){case "weekly":a("<ratetype>WeeklyByDay</ratetype>").appendTo(l);a("<weeklyday>"+d(e.ID+"_weeklyday")+"</weeklyday>").appendTo(l);a("<startingdate>"+a("#"+e.ID+"_weekly_sd").val()+"</startingdate>").appendTo(l);break;case "monthly":h=a('[name="'+
e.ID+'_monthly"]:checked').val();a("<ratetype>"+h+"</ratetype>").appendTo(l);a("<monthlyfrequency>"+a("#"+e.ID+"_monthly_rate").val()+"</monthlyfrequency>").appendTo(l);if(h==="MonthlyByDate")a("<monthlydate>"+a("#"+e.ID+"_monthly_date").val()+"</monthlydate>").appendTo(l);else{a("<monthlyweek>"+a("#"+e.ID+"_monthly_week").val()+"</monthlyweek>").appendTo(l);a("<monthlyday>"+d(e.ID+"_monthly_day")+"</monthlyday>").appendTo(l)}a("<startingmonth>"+a("#"+e.ID+"_monthly_startMonth").val()+"</startingmonth>").appendTo(l);
a("<startingyear>"+a("#"+e.ID+"_monthly_startYear").val()+"</startingyear>").appendTo(l);break;case "yearly":a("<ratetype>YearlyByDate</ratetype>").appendTo(l);a("<yearlydate>"+a("#"+e.ID+"_yearly_sd").val()+"</yearlydate>").appendTo(l)}k.find("*").andSelf().each(function(){a(this).CswAttrDom("xmlns","")})}};a.fn.CswFieldTypeTimeInterval=function(e){if(f[e])return f[e].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof e==="object"||!e)return f.init.apply(this,arguments);else a.error("Method "+
e+" does not exist on CswFieldTypeTimeInterval")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();b.$propxml.children("NodeId").text().trim();var f=b.$propxml.children("options");d=a("<div />").appendTo(d);var e=[],h=0;f.children().each(function(){var k=a(this);k={label:k.children('column[field="User Name"]').CswAttrXml("value"),key:k.children('column[field="UserId"]').CswAttrXml("value"),values:[k.children('column[field="Include"]').CswAttrXml("value")==="True"]};e[h]=k;h++});d.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:["Include"],
data:e,UseRadios:false,Required:b.Required,onchange:b.onchange})},save:function(b){var d=b.$propxml.children("options");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var f=0;f<b.length;f++){var e=b[f][0],h=d.find('user:has(column[field="UserId"][value="'+e.key+'"])').find('column[field="Include"]');if(e.checked&&h.CswAttrXml("value")==="False")h.CswAttrXml("value","True");else!e.checked&&h.CswAttrXml("value")==="True"&&h.CswAttrXml("value","False")}}};a.fn.CswFieldTypeUserSelect=
function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeUserSelect")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();b.$propxml.children("viewid").text().trim();var f=b.$propxml.children("options"),e=b.$propxml.children("viewid").CswAttrXml("SelectMode");d=a("<div />").appendTo(d);var h=[],k=0;f.children().each(function(){var l=a(this);l={label:l.children('column[field="View Name"]').CswAttrXml("value"),key:l.children('column[field="nodeviewid"]').CswAttrXml("value"),values:[l.children('column[field="Include"]').CswAttrXml("value")==="True"]};
h[k]=l;k++});d.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:["Include"],data:h,UseRadios:e==="Single",Required:b.Required,onchange:b.onchange})},save:function(b){var d=b.$propxml.children("options");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var f=0;f<b.length;f++){var e=b[f][0],h=d.find('user:has(column[field="nodeviewid"][value="'+e.key+'"])').find('column[field="Include"]');if(e.checked&&h.CswAttrXml("value")==="False")h.CswAttrXml("value","True");else!e.checked&&
h.CswAttrXml("value")==="True"&&h.CswAttrXml("value","False")}}};a.fn.CswFieldTypeViewPickList=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeViewPickList")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("viewid").text().trim(),e=b.$propxml.children("viewmode").text().trim().toLowerCase();b.$propxml.children("name").text().trim();d=d.CswTable("init",{ID:b.ID+"_tbl"});d.CswTable("cell",1,1).CswImageButton({ID:b.ID+"_view",ButtonType:CswImageButton_ButtonType.View,AlternateText:"View",Required:b.Required,onClick:function(){a.CswCookie("set",CswCookieName.CurrentView.ViewId,f);a.CswCookie("set",CswCookieName.CurrentView.ViewMode,
e);a.CswCookie("clear",CswCookieName.CurrentNode.NodeId,b.viewid);a.CswCookie("clear",CswCookieName.CurrentNode.NodeKey,b.viewmode);window.location="NewMain.html";return CswImageButton_ButtonType.None}});b.ReadOnly||d.CswTable("cell",1,2).CswImageButton({ID:b.ID+"_edit",ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",Required:b.Required,onClick:function(){window.location="EditView.aspx?step=2&return=NewMain.html&viewid="+f;return CswImageButton_ButtonType.None}})},save:function(){}};
a.fn.CswFieldTypeViewReference=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeViewReference")}})(jQuery);$.CswFieldTypeFactory=function(a){var g={nodeid:"",fieldtype:"",$propdiv:"",$propxml:"",onchange:function(){},onReload:function(){},cswnbtnodekey:"",ID:"",Required:"",ReadOnly:"",EditMode:"Edit",onEditView:function(){}},b={make:function(d){d&&$.extend(g,d);g.ID=g.$propxml.CswAttrXml("id");g.Required=g.$propxml.CswAttrXml("required")==="true"||g.Required;g.ReadOnly=g.$propxml.CswAttrXml("readonly")==="true"||g.ReadOnly||g.EditMode==="PrintReport";switch(g.fieldtype){case "Barcode":g.$propdiv.CswFieldTypeBarcode("init",
g);break;case "Composite":g.$propdiv.CswFieldTypeComposite("init",g);break;case "Date":g.$propdiv.CswFieldTypeDate("init",g);break;case "File":g.$propdiv.CswFieldTypeFile("init",g);break;case "Grid":g.$propdiv.CswFieldTypeGrid("init",g);break;case "Image":g.$propdiv.CswFieldTypeImage("init",g);break;case "Link":g.$propdiv.CswFieldTypeLink("init",g);break;case "List":g.$propdiv.CswFieldTypeList("init",g);break;case "Location":g.$propdiv.CswFieldTypeLocation("init",g);break;case "LocationContents":g.$propdiv.CswFieldTypeLocationContents("init",
g);break;case "Logical":g.$propdiv.CswFieldTypeLogical("init",g);break;case "LogicalSet":g.$propdiv.CswFieldTypeLogicalSet("init",g);break;case "Memo":g.$propdiv.CswFieldTypeMemo("init",g);break;case "MTBF":g.$propdiv.CswFieldTypeMTBF("init",g);break;case "NodeTypeSelect":g.$propdiv.CswFieldTypeNodeTypeSelect("init",g);break;case "Number":g.$propdiv.CswFieldTypeNumber("init",g);break;case "Password":g.$propdiv.CswFieldTypePassword("init",g);break;case "PropertyReference":g.$propdiv.CswFieldTypePropertyReference("init",
g);break;case "Quantity":g.$propdiv.CswFieldTypeQuantity("init",g);break;case "Question":g.$propdiv.CswFieldTypeQuestion("init",g);break;case "Relationship":g.$propdiv.CswFieldTypeRelationship("init",g);break;case "Sequence":g.$propdiv.CswFieldTypeSequence("init",g);break;case "Static":g.$propdiv.CswFieldTypeStatic("init",g);break;case "Text":g.$propdiv.CswFieldTypeText("init",g);break;case "Time":g.$propdiv.CswFieldTypeTime("init",g);break;case "TimeInterval":g.$propdiv.CswFieldTypeTimeInterval("init",
g);break;case "UserSelect":g.$propdiv.CswFieldTypeUserSelect("init",g);break;case "ViewPickList":g.$propdiv.CswFieldTypeViewPickList("init",g);break;case "ViewReference":g.$propdiv.CswFieldTypeViewReference("init",g);break;default:g.$propdiv.append(g.$propxml.CswAttrXml("init",g))}},save:function(d){d&&$.extend(g,d);g.ID=g.$propxml.CswAttrXml("id");g.Required=g.$propxml.CswAttrXml("required")==="true";g.ReadOnly=g.$propxml.CswAttrXml("readonly")==="true";switch(g.fieldtype){case "Barcode":g.$propdiv.CswFieldTypeBarcode("save",
g);break;case "Composite":g.$propdiv.CswFieldTypeComposite("save",g);break;case "Date":g.$propdiv.CswFieldTypeDate("save",g);break;case "File":g.$propdiv.CswFieldTypeFile("save",g);break;case "Grid":g.$propdiv.CswFieldTypeGrid("save",g);break;case "Image":g.$propdiv.CswFieldTypeImage("save",g);break;case "Link":g.$propdiv.CswFieldTypeLink("save",g);break;case "List":g.$propdiv.CswFieldTypeList("save",g);break;case "Location":g.$propdiv.CswFieldTypeLocation("save",g);break;case "LocationContents":g.$propdiv.CswFieldTypeLocationContents("save",
g);break;case "Logical":g.$propdiv.CswFieldTypeLogical("save",g);break;case "LogicalSet":g.$propdiv.CswFieldTypeLogicalSet("save",g);break;case "Memo":g.$propdiv.CswFieldTypeMemo("save",g);break;case "MTBF":g.$propdiv.CswFieldTypeMTBF("save",g);break;case "NodeTypeSelect":g.$propdiv.CswFieldTypeNodeTypeSelect("save",g);break;case "Number":g.$propdiv.CswFieldTypeNumber("save",g);break;case "Password":g.$propdiv.CswFieldTypePassword("save",g);break;case "PropertyReference":g.$propdiv.CswFieldTypePropertyReference("save",
g);break;case "Quantity":g.$propdiv.CswFieldTypeQuantity("save",g);break;case "Question":g.$propdiv.CswFieldTypeQuestion("save",g);break;case "Relationship":g.$propdiv.CswFieldTypeRelationship("save",g);break;case "Sequence":g.$propdiv.CswFieldTypeSequence("save",g);break;case "Static":g.$propdiv.CswFieldTypeStatic("save",g);break;case "Text":g.$propdiv.CswFieldTypeText("save",g);break;case "Time":g.$propdiv.CswFieldTypeTime("save",g);break;case "TimeInterval":g.$propdiv.CswFieldTypeTimeInterval("save",
g);break;case "UserSelect":g.$propdiv.CswFieldTypeUserSelect("save",g);break;case "ViewPickList":g.$propdiv.CswFieldTypeViewPickList("save",g);break;case "ViewReference":g.$propdiv.CswFieldTypeViewReference("save",g)}}};if(b[a])return b[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return b.init.apply(this,arguments);else $.error("Method "+a+" does not exist on "+PluginName)};
