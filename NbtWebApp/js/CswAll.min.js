(function(a){a.fn.CswAttrDom=function(d,b){var e=a(this),g=undefined;g=arguments.length===1?e.prop(d):e.prop(d,b);if(g===undefined||d==="href"||d==="cellpadding"||d==="cellspacing"||d==="rowspan"||d==="colspan")g=arguments.length===1?e.attr(d):e.attr(d,b);return g};a.fn.CswAttrXml=function(d,b){var e=a(this),g=undefined;switch(arguments.length){case 1:g=e.attr(d);break;case 2:g=e.attr(d,b)}return g}})(jQuery);(function(a){function d(e){e.length>0&&e.button({label:e.CswAttrDom("disabledText"),disabled:true})}var b={init:function(e){var g={ID:"",enabledText:"",disabledText:"",hasText:true,disableOnClick:true,inputType:"button",primaryicon:"",secondaryicon:"",ReadOnly:false,onclick:function(){}};e&&a.extend(g,e);e=a(this);var f=a("<input />").CswAttrDom("type",g.inputType).CswAttrDom("id",g.ID).CswAttrDom("name",g.ID);f.CswAttrDom("enabledText",g.enabledText);f.CswAttrDom("disabledText",g.disabledText);var h=
{text:g.hasText,label:g.enabledText,disabled:g.ReadOnly,icons:{primary:g.primaryicon,secondary:g.secondaryicon}};if(h.disabled)h.label=g.disabledText;f.button(h).click(function(){g.disableOnClick&&d(f);g.onclick()});e.append(f);return f},enable:function(){var e=a(this);e.length>0&&e.button({label:e.CswAttrDom("enabledText"),disabled:false})},disable:function(){var e=a(this);d(e)}};a.fn.CswButton=function(e){if(b[e])return b[e].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof e===
"object"||!e)return b.init.apply(this,arguments);else a.error("Method "+e+" does not exist on CswButton")}})(jQuery);(function(a){a.fn.CswCheckBoxArray=function(d){var b={init:function(e){var g={ID:"",cols:["col1","col2","col3"],data:[{label:"row1",key:1,values:[true,false,true]},{label:"row2",key:2,values:[false,true,false]},{label:"row3",key:3,values:[true,false,true]}],HeightInRows:4,UseRadios:false,Required:false,ReadOnly:false,onchange:function(){}};e&&a.extend(g,e);var f="checkbox";if(g.UseRadios)f="radio";var h=a(this);h.contents().remove();var i=a("<div/>").appendTo(h);if(g.ReadOnly)for(e=0;e<g.data.length;e++){var q=
g.data[e];h=false;f=true;for(var j=0;j<g.cols.length;j++)if(isTrue(q.values[j])){if(!h){i.append(q.label+": ");h=true}f||i.append(", ");i.append(g.cols[j]);f=false}h&&i.append("<br/>")}else{var o=i.CswTable("init",{ID:g.ID+"_tbl"});i.css("height",25*g.HeightInRows+"px");i.addClass("cbarraydiv");o.addClass("cbarraytable");i=1;for(j=0;j<g.cols.length;j++){var k=o.CswTable("cell",i,j+2);k.addClass("cbarraycell");k.append(g.cols[j])}i++;if(g.UseRadios&&!g.Required){j=o.CswTable("cell",i,1);j.addClass("cbarraycell");
j.append("[none]");for(j=0;j<g.cols.length;j++){k=o.CswTable("cell",i,j+2);k.addClass("cbarraycell");var l=g.ID+"_none";k=a('<input type="'+f+'" class="CBACheckBox_'+g.ID+'" id="'+l+'" name="'+g.ID+'" />').appendTo(k).click(g.onchange);k.CswAttrDom("key","");k.CswAttrDom("rowlabel","[none]");k.CswAttrDom("collabel",g.cols[j]);k.CswAttrDom("row",-1);k.CswAttrDom("col",j);k.CswAttrDom("checked","true")}}i++;for(e=0;e<g.data.length;e++){q=g.data[e];j=o.CswTable("cell",i+e,1);j.addClass("cbarraycell");
j.append(q.label);for(j=0;j<g.cols.length;j++){k=o.CswTable("cell",i+e,j+2);k.addClass("cbarraycell");l=g.ID+"_"+e+"_"+j;k=a('<input type="'+f+'" class="CBACheckBox_'+g.ID+'" id="'+l+'" name="'+g.ID+'" />').appendTo(k).click(g.onchange);k.CswAttrDom("key",q.key);k.CswAttrDom("rowlabel",q.label);k.CswAttrDom("collabel",g.cols[j]);k.CswAttrDom("row",e);k.CswAttrDom("col",j);q.values[j]&&k.CswAttrDom("checked","true")}}if(!g.UseRadios){e="Check All";if(a(".CBACheckBox_"+g.ID).not(":checked").length===
0)e="Uncheck All";var m=a('<div style="text-align: right"><a href="#">'+e+"</a></div>").appendTo(h).children("a");m.click(function(){var s=g.ID;if(a(".CBACheckBox_"+s).not(":checked").length>0){a(".CBACheckBox_"+s).CswAttrDom("checked","checked");m.text("Uncheck all")}else{a(".CBACheckBox_"+s).removeAttr("checked");m.text("Check all")}return false})}}},getdata:function(e){var g={ID:""};e&&a.extend(g,e);var f=[];a(this).find(".CBACheckBox_"+g.ID).each(function(){var h=a(this),i=parseInt(h.CswAttrDom("row")),
q=parseInt(h.CswAttrDom("col"));if(f[i]===undefined)f[i]=[];f[i][q]={key:h.CswAttrDom("key"),rowlabel:h.CswAttrDom("rowlabel"),collabel:h.CswAttrDom("collabel"),checked:h.CswAttrDom("checked")}});return f}};if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on "+PluginName)}})(jQuery);(function(a){a.fn.CswComboBox=function(d){function b(g,f){g.toggleClass("CswComboBox_TopDiv_click");f.toggle()}var e={init:function(g){var f={ID:"",TopContent:"",SelectContent:"This ComboBox Is Empty!",Width:"180px"};g&&a.extend(f,g);g=a(this);g.contents().remove();var h=a('<div id="'+f.ID+'_top" class="CswComboBox_TopDiv"></div>').appendTo(g).css("width",f.Width),i=h.CswTable("init",{ID:f.ID+"_tbl"});i.CswAttrDom("width","100%");$cell1=i.CswTable("cell",1,1);$cell1.CswAttrDom("width","100%");$cell1.append(f.TopContent);
$cell2=i.CswTable("cell",1,2);$cell2.addClass("CswComboBox_ImageCell");var q=a('<div id="'+f.ID+'_child" class="CswComboBox_ChildDiv">').appendTo(g).css("width",f.Width).append(f.SelectContent).hover(function(){},function(){q.hide()});$cell1.click(function(){b(h,q)});$cell2.CswImageButton({ButtonType:CswImageButton_ButtonType.Select,ID:f.ID+"_top_img",AlternateText:"",onClick:function(){b(h,q)}})},TopContent:function(g){var f=a(this).children(".CswComboBox_TopDiv").children("table").CswTable("cell",
1,1);f.text("");f.contents().remove();f.append(g)},toggle:function(){var g=a(this),f=g.children(".CswComboBox_TopDiv");g=g.children(".CswComboBox_ChildDiv");b(f,g)},close:function(){var g=a(this),f=g.children(".CswComboBox_TopDiv");g=g.children(".CswComboBox_ChildDiv");f.removeClass("CswComboBox_TopDiv_click");g.hide()}};if(e[d])return e[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return e.init.apply(this,arguments);else a.error("Method "+d+" does not exist on "+
PluginName)}})(jQuery);var CswCookieName={SessionId:"CswSessionId",Username:"csw_username",CurrentViewId:"csw_currentviewid",CurrentViewMode:"csw_currentviewmode",CurrentNodeId:"csw_currentnodeid",CurrentNodeKey:"csw_currentnodekey",CurrentTabId:"csw_currenttabid"};
(function(a){a.CswCookie=function(d){var b={get:function(e){e=a.cookie(e);if(e==undefined)e="";return e},set:function(e,g){a.cookie(e,g)},clear:function(e){a.cookie(e,"")},clearAll:function(){for(var e in CswCookieName)CswCookieName.hasOwnProperty(e)&&a.cookie(CswCookieName[e],null)}};if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswCookie")}})(jQuery);(function(a){a.fn.CswDashboard=function(d){var b={Url:"/NbtWebApp/wsNBT.asmx/getDashboard",onSuccess:function(){}};d&&a.extend(b,d);var e=a(this);CswAjaxXml({url:b.Url,data:{},stringify:false,success:function(g){var f=e.CswTable("init",{ID:"DashboardTable"});f.addClass("DashboardTable");var h=f.append("<tr />");g.children().each(function(){var i=a(this),q="";q=i.CswAttrXml("href")!==undefined?'<td class="DashboardCell">  <a target="_blank" href="'+i.CswAttrXml("href")+'">    <div title="'+i.CswAttrXml("text")+
'" id="'+i.CswAttrXml("id")+'" class="'+i.CswAttrXml("id")+'" />  </a></td>':'<td class="DashboardCell">  <div title="'+i.CswAttrXml("text")+'" id="'+i.CswAttrXml("id")+'" class="'+i.CswAttrXml("id")+'" /></td>';h.append(q)});b.onSuccess()}});return this}})(jQuery);(function(a){function d(e,g,f){e.dialog({modal:true,width:g,height:f,close:function(){e.remove()}})}var b={AddWelcomeItemDialog:function(e){var g={onAdd:function(){}};e&&a.extend(g,e);var f=a("<div></div>");f.CswWelcome("getAddItemForm",{onAdd:function(){f.dialog("close");g.onAdd()}});d(f,400,400)},AddViewDialog:function(e){var g={ID:"addviewdialog",onAddView:function(){},makeVisibilitySelect:function(){}};e&&a.extend(g,e);var f=a("<div></div>");e=f.CswTable("init",{ID:g.ID+"_tbl",FirstCellRightAlign:true});
e.CswTable("cell",1,1).append("Name:");var h=e.CswTable("cell",1,2).CswInput("init",{ID:g.ID+"_nametb",type:CswInput_Types.text,cssclass:"textinput"});e.CswTable("cell",2,1).append("Display Mode:");var i=a('<select id="'+g.ID+'_dmsel" />').appendTo(e.CswTable("cell",2,2));i.append('<option value="List">List</option>');i.append('<option value="Tree">Tree</option>');i.append('<option value="Grid">Grid</option>');var q=g.makeVisibilitySelect(e,3,"Available to:"),j=f.CswButton({ID:g.ID+"_submit",enabledText:"Create View",
disabledText:"Creating View",onclick:function(){var o={};o.ViewName=h.val();o.ViewMode=i.val();o.Visibility=q.getvisibilityselect().val();o.VisibilityRoleId=q.getvisroleselect().val();o.VisibilityUserId=q.getvisuserselect().val();CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/createView",data:o,success:function(k){f.dialog("close");g.onAddView(k.newviewid)},error:function(){j.CswButton("enable")}})}});f.CswButton({ID:g.ID+"_cancel",enabledText:"Cancel",disabledText:"Canceling",onclick:function(){f.dialog("close")}});
d(f,400,200)},AddNodeDialog:function(e){var g={nodetypeid:"",relatednodeid:"",onAddNode:function(){}};e&&a.extend(g,e);var f=a("<div></div>");f.CswNodeTabs({nodetypeid:g.nodetypeid,relatednodeid:g.relatednodeid,EditMode:"AddInPopup",onSave:function(h,i){f.dialog("close");g.onAddNode(h,i)}});d(f,800,600)},EditNodeDialog:function(e){var g={nodeid:"",cswnbtnodekey:"",filterToPropId:"",title:"",onEditNode:function(){}};e&&a.extend(g,e);var f=a("<div></div>");f.CswNodeTabs({nodeid:g.nodeid,cswnbtnodekey:g.cswnbtnodekey,
filterToPropId:g.filterToPropId,EditMode:"EditInPopup",title:g.title,onSave:function(h,i){f.dialog("close");g.onEditNode(h,i)}});g.filterToPropId!==""?d(f,600,400):d(f,900,600)},CopyNodeDialog:function(e){var g={nodename:"",nodeid:"",cswnbtnodekey:"",onCopyNode:function(){}};e&&a.extend(g,e);var f=a("<div>Copying: "+g.nodename+"<br/><br/></div>"),h=f.CswButton({ID:"copynode_submit",enabledText:"Copy",disabledText:"Copying",onclick:function(){copyNode({nodeid:g.nodeid,nodekey:g.nodekey,onSuccess:function(i,
q){f.dialog("close");g.onCopyNode(i,q)},onError:function(){h.CswButton("enable")}})}});f.CswButton({ID:"copynode_cancel",enabledText:"Cancel",disabledText:"Canceling",onclick:function(){f.dialog("close")}});d(f,400,300)},DeleteNodeDialog:function(e){var g={nodename:"",nodeid:"",cswnbtnodekey:"",onDeleteNode:function(){},Multi:false,NodeCheckTreeId:""};e&&a.extend(g,e);var f=a("<div><span>Are you sure you want to delete:</span></div>"),h=[],i=[];if(g.Multi)a("."+g.NodeCheckTreeId+"_check:checked").each(function(){var j=
a(this);h[h.length]=j.CswAttrDom("nodeid");f.append('<br/><span style="padding-left: 10px;">'+j.CswAttrDom("nodename")+"</span>")});else{f.append("<span>"+g.nodename+"?</span>");h[0]=g.nodeid;i[0]=g.cswnbtnodekey}f.append("<br/><br/>");var q=f.CswButton({ID:"deletenode_submit",enabledText:"Delete",disabledText:"Deleting",onclick:function(){deleteNodes({nodeids:h,nodekeys:i,onSuccess:function(j,o){f.dialog("close");g.onDeleteNode(j,o)},onError:function(){q.CswButton("enable")}})}});f.CswButton({ID:"deletenode_cancel",
enabledText:"Cancel",disabledText:"Canceling",onclick:function(){f.dialog("close")}});d(f,400,200)},AboutDialog:function(){var e=a("<div></div>");CswAjaxXml({url:"/NbtWebApp/wsNBT.asmx/getAbout",data:{},stringify:false,success:function(g){e.append("NBT Assembly Version: "+g.children("assembly").text()+"<br/><br/>");var f=e.CswTable("init",{ID:"abouttable"}),h=1;g.children("component").each(function(){var i=f.CswTable("cell",h,1),q=f.CswTable("cell",h,2),j=f.CswTable("cell",h,3);i.css("padding","2px 5px 2px 5px");
q.css("padding","2px 5px 2px 5px");j.css("padding","2px 5px 2px 5px");var o=a(this);i.append(o.children("name").text());q.append(o.children("version").text());j.append(o.children("copyright").text());h++})}});d(e,600,400)},SearchDialog:function(){},FileUploadDialog:function(e){var g={url:"",params:{},onSuccess:function(){}};e&&a.extend(g,e);var f=a("<div></div>");new qq.FileUploader({element:f.get(0),action:g.url,params:g.params,debug:false,onComplete:function(){f.dialog("close");g.onSuccess()}});
f.CswButton({ID:"fileupload_cancel",enabledText:"Cancel",disabledText:"Canceling",onclick:function(){f.dialog("close")}});d(f,400,300)},ShowLicenseDialog:function(e){var g={GetLicenseUrl:"/NbtWebApp/wsNBT.asmx/getLicense",AcceptLicenseUrl:"/NbtWebApp/wsNBT.asmx/acceptLicense",onAccept:function(){},onDecline:function(){}};e&&a.extend(g,e);var f=a('<div align="center"></div>');f.append("Service Level Agreement<br/>");var h=a('<textarea id="license" disabled="true" rows="30" cols="80"></textarea>').appendTo(f);
f.append("<br/>");CswAjaxJSON({url:g.GetLicenseUrl,success:function(q){h.text(q.license)}});var i=f.CswButton({ID:"license_accept",enabledText:"I Accept",disabledText:"Accepting...",onclick:function(){CswAjaxJSON({url:g.AcceptLicenseUrl,success:function(){f.dialog("close");g.onAccept()},error:function(){i.CswButton("enable")}})}});f.CswButton({ID:"license_decline",enabledText:"I Decline",disabledText:"Declining...",onclick:function(){f.dialog("close");g.onDecline()}});d(f,800,600)},PrintLabelDialog:function(e){var g=
{ID:"print_label",GetPrintLabelsUrl:"/NbtWebApp/wsNBT.asmx/getLabels",GetEPLTextUrl:"/NbtWebApp/wsNBT.asmx/getEPLText",nodeid:"",propid:""};e&&a.extend(g,e);var f=a('<div align="center"></div>');f.append("Select a Label to Print:<br/>");var h=a("<div />").appendTo(f),i;CswAjaxJSON({url:g.GetPrintLabelsUrl,data:{PropId:g.propid},success:function(j){if(j.labels.length>0){i=a('<select id="'+g.ID+'_labelsel"></select>');for(var o=0;o<j.labels.length;o++){var k=j.labels[o];i.append('<option value="'+k.nodeid+
'">'+k.name+"</option>")}i.appendTo(h);q.CswButton("enable")}else{q.hide();h.append("<span>No labels have been assigned!</span>")}}});var q=f.CswButton({ID:"print_label_print",enabledText:"Print",disableOnClick:false,onclick:function(){var j={PropId:g.propid,PrintLabelNodeId:i.val()};CswAjaxJSON({url:g.GetEPLTextUrl,data:j,success:function(o){var k=a("#labelx").get(0);k.EPLScript=o.epl;k.Print()}})}});q.CswButton("disable");f.CswButton({ID:"print_label_close",enabledText:"Close",disabledText:"Closing...",
onclick:function(){f.dialog("close")}});e=a('<div style="display: none; border: 1px solid red;"></div>').appendTo(f);a("<OBJECT ID='labelx' Name='labelx' classid='clsid:A8926827-7F19-48A1-A086-B1A5901DB7F0' codebase='CafLabelPrintUtil.cab#version=0,1,6,0' width=500 height=300 align=center hspace=0 vspace=0></OBJECT>").appendTo(e);d(f,400,300)},OpenDialog:function(e,g){var f=a('<div id="'+e+'"></div>');f.load(g,{},function(){f.appendTo("body").dialog()})},CloseDialog:function(e){a("#"+e).dialog("close").remove()}};
a.CswDialog=function(e){if(b[e])return b[e].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof e==="object"||!e)return b.init.apply(this,arguments);else a.error("Method "+e+" does not exist on CswDialog")}})(jQuery);(function(a){var d={init:function(b){var e={ID:"",value:"",cssclass:""};b&&a.extend(e,b);b=a(this);var g=a("<div></div>"),f=tryParseString(e.ID,"");g.CswAttrDom("id",f);g.CswAttrDom("name",f);isNullOrEmpty(e.cssclass)||g.addClass(e.cssclass);isNullOrEmpty(e.value)||g.text(e.value);b.append(g);return g}};a.fn.CswDiv=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswDiv")}})(jQuery);(function(a){a.fn.CswErrorMessage=function(d){var b={message:"",detail:""};d&&a.extend(b,d);var e=a(this);e.show();d="error_"+(new Date).getTime();var g=a("<div />").appendTo(e).CswAttrDom("id",d).addClass("CswErrorMessage_ErrorMessage"),f=g.CswTable("init",{id:makeId({prefix:d,id:"tbl"}),width:"100%"}),h=f.CswTable("cell",1,1).CswAttrDom("width","100%"),i=f.CswTable("cell",1,2),q=f.CswTable("cell",2,1);a('<a href="#">'+b.message+"</a>").appendTo(h).click(function(){q.toggle()});q.append(b.detail);
q.hide();i.CswImageButton({ButtonType:CswImageButton_ButtonType.Delete,AlternateText:"Hide",ID:makeId({prefix:d,id:"hidebtn"}),onClick:function(){g.remove();e.children().length===0&&e.hide();return CswImageButton_ButtonType.None}});return g}})(jQuery);var CswImageButton_ButtonType={None:-1,Add:27,ArrowNorth:28,ArrowEast:29,ArrowSouth:30,ArrowWest:31,Calendar:6,CheckboxFalse:18,CheckboxNull:19,CheckboxTrue:20,Clear:4,Clock:10,ClockGrey:11,Configure:26,Delete:4,Edit:3,Fire:5,PageFirst:23,PagePrevious:24,PageNext:25,PageLast:22,PinActive:17,PinInactive:15,Print:2,Refresh:9,SaveStatus:13,Select:32,ToggleActive:1,ToggleInactive:0,View:8};
(function(a){a.fn.CswImageButton=function(d){function b(f){if(f!==undefined&&f!==CswImageButton_ButtonType.None){g.get(0).style.background="url('Images/buttons/buttons18.gif') 0px "+f*-18+"px no-repeat";g.unbind("mouseover");g.unbind("mouseout");g.unbind("mousedown");g.unbind("mouseup");g.bind("mouseover",function(){this.style.backgroundPosition="-18px "+f*-18+"px"});g.bind("mouseout",function(){this.style.backgroundPosition="0px "+f*-18+"px"});g.bind("mousedown",function(){this.style.backgroundPosition=
"-36px "+f*-18+"px"});g.bind("mouseup",function(){this.style.backgroundPosition="-18px "+f*-18+"px"})}}var e={ButtonType:CswImageButton_ButtonType.None,Active:false,AlternateText:"",ID:"",Required:false,onClick:function(){return CswImageButton_ButtonType.None}};d&&a.extend(e,d);$Div=a(this);var g=a('<div id="'+e.ID+'" class="divbutton" alt="'+e.AlternateText+'" />"').appendTo($Div).css("display","inline-block").click(function(){var f=e.onClick(g);b(f);return false});b(e.ButtonType);return g}})(jQuery);var CswInput_Types={button:{id:0,name:"button",placeholder:false,autocomplete:false,value:{required:false,allowed:true},defaultwidth:""},checkbox:{id:1,name:"checkbox",placeholder:false,autocomplete:false,value:{required:true,allowed:true},defaultwidth:""},color:{id:2,name:"color",placeholder:false,autocomplete:true,value:{required:false,allowed:true},defaultwidth:""},date:{id:3,name:"date",placeholder:false,autocomplete:true,value:{required:false,allowed:true},defaultwidth:"200px"},datetime:{id:4,
name:"datetime",placeholder:false,autocomplete:false,value:{required:false,allowed:true},defaultwidth:"200px"},"datetime-local":{value:5,name:"datetime-local",placeholder:false,autocomplete:true,value:{required:false,allowed:true},defaultwidth:"200px"},email:{id:6,name:"email",placeholder:true,autocomplete:true,value:{required:false,allowed:true},defaultwidth:"200px"},file:{id:7,name:"file",placeholder:false,autocomplete:false,value:{required:false,allowed:false},defaultwidth:""},hidden:{id:8,name:"hidden",
placeholder:false,autocomplete:false,value:{required:false,allowed:true},defaultwidth:""},image:{id:9,name:"image",placeholder:false,autocomplete:false,value:{required:false,allowed:true},defaultwidth:""},month:{id:10,name:"month",placeholder:false,autocomplete:false,value:{required:false,allowed:true},defaultwidth:""},number:{id:11,name:"number",placeholder:false,autocomplete:false,value:{required:false,allowed:true},defaultwidth:"200px"},password:{id:12,name:"password",placeholder:true,value:{required:false,
allowed:true},defaultwidth:"200px"},radio:{id:13,name:"radio",placeholder:false,autocomplete:false,value:{required:true,allowed:true},defaultwidth:""},range:{id:14,name:"range",placeholder:false,autocomplete:true,value:{required:false,allowed:true},defaultwidth:""},reset:{id:15,name:"reset",placeholder:false,autocomplete:false,value:{required:false,allowed:true},defaultwidth:""},search:{id:16,name:"search",placeholder:true,autocomplete:true,value:{required:false,allowed:true},defaultwidth:""},submit:{id:17,
name:"submit",placeholder:false,autocomplete:false,value:{required:false,allowed:true},defaultwidth:""},tel:{id:18,name:"button",placeholder:true,autocomplete:true,value:{required:false,allowed:true},defaultwidth:""},text:{id:19,name:"text",placeholder:true,autocomplete:true,value:{required:false,allowed:true},defaultwidth:"200px"},time:{id:20,name:"time",placeholder:false,autocomplete:true,value:{required:false,allowed:true},defaultwidth:"200px"},url:{id:21,name:"url",placeholder:true,autocomplete:true,
value:{required:false,allowed:true},defaultwidth:"200px"},week:{id:22,name:"week",placeholder:false,autocomplete:false,value:{required:false,allowed:true},defaultwidth:""}};
(function(a){var d={init:function(b){var e={ID:"",name:"",type:CswInput_Types.text,placeholder:"",cssclass:"",value:"",width:"",autofocus:false,autocomplete:"on",onChange:function(){}};b&&a.extend(e,b);e.name=tryParseString(e.name,e.ID);e.ID=tryParseString(e.ID,e.name);b=a(this);var g=a("<input />");g.CswAttrDom("id",e.ID);g.CswAttrDom("name",e.name);if(!isNullOrEmpty(e.type)){g.CswAttrDom("type",e.type.name);e.type.autocomplete===true&&e.autocomplete==="on"&&g.CswAttrDom("autocomplete","on");e.value=
tryParseString(e.value,"");if(isTrue(e.type.value.required)||!isNullOrEmpty(e.value))g.val(e.value);e.width=tryParseString(e.width,e.type.defaultwidth)}isNullOrEmpty(e.cssclass)||g.addClass(e.cssclass);isNullOrEmpty(e.width)||g.css("width",e.width);isTrue(e.autofocus)&&g.CswAttrDom("autofocus",e.autofocus);isNullOrEmpty(e.onChange)||g.change(function(){e.onChange()});b.append(g);return g}};a.fn.CswInput=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b===
"object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswInput")}})(jQuery);(function(a){a.fn.CswLayoutTable=function(d){function b(k,l,m){for(var s=parseInt(k.CswAttrDom("cellset_rows")),x=parseInt(k.CswAttrDom("cellset_columns")),A=[],v=1;v<=s;v++)for(var w=1;w<=x;w++){if(A[v]===undefined)A[v]=[];A[v][w]=i(k,l,m,v,w,s,x)}return A}function e(k){return k.CswAttrDom("removemode")==="true"}function g(k){return k.CswAttrDom("configmode")==="true"}function f(k,l){l.find("#"+k.CswAttrDom("id")+"addbtn").hide();l.find("#"+k.CswAttrDom("id")+"rembtn").hide();l.find("#"+k.CswAttrDom("id")+
"addcolumnbtn").hide();l.find("#"+k.CswAttrDom("id")+"addrowbtn").hide();k.CswTable("findCell",".CswLayoutTable_cell").removeClass("CswLayoutTable_configcell");k.CswAttrDom("configmode","false");k.trigger(k.CswAttrDom("id")+"CswLayoutTable_onConfigOff",l)}function h(k,l){l.find("#"+k.CswAttrDom("id")+"addbtn").show();l.find("#"+k.CswAttrDom("id")+"rembtn").show();l.find("#"+k.CswAttrDom("id")+"addcolumnbtn").show();l.find("#"+k.CswAttrDom("id")+"addrowbtn").show();parseInt(k.CswAttrDom("cellset_rows"));
parseInt(k.CswAttrDom("cellset_columns"));k.CswTable("finish",null);k.CswTable("findCell",".CswLayoutTable_cell").addClass("CswLayoutTable_configcell");k.CswAttrDom("configmode","true");k.trigger(k.CswAttrDom("id")+"CswLayoutTable_onConfigOn",l)}function i(k,l,m,s,x,A,v){if(l<1)l=1;if(m<1)m=1;return k.CswTable("cell",(l-1)*A+s,(m-1)*v+x)}function q(k,l,m,s,x,A){var v=Math.ceil(m/x),w=Math.ceil(s/A);m=parseInt(x-m%x);s=parseInt(A-s%A);l.CswAttrDom("row",v).CswAttrDom("column",w).CswAttrDom("cellsetrow",
m).CswAttrDom("cellsetcolumn",s).click(function(){if(e(k)){var t=k.find(".CswLayoutTable_remove");t.length>0&&k.trigger(k.CswAttrDom("id")+"CswLayoutTable_onRemove",{table:k,cellset:b(k,v,w),row:t.CswAttrDom("row"),column:t.CswAttrDom("column")});t.children().hide();t.removeClass("CswLayoutTable_remove")}}).draggable({drag:function(t,z){if(g(k)){k.CswTable("findCell",".CswLayoutTable_swapcell").removeClass("CswLayoutTable_swapcell");k.CswTable("findCell",'[row="'+v+'"][column="'+w+'"]').addClass("CswLayoutTable_dragcell");
var P=j(k,v,w,x,A,z);P.length>0&&P.addClass("CswLayoutTable_swapcell")}},stop:function(t,z){if(g(k)){k.CswTable("findCell",".CswLayoutTable_swapcell").removeClass("CswLayoutTable_swapcell");var P=k.CswTable("findCell",'[row="'+v+'"][column="'+w+'"]');P.removeClass("CswLayoutTable_dragcell");var K=j(k,v,w,x,A,z);if(K.length>0){k.trigger(k.CswAttrDom("id")+"CswLayoutTable_onSwap",{table:k,cellset:b(k,v,w),swapcellset:b(k,K.first().CswAttrDom("row"),K.first().CswAttrDom("column")),row:v,column:w,swaprow:K.first().CswAttrDom("row"),
swapcolumn:K.first().CswAttrDom("column")});var fa=a("<div />");for(r=1;r<=x;r++)for(c=1;c<=A;c++){var ga=P.filter('[cellsetrow="'+r+'"][cellsetcolumn="'+c+'"]'),ja=K.filter('[cellsetrow="'+r+'"][cellsetcolumn="'+c+'"]');ga.contents().appendTo(fa);ja.contents().appendTo(ga);fa.contents().appendTo(ja)}}}}}).hover(function(){var t=a(this);g(k)&&t.addClass("CswLayoutTable_hover");e(k)&&k.CswTable("findCell",'[row="'+t.CswAttrDom("row")+'"][column="'+t.CswAttrDom("column")+'"]').addClass("CswLayoutTable_remove")},
function(){var t=a(this);g(k)&&t.removeClass("CswLayoutTable_hover");e(k)&&k.CswTable("findCell",'[row="'+t.CswAttrDom("row")+'"][column="'+t.CswAttrDom("column")+'"]').removeClass("CswLayoutTable_remove")})}function j(k){var l=k.find(".CswLayoutTable_hover");return k.CswTable("findCell",'[row="'+l.CswAttrDom("row")+'"][column="'+l.CswAttrDom("column")+'"]')}var o={init:function(k){var l={ID:"",cellset:{rows:1,columns:1},onSwap:function(){},onAddClick:function(){},onConfigOn:function(){},onConfigOff:function(){},
onRemove:function(){},TableCssClass:"",CellCssClass:"",cellpadding:0,cellspacing:0,width:"",align:"",showConfigButton:false,showAddButton:false,showRemoveButton:false,OddCellRightAlign:false,ReadOnly:false};k&&a.extend(l,k);k=a(this);var m=a("<div />").appendTo(k).css({"float":"right"});l.ReadOnly&&m.hide();var s=k.CswTable("init",{ID:l.ID,TableCssClass:l.TableCssClass+" CswLayoutTable_table",CellCssClass:l.CellCssClass+" CswLayoutTable_cell",cellpadding:l.cellpadding,cellspacing:l.cellspacing,OddCellRightAlign:l.OddCellRightAlign,
width:l.width,align:l.align,onCreateCell:function(A,v,w,t,z){q(v,w,t,z,l.cellset.rows,l.cellset.columns)}}).CswAttrDom("cellset_rows",l.cellset.rows).CswAttrDom("cellset_columns",l.cellset.columns);s.CswAttrDom("configmode","false");s.bind(l.ID+"CswLayoutTable_onSwap",l.onSwap);s.bind(l.ID+"CswLayoutTable_onRemove",l.onRemove);s.bind(l.ID+"CswLayoutTable_onConfigOn",l.onConfigOn);s.bind(l.ID+"CswLayoutTable_onConfigOff",l.onConfigOff);var x=m.CswTable("init",{ID:l.ID+"_buttontbl"});l.showAddButton&&
x.CswTable("cell",1,1).CswImageButton({ButtonType:CswImageButton_ButtonType.Add,AlternateText:"Add",ID:l.ID+"addbtn",onClick:function(){l.onAddClick();return CswImageButton_ButtonType.None}}).hide();l.showRemoveButton&&x.CswTable("cell",1,2).CswImageButton({ButtonType:CswImageButton_ButtonType.Delete,AlternateText:"Remove",ID:l.ID+"rembtn",onClick:function(){var A=a(this);if(e(s)){s.CswAttrDom("removemode","false");A.removeClass("CswLayoutTable_removeEnabled")}else{s.CswAttrDom("removemode","true");
A.addClass("CswLayoutTable_removeEnabled")}return CswImageButton_ButtonType.None}}).hide();if(l.showConfigButton){x.CswTable("cell",1,3).CswImageButton({ButtonType:CswImageButton_ButtonType.ArrowEast,AlternateText:"Add Column",ID:l.ID+"addcolumnbtn",onClick:function(){var A=parseInt(s.CswAttrDom("cellset_rows")),v=parseInt(s.CswAttrDom("cellset_columns")),w=s.CswTable("maxrows"),t=s.CswTable("maxcolumns");i(s,w/A,t/v+1,A,v,A,v);s.CswTable("finish",null);g(s)&&s.CswTable("findCell",".CswLayoutTable_cell").addClass("CswLayoutTable_configcell");
return CswImageButton_ButtonType.None}}).hide();x.CswTable("cell",1,4).CswImageButton({ButtonType:CswImageButton_ButtonType.ArrowSouth,AlternateText:"Add Row",ID:l.ID+"addrowbtn",onClick:function(){var A=parseInt(s.CswAttrDom("cellset_rows")),v=parseInt(s.CswAttrDom("cellset_columns")),w=s.CswTable("maxrows"),t=s.CswTable("maxcolumns");i(s,w/A+1,t/v,A,v,A,v);s.CswTable("finish",null);g(s)&&s.CswTable("findCell",".CswLayoutTable_cell").addClass("CswLayoutTable_configcell");return CswImageButton_ButtonType.None}}).hide();
x.CswTable("cell",1,5).CswImageButton({ButtonType:CswImageButton_ButtonType.Configure,AlternateText:"Configure",ID:l.ID+"configbtn",onClick:function(){g(s)?f(s,x):h(s,x);return CswImageButton_ButtonType.None}})}return s},cellset:function(k,l){var m=a(this);return b(m,k,l)},isConfig:function(){var k=a(this);return g(k)},toggleConfig:function(){var k=a(this),l=a("#"+k.CswAttrDom("id")+"_buttontbl");g(k)?f(k,l):h(k,l)},ConfigOn:function(){var k=a(this),l=a("#"+k.CswAttrDom("id")+"_buttontbl");h(k,l)},
ConfigOff:function(){var k=a(this),l=a("#"+k.CswAttrDom("id")+"_buttontbl");f(k,l)}};if(o[d])return o[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return o.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswLayoutTable")}})(jQuery);(function(a){var d={init:function(b){var e={ID:"",value:"",type:"",media:"all",target:"",rel:"",cssclass:"",onClick:function(){}};b&&a.extend(e,b);b=a(this);var g=a("<a></a>"),f=tryParseString(e.ID,"");f!==""&&g.CswAttrDom("id",f);isNullOrEmpty(e.href)||g.CswAttrDom("href",e.href);isNullOrEmpty(e.value)||g.text(e.value);isNullOrEmpty(e.cssclass)||g.addClass(e.cssclass);isNullOrEmpty(e.type)||g.CswAttrDom("type",e.type);isNullOrEmpty(e.rel)||g.CswAttrDom("rel",e.rel);isNullOrEmpty(e.media)||g.CswAttrDom("media",
e.media);isNullOrEmpty(e.target)||g.CswAttrDom("target",e.target);isNullOrEmpty(e.onClick)||g.click(function(){e.onClick()});b.append(g);return g}};a.fn.CswLink=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswLink")}})(jQuery);(function(a){a.fn.CswLogin=function(d){function b(g){var f={DeauthenticateUrl:"/NbtWebApp/wsNBT.asmx/deauthenticate",onDeauthenticate:function(){}};g&&a.extend(f,g);CswAjaxJSON({url:f.DeauthenticateUrl,data:{},success:function(){a.CswCookie("clear",CswCookieName.Username);f.onDeauthenticate()}})}var e={login:function(g){var f={AuthenticateUrl:"/NbtWebApp/wsNBT.asmx/authenticate",onAuthenticate:function(){}};g&&a.extend(f,g);g=a.CswCookie("get",CswCookieName.SessionId);if(isNullOrEmpty(g)){var h=a('<div id="logindiv" align="center">  <form>    <table>    <tr>      <td align="right"></td>      <td id="loginmsg" style="display: none;"></td>    </tr>    <tr>      <td align="right">Customer ID:</td>      <td><input type="text" name="login_accessid" id="login_accessid" /></td>    </tr>    <tr>      <td align="right">User Name:</td>      <td><input type="text" name="login_username" id="login_username" /></td>    </tr>    <tr>      <td align="right">Password:</td>      <td><input type="password" name="login_password" id="login_password" /></td>    </tr>    <tr>      <td align="right"></td>      <td id="login_button_cell">           </td>    </tr>    <tr>      <td></td>      <td></td>    </tr>  </table> </form> </div> <br/><br/><br/> <div id="assemblydiv" width="100%" align="right"></div>').appendTo(a(this));
a("#assemblydiv").load("_Assembly.txt");a("#login_accessid").focus();var i=a("#login_button_cell").CswButton({ID:"login_button",enabledText:"Login",disabledText:"Logging in...",onclick:function(){function q(l){a.CswCookie("set",CswCookieName.Username,l);h.remove();f.onAuthenticate(l)}a("#loginmsg").hide().children().remove();var j=a("#login_accessid").val(),o=a("#login_username").val(),k=a("#login_password").val();CswAjaxJSON({url:f.AuthenticateUrl,data:{AccessId:j,UserName:o,Password:k},success:function(l){var m=
l.AuthenticationStatus;m==="Authenticated"?q(o):_handleAuthenticationStatus({status:m,success:function(){q(o)},failure:function(s){a("#loginmsg").CswErrorMessage({message:s});a("#login_password").val("");i.CswButton("enable")},usernodeid:l.nodeid,usernodekey:l.cswnbtnodekey,passwordpropid:l.passwordpropid})},error:function(){i.CswButton("enable")}})}});a("#login_accessid").clickOnEnter(i);a("#login_username").clickOnEnter(i);a("#login_password").clickOnEnter(i)}else f.onAuthenticate(a.CswCookie("get",
CswCookieName.Username))},logout:function(g){b(g)}};if(e[d])return e[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return e.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswLogin")}})(jQuery);(function(a){a.fn.CswMenu=function(d){function b(){$this=a(this);e();$this.find("ul.subnav").slideDown("fast").show()}function e(){f.find("ul").stop(true,true);f.find("ul.subnav").slideUp("fast")}var g={};d&&a.extend(g,d);var f=a(this);f.children("li").click(b).hover(b,e);f.find(".subnav").children("li").click(function(h){e();h&&h.stopPropagation()});return this}})(jQuery);(function(a){a.fn.CswMenuHeader=function(d){var b={Url:"/NbtWebApp/wsNBT.asmx/getHeaderMenu",onLogout:function(){},onSuccess:function(){}};d&&a.extend(b,d);var e=a(this);CswAjaxXml({url:b.Url,data:{},stringify:false,success:function(g){var f=a('<ul class="topnav"></ul>');e.text("").append(f);g.children().each(function(){var h=a(this);if(h.CswAttrXml("text")!==undefined){var i=HandleMenuItem({$ul:f,$itemxml:h,onLogout:b.onLogout});if(h.children().length>1){var q=a('<ul class="subnav"></ul>').appendTo(i);
h.children().each(function(){HandleMenuItem({$ul:q,$itemxml:a(this),onLogout:b.onLogout})})}}});f.CswMenu();b.onSuccess()}});return this}})(jQuery);(function(a){a.fn.CswMenuMain=function(d){var b={Url:"/NbtWebApp/wsNBT.asmx/getMainMenu",viewid:"",nodeid:"",cswnbtnodekey:"",onAddNode:function(){},onMultiEdit:function(){},onSearch:{onViewSearch:function(){},onGenericSearch:function(){}},onEditView:function(){},Multi:false,NodeCheckTreeId:""};d&&a.extend(b,d);var e=a(this);CswAjaxXml({url:b.Url,data:{ViewId:b.viewid,SafeNodeKey:b.cswnbtnodekey},stringify:false,success:function(g){var f=a('<ul class="topnav"></ul>');e.text("").append(f);g.children().each(function(){var h=
a(this);if(h.CswAttrXml("text")!==undefined){var i={$ul:f,$itemxml:h,onAlterNode:b.onAddNode,onMultiEdit:b.onMultiEdit,onEditView:b.onEditView,onSearch:b.onSearch,Multi:b.Multi,NodeCheckTreeId:b.NodeCheckTreeId},q=HandleMenuItem(i);if(h.children().length>=1){var j=a('<ul class="subnav"></ul>').appendTo(q);h.children().each(function(){var o={$ul:j,$itemxml:a(this)};a.extend(i,o);HandleMenuItem(i)})}}});f.CswMenu()}});return this}})(jQuery);(function(a){a.fn.CswMobile=function(d){function b(n){var p='<input type="textbox" id="login_accessid" placeholder="Access Id"/><br>';p+='<input type="textbox" id="login_username" placeholder="User Name"/><br>';p+='<input type="password" id="login_password" placeholder="Password"/><br>';p+='<a id="loginsubmit" data-role="button" href="#">Continue</a>';w({DivId:"logindiv",HeaderText:"Login to ChemSW Fire Inspection",content:p,HideSearchButton:true,HideRefreshButton:true,HideLogoutButton:true});a("#loginsubmit").click(fa);
a("#login_accessid").clickOnEnter(a("#loginsubmit"));a("#login_username").clickOnEnter(a("#loginsubmit"));a("#login_password").clickOnEnter(a("#loginsubmit"));n&&e(a("#logindiv"),"fade",false,true)}function e(n,p,y,u){a.mobile.changePage(n,p,y,u)}function g(n){w({DivId:"sorrycharliediv",HeaderText:"Sorry Charlie!",content:"You must have internet connectivity to login.",HideSearchButton:true,HideRefreshButton:true,HideLogoutButton:true});n&&e(a("#sorrycharliediv"),"fade",false,true)}function f(n){setTimeout("$('#"+
n+"').remove();",I.DivRemovalDelay)}function h(n){if(a("#viewsdiv").hasClass("ui-page-active")){w({DivId:"loadingdiv",HeaderText:"Please wait",content:"Loading...",HideSearchButton:true,HideOnlineButton:true,HideRefreshButton:true,HideLogoutButton:true,HideHelpButton:true});e(a("#loadingdiv"),"fade",false,true);setTimeout(function(){i(true);f("loadingdiv")},I.DivRemovalDelay)}else i(n)}function i(n){a("#viewsdiv").remove();o({level:0,DivId:"viewsdiv",HeaderText:"Views",HideRefreshButton:true,HideSearchButton:true,
ChangePage:n})}function q(){var n=a(".onlineStatus");if(n.hasClass("offline")){n.removeClass("offline").addClass("online").text("Online");a(".refresh").css("visibility","");h(false)}if(a("#sorrycharliediv").length>0){b(true);f("sorrycharliediv")}}function j(){return a(".onlineStatus").hasClass("offline")}function o(n){var p={ParentId:"",level:1,DivId:"",HeaderText:"",HideRefreshButton:false,HideSearchButton:false,ChangePage:false};n&&a.extend(p,n);n=true;if(p.level===1)S=p.DivId;if(a("#"+p.DivId).length===
0)if(p.level===0)if(j())R(function(u){k({ParentId:p.ParentId,DivId:p.DivId,HeaderText:p.HeaderText,$xml:u,parentlevel:p.level,HideRefreshButton:p.HideRefreshButton,HideSearchButton:p.HideSearchButton,ChangePage:p.ChangePage})});else{debug&&log("Starting "+I.ViewUrl,true);CswAjaxXml({async:false,formobile:T,url:I.ViewUrl,data:{SessionId:aa,ParentId:p.DivId,ForMobile:T},stringify:false,onloginfail:function(){ga()},success:function(u){debug&&log("On Success "+I.ViewUrl,true);p.level===1&&C(p.DivId,p.HeaderText,
u);k({ParentId:p.ParentId,DivId:p.DivId,HeaderText:p.HeaderText,$xml:u,parentlevel:p.level,HideRefreshButton:p.HideRefreshButton,HideSearchButton:p.HideSearchButton,ChangePage:p.ChangePage})}})}else if(p.level===1)N(S,function(u){if(isNullOrEmpty(u)){if(!j()){debug&&log("Starting "+I.ViewUrl,true);CswAjaxXml({async:false,formobile:T,url:I.ViewUrl,data:{SessionId:aa,ParentId:p.DivId,ForMobile:T},stringify:false,onloginfail:function(){ga()},success:function(B){debug&&log("On Success "+I.ViewUrl,true);
ba=B;p.level===1&&C(p.DivId,p.HeaderText,ba);k({ParentId:p.ParentId,DivId:p.DivId,HeaderText:p.HeaderText,$xml:ba,parentlevel:p.level,HideRefreshButton:p.HideRefreshButton,HideSearchButton:p.HideSearchButton,ChangePage:p.ChangePage})}})}}else{ba=u;k({ParentId:p.ParentId,DivId:p.DivId,HeaderText:p.HeaderText,$xml:u,parentlevel:p.level,HideRefreshButton:p.HideRefreshButton,HideSearchButton:p.HideSearchButton,ChangePage:p.ChangePage})}});else{if(!isNullOrEmpty(ba)){var y=ba.find("#"+p.DivId);k({ParentId:p.ParentId,
DivId:p.DivId,HeaderText:p.HeaderText,$xml:y.children("subitems").first(),parentlevel:p.level,HideRefreshButton:p.HideRefreshButton,HideSearchButton:p.HideSearchButton,ChangePage:p.ChangePage})}}else n=false;return n}function k(n){var p={ParentId:"",DivId:"",HeaderText:"",$xml:"",parentlevel:"",HideRefreshButton:false,HideSearchButton:false,ChangePage:false};n&&a.extend(p,n);var y=m();oa="";pa=function(){};p.$xml.children().each(function(){y+=l(a(this),p.DivId,p.parentlevel)});y+="</ul>";$divhtml=
w({ParentId:p.ParentId,level:p.parentlevel,DivId:p.DivId,HeaderText:p.HeaderText,content:y,HideRefreshButton:p.HideRefreshButton,HideSearchButton:p.HideSearchButton});pa($divhtml);p.ChangePage&&e(a("#"+p.DivId),"slide")}function l(n,p,y){var u=makeSafeId({ID:n.CswAttrXml("id")}),B=n.CswAttrXml("name"),G=!isNullOrEmpty(u),H=tryParseString(n.get(0).nodeName,"").toLowerCase(),M=n.next().CswAttrXml("id"),E=n.prev().CswAttrXml("id"),Q="";switch(H){case "search":break;case "node":Q+=s(n);break;case "prop":var J=
n.CswAttrXml("tab");G=tryParseString(n.CswAttrXml("fieldtype"),"").toLowerCase();var W=n.CswAttrXml("gestalt");if(W==="NaN")W="";H=n.prevAll('[fieldtype="'+G+'"]').andSelf().length;var ha=n.siblings('[fieldtype="'+G+'"]').andSelf().length;if(oa!==J){isNullOrEmpty(oa)||(Q+="</ul>"+m());Q+='<li data-role="list-divider">'+J+"</li>";oa=J}switch(G){case "logical":Q+='<li id="'+u+'_li"><a href="#'+u+'">'+B+"</a></li>";J=tryParseString(n.children("checked").text(),"");W=tryParseString(n.children("required").text(),
"");Q+='<div class="lisubstitute ui-li ui-btn-up-c">';Q+=A(u,"ans","ans2",J,W);Q+="</div>";break;case "question":Q+='<li id="'+u+'_li"><a href="#'+u+'">'+B+"</a></li>";J=tryParseString(n.children("answer").text(),"");W=tryParseString(n.children("allowedanswers").text(),"");var X=tryParseString(n.children("compliantanswers").text(),""),Y=tryParseString(n.children("correctiveaction").text(),"");Q+='<div class="lisubstitute ui-li ui-btn-up-c">';Q+=v(p,u,"ans","ans2","cor","li","propname",W,J,X);Q+="</div>";
if(!isNullOrEmpty(J)&&(","+X+",").indexOf(","+J+",")<0&&isNullOrEmpty(Y)){var ua=pa;pa=function(qa){qa.find("#"+u+"_li div").addClass("OOC");ua(qa)}}break;default:Q+='<li id="'+u+'_li">';Q+=' <a href="#'+u+'">'+B+"</a>";Q+=' <p class="ui-li-aside">'+W+"</p>";Q+="</li>"}J="";isNullOrEmpty(E)||(J+='<a href="#'+E+'" data-role="button" data-icon="arrow-u" data-inline="true" data-theme="'+I.Theme+'" data-transition="slideup" data-direction="reverse">Previous</a>');isNullOrEmpty(M)||(J+='<a href="#'+M+
'" data-role="button" data-icon="arrow-d" data-inline="true" data-theme="'+I.Theme+'" data-transition="slideup">Next</a>');if(G==="question")J+="&nbsp;"+H+"&nbsp;of&nbsp;"+ha;w({ParentId:p,level:y,DivId:u,HeaderText:B,toolbar:J,content:x(n,p)});break;default:Q+="<li>";Q+=G?'<a href="#'+u+'">'+B+"</a>":B;Q+="</li>"}return Q}function m(n){var p='<ul data-role="listview" ';isNullOrEmpty(n)||(p+='id="'+n+'"');p+=">";return p}function s(n){var p="",y=makeSafeId({ID:n.CswAttrXml("id")}),u=n.CswAttrXml("name"),
B="";isNullOrEmpty(n.CswAttrXml("iconfilename"))||(B="images/icons/"+n.CswAttrXml("iconfilename"));switch(n.CswAttrXml("objectclass")){case "InspectionDesignClass":var G=n.find('prop[ocpname="Due Date"]').CswAttrXml("gestalt"),H=n.find('prop[ocpname="Location"]').CswAttrXml("gestalt"),M=n.find('prop[ocpname="Target"]').CswAttrXml("gestalt"),E=n.find('prop[ocpname="Status"]').CswAttrXml("gestalt"),Q=0;n.find('prop[fieldtype="Question"]').each(function(){var J=a(this);isNullOrEmpty(J.children("Answer").text())&&
Q++});p+="<li>";isNullOrEmpty(B)||(p+='<img src="'+B+'" class="ui-li-icon"/>');p+='<a href="#'+y+'">';p+="<p>"+u+"</p>";p+="<p>"+H+"</p>";p+="<p>"+M+"</p>";p+="<p>";isNullOrEmpty(E)||(p+=E+", ");p+="Due: "+G+"</p>";p+='<span id="'+makeSafeId({prefix:y,ID:"unansweredcnt"})+'" class="ui-li-count">'+Q+"</span>";p+="</a>";p+="</li>";break;default:p+="<li>";isNullOrEmpty(B)||(p+='<img src="'+B+'" class="ui-li-icon"/>');p+='<a href="#'+y+'">'+u+"</a>";p+="</li>"}return p}function x(n,p){var y=makeSafeId({ID:n.CswAttrXml("id")}),
u=n.CswAttrXml("fieldtype"),B=n.CswAttrXml("name"),G=isTrue(n.CswAttrXml("readonly")),H=tryParseString,M=n.children("text"),E="";if(M.length>0){E=M.text();M=M.html();if(!isNullOrEmpty(M))if(M.substr(0,11)==="<\!--[CDATA[")E=M.substr(11,M.length-11-5)}M=H(E,"");H=tryParseNumber(n.children("value").text(),"");var Q=tryParseString(n.children("href").text(),""),J=tryParseString(n.children("checked").text(),""),W=tryParseString(n.children("required").text(),""),ha=tryParseString(n.children("units").text(),
""),X=tryParseString(n.children("answer").text(),""),Y=tryParseString(n.children("allowedanswers").text(),""),ua=tryParseString(n.children("correctiveaction").text(),""),qa=tryParseString(n.children("comments").text(),""),va=tryParseString(n.children("compliantanswers").text(),""),ya=tryParseString(n.children("options").text(),"");E='<div id="'+y+'_propname"';if(u==="Question"&&!(X===""||(","+va+",").indexOf(","+X+",")>=0))E+=' class="OOC"';E+=">"+B+"</div><br/>";if(G)E+=n.CswAttrXml("gestalt");else switch(u){case "Date":E+=
'<input type="text" name="'+y+'" value="'+H+'" />';break;case "Link":E+='<a href="'+Q+'" rel="external">'+M+"</a>";break;case "List":E+='<select name="'+y+'">';y=ya.split(",");for(u=0;u<y.length;u++){E+='<option value="'+y[u]+'"';if(H===y[u])E+=" selected";E+=isNullOrEmpty(y[u])?">[blank]</option>":">"+y[u]+"</option>"}E+="</select>";break;case "Logical":E+=A(y,"ans2","ans",J,W);break;case "Memo":E+='<textarea name="'+y+'">'+M+"</textarea>";break;case "Number":E+='<input type="number" name="'+y+'" value="'+
H+'"';E+="/>";break;case "Password":E+=string.Empty;break;case "Quantity":E+='<input type="text" name="'+y+'_qty" value="'+H+'" />';E+=ha;break;case "Question":E+=v(p,y,"ans2","ans","cor","li","propname",Y,X,va);E+='<textarea id="'+y+'_cor" name="'+y+'_cor" placeholder="Corrective Action"';if(X===""||(","+va+",").indexOf(","+X+",")>=0)E+='style="display: none"';E+='onchange="';E+="var $cor = $(this); ";E+="if($cor.CswAttrDom('value') === '') { ";E+="  $('#"+y+"_li div').addClass('OOC'); ";E+="  $('#"+
y+"_propname').addClass('OOC'); ";E+="} else {";E+="  $('#"+y+"_li div').removeClass('OOC'); ";E+="  $('#"+y+"_propname').removeClass('OOC'); ";E+="}";E+='">';E+=ua;E+="</textarea>";E+='<textarea name="'+y+'_com" placeholder="Comments">';E+=qa;E+="</textarea>";break;case "Static":E+=M;break;case "Text":E+='<input type="text" name="'+y+'" value="'+M+'" />';break;case "Time":E+='<input type="text" name="'+y+'" value="'+H+'" />';break;default:E+=n.CswAttrXml("gestalt")}return E}function A(n,p,y,u,B){var G=
'<fieldset class="csw_fieldset" data-role="controlgroup" data-type="horizontal" data-role="fieldcontain">',H=["Null","True","False"];if(isTrue(B))H=["True","False"];for(B=0;B<H.length;B++){var M;switch(H[B]){case "Null":M="?";break;case "True":M="Yes";break;case "False":M="No"}G+='<input type="radio" name="'+makeSafeId({prefix:n,ID:p})+'" id="'+makeSafeId({prefix:n,ID:p,suffix:H[B]})+'" value="'+H[B]+'" ';if(u==="false"&&H[B]==="False"||u==="true"&&H[B]==="True"||u===""&&H[B]==="Null")G+="checked";
G+=' onclick="';for(var E=0;E<H.length;E++)G+=H[E]===H[B]?" $('#"+makeSafeId({prefix:n,ID:p,suffix:H[E]})+"').siblings('label').addClass('ui-btn-active');":" $('#"+makeSafeId({prefix:n,ID:p,suffix:H[E]})+"').siblings('label').removeClass('ui-btn-active');";G+=" var $otherradio; ";for(E=0;E<H.length;E++){G+=" $otherradio = $('#"+makeSafeId({prefix:n,ID:y,suffix:H[E]})+"'); ";if(H[E]===H[B]){G+=" $otherradio.CswAttrDom('checked', true); ";G+=" $otherradio.siblings('label').addClass('ui-btn-active'); "}else{G+=
" $otherradio.CswAttrDom('checked', false); ";G+=" $otherradio.siblings('label').removeClass('ui-btn-active'); "}}G+='" />';G+='<label for="'+makeSafeId({prefix:n,ID:p,suffix:H[B]})+'">'+M+"</label>"}G+="</fieldset>";return G}function v(n,p,y,u,B,G,H,M,E,Q){var J='<fieldset class="csw_fieldset" id="'+p+'_fieldset" data-role="controlgroup" data-type="horizontal" data-role="fieldcontain">';M=M.split(",");for(var W=0;W<M.length;W++){var ha=makeSafeId({ID:M[W]});J+='<input type="radio" name="'+makeSafeId({ID:p,
suffix:y})+'" id="'+makeSafeId({prefix:p,ID:y,suffix:ha})+'" value="'+M[W]+'" ';if(E===M[W])J+=' checked="checked"';J+=' onclick="';for(var X=0;X<M.length;X++)J+=M[X]===M[W]?" $('#"+makeSafeId({prefix:p,ID:y,suffix:M[X]})+"').siblings('label').addClass('ui-btn-active');":" $('#"+makeSafeId({prefix:p,ID:y,suffix:M[X]})+"').siblings('label').removeClass('ui-btn-active');";J+=" var $otherradio; ";for(X=0;X<M.length;X++){J+=" $otherradio = $('#"+makeSafeId({prefix:p,ID:u,suffix:M[X]})+"'); ";if(M[X]===
M[W]){J+=" $otherradio.CswAttrDom('checked', true); ";J+=" $otherradio.siblings('label').addClass('ui-btn-active'); "}else{J+=" $otherradio.CswAttrDom('checked', false); ";J+=" $otherradio.siblings('label').removeClass('ui-btn-active'); "}}if((","+Q+",").indexOf(","+M[W]+",")>=0){J+=" $('#"+makeSafeId({prefix:p,ID:B})+"').css('display', 'none'); ";J+=" $('#"+makeSafeId({prefix:p,ID:G})+" div').removeClass('OOC'); ";J+=" $('#"+makeSafeId({prefix:p,ID:H})+"').removeClass('OOC'); "}else{J+=" var $cor = $('#"+
makeSafeId({prefix:p,ID:B})+"'); ";J+=" $cor.css('display', ''); ";J+=" if($cor.CswAttrDom('value') === '') { ";J+="   $('#"+makeSafeId({prefix:p,ID:G})+" div').addClass('OOC'); ";J+="   $('#"+makeSafeId({prefix:p,ID:H})+"').addClass('OOC'); ";J+=" } else {";J+="   $('#"+makeSafeId({prefix:p,ID:G})+" div').removeClass('OOC'); ";J+="   $('#"+makeSafeId({prefix:p,ID:H})+"').removeClass('OOC'); ";J+=" } "}if(isNullOrEmpty(E)){J+=" if(! $('#"+p+"_fieldset').CswAttrDom('answered')) { ";J+="   var $cntspan = $('#"+
n+"_unansweredcnt'); ";J+="   $cntspan.text(parseInt($cntspan.text()) - 1); ";J+="   $('#"+p+"_fieldset').CswAttrDom('answered', 'true'); ";J+=" }"}J+=' " />';J+='            <label for="'+makeSafeId({prefix:p,ID:y,suffix:ha})+'">'+M[W]+"</label>"}J+="</fieldset>";return J}function w(n){var p={ParentId:undefined,level:1,DivId:"",HeaderText:"",toolbar:"",content:"",HideSearchButton:false,HideOnlineButton:false,HideRefreshButton:false,HideLogoutButton:false,HideHelpButton:false,backicon:undefined,backtransition:undefined};
n&&a.extend(p,n);p.DivId=makeSafeId({ID:p.DivId});n='<div id="'+p.DivId+'" data-role="page" data-url="'+p.DivId+'"><div data-role="header" data-theme="'+I.Theme+'" data-position="fixed">';n+='<a href="#'+p.ParentId+'" id="'+p.DivId+'_back" data-direction="reverse" ';isNullOrEmpty(p.backtransition)||(n+=' data-transition="'+p.backtransition+'" ');if(isNullOrEmpty(p.ParentId))n+=' style="visibility: hidden;" ';n+=' data-icon="';n+=isNullOrEmpty(p.backicon)?"arrow-l":p.backicon;n+='">Back</a>';n+="<h1>"+
p.HeaderText+"</h1>";p.HideSearchButton||(n+='    <a href="#" id="'+p.DivId+'_searchopen">Search</a>');n+='    <div class="toolbar" data-role="controlgroup" data-type="horizontal">'+p.toolbar+'    </div>  </div>  <div data-role="content" data-theme="'+I.Theme+'">'+p.content+'  </div>  <div data-role="footer" data-theme="'+I.Theme+'" data-position="fixed">';if(!p.HideOnlineButton){n+='    <a href="#" id="'+p.DivId+'_gosynchstatus" data-transition="slideup">';n+=j()?'    <div class="onlineStatus offline">Offline</div>':
'    <div class="onlineStatus online">Online</div>';n+="    </a>"}p.HideRefreshButton||(n+='    <a href="#" id="'+p.DivId+'_refresh" class="refresh">Refresh</a>');p.HideLogoutButton||(n+='    <a href="#" id="'+p.DivId+'_logout">Logout</a>');n+='     <a rel="external" href="Login.aspx?redir=n">Full Site</a>';p.HideHelpButton||(n+='    <a href="#" id="'+p.DivId+'_help">Help</a>');n+="  </div></div>";n=a(n);a("body").append(n);n.page();z(p.DivId,p.ParentId,p.level,n);return n}function t(n){var p="";
n=a("#"+n).find('div[data-role="header"] #'+n+"_back");if(n.length>0)p=n.CswAttrDom("href").substr(1);return p}function z(n,p,y,u){u.find("#"+n+"_searchopen").click(function(B){ra(n,B)}).end().find("#"+n+"_gosynchstatus").click(function(){a("#synchstatus_back").CswAttrDom("href","#"+n);a("#synchstatus_back").css("visibility","");e(a("#synchstatus"),"slideup")}).end().find("#"+n+"_refresh").click(function(B){B.stopPropagation();B.preventDefault();return ja(n,B)}).end().find("#"+n+"_logout").click(function(B){B.stopPropagation();
B.preventDefault();ga()}).end().find("#"+n+"_back").click(function(){n!=="synchstatus"&&n.indexOf("prop_")!==0&&setTimeout("$('div[id*=\""+n+"\"]').remove();",I.DivRemovalDelay);return true}).end().find("#"+n+"_help").click(function(){e(a("#help"),"slideup")}).end().find("input").change(function(B){ea(n,B)}).end().find("textarea").change(function(B){ea(n,B)}).end().find("select").change(function(B){ea(n,B)}).end().find("li a").click(function(B){var G=a(this);if(o({ParentId:n,level:y+1,DivId:G.CswAttrDom("href").substr(1),
HeaderText:G.text(),ChangePage:true})){B.stopPropagation();B.preventDefault()}}).end()}function P(n,p){if(n){a("#ss_pendingchangecnt").text("Yes");a(".onlineStatus").addClass("pendingchanges")}else{a("#ss_pendingchangecnt").text("No");a(".onlineStatus").removeClass("pendingchanges")}if(p){var y=new Date;a("#ss_lastsynch").text(y.toLocaleDateString()+" "+y.toLocaleTimeString())}}function K(){return a("#ss_pendingchangecnt").text()!=="Yes"||confirm("You have pending unsaved changes.  These changes will be lost.  Continue?")}
function fa(){ca=a("#login_username").val();var n=a("#login_password").val(),p=a("#login_accessid").val();if(!j()){n={AccessId:p,UserName:ca,Password:n};debug&&log("Starting "+I.AuthenticateUrl,true);CswAjaxJSON({formobile:T,url:I.AuthenticateUrl,data:n,onloginfail:function(){ga()},success:function(){debug&&log("On Success "+I.AuthenticateUrl,true);aa=a.CswCookie("get",CswCookieName.SessionId);O(aa,ca);h(true);f("logindiv")}})}}function ga(){K()&&ia(function(){window.location.href=window.location.pathname})}
function ja(n){if(!j())if(K()){w({DivId:"loadingdiv",HeaderText:"Please wait",content:"Loading...",HideSearchButton:true,HideOnlineButton:true,HideRefreshButton:true,HideLogoutButton:true,HideHelpButton:true});e(a("#loadingdiv"),"fade",false,true);setTimeout(function(){sa(n)},I.DivRemovalDelay)}return false}function sa(n){for(var p="";!isNullOrEmpty(n)&&n.substr(0,7)!=="viewid_";){p=t(n);a('div[id*="'+n+'"]').remove();n=p}if(!isNullOrEmpty(n)){var y=n,u=a("#"+y).find('div[data-role="header"] h1').text();
a('div[id*="'+y+'"]').remove();debug&&log("Starting "+I.ViewUrl,true);CswAjaxXml({async:false,formobile:T,url:I.ViewUrl,data:{SessionId:aa,ParentId:y,ForMobile:T},stringify:false,onloginfail:function(){ga()},success:function(B){debug&&log("Starting "+I.ViewUrl,true);ba=B;F(y,ba,"0");k({ParentId:"viewsdiv",DivId:y,HeaderText:u,$xml:ba,parentlevel:1,HideRefreshButton:false,HideSearchButton:true,ChangePage:true});f("loadingdiv")}})}}function ea(n,p){var y=a(p.target),u=y.CswAttrDom("name"),B=y.val();
if(!isNullOrEmpty(ba)){ba.find("#"+n).andSelf().find("prop").each(function(){var G=a(this),H=makeSafeId({ID:G.CswAttrXml("id")}),M=G.CswAttrXml("fieldtype");G.CswAttrXml("name");var E=G.children("text"),Q=G.children("value");G.children("href");G.children("options");var J=G.children("checked");G.children("required");G.children("units");var W=G.children("answer");G.children("allowedanswers");var ha=G.children("correctiveaction"),X=G.children("comments");G.children("compliantanswers");var Y=null;switch(M){case "Date":if(u===
H)Y=Q;break;case "List":if(u===H)Y=Q;break;case "Logical":if(u===makeSafeId({ID:H,suffix:"ans"})||u===makeSafeId({ID:H,suffix:"ans2"}))Y=J;break;case "Memo":if(u===H)Y=E;break;case "Number":if(u===H)Y=Q;break;case "Quantity":if(u===makeSafeId({ID:H,suffix:"qty"}))Y=Q;break;case "Question":if(u===makeSafeId({ID:H,suffix:"com"}))Y=X;else if(u===makeSafeId({ID:H,suffix:"ans"})||u===makeSafeId({ID:H,suffix:"ans2"}))Y=W;else if(u===makeSafeId({ID:H,suffix:"cor"}))Y=ha;break;case "Text":if(u===H)Y=E;break;
case "Time":if(u===H)Y=Q}if(!isNullOrEmpty(Y)){Y.text(B);G.CswAttrXml("wasmodified","1")}});F(S,a(ba.wrap("<wrapper />").parent().html()),"1");P(true,false)}}function ra(n){a("#"+n+"_searchprop").val();a("#"+n+"_searchfor").val();N(S,function(p){if(!isNullOrEmpty(p)){var y='<select id="'+n+'_searchprop" name="'+n+'_searchprop">';p.closest("result").find("searches").children().each(function(){var u=a(this);y+='<option value="'+u.CswAttrXml("id")+'">'+u.CswAttrXml("name")+"</option>"});y+='</select><input type="search" name="'+
n+'_searchfor" id="'+n+'_searchfor" value="" placeholder="Search" /><input type="button" id="'+n+'_searchgo" data-inline="true" value="Go" /> <div id="'+n+'_searchresults"></div>';w({ParentId:n,DivId:n+"_searchdiv",HeaderText:"Search",content:y,HideSearchButton:true,HideRefreshButton:true,backicon:"arrow-u"});a("#"+n+"_searchgo").click(function(u){wa(n,u)});e(a("#"+n+"_searchdiv"),"slideup",false,true)}})}function wa(n){var p=a("#"+n+"_searchprop").val(),y=a("#"+n+"_searchfor").val();N(S,function(u){if(!isNullOrEmpty(u)){var B=
m(n+"_searchresultslist"),G=0;u.find("node").each(function(){var H=a(this);if(!isNullOrEmpty(H.CswAttrXml(p)))if(H.CswAttrXml(p).toLowerCase().indexOf(y.toLowerCase())>=0){G++;B+=l(H,n,1,false)}});if(G===0)B+="<li>No Results</li>";B+="</ul>";u=a("#"+n+"_searchresults");u.children().remove();u.append(B);a("#"+n+"_searchresultslist").listview();z(n+"_searchdiv",n,1,u)}})}function Z(n,p,y){window.openDatabase?da.transaction(function(u){u.executeSql(n,p,y,ta)}):log("database is not opened",true)}function ia(n){Z("DROP TABLE IF EXISTS configvars; ",
null,function(){Z("DROP TABLE IF EXISTS views; ",null,function(){isNullOrEmpty(n)||n()})})}function ka(n){Z("CREATE TABLE IF NOT EXISTS configvars   (id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,    varname TEXT NOT NULL,    varval TEXT);",null,function(){Z("CREATE TABLE IF NOT EXISTS views   (id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,    rootid TEXT NOT NULL,    rootname TEXT NOT NULL,    viewxml TEXT,    wasmodified INTEGER );",null,n)})}function ta(n,p){log("Database Error: "+p.message+" (Code "+
p.code+")",true);return true}function la(n,p,y){Z("select varval from configvars where varname=?;",[n],function(u,B){0===B.rows.length?Z("insert into configvars (varname, varval) values ( ?, ? );",[n,p],function(){isNullOrEmpty(y)||y()}):Z("update configvars set varval = ? where varname = ?",[p,n],function(){isNullOrEmpty(y)||y()})})}function ma(n,p){Z("select varval from configvars where varname=?;",[n],function(y,u){if(u.rows.length>0){var B=u.rows.item(0);p(B.varval)}else p("")})}function O(n,
p,y){la("username",p,function(){la("sessionid",n,function(){isNullOrEmpty(y)||y()})})}function C(n,p,y){isNullOrEmpty(n)||Z("INSERT INTO views (rootid, rootname, viewxml, wasmodified) VALUES (?, ?, ?, 0);",[n,p,xmlToString(y)])}function F(n,p,y){isNullOrEmpty(n)||Z("UPDATE views SET wasmodified = ?, viewxml = ? WHERE rootid = ?;",[y,xmlToString(p),n])}function V(n){Z("SELECT rootid, viewxml FROM views WHERE wasmodified = 1 ORDER BY id DESC;",[],function(p,y){if(y.rows.length>0){P(true,true);var u=
y.rows.item(0),B=u.rootid;u=u.viewxml;!isNullOrEmpty(B)&&!isNullOrEmpty(u)&&n(B,u)}else{P(false,true);n()}})}function N(n,p){isNullOrEmpty(n)||Z("SELECT viewxml FROM views WHERE rootid = ? ORDER BY id DESC;",[n],function(y,u){if(u.rows.length>0){var B=u.rows.item(0);B=a(B.viewxml);p(B)}else p()})}function R(n){Z("SELECT rootid, rootname FROM views ORDER BY rootname;",[],function(p,y){for(var u="",B=0;B<y.rows.length;B++){var G=y.rows.item(B);u+='<view id="'+G.rootid+'" name="'+G.rootname+'" />'}u=
a("<result>"+u+"</result>");n(u)})}function D(){xa=setTimeout(L,I.PollingInterval)}function L(n,p){var y=I.ConnectTestUrl;if(I.RandomConnectionFailure)y=I.ConnectTestRandomFailUrl;CswAjaxXml({formobile:T,url:y,data:{},stringify:false,onloginfail:function(){ga()},success:function(u){q();U(true);isNullOrEmpty(n)||n(u)},error:function(u){u=a(u);isNullOrEmpty(p)||p(u);D()}})}function U(n){if(isNullOrEmpty(aa))n&&D();else V(function(p,y){if(!isNullOrEmpty(p)&&!isNullOrEmpty(y)){debug&&log("Starting "+
I.UpdateUrl,true);CswAjaxJSON({formobile:T,url:I.UpdateUrl,data:{SessionId:aa,ParentId:p,UpdatedViewXml:y,ForMobile:T},stringify:true,onloginfail:function(){n&&D()},success:function(u){debug&&log("On Success "+I.UpdateUrl,true);F(p,u.xml,"0");n&&D()},error:function(){n&&D()}})}else n&&D()})}var I={DBShortName:"Mobile.html",DBVersion:"1.0",DBDisplayName:"Mobile.html",DBMaxSize:65536,ViewUrl:"/NbtWebApp/wsNBT.asmx/RunView",ConnectTestUrl:"/NbtWebApp/wsNBT.asmx/ConnectTest",ConnectTestRandomFailUrl:"/NbtWebApp/wsNBT.asmx/ConnectTestRandomFail",
UpdateUrl:"/NbtWebApp/wsNBT.asmx/UpdateProperties",MainPageUrl:"/NbtWebApp/Mobile.html",AuthenticateUrl:"/NbtWebApp/wsNBT.asmx/Authenticate",Theme:"a",PollingInterval:3E4,DivRemovalDelay:1E3,RandomConnectionFailure:false};d&&a.extend(I,d);var T=true,S,da,ca,aa,ba,na="initialloadingdiv";if(window.location.hash.length>0){d=window.location.hash.substr(1);if(a("#"+d).length===0&&d!=="viewsdiv"&&d!=="logindiv")na=d}w({DivId:na,HeaderText:"Please wait",content:"Loading...",HideSearchButton:true,HideOnlineButton:true,
HideRefreshButton:true,HideLogoutButton:true,HideHelpButton:true});(function(){var n="";n+='<p>Pending Unsynched Changes: <span id="ss_pendingchangecnt">No</span></p>';n+='<p>Last synch: <span id="ss_lastsynch"></span></p>';n+='<a id="ss_forcesynch" href="#" data-role="button">Force Synch Now</a>';n+='<a id="ss_gooffline" href="#" data-role="button">Go Offline</a>';$divhtml=w({DivId:"synchstatus",HeaderText:"Synch Status",content:n,HideSearchButton:true,HideRefreshButton:true});$divhtml.find("#ss_forcesynch").click(function(p){U(false);
p.preventDefault()}).end().find("#ss_gooffline").click(function(p){p.preventDefault();if(j()){clearTimeout(xa);D();q();a("#ss_gooffline span").text("Go Offline")}else{clearTimeout(xa);p=a(".onlineStatus");if(p.hasClass("online")){p.removeClass("online").addClass("offline").text("Offline");a(".refresh").css("visibility","hidden");h(false)}if(a("#logindiv").length>0){g(true);f("logindiv")}a("#ss_gooffline span").text("Go Online")}})})();(function(){var n="";n+="<p>Help</p>";$divhtml=w({DivId:"help",
HeaderText:"Help",content:n,HideSearchButton:true,HideRefreshButton:true})})();(function(n,p){da=openDatabase(I.DBShortName,I.DBVersion,I.DBDisplayName,I.DBMaxSize);n?ia(function(){ka(p)}):ka(p)})(false,function(){ma("sessionid",function(n){if(isNullOrEmpty(n))L(function(){b(true);f(na)},function(){g(true);f(na)});else{aa=n;h(true);f(na);D()}})});var oa,pa,xa;return this}})(jQuery);(function(a){var d={init:function(b){var e={GridUrl:"/NbtWebApp/wsNBT.asmx/getGrid",viewid:"",showempty:false,ID:"",nodeid:"",cswnbtnodekey:"",gridTableID:"gridTable",gridPagerID:"gridPager",reinit:false,onEditNode:function(){},onDeleteNode:function(){}};b&&a.extend(e,b);b=a(this);e.reinit&&b.empty();var g=makeId({ID:e.gridTableID,prefix:e.ID}),f=b.CswTable("init",{ID:g});g=makeId({ID:e.gridPagerID,prefix:e.ID});var h=b.CswDiv("init",{ID:g}).css("width","100%").css("height","20px");CswAjaxJSON({url:e.GridUrl,
data:{ViewId:e.viewid,SafeNodeKey:e.cswnbtnodekey,ShowEmpty:e.showempty},success:function(i){jqGridOpt=i.jqGridOpt;if(isNullOrEmpty(jqGridOpt.width))jqGridOpt.width=650;i={autoencode:true,caption:"",datatype:"local",emptyrecords:"No Results",height:"300",multiselect:true,pager:h,rowList:[10,25,50],rowNum:10,shrinkToFit:true,sortname:"",sortorder:"asc",toppager:false,viewrecords:true};a.extend(i,jqGridOpt);if(i.rowNum>=50)i.toppager=true;f.jqGrid(i).navGrid("#"+h.CswAttrDom("id"),{cloneToTop:false,
edit:true,edittext:"",edittitle:"Edit row",editfunc:function(q){var j={cswnbtnodekey:"",nodeid:"",onEditNode:e.onEditNode};if(q!==null){j.cswnbtnodekey=f.jqGrid("getCell",q,"cswnbtnodekey");a.CswDialog("EditNodeDialog",j)}else alert("Please select a row to edit");return j.CswNbtNodeKey},add:false,del:true,deltext:"",deltitle:"Delete row",delfunc:function(q){var j={cswnbtnodekey:"",nodeid:"",nodename:"",onDeleteNode:e.onDeleteNode};if(q!==null){j.cswnbtnodekey=f.jqGrid("getCell",q,"cswnbtnodekey");
j.nodename=f.jqGrid("getCell",q,"nodename");a.CswDialog("DeleteNodeDialog",j)}else alert("Please select a row to delete");return j.cswnbtnodekey},search:true,searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",view:true,viewtext:"",viewtitle:"View row"},{},{},{},{caption:"Search...",Find:"Find",Reset:"Reset",odata:["equal","not equal","less","less or equal","greater","greater or equal","begins with","does not begin with",
"is in","is not in","ends with","does not end with","contains","does not contain"],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],matchText:"match",rulesText:"rules"},{})}});return f},scrollToSelectedRow:function(){var b=a(this),e=b.jqGrid("getGridParam","selrow"),g=null;try{g=b.find("tbody").find("tr:first").outerHeight()}catch(f){}g=g||23;e=b.getInd(e);b.closest(".ui-jqgrid-bdiv").scrollTop(g*(e-1))}};a.fn.CswNodeGrid=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,
1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on "+PluginName)}})(jQuery);(function(a){var d={init:function(b){var e={ID:"",NodesUrl:"/NbtWebApp/wsNBT.asmx/getNodes",nodetypeid:"",objectclassid:"",objectclass:"",onSelect:function(){},onSuccess:function(){}};b&&a.extend(e,b);b=a(this);var g=a('<select id="'+e.ID+'_nodeselect" />').appendTo(b);g.change(function(){e.onSelect(g.val())});CswAjaxXml({url:e.NodesUrl,data:{NodeTypeId:e.nodetypeid,ObjectClassId:e.objectclassid,ObjectClass:e.objectclass},stringify:false,success:function(f){f.children("node").each(function(){var h=
a(this);g.append('<option value="'+h.CswAttrXml("id")+'">'+h.CswAttrXml("name")+"</option>")});e.onSuccess()}});return g},value:function(){return a(this).val()}};a.fn.CswNodeSelect=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswNodeSelect")}})(jQuery);(function(a){a.fn.CswNodeTabs=function(d){function b(l,m){CswAjaxXml({url:o.PropsUrl,data:{EditMode:o.EditMode,NodeId:o.nodeid,TabId:m,SafeNodeKey:o.cswnbtnodekey,NodeTypeId:o.nodetypeid},stringify:false,success:function(s){var x=l.children("form");x.contents().remove();o.title!==""&&x.append(o.title);var A=x.CswLayoutTable("init",{ID:o.ID+"_props",OddCellRightAlign:true,ReadOnly:o.EditMode==="PrintReport",cellset:{rows:1,columns:2},onSwap:function(w,t){e(t)},showConfigButton:o.filterToPropId==="",
onConfigOn:function(){s.children().each(function(){var w=a(this),t=A.find("#"+w.CswAttrXml("id")+"_subproptable"),z=t.parent();z=A.CswLayoutTable("cellset",z.CswAttrDom("row"),z.CswAttrDom("column"))[1][2];if(t.length>0){t={fieldtype:w.CswAttrXml("fieldtype"),nodeid:o.nodeid,relatednodeid:o.relatednodeid,propid:w.CswAttrXml("id"),$propdiv:z.children("div"),$propxml:w,onchange:function(){},onReload:function(){b(l,m)},cswnbtnodekey:o.cswnbtnodekey};i(t,o.SinglePropUrl,o.EditMode,o.cswnbtnodekey,w.CswAttrXml("id"),
o.nodetypeid,w,z,l,m,true)}})},onConfigOff:function(){s.children().each(function(){var w=a(this),t=A.find("#"+w.CswAttrXml("id")+"_subproptable"),z=t.parent();z=A.CswLayoutTable("cellset",z.CswAttrDom("row"),z.CswAttrDom("column"))[1][2];if(t.length>0){t={fieldtype:w.CswAttrXml("fieldtype"),nodeid:o.nodeid,relatednodeid:o.relatednodeid,propid:w.CswAttrXml("id"),$propdiv:z.children("div"),$propxml:w,onchange:function(){},onReload:function(){b(l,m)},cswnbtnodekey:o.cswnbtnodekey};i(t,o.SinglePropUrl,
o.EditMode,o.cswnbtnodekey,w.CswAttrXml("id"),o.nodetypeid,w,z,l,m,false)}})}});f(A,s,l,m);if(o.EditMode!=="PrintReport")var v=x.CswButton({ID:"SaveTab",enabledText:"Save Changes",disabledText:"Saving...",onclick:function(){q(x,A,s,v)}});x.validate({highlight:function(w){w=a(w);w.CswAttrDom("csw_invalid","1");w.animate({backgroundColor:"#ff6666"})},unhighlight:function(w){var t=a(w);if(t.CswAttrDom("csw_invalid")==="1"){t.css("background-color","#66ff66");t.CswAttrDom("csw_invalid","0");setTimeout(function(){t.animate({backgroundColor:"transparent"})},
500)}}})}})}function e(l){g(l.cellset[1][2].children("div").first(),l.swaprow,l.swapcolumn);g(l.swapcellset[1][2].children("div").first(),l.row,l.column)}function g(l,m,s){if(l.length>0){l={PropId:l.CswAttrDom("propid"),NewRow:m,NewColumn:s,EditMode:o.EditMode};CswAjaxJSON({url:o.MovePropUrl,data:l,success:function(){}})}}function f(l,m,s,x,A){m.children().each(function(){var v=a(this),w=v.CswAttrXml("id"),t=v.CswAttrXml("fieldtype"),z=l.CswLayoutTable("cellset",v.CswAttrXml("displayrow"),v.CswAttrXml("displaycol"));
if((v.CswAttrXml("display")!=="false"||A)&&t!=="Image"&&t!=="Grid"&&(o.filterToPropId===""||o.filterToPropId===w)){t=z[1][1];t.addClass("propertylabel");v.CswAttrXml("helptext")!==""?a('<a href="#" title="'+v.CswAttrXml("helptext")+'" onclick="return false;">'+v.CswAttrXml("name")+"</a>").appendTo(t):t.append(v.CswAttrXml("name"));o.ShowCheckboxes&&v.CswAttrXml("copyable")==="true"&&t.CswInput("init",{ID:"check_"+w,type:CswInput_Types.checkbox,value:false,cssclass:o.ID+"_check"}).CswAttrDom("propid",
w)}w=z[1][2];w.addClass("propertyvaluecell");h(w,v,s,x,A)})}function h(l,m,s,x,A){l.empty();if((m.CswAttrXml("display")!=="false"||A)&&(o.filterToPropId===""||o.filterToPropId===m.CswAttrXml("id"))){var v={fieldtype:m.CswAttrXml("fieldtype"),nodeid:o.nodeid,relatednodeid:o.relatednodeid,propid:m.CswAttrXml("id"),$propdiv:a("<div/>").appendTo(l),$propxml:m,onchange:function(){},onReload:function(){b(s,x)},cswnbtnodekey:o.cswnbtnodekey,EditMode:o.EditMode,onEditView:o.onEditView};v.$propdiv.CswAttrDom("nodeid",
v.nodeid);v.$propdiv.CswAttrDom("propid",v.propid);v.$propdiv.CswAttrDom("cswnbtnodekey",v.cswnbtnodekey);v.onchange=function(){o.onPropertyChange(v.propid,m.CswAttrXml("name"))};if(m.CswAttrXml("hassubprops")==="true")v.onchange=function(){i(v,o.SinglePropUrl,o.EditMode,o.cswnbtnodekey,m.CswAttrXml("id"),o.nodetypeid,m,l,s,x,false);o.onPropertyChange(v.propid,m.CswAttrXml("name"))};a.CswFieldTypeFactory("make",v);var w=m.children("subprops"),t=l.CswLayoutTable("init",{ID:v.propid+"_subproptable",
OddCellRightAlign:true,ReadOnly:o.EditMode==="PrintReport",cellset:{rows:1,columns:2},onSwap:function(z,P){e(P)},showConfigButton:false});if(w.length>0&&w.children('[display != "false"]').length>0||A){f(t,w,s,x,A);A?t.CswLayoutTable("ConfigOn"):t.CswLayoutTable("ConfigOff")}}}function i(l,m,s,x,A,v,w,t,z,P,K){a.CswFieldTypeFactory("save",l);l={EditMode:s,NodeId:o.nodeid,SafeNodeKey:x,PropId:A,NodeTypeId:v,NewPropXml:xmlToString(w)};CswAjaxXml({url:m,data:l,stringify:true,success:function(fa){h(t,
fa.children().first(),z,P,K)}})}function q(l,m,s,x){if(l.valid()){j(m,s);l={EditMode:o.EditMode,NodeId:o.nodeid,SafeNodeKey:o.cswnbtnodekey,NodeTypeId:o.nodetypeid,ViewId:a.CswCookie("get",CswCookieName.CurrentViewId),NewPropsXml:xmlToString(s)};CswAjaxJSON({url:o.SavePropUrl,data:l,success:function(A){var v=true;if(o.ShowCheckboxes){var w=a("."+o.NodeCheckTreeId+"_check:checked"),t=a("."+o.ID+"_check:checked");if(w.length>0&&t.length>0){var z={SourceNodeKey:o.cswnbtnodekey,CopyNodeIds:[],PropIds:[]};
w.each(function(){var P=a(this).CswAttrDom("nodeid");z.CopyNodeIds.push(P)});t.each(function(){var P=a(this).CswAttrDom("propid");z.PropIds.push(P)});CswAjaxJSON({url:o.CopyPropValuesUrl,data:z})}else{v=false;alert("You have not selected any properties to save.")}}if(v)o.onSave(A.nodeid,A.cswnbtnodekey)},error:function(){x.CswButton("enable")}})}else x.CswButton("enable")}function j(l,m){m.children().each(function(){var s={$propxml:a(this),$propdiv:"",$propCell:"",fieldtype:"",nodeid:o.nodeid,cswnbtnodekey:o.cswnbtnodekey};
s.fieldtype=s.$propxml.CswAttrXml("fieldtype");var x=l.CswLayoutTable("cellset",s.$propxml.CswAttrXml("displayrow"),s.$propxml.CswAttrXml("displaycol"));s.$propcell=x[1][2];s.$propdiv=s.$propcell.children("div").first();a.CswFieldTypeFactory("save",s);if(s.$propxml.CswAttrXml("hassubprops")==="true"){x=s.$propxml.children("subprops");if(x.length>0&&x.children('[display != "false"]').length>0){s=s.$propcell.children("#"+s.$propxml.CswAttrXml("id")+"_subproptable").first();s.length>0&&j(s,x)}}})}var o=
{ID:"",TabsUrl:"/NbtWebApp/wsNBT.asmx/getTabs",SinglePropUrl:"/NbtWebApp/wsNBT.asmx/getSingleProp",PropsUrl:"/NbtWebApp/wsNBT.asmx/getProps",MovePropUrl:"/NbtWebApp/wsNBT.asmx/moveProp",SavePropUrl:"/NbtWebApp/wsNBT.asmx/saveProps",CopyPropValuesUrl:"/NbtWebApp/wsNBT.asmx/copyPropValues",nodeid:"",relatednodeid:"",tabid:"",cswnbtnodekey:"",nodetypeid:"",filterToPropId:"",title:"",EditMode:"Edit",onSave:function(){},onBeforeTabSelect:function(){return true},onTabSelect:function(){},onPropertyChange:function(){},
ShowCheckboxes:false,NodeCheckTreeId:"",onEditView:function(){}};d&&a.extend(o,d);d=a(this);var k=a('<div id="'+o.ID+'_tabdiv" />').appendTo(d);(function(){CswAjaxXml({url:o.TabsUrl,data:{EditMode:o.EditMode,NodeId:o.nodeid,SafeNodeKey:o.cswnbtnodekey,NodeTypeId:o.nodetypeid},stringify:false,success:function(l){k.contents().remove();var m=[],s=0,x=0;l.children().each(function(){$tab=a(this);if(o.EditMode==="PrintReport"||m.length===0)m[m.length]=a("<div><ul></ul></div>").appendTo(k);var t=m[m.length-
1];t.children("ul").append('<li><a href="#'+$tab.CswAttrXml("id")+'">'+$tab.CswAttrXml("name")+"</a></li>");t.append('<div id="'+$tab.CswAttrXml("id")+'"><form id="'+$tab.CswAttrXml("id")+'_form" /></div>');if($tab.CswAttrXml("id")===o.tabid)s=x;x++});for(var A in m){var v=m[A];v.tabs({selected:s,select:function(t,z){if(o.onBeforeTabSelect(K)){var P=a(v.children("div")[z.index]),K=P.CswAttrDom("id");b(P,K);o.onTabSelect(K)}else return false}});l=a(v.children("div")[v.tabs("option","selected")]);var w=
l.CswAttrDom("id");b(l,w);o.onTabSelect(w)}}})})(o);if(o.EditMode!=="PrintReport"){d=a('<div id="'+o.ID+'_linkdiv" align="right"/>').appendTo(d);a('<a href="#">As Report</a>').appendTo(d).click(function(){openPopup("NewNodeReport.html?nodeid="+o.nodeid+"&cswnbtnodekey="+o.cswnbtnodekey,600,800)})}return this}})(jQuery);(function(a){function d(f){var h={e:"",data:"",$treediv:"",IDPrefix:"",onSelectNode:function(){},onInitialSelectNode:function(){},viewid:"",UsePaging:"",forsearch:""};f&&a.extend(h,f);h.onSelectNode=h.onInitialSelectNode;b(h);f&&a.extend(h,f);h.$treediv.unbind("select_node.jstree");h.$treediv.bind("select_node.jstree",function(){return b(h)})}function b(f){var h={e:"",data:"",$treediv:"",IDPrefix:"",onSelectNode:function(){},viewid:"",UsePaging:"",forsearch:""};f&&a.extend(h,f);f=jsTreeGetSelected(h.$treediv);
var i={nodeid:f.id,nodename:f.text,iconurl:f.iconurl,cswnbtnodekey:f.$item.CswAttrDom("cswnbtnodekey"),nodespecies:f.$item.CswAttrDom("species"),viewid:h.viewid};if(i.nodespecies==="More"){var q="",j=h.data.inst._get_parent(h.data.rslt.obj);if(j!==-1)q=tryParseString(j.CswAttrDom("cswnbtnodekey"),"");CswAjaxXml({url:url,data:{UsePaging:h.UsePaging,ViewId:h.viewid,IDPrefix:h.IDPrefix,IsFirstLoad:false,ParentNodeKey:q,IncludeNodeRequired:false,IncludeNodeKey:i.cswnbtnodekey,ShowEmpty:false,ForSearch:h.forsearch,
NodePk:f.id},success:function(o){function k(){m.length>0&&h.$treediv.jstree("create","#"+l,"after",{attr:{id:m.CswAttrXml("id"),rel:m.CswAttrXml("rel"),cswnbtnodekey:m.CswAttrXml("cswnbtnodekey"),species:m.CswAttrXml("species")},data:m.children("content").children("name").text(),state:m.CswAttrXml("state")},function(){l===m.CswAttrXml("id")&&h.$treediv.jstree("remove","#"+h.IDPrefix+i.nodeid+'[species="More"]');l=m.CswAttrXml("id");m=m.next();k()},true,true)}var l=h.IDPrefix+i.nodeid,m=o.children().first();
k()}})}else{a("."+h.IDPrefix+"check").CswAttrDom("checked","");h.onSelectNode(i)}}function e(f,h){return jsTreeGetSelected(f).$item.CswAttrDom("rel")===h.CswAttrDom("rel")}var g={init:function(f){var h={ID:"",ViewTreeUrl:"/NbtWebApp/wsNBT.asmx/getTreeOfView",NodeTreeUrl:"/NbtWebApp/wsNBT.asmx/getTreeOfNode",viewid:"",viewmode:"",showempty:false,forsearch:false,nodeid:"",cswnbtnodekey:"",IncludeNodeRequired:false,UsePaging:true,onSelectNode:function(){return{nodeid:"",nodename:"",iconurl:"",cswnbtnodekey:"",
viewid:""}},onInitialSelectNode:undefined,onViewChange:function(){},SelectFirstChild:true,ShowCheckboxes:false,IncludeInQuickLaunch:true};f&&a.extend(h,f);if(h.onInitialSelectNode===undefined)h.onInitialSelectNode=h.onSelectNode;var i=h.ID+"_",q=a('<div id="'+i+'" class="treediv" />').appendTo(a(this)),j=h.ViewTreeUrl;f={UsePaging:h.UsePaging,ViewId:h.viewid,IDPrefix:i,IsFirstLoad:true,ParentNodeKey:"",IncludeNodeRequired:h.IncludeNodeRequired,IncludeNodeKey:tryParseString(h.cswnbtnodekey,""),ShowEmpty:h.showempty,
ForSearch:h.forsearch,NodePk:tryParseString(h.nodeid,""),IncludeInQuickLaunch:h.IncludeInQuickLaunch};if(isNullOrEmpty(h.viewid))j=h.NodeTreeUrl;CswAjaxXml({url:j,data:f,stringify:false,success:function(o){var k="",l=["themes","html_data","ui","types","crrm"],m;isNullOrEmpty(h.nodeid)||(k=i+h.nodeid);var s=o.children("viewid").text();if(h.viewid!==s){h.onViewChange(s);h.viewid=s}s=o.find('item[id="'+k+'"]');if(k===""||s.length===0)if(h.SelectFirstChild)if(h.viewmode==="list"){k=o.find("item").first().CswAttrXml("id");
m={dots:false}}else{k=o.find("item").first().find("item").first().CswAttrXml("id");m={dots:true}}else k=i+"root";s=o.find('item[id="'+k+'"]');var x=[],A=0;s.parents("item").andSelf().each(function(){x[A]=a(this).CswAttrXml("id");A++});s=o.find("types").text();s=a.parseJSON(s);o=o.find("tree").children("root");if(o.length>0){var v=function(t){var z=t.CswAttrXml("id").substring(i.length),P=t.children("content").children("name").text(),K='<li id="'+t.CswAttrXml("id")+'" ';K+='    rel="'+t.CswAttrXml("rel")+
'" ';K+='    species="'+t.CswAttrXml("species")+'" ';K+='    class="jstree-'+t.CswAttrXml("state")+'" ';if(t.CswAttrXml("cswnbtnodekey")!==undefined)K+='    cswnbtnodekey="'+t.CswAttrXml("cswnbtnodekey").replace(/"/g,"&quot;")+'"';K+=">";if(h.ShowCheckboxes)K+='  <input type="checkbox" class="'+i+'check" id="check_'+z+'" rel="'+t.CswAttrXml("rel")+'" nodeid="'+z+'" nodename="'+P+'"></input>';K+='  <a href="#">'+P+"</a>";if(t.children("item").length>0){K+="<ul>";t.children("item").each(function(){K+=
v(a(this))});K+="</ul>"}K+="</li>";return K},w="<ul>";o.children().each(function(){w+=v(a(this))});w+="</ul>";q.jstree({html_data:{data:w,ajax:{type:"POST",url:j,dataType:"xml",data:function(t){t=t.CswAttrXml("cswnbtnodekey");t={UsePaging:h.UsePaging,ViewId:h.viewid,IDPrefix:i,IsFirstLoad:false,ParentNodeKey:t,IncludeNodeRequired:false,IncludeNodeKey:"",ShowEmpty:false,ForSearch:h.forsearch,NodePk:tryParseString(h.nodeid,""),IncludeInQuickLaunch:false};return a.param(t)},success:function(t,z,P){var K=
"";a(P.responseXML).children().first().children().each(function(){K+=v(a(this))});return K}}},ui:{select_limit:1,initially_select:k},themes:m,core:{initially_open:x},types:{types:s,max_children:-2,max_depth:-2},plugins:l}).bind("load_node.jstree",function(){a("."+i+"check").unbind("click");a("."+i+"check").click(function(){return e(q,a(this))})}).bind("select_node.jstree",function(t,z){return d({e:t,data:z,$treediv:q,IDPrefix:i,onSelectNode:h.onSelectNode,onInitialSelectNode:h.onInitialSelectNode,
viewid:h.viewid,UsePaging:h.UsePaging,forsearch:h.forsearch})});a("."+i+"check").click(function(){return e(q,a(this))});q.find("li").each(function(){var t=a(this);t.children("ins").CswAttrDom("id",t.CswAttrDom("id")+"_expand")})}else q.append("No Results")}});return q},selectNode:function(f){var h={newnodeid:"",newcswnbtnodekey:""};f&&a.extend(h,f);f=a(this).children(".treediv");var i=f.CswAttrDom("id");f.jstree("select_node","#"+i+h.newnodeid)}};a.fn.CswNodeTree=function(f){if(g[f])return g[f].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof f==="object"||!f)return g.init.apply(this,arguments);else a.error("Method "+f+" does not exist on CswNodeTree")}})(jQuery);(function(a){var d={init:function(b){var e={ID:"",NodeTypesUrl:"/NbtWebApp/wsNBT.asmx/getNodeTypes",nodetypeid:"",onSelect:function(){},onSuccess:function(){}};b&&a.extend(e,b);b=a(this);b.contents().remove();var g=a('<select id="'+e.ID+'_sel" />').appendTo(b);g.change(function(){e.onSelect(g.val())});CswAjaxXml({url:e.NodeTypesUrl,data:{},stringify:false,success:function(f){f.children("nodetype").each(function(){var h=a(this);g.append('<option value="'+h.CswAttrXml("id")+'">'+h.CswAttrXml("name")+
"</option>")});e.onSuccess()}});return g},value:function(){return a(this).val()}};a.fn.CswNodeTypeSelect=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswNodeTypeSelect")}})(jQuery);(function(a){var d={init:function(b){var e={ID:"",Value:"",MinValue:"",MaxValue:"",Precision:"",ReadOnly:false,Required:false,onchange:function(){}};b&&a.extend(e,b);b=a(this);b.contents().remove();if(e.ReadOnly)b.append(e.Value);else{b=b.CswInput("init",{ID:e.ID,type:CswInput_Types.text,value:e.Value,cssclass:"textinput number",onChange:e.onchange});if(e.MinValue!==undefined){jQuery.validator.addMethod(e.ID+"_validateFloatMinValue",function(g,f){return this.optional(f)||validateFloatMinValue(a(f).val(),
e.MinValue)},"Number must be greater than or equal to "+e.MinValue);b.addClass(e.ID+"_validateFloatMinValue")}if(e.MaxValue!==undefined){jQuery.validator.addMethod(e.ID+"_validateFloatMaxValue",function(g,f){return this.optional(f)||validateFloatMaxValue(a(f).val(),e.MaxValue)},"Number must be less than or equal to "+e.MaxValue);b.addClass(e.ID+"_validateFloatMaxValue")}if(e.Precision===undefined||e.Precision<=0){jQuery.validator.addMethod(e.ID+"_validateInteger",function(g,f){return this.optional(f)||
validateInteger(a(f).val())},"Value must be an integer");b.addClass(e.ID+"_validateInteger")}else{jQuery.validator.addMethod(e.ID+"_validateFloatPrecision",function(g,f){return this.optional(f)||validateFloatPrecision(a(f).val(),e.Precision)},"Value must be numeric");b.addClass(e.ID+"_validateFloatPrecision")}e.Required&&b.addClass("required")}},value:function(){return a(this).find("input").val()},setValue:function(b){var e=a(this).find("input");b!==undefined&&e.val(b)}};a.fn.CswNumberTextBox=function(b){if(d[b])return d[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswNumberTextBox")}})(jQuery);(function(a){a.CswQueryString=function(){for(var d={},b,e=/\+/g,g=/([^&=]+)=?([^&]*)/g,f=window.location.search.substring(1);b=g.exec(f);)d[decodeURIComponent(b[1].replace(e," "))]=decodeURIComponent(b[2].replace(e," "));return d}})(jQuery);(function(a){a.fn.CswQuickLaunch=function(d){var b={Url:"/NbtWebApp/wsNBT.asmx/getQuickLaunchItems",onLinkClick:function(){},onSuccess:function(){}};d&&a.extend(b,d);var e=a(this);CswAjaxXml({url:b.Url,data:{UserId:""},stringify:false,success:function(g){var f=a('<div id="quicklaunchdiv"><ul id="launchitems"></ul></div>').appendTo(e).children();g.children("items").children("item").each(function(){var h=a(this),i={launchtype:h.CswAttrXml("launchtype"),viewmode:h.CswAttrXml("viewmode"),text:h.CswAttrXml("text"),
url:h.CswAttrXml("url"),viewid:h.CswAttrXml("itemid")};switch(i.launchtype){case "View":case "view":a('<li><a href="#'+i.text+"_"+i.type+"_"+i.viewmode+"_"+i.viewid+'">'+i.text+"</a></li>").appendTo(f).children("a").click(function(){b.onLinkClick(i);return false});break;case "Action":case "action":a("<li><a href="+i.url+">"+i.text+"</a></li>").appendTo(f)}});b.onSuccess()}});return this}})(jQuery);var CswSearch_CssClasses={nodetype_select:{name:"csw_search_nodetype_select"},property_select:{name:"csw_search_property_select"}};
(function(a){a.fn.CswSearch=function(d){function b(l){var m={$link:"",advancedIsHidden:false};l&&a.extend(m,l);if("Advanced"===m.$link.text()||m.advancedIsHidden){a("."+ViewBuilder_CssClasses.subfield_select.name).each(function(){a(this).show()});a("."+ViewBuilder_CssClasses.filter_select.name).each(function(){a(this).show()});a("."+ViewBuilder_CssClasses.default_filter.name).each(function(){a(this).hide()});m.$link.text("Simple");m.advancedIsHidden=false}else if("Simple"===m.$link.text()||!m.advancedIsHidden){a("."+
ViewBuilder_CssClasses.subfield_select.name).each(function(){a(this).hide()});a("."+ViewBuilder_CssClasses.filter_select.name).each(function(){a(this).hide()});a("."+ViewBuilder_CssClasses.default_filter.name).each(function(){a(this).show()});m.$link.text("Advanced");m.advancedIsHidden=true}return m.advancedIsHidden}function e(){for(var l=2;l<=j.propsCount;){var m=j.$searchTable.CswTable("cell",l,1).CswAttrDom({align:"right"}),s=a("<span>&nbsp;and&nbsp;</span>");m.append(s);l++}var x=1;j.$propsXml.children("property").each(function(){var A=
a(this),v=j.$searchTable.CswTable("cell",x,2),w=makeId({ID:"viewbuilderpropid",suffix:A.CswAttrXml("viewbuilderpropid"),prefix:j.ID});v.CswSpan("init",{ID:w,value:A.CswAttrXml("metadatatypename"),cssclass:ViewBuilder_CssClasses.metadatatype_static.name}).CswAttrDom("relatedidtype",A.CswAttrXml("relatedidtype"));j.selectedSubfieldVal="";j.selectedFilterVal="";v=A.CswAttrXml("filtarbitraryid");j.$searchTable.CswViewPropFilter("init",{ID:j.ID,propRow:x,firstColumn:3,includePropertyName:true,$propsXml:A,
filtarbitraryid:v,advancedIsHidden:j.advancedIsHidden});x++});j.bottomRow=x;j.bottomCell=1;j.searchtype="viewsearch";h()}function g(){var l=j.$searchTable.CswTable("cell",1,2).empty(),m=makeId({ID:"nodetype_select",prefix:j.ID});m=a(xmlToString(j.$nodeTypesXml.children("select"))).CswAttrDom("id",m).CswAttrDom("name",m).addClass(CswSearch_CssClasses.nodetype_select.name).change(function(){var s=a(this);s={nodetypeorobjectclassid:s.val(),relatedidtype:s.find(":selected").CswAttrDom("title"),cswnbtnodekey:"",
$parent:j.$searchTable,$nodeTypesSelect:s};a.extend(j,s);f()});j.$nodeTypesSelect=m;j.relatedidtype=m.find(":selected").CswAttrDom("title");j.nodetypeorobjectclassid!==""&&m.val(j.nodetypeorobjectclassid).CswAttrDom("selected",true);l.append(m);l=j.$searchTable.CswTable("cell",1,3).empty();m=makeId({ID:"property_select",prefix:j.ID});m=a(xmlToString(j.$propsXml.children("properties").children("select"))).CswAttrDom("id",m).CswAttrDom("name",m).addClass(CswSearch_CssClasses.property_select.name).change(function(){var s=
a(this).val(),x={propertyid:s,selectedSubfieldVal:"",selectedFilterVal:"",$selectedPropXml:j.$propsXml.children("propertyfilters").children("property[viewbuilderpropid="+s+"]")};a.extend(j,x);j.$searchTable.CswViewPropFilter("init",{ID:j.ID,propRow:1,firstColumn:3,includePropertyName:false,$propsXml:j.$selectedPropXml,viewbuilderpropid:s,advancedIsHidden:j.advancedIsHidden})});j.propertyid!==""&&m.val(j.propertyid).CswAttrDom("selected",true);l.append(m);j.propertyid=m.find(":selected").val();j.$selectedPropXml=
j.$propsXml.children("propertyfilters").children("property[viewbuilderpropid="+j.propertyid+"]");j.$searchTable.CswViewPropFilter("init",{ID:j.ID,propRow:1,firstColumn:3,includePropertyName:false,$propsXml:j.$selectedPropXml,viewbuilderpropid:j.propertyid,advancedIsHidden:j.advancedIsHidden});j.bottomRow=j.propsCount+1;j.bottomCell=2;j.searchtype="nodetypesearch";h()}function f(){CswAjaxXml({url:j.getNewPropsUrl,data:{RelatedIdType:j.relatedidtype,NodeTypeOrObjectClassId:j.nodetypeorobjectclassid,
IdPrefix:j.ID,NodeKey:j.cswnbtnodekey},stringify:false,success:function(l){j.$propsXml=l;g()}})}function h(){var l=j.$searchTable,m=j.bottomCell,s=m+1,x=j.bottomRow;if(j.searchtype==="nodetypesearch"){l=j.$searchTable.CswTable("cell",j.bottomRow,j.bottomCell).empty();s=makeId({prefix:j.ID,ID:"split_cell_table"});l=l.CswTable("init",{ID:s,cellpadding:1,cellspacing:1,cellalign:"left",align:"left"});m=1;s=2;x=1}m=l.CswTable("cell",x,m).empty();var A=makeId({ID:"clear_button",prefix:j.ID});m.CswButton({ID:A,
enabledText:"Clear",disabledText:"Clear",disableOnClick:false,onclick:function(){k.empty();var w=makeId({prefix:j.ID,ID:"search_tbl"});j.$searchTable=k.CswTable("init",{ID:w,cellpadding:1,cellspacing:1,cellalign:"center",align:"center"});switch(j.searchtype){case "nodetypesearch":g();case "viewsearch":e()}}});l=l.CswTable("cell",x,s).empty();s=makeId({ID:"advanced_options",prefix:j.ID});var v=l.CswLink("init",{ID:s,href:"#advanced",value:"Advanced"}).click(function(){j.advancedIsHidden=b({$link:v,
advancedIsHidden:j.advancedIsHidden})});l=j.$searchTable.CswTable("cell",j.bottomRow,j.searchBtnCell).CswAttrDom({align:"right"}).empty();s=makeId({ID:"search_button",prefix:j.ID});l.CswButton({ID:s,enabledText:"Search",disabledText:"Searching",onclick:function(){q()}})}function i(){CswAjaxXml({url:j.getClientSearchXmlUrl,data:{ViewId:j.viewid,SelectedNodeTypeIdNum:j.nodetypeorobjectclassid,IdPrefix:j.ID,NodeKey:j.cswnbtnodekey},stringify:false,success:function(l){k.empty();j.searchtype=l.CswAttrXml("searchtype");
var m=makeId({prefix:j.ID,ID:"search_tbl"});j.$searchTable=k.CswTable("init",{ID:m,cellpadding:1,cellspacing:1,cellalign:"left",align:"center"});j.$searchTable.css("background-color","0099FF");j.$searchTable.CswAttrXml("frame","border");switch(j.searchtype){case "nodetypesearch":j.$nodeTypesXml=l.children("nodetypes");j.$propsXml=l.children("viewbuilderprops");g();break;case "viewsearch":j.$propsXml=l.children("properties");j.propsCount=l.children("properties").children("property").size();e()}}})}
function q(){var l,m=[],s;switch(j.searchtype){case "nodetypesearch":s=j.doNodeSearchUrl;var x=j.$nodeTypesSelect.val();j.relatedidtype=j.$nodeTypesSelect.find(":selected").CswAttrDom("title");a("."+CswSearch_CssClasses.property_select.name).each(function(){var A=a(this),v=A.text(),w=A.val();v=j.$propsXml.children("propertyfilters").children('property[propname="'+v+'"][viewbuilderpropid="'+w+'"]').CswAttrDom("fieldtype");A=A.CswViewPropFilter("getFilterJson",{nodetypeorobjectclassid:x,relatedidtype:j.relatedidtype,
fieldtype:v,ID:j.ID,$parent:j.$searchTable,viewbuilderpropid:w,advancedIsHidden:j.advancedIsHidden});m.push(A)});l={viewbuilderprops:m};break;case "viewsearch":s=j.doViewSearchUrl;j.$propsXml.children("property").each(function(){var A=a(this);A.CswAttrXml("filtarbitraryid");A=A.CswViewPropFilter("getFilterJson",{ID:j.ID,$parent:j.$searchTable});m.push(A)});l={viewprops:m,viewid:j.viewid}}l&&CswAjaxJSON({url:s,data:{SearchJson:l},success:function(A){j.viewid=A.sessionviewid;j.searchtype="viewsearch";
i();j.onSearchSubmit({viewid:A.sessionviewid,viewmode:A.viewmode})}})}var j={$parent:"",$searchTable:"",getNewPropsUrl:"/NbtWebApp/wsNBT.asmx/getNodeTypeSearchProps",doViewSearchUrl:"/NbtWebApp/wsNBT.asmx/doViewSearch",doNodeSearchUrl:"/NbtWebApp/wsNBT.asmx/doNodeTypeSearch",getSearchableViewsUrl:"/NbtWebApp/wsNBT.asmx/getSearchableViews",getClientSearchXmlUrl:"/NbtWebApp/wsNBT.asmx/getClientSearchXml",viewid:"",nodetypeorobjectclassid:"",propertyid:"",cswnbtnodekey:"",relatedidtype:"",ID:"",propsCount:1,
advancedIsHidden:true,$propsXml:"",$selectedPropXml:"",$nodeTypesXml:"",$nodeTypesSelect:"",onSearchSubmit:function(){},selectedPropVal:"",selectedSubfieldVal:"",selectedFilterVal:"",bottomRow:2,bottomCell:1,propRow:"",clearBtnCell:1,searchBtnCell:6,searchtype:""};d&&a.extend(j,d);d=a(this);j.$searchTable=d.CswDiv("init",{ID:j.ID});d=j.$searchTable.CswSpan("init");var o=makeId({ID:"search_criteria_div",prefix:j.ID}),k=d.CswDiv("init",{ID:o});i();return j.$searchTable}})(jQuery);(function(a){var d={init:function(b){var e={ID:"",value:"",cssclass:""};b&&a.extend(e,b);b=a(this);var g=a("<span></span>"),f=tryParseString(e.ID,"");if(f!==""){g.CswAttrDom("id",f);g.CswAttrDom("name",f)}isNullOrEmpty(e.cssclass)||g.addClass(e.cssclass);isNullOrEmpty(e.value)||g.text(e.value);b.append(g);return g}};a.fn.CswSpan=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+
b+" does not exist on CswSpan")}})(jQuery);(function(a){a.fn.CswTable=function(d){function b(h){return h.children("tbody").children("tr").length}function e(h){h=h.children("tbody").children("tr");for(var i=0,q=0;q<h.length;q++){var j=a(h[q]).children("td");if(j.length>i)i=j.length}return i}function g(h,i,q){var j=null;if(h.length>0&&i!==undefined&&i!==""&&q!==undefined&&q!==""){if(i<=0){log("error: row must be greater than 1, got: "+i);i=1}if(q<=0){log("error: col must be greater than 1, got: "+q);q=1}for(;i>h.children("tbody").children("tr").length;)h.append("<tr></tr>");
for(j=a(h.children("tbody").children("tr")[i-1]);q>j.children("td").length;){var o=h.CswAttrDom("cellalign");if(j.children("td").length===0&&isTrue(h.CswAttrDom("FirstCellRightAlign"))||j.children("td").length%2===0&&isTrue(h.CswAttrDom("OddCellRightAlign")))o="right";o=a('<td class="'+h.CswAttrDom("cellcssclass")+'" align="'+o+'" valign="'+h.CswAttrDom("cellvalign")+'"></td>').appendTo(j);h.trigger("CswTable_onCreateCell",[h,o,i,j.children("td").length])}j=a(j.children("td")[q-1])}return j}var f=
{init:function(h){var i={ID:"",prefix:"",suffix:"",TableCssClass:"",CellCssClass:"",cellpadding:0,cellspacing:0,cellalign:"top",width:"",align:"",cellalign:"",cellvalign:"top",onCreateCell:function(){},FirstCellRightAlign:false,OddCellRightAlign:false};h&&a.extend(i,h);h=makeId({ID:i.ID,prefix:i.prefix,suffix:i.suffix});h=a('<table id="'+h+'"></table>');h.addClass(i.TableCssClass);h.CswAttrDom("width",i.width);h.CswAttrDom("align",i.align);h.CswAttrDom("cellpadding",i.cellpadding);h.CswAttrDom("cellspacing",
i.cellspacing);h.CswAttrDom("border","0");h.CswAttrDom("cellalign",i.cellalign);h.CswAttrDom("cellvalign",i.cellvalign);h.CswAttrDom("cellcssclass",i.CellCssClass);h.CswAttrDom("FirstCellRightAlign",i.FirstCellRightAlign);h.CswAttrDom("OddCellRightAlign",i.OddCellRightAlign);h.bind("CswTable_onCreateCell",function(q,j,o,k,l){i.onCreateCell(q,j,o,k,l);q.stopPropagation()});h.trigger("CswTable_onCreateCell",[h,h.find("td"),1,1]);a(this).append(h);return h},cell:function(h,i){var q=a(this);return g(q,
h,i)},maxrows:function(){return b(a(this))},maxcolumns:function(){return e(a(this))},finish:function(h){for(var i=a(this),q=b(i),j=e(i),o=1;o<=q;o++)for(var k=1;k<=j;k++){var l=g(i,o,k);if(l.contents().length===0)h!==null?h(l,o,k):l.append("&nbsp;")}},findRow:function(h){var i=a(this).children("tbody").children("tr");if(h!==""&&h!==null)i=i.filter(h);return i},findCell:function(h){var i=a(this).children("tbody").children("tr").children("td");if(h!==""&&h!==null)i=i.filter(h);return i},rowFindCell:function(h,
i){var q=h.children("td");if(i!==""&&i!==null)q=q.filter(i);return q}};if(f[d])return f[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return f.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswTable")}})(jQuery);(function(a){a.fn.listenForEnter=function(){var d=this;return d.each(function(){d.focus(function(){d.data("safeEnter_InAutocomplete",false)});d.keypress(function(b){switch(b.keyCode?b.keyCode:b.which){case 13:if(!d.data("safeEnter_InAutocomplete")||!d.is("input[type=text]")||a.browser.opera)d.trigger("pressedEnter",b);d.data("safeEnter_InAutocomplete",false);break;case 40:case 38:case 34:case 33:d.data("safeEnter_InAutocomplete",true);break;default:d.data("safeEnter_InAutocomplete",false)}})})};a.fn.clickOnEnter=
function(d){var b=this;return b.each(function(){b.listenForEnter().bind("pressedEnter",function(){d.click()})})};a.fn.replaceText=function(d,b){this instanceof jQuery&&this.each(function(){var e,g="";if(!isNullOrEmpty(this))if(!isNullOrEmpty(this)&&this.nodeType===3){e=tryParseString(this.val(),"");if(!isNullOrEmpty(e)){log(e,true);g=e.replace(d,b);g!==e&&this.replaceWith(g)}}this.replaceText(d,b)});return this}})(jQuery);(function(a){var d={init:function(b){var e={ID:"",prefix:"",Checked:"",ReadOnly:false,Required:false,onchange:function(){}};b&&a.extend(e,b);b=a(this);b.empty();var g=makeId({prefix:e.prefix,ID:e.ID});if(e.Checked===""||e.Checked===undefined||e.Checked===null)e.Checked="null";if(e.ReadOnly)switch(e.Checked){case "true":b.append("Yes");break;case "false":b.append("No")}else{var f;switch(e.Checked){case "true":f=CswImageButton_ButtonType.CheckboxTrue;break;case "false":f=CswImageButton_ButtonType.CheckboxFalse;
break;default:f=CswImageButton_ButtonType.CheckboxNull}b.CswImageButton({ID:g,ButtonType:f,AlternateText:e.Checked,onClick:function(h){var i=e.Required,q=h.CswAttrDom("alt"),j=CswImageButton_ButtonType.CheckboxNull,o="null";if(q==="null"){j=CswImageButton_ButtonType.CheckboxTrue;o="true"}else if(q==="false")if(i==="true"){j=CswImageButton_ButtonType.CheckboxTrue;o="true"}else{j=CswImageButton_ButtonType.CheckboxNull;o="null"}else if(q==="true"){j=CswImageButton_ButtonType.CheckboxFalse;o="false"}h.CswAttrDom("alt",
o);h=j;e.onchange();return h}})}},value:function(){return a(this).CswAttrDom("alt")}};a.fn.CswTristateCheckBox=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswTristateCheckBox")}})(jQuery);var CswViewEditor_WizardSteps={step1:{step:1,description:"Choose a View"},step2:{step:2,description:"Edit View Attributes"},step3:{step:3,description:"Add Relationships"},step4:{step:4,description:"Select Properties"},step5:{step:5,description:"Set Filters"},step6:{step:6,description:"Fine Tuning"}};
(function(a){a.fn.CswViewEditor=function(d){function b(C){z=C}function e(){O.CswAttrXml("viewname",ja.val());O.CswAttrXml("category",sa.val());if(O.CswAttrXml("visibility")!=="Property"){O.CswAttrXml("visibility",ea.getvisibilityselect().val());var C=ea.getvisroleselect().val();isNullOrEmpty(C)||(C=C.substr(6));var F=ea.getvisuserselect().val();isNullOrEmpty(F)||(F=F.substr(6));O.CswAttrXml("visibilityroleid",C);O.CswAttrXml("visibilityuserid",F)}C=ra.is(":checked")?"true":"false";O.CswAttrXml("formobile",
C);O.CswAttrXml("width",ia.CswNumberTextBox("value"))}function g(C,F){var V=false;if(a("#"+m.ID+"_all:checked").length>0)V=true;w.text("");m.startingStep===1&&v.CswWizard("button","next","disable");CswAjaxJSON({url:m.ViewGridUrl,data:{All:V},success:function(N){t.empty();var R=a('<div id="'+m.ID+'_gp" style="width:100%; height:20px;" />').appendTo(t),D=a('<table id="'+m.ID+'_gt" />').appendTo(t);a.extend(N,{autowidth:true,height:180,onSelectRow:function(L,U){if(U){K.CswButton("enable");fa.CswButton("enable")}else{K.CswButton("disable");
fa.CswButton("disable")}w.text(i(D));v.CswWizard("button","next","enable")},pager:R});D.jqGrid(N);if(F!==undefined){D.setSelection(j(D,F));D.CswNodeGrid("scrollToSelectedRow")}C(D)}})}function f(C){var F="";return F=m.startingStep===1?q(C,m.ColumnViewId):m.viewid}function h(C){var F="";return F=m.startingStep===1?q(C,m.ColumnViewMode):m.viewmode}function i(C){var F="";return F=m.startingStep===1?q(C,m.ColumnViewName):m.viewname}function q(C,F){var V=C.jqGrid("getGridParam","selrow");return C.jqGrid("getCell",
V,F)}function j(C,F){var V=C.jqGrid("getCol",m.ColumnViewId,true),N=0,R;for(R in V)if(V[R].value.toString()===F.toString())N=V[R].id;return N}function o(C,F,V){var N,R,D;IsAdministrator({Yes:function(){C.CswTable("cell",F,1).append(V);var L=C.CswTable("cell",F,2),U=C.CswAttrDom("id");N=a('<select id="'+U+'_vissel" />').appendTo(L);N.append('<option value="User">User:</option>');N.append('<option value="Role">Role:</option>');N.append('<option value="Global">Global</option>');R=L.CswNodeSelect("init",
{ID:U+"_visrolesel",objectclass:"RoleClass"}).hide();D=L.CswNodeSelect("init",{ID:U+"_visusersel",objectclass:"UserClass"});N.change(function(){var I=N.val();if(I==="Role"){R.show();D.hide()}else if(I==="User"){R.hide();D.show()}else{R.hide();D.hide()}})}});return{getvisibilityselect:function(){return N},getvisroleselect:function(){return R},getvisuserselect:function(){return D}}}function k(C,F){var V=l(C,O);F.jstree({html_data:{data:V.htmlstring},ui:{select_limit:1},types:{types:V.types,max_children:-2,
max_depth:-2},plugins:["themes","html_data","ui","types","crrm"]});F.find(".vieweditor_childselect").change(function(){var D=a(this),L=D.find("option:selected").data("optionviewxml");D.CswAttrDom("arbid")==="root"?a(L).appendTo(O):a(L).appendTo(O.find('[arbitraryid="'+D.CswAttrDom("arbid")+'"]'));k(C,F)});F.find(".vieweditor_deletespan").each(function(){var D=a(this);D.CswImageButton({ButtonType:CswImageButton_ButtonType.Delete,AlternateText:"Delete",ID:D.CswAttrDom("arbid")+"_delete",onClick:function(L){L=
L.parent();O.find('[arbitraryid="'+L.CswAttrDom("arbid")+'"]').remove();k(C,F);return CswImageButton_ButtonType.None}})});C===CswViewEditor_WizardSteps.step5.step&&F.find(".vieweditor_addfilter").each(function(){var D=a(this),L=D.CswTable({ID:m.ID+"_propfilttbl"});L.css("display","inline-table");L.CswViewPropFilter("init",{viewxml:xmlToString(O),proparbitraryid:D.CswAttrDom("proparbid"),filtarbitraryid:"",viewbuilderpropid:"",ID:m.ID,propRow:1,firstColumn:1,includePropertyName:false,selectedSubfieldVal:"",
selectedFilterVal:"",autoFocusInput:false});L.CswTable("cell",1,5).CswButton("init",{ID:"addfiltbtn",prefix:m.ID,enabledText:"Add",disabledText:"Adding",onclick:function(){var U=L.CswViewPropFilter("getFilterJson",{ID:m.ID,$parent:D,proparbitraryid:D.CswAttrDom("proparbid")});L.CswViewPropFilter("makeFilter",{viewxml:xmlToString(O),filtJson:U,onSuccess:function(I){var T=O.find('[arbitraryid="'+D.CswAttrDom("proparbid")+'"]');a(xmlToString(I)).appendTo(T);k(C,F)}})}})});if(C===CswViewEditor_WizardSteps.step6.step){var N=
ma.CswTable("cell",1,2),R=h(z);F.find(".vieweditor_viewrootlink").click(function(){N.empty()});F.find(".vieweditor_viewrellink").click(function(){$a=a(this);N.empty();var D=O.find('[arbitraryid="'+$a.CswAttrDom("arbid")+'"]'),L=N.CswTable({ID:m.ID+"_editrel",FirstCellRightAlign:true});L.CswTable("cell",1,1).append("Allow Deleting");var U=L.CswTable("cell",1,2).CswInput("init",{ID:m.ID+"_adcb",type:CswInput_Types.checkbox});D.CswAttrXml("allowdelete").toLowerCase()=="true"&&U.CswAttrDom("checked",
"true");L.CswTable("cell",2,1).append("Group By");var I=a('<select id="'+m.ID+'_gbs" />').appendTo(L.CswTable("cell",2,2)),T={Type:D.CswAttrXml("secondtype"),Id:D.CswAttrXml("secondid")};CswAjaxXml({url:m.PropNamesUrl,data:T,stringify:false,success:function(da){I.empty();a('<option value="">[None]</option>').appendTo(I);da.children().each(function(){var ca=a(this),aa=a('<option value="'+ca.CswAttrXml("propid")+'">'+ca.CswAttrXml("propname")+"</option>").appendTo(I).data("propxml",ca);D.CswAttrXml("groupbypropid")===
ca.CswAttrXml("propid")&&D.CswAttrXml("groupbyproptype")===ca.CswAttrXml("proptype")&&D.CswAttrXml("groupbypropname")===ca.CswAttrXml("propname")&&aa.CswAttrDom("selected","true")})}});var S;if(R==="Tree"){L.CswTable("cell",3,1).append("Show In Tree");S=L.CswTable("cell",3,2).CswInput("init",{ID:m.ID+"_stcb",type:CswInput_Types.checkbox});D.CswAttrXml("showintree").toLowerCase()=="true"&&S.CswAttrDom("checked","true")}L.CswTable("cell",4,2).CswButton({ID:m.ID+"_saverel",enabledText:"Apply",disableOnClick:false,
onclick:function(){S!==undefined&&D.CswAttrXml("showintree",S.is(":checked"));D.CswAttrXml("allowdelete",U.is(":checked"));if(I.val()!==""){var da=I.find(":selected").data("propxml");D.CswAttrXml("groupbypropid",da.CswAttrXml("propid"));D.CswAttrXml("groupbyproptype",da.CswAttrXml("proptype"));D.CswAttrXml("groupbypropname",da.CswAttrXml("propname"))}else{D.CswAttrXml("groupbypropid","");D.CswAttrXml("groupbyproptype","");D.CswAttrXml("groupbypropname","")}}})});F.find(".vieweditor_viewproplink").click(function(){$a=
a(this);N.empty();if(R==="Grid"){var D=O.find('[arbitraryid="'+$a.CswAttrDom("arbid")+'"]'),L=N.CswTable({ID:m.ID+"_editprop",FirstCellRightAlign:true});L.CswTable("cell",1,1).append("Sort By");var U=L.CswTable("cell",1,2).CswInput("init",{ID:m.ID+"_sortcb",type:CswInput_Types.checkbox});D.CswAttrXml("sortby").toLowerCase()=="true"&&U.CswAttrDom("checked","true");L.CswTable("cell",2,1).append("Grid Column Order");var I=L.CswTable("cell",2,2).CswInput("init",{ID:m.ID+"_gcotb",type:CswInput_Types.text});
I.val(D.CswAttrXml("order"));L.CswTable("cell",3,1).append("Grid Column Width (in characters)");var T=L.CswTable("cell",3,2).CswInput("init",{ID:m.ID+"_gcwtb",type:CswInput_Types.text});T.val(D.CswAttrXml("width"));L.CswTable("cell",4,2).CswButton({ID:m.ID+"_saveprop",enabledText:"Apply",disableOnClick:false,onclick:function(){D.CswAttrXml("sortby",U.is(":checked"));D.CswAttrXml("order",I.val());D.CswAttrXml("width",T.val())}})}});F.find(".vieweditor_viewfilterlink").click(function(){$a=a(this);N.empty();
var D=O.find('[arbitraryid="'+$a.CswAttrDom("arbid")+'"]'),L=N.CswTable({ID:m.ID+"_editfilt",FirstCellRightAlign:true});L.CswTable("cell",1,1).append("Case Sensitive");var U=a('<input type="checkbox" id="'+m.ID+'_casecb" />').appendTo(L.CswTable("cell",1,2));D.CswAttrXml("casesensitive").toLowerCase()==="true"&&U.CswAttrDom("checked","true");L.CswTable("cell",4,2).CswButton({ID:m.ID+"_savefilt",enabledText:"Apply",disableOnClick:false,onclick:function(){D.CswAttrXml("casesensitive",U.is(":checked"))}})})}}
function l(C,F){var V={},N=F.CswAttrXml("arbitraryid"),R=F.get(0).nodeName,D,L,U=false,I=true,T;if(R.toLowerCase()==="treeview"){if(C===CswViewEditor_WizardSteps.step3.step)I=false;N="root";D=F.CswAttrXml("viewname");L="root";V.root={icon:{image:F.CswAttrXml("iconfilename")}};T="vieweditor_viewrootlink"}else if(R.toLowerCase()==="relationship"){if(C===CswViewEditor_WizardSteps.step3.step)I=false;if(C===CswViewEditor_WizardSteps.step4.step)I=false;D=F.CswAttrXml("secondname");R=F.CswAttrXml("propname");
if(R!==""&&R!==undefined)D+=F.CswAttrXml("propowner")==="First"?" (by "+F.CswAttrXml("firstname")+"'s "+R+")":" (by "+R+")";L=F.CswAttrXml("secondtype")+"_"+F.CswAttrXml("secondid");V[L]={icon:{image:F.CswAttrXml("secondiconfilename")}};T="vieweditor_viewrellink"}else if(R.toLowerCase()==="property"){if(C<=CswViewEditor_WizardSteps.step3.step)U=true;if(C===CswViewEditor_WizardSteps.step5.step)I=false;D=F.CswAttrXml("name");L="property";V.property={icon:{image:"Images/view/property.gif"}};T="vieweditor_viewproplink"}else if(R.toLowerCase()===
"filter"){if(C<=CswViewEditor_WizardSteps.step4.step)U=true;D=F.CswAttrXml("subfieldname")+" "+F.CswAttrXml("filtermode")+" "+F.CswAttrXml("value");L="filter";V.filter={icon:{image:"Images/view/filter.gif"}};T="vieweditor_viewfilterlink"}var S="";if(!U){S='<li id="'+N+'" ';S+='    rel="'+L+'" ';S+='    class="jstree-open" ';S+=">";S+=' <a href="#" class="'+T+'" arbid="'+N+'">'+D+"</a>";if(N!=="root")S+=' <span style="" class="vieweditor_deletespan" arbid="'+N+'"></span>';S+="<ul>";F.children().each(function(){var da=
l(C,a(this));S+=da.htmlstring;a.extend(V,da.types)});if(!I)if(C===CswViewEditor_WizardSteps.step5.step)S+='<li><span class="vieweditor_addfilter" proparbid="'+N+'"></span></li>';else{S+='<li><select id="'+C+"_"+N+'_child" arbid="'+N+'" class="vieweditor_childselect"></select></li>';D={StepNo:C,ArbitraryId:N,ViewXml:xmlToString(O)};CswAjaxXml({url:m.ChildOptionsUrl,data:D,stringify:true,success:function(da){var ca=a("#"+C+"_"+N+"_child");ca.empty();ca.append('<option value="">Select...</option>');
da.children().each(function(){var aa=a(this),ba=a(aa.CswAttrXml("value"));a('<option value="'+ba.CswAttrXml("arbitraryid")+'">'+aa.CswAttrXml("name")+"</option>").appendTo(ca).data("optionviewxml",aa.CswAttrXml("value"))})}})}S+="</ul>";S+="</li>"}return{htmlstring:S,types:V}}var m={ViewGridUrl:"/NbtWebApp/wsNBT.asmx/getViewGrid",ViewInfoUrl:"/NbtWebApp/wsNBT.asmx/getViewInfo",SaveViewUrl:"/NbtWebApp/wsNBT.asmx/saveViewInfo",CopyViewUrl:"/NbtWebApp/wsNBT.asmx/copyView",DeleteViewUrl:"/NbtWebApp/wsNBT.asmx/deleteView",
ChildOptionsUrl:"/NbtWebApp/wsNBT.asmx/getViewChildOptions",PropNamesUrl:"/NbtWebApp/wsNBT.asmx/getPropNames",viewid:"",viewname:"",viewmode:"",ID:"vieweditor",ColumnViewName:"VIEWNAME",ColumnViewId:"NODEVIEWID",ColumnViewMode:"VIEWMODE",onCancel:function(){},onFinish:function(){},startingStep:1};d&&a.extend(m,d);var s=[CswViewEditor_WizardSteps.step1,CswViewEditor_WizardSteps.step2,CswViewEditor_WizardSteps.step3,CswViewEditor_WizardSteps.step4,CswViewEditor_WizardSteps.step5,CswViewEditor_WizardSteps.step6],
x={};for(d=1;d<=s.length;d++)x[d]=s[d-1].description;var A=m.startingStep;d=a(this);d=a("<div></div>").appendTo(d);var v=d.CswWizard("init",{ID:m.ID+"_wizard",Title:"Edit View",StepCount:s.length,Steps:x,StartingStep:m.startingStep,FinishText:"Save and Finish",onNext:function(C){A=C;switch(C){case CswViewEditor_WizardSteps.step2.step:C={ViewId:f(z)};CswAjaxXml({url:m.ViewInfoUrl,data:C,stringify:false,success:function(F){O=F;ja.val(O.CswAttrXml("viewname"));sa.val(O.CswAttrXml("category"));if(O.CswAttrXml("visibility")!==
"Property")if(ea.getvisibilityselect()!==undefined){ea.getvisibilityselect().val(O.CswAttrXml("visibility")).trigger("change");ea.getvisroleselect().val("nodes_"+O.CswAttrXml("visibilityroleid"));ea.getvisuserselect().val("nodes_"+O.CswAttrXml("visibilityuserid"))}isTrue(O.CswAttrXml("formobile"))&&ra.CswAttrDom("checked","checked");F=O.CswAttrXml("mode");wa.text(F);ia.CswNumberTextBox("setValue",O.CswAttrXml("width"));if(F==="Grid"){Z.show();ia.show()}else{Z.hide();ia.hide()}}});break;case CswViewEditor_WizardSteps.step3.step:O!==
undefined&&e();k(CswViewEditor_WizardSteps.step3.step,ka);break;case CswViewEditor_WizardSteps.step4.step:k(CswViewEditor_WizardSteps.step4.step,ta);break;case CswViewEditor_WizardSteps.step5.step:k(CswViewEditor_WizardSteps.step5.step,la);break;case CswViewEditor_WizardSteps.step6.step:k(CswViewEditor_WizardSteps.step6.step,ma.CswTable("cell",1,1))}},onPrevious:function(C){A=C;switch(C){case CswViewEditor_WizardSteps.step3.step:k(CswViewEditor_WizardSteps.step3.step,ka);break;case CswViewEditor_WizardSteps.step4.step:k(CswViewEditor_WizardSteps.step4.step,
ta);break;case CswViewEditor_WizardSteps.step5.step:k(CswViewEditor_WizardSteps.step5.step,la);break;case CswViewEditor_WizardSteps.step6.step:k(CswViewEditor_WizardSteps.step6.step,ma.CswTable("cell",1,1))}},onBeforePrevious:function(C){return C!==CswViewEditor_WizardSteps.step2.step||confirm("You will lose any changes made to the current view if you continue.  Are you sure?")},onCancel:m.onCancel,onFinish:function(){var C=f(z);A===CswViewEditor_WizardSteps.step2.step&&!isNullOrEmpty(O)&&e();var F=
{ViewId:C,ViewXml:xmlToString(O)};CswAjaxXml({url:m.SaveViewUrl,data:F,stringify:true,success:function(){m.onFinish(C,h(z))}})}});s=v.CswWizard("div",CswViewEditor_WizardSteps.step1.step);s.append("A <em>View</em> controls the arrangement of information you see in a tree or grid.  Views are useful for defining a user's workflow or for creating elaborate search criteria. This wizard will take you step by step through the process of creating a new View or editing an existing View.<br/><br/>");s.append("Select a View to Edit:&nbsp;");
var w=a('<span id="'+m.ID+'_selviewname" style="font-weight: bold"></span>').appendTo(s),t=a("<div></div>").appendTo(s),z;g(b,m.viewid);x=s.CswTable({ID:m.ID+"_1_btntbl",width:"100%"});s=x.CswTable("cell",1,1);x=x.CswTable("cell",1,2);x.CswAttrDom("align","right");var P=a("<div></div>").appendTo(x);IsAdministrator({Yes:function(){P.CswInput("init",{ID:m.ID+"_all",type:CswInput_Types.checkbox,onChange:function(){g(b)}});P.append("Show Other Roles/Users")}});var K=s.CswButton({ID:m.ID+"_copyview",enabledText:"Copy View",
disableOnClick:true,onclick:function(){var C=f(z);C!==""&&C!==undefined&&CswAjaxJSON({url:m.CopyViewUrl,data:{ViewId:C},success:function(F){g(b,F.copyviewid)},error:function(){K.CswButton("enable")}})}});K.CswButton("disable");var fa=s.CswButton({ID:m.ID+"_deleteview",enabledText:"Delete View",disableOnClick:true,onclick:function(){var C=f(z);isNullOrEmpty(C)||confirm("Are you sure you want to delete: "+i(z))&&CswAjaxJSON({url:m.DeleteViewUrl,data:{ViewId:C},success:function(){g(b);K.CswButton("disable")},
error:function(){fa.CswButton("enable")}})}});fa.CswButton("disable");var ga=s.CswButton({ID:m.ID+"_newview",enabledText:"Create New View",disableOnClick:false,onclick:function(){a.CswDialog("AddViewDialog",{onAddView:function(C){z=g(b,C)},onClose:function(){ga.CswButton("enable")},makeVisibilitySelect:o})}});s=v.CswWizard("div",CswViewEditor_WizardSteps.step2.step).CswTable({ID:m.ID+"_tbl2",FirstCellRightAlign:true});s.CswTable("cell",1,1).append("View Name:");var ja=s.CswTable("cell",1,2).CswInput("init",
{ID:m.ID+"_viewname",type:CswInput_Types.text});s.CswTable("cell",2,1).append("Category:");var sa=s.CswTable("cell",2,2).CswInput("init",{ID:m.ID+"_category",type:CswInput_Types.text}),ea;if(m.startingStep===1)ea=o(s,3,"View Visibility:");s.CswTable("cell",4,1).append("For Mobile:");var ra=s.CswTable("cell",4,2).CswInput("init",{ID:m.ID+"_formobile",type:CswInput_Types.checkbox});s.CswTable("cell",5,1).append("Display Mode:");var wa=s.CswTable("cell",5,2).append('<span id="'+m.ID+'_displaymode"></span>'),
Z=s.CswTable("cell",6,1).append("Grid Width (in characters):"),ia=s.CswTable("cell",6,2);ia.CswNumberTextBox("init",{ID:m.ID+"_gridwidth",Value:"",MinValue:"1",MaxValue:"",Precision:"0",onchange:function(){}});s=v.CswWizard("div",CswViewEditor_WizardSteps.step3.step);s.append("Add relationships from the select boxes below:<br/><br/>");var ka=a("<div />").appendTo(s);s=v.CswWizard("div",CswViewEditor_WizardSteps.step4.step);s.append("Add properties from the select boxes below:<br/><br/>");var ta=a("<div />").appendTo(s);
s=v.CswWizard("div",CswViewEditor_WizardSteps.step5.step);s.append("Add filters by selecting properties from the tree:<br/><br/>");var la=a("<div />").appendTo(s);s=v.CswWizard("div",CswViewEditor_WizardSteps.step6.step);s.append("Select what you want to edit from the tree:<br/><br/>");var ma=s.CswTable({ID:m.ID+"_6_tbl"}),O;return d}})(jQuery);var ViewBuilder_CssClasses={subfield_select:{name:"csw_viewbuilder_subfield_select"},filter_select:{name:"csw_viewbuilder_filter_select"},default_filter:{name:"csw_viewbuilder_default_filter"},filter_value:{name:"csw_viewbuilder_filter_value"},metadatatype_static:{name:"csw_viewbuilder_metadatatype_static"}};
(function(a){function d(e,g){var f="";f={proparbitraryid:"",filtarbitraryid:"",viewbuilderpropid:"",ID:""};g&&a.extend(f,g);return f=isNullOrEmpty(f.filtarbitraryid)?isNullOrEmpty(f.viewbuilderpropid)?isNullOrEmpty(f.proparbitraryid)?isNullOrEmpty(f.ID)?e:makeId({ID:e,prefix:f.ID}):makeId({ID:e+"_proparbitraryid",prefix:f.ID,suffix:f.proparbitraryid}):makeId({ID:e+"_viewbuilderpropid",prefix:f.ID,suffix:f.viewbuilderpropid}):makeId({ID:e+"_filtarbitraryid",prefix:f.ID,suffix:f.filtarbitraryid})}var b=
{init:function(e){function g(i){i.$propsXml.CswAttrXml("viewbuilderpropid");var q=i.$propsXml.CswAttrXml("propname");if(i.includePropertyName){var j=h.CswTable("cell",i.propRow,i.firstColumn).empty(),o=d(q,i);j.CswSpan("init",{ID:o,value:q})}j=i.$propsXml.CswAttrXml("fieldtype");var k=i.$propsXml.children("defaultsubfield").CswAttrXml("filter");o=h.CswTable("cell",i.propRow,i.firstColumn+1).empty();var l=d("default_filter",i);k=o.CswSpan("init",{ID:l,value:k,cssclass:ViewBuilder_CssClasses.default_filter.name}).CswAttrDom({align:"center"});
i.advancedIsHidden||k.hide();k=d("subfield_select",i);var m=a(xmlToString(i.$propsXml.children("subfields").children("select"))).CswAttrDom("id",k).CswAttrDom("name",k).addClass(ViewBuilder_CssClasses.subfield_select.name).change(function(){var x=a(this);x={selectedSubfieldVal:x.val(),selectedFilterVal:"",advancedIsHidden:isTrue(x.is(":hidden"))};a.extend(i,x);g(i)});isNullOrEmpty(i.selectedSubfieldVal)||m.val(i.selectedSubfieldVal).CswAttrDom("selected",true);o.append(m);i.advancedIsHidden&&m.hide();
l=m.find(":selected").val();o=m.find(":selected").CswAttrDom("defaultvalue");k=h.CswTable("cell",i.propRow,i.firstColumn+2).empty();var s=d("filter_select",i);l=a(xmlToString(i.$propsXml.children("propertyfilters").children("subfield[column="+l+"]").children("select"))).CswAttrDom("id",s).CswAttrDom("name",s).addClass(ViewBuilder_CssClasses.filter_select.name).change(function(){var x=a(this);x={selectedSubfieldVal:m.val(),selectedFilterVal:x.val(),advancedIsHidden:isTrue(x.is(":hidden"))};a.extend(i,
x);g(i)});isNullOrEmpty(i.selectedFilterVal)||l.val(i.selectedFilterVal).CswAttrDom("selected",true);k.append(l);i.advancedIsHidden&&l.hide();k=h.CswTable("cell",i.propRow,i.firstColumn+3).empty();l=d("propfilter_input",i);if(j==="List")k.append(a(xmlToString(i.$propsXml.children("filtersoptions").children("select")))).CswAttrDom("id",l).CswAttrDom("name",l);else if(j==="Logical")k.CswTristateCheckBox("init",{ID:l,Checked:o});else{j={value:o,placeholder:""};if(isNullOrEmpty(j.value)){i.placeholder=
q;if(i.placeholder!==m.find(":selected").text())i.placeholder+="'s "+m.find(":selected").text()}k.CswInput("init",{ID:l,type:CswInput_Types.text,cssclass:ViewBuilder_CssClasses.filter_value.name,value:j.value,placeholder:j.placeholder,width:"200px",autofocus:i.autoFocusInput,autocomplete:"on"})}}var f={getNewPropsUrl:"/NbtWebApp/wsNBT.asmx/getViewPropFilterUI",viewid:"",viewxml:"",$propsXml:"",proparbitraryid:"",filtarbitraryid:"",viewbuilderpropid:"",ID:"",propRow:1,firstColumn:3,includePropertyName:false,
advancedIsHidden:false,selectedSubfieldVal:"",selectedFilterVal:"",autoFocusInput:false};e&&a.extend(f,e);var h=a(this);isNullOrEmpty(f.$propsXml)&&!isNullOrEmpty(f.proparbitraryid)?CswAjaxXml({url:f.getNewPropsUrl,data:{ViewXml:f.viewxml,PropArbitraryId:f.proparbitraryid},stringify:true,success:function(i){f.$propsXml=i.children("propertyfilters").children("property");f.filtarbitraryid=f.$propsXml.CswAttrXml("filtarbitraryid");g(f)}}):g(f);return h},getFilterJson:function(e){var g=a(this),f={nodetypeorobjectclassid:"",
relatedidtype:"",fieldtype:g.CswAttrXml("fieldtype"),ID:"",$parent:"",proparbitraryid:"",filtarbitraryid:g.CswAttrXml("filtarbitraryid"),viewbuilderpropid:""};e&&a.extend(f,e);var h={proparbitraryid:f.proparbitraryid,filtarbitraryid:f.filtarbitraryid,viewbuilderpropid:f.viewbuilderpropid,ID:f.ID},i=d("propfilter_input",h);e=d("subfield_select",h);h=d("filter_select",h);var q={};i=f.$parent.find("#"+i);switch(f.fieldtype){case "Logical":i=i.CswTristateCheckBox("value");break;case "List":i=i.find(":selected").val();
break;default:i=i.val()}if(i!==""){e=f.$parent.find("#"+e).find(":selected").text();h=f.$parent.find("#"+h).find(":selected").val();g=g.CswAttrXml("proptype");q={nodetypeorobjectclassid:f.nodetypeorobjectclassid,relatedidtype:f.relatedidtype,proptype:g,viewbuilderpropid:f.viewbuilderpropid,filtarbitraryid:f.filtarbitraryid,proparbitraryid:f.proparbitraryid,relatedidtype:f.relatedidtype,subfield:e,filter:h,filtervalue:i}}return q},makeFilter:function(e){var g={url:"/NbtWebApp/wsNBT.asmx/makeViewPropFilter",
viewxml:"",filtJson:"",onSuccess:function(){}};e&&a.extend(g,e);CswAjaxXml({url:g.url,data:{ViewXml:g.viewxml,PropFiltJson:g.filtJson},success:function(f){g.onSuccess(f)}})}};a.fn.CswViewPropFilter=function(e){if(b[e])return b[e].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof e==="object"||!e)return b.init.apply(this,arguments);else a.error("Method "+e+" does not exist on CswViewPropFilter")}})(jQuery);(function(a){function d(e){var g={ID:"",ClickDelay:300,iconurl:"",type:"",viewid:"",viewname:"",viewmode:"",actionid:"",actionurl:"",reportid:"",onSelect:function(){},$selectdiv:""};e&&a.extend(g,e);e=a("<div></div>");var f=e.CswTable("init",{ID:g.ID+"selectedtbl"}),h=f.CswTable("cell",1,1);h=a("<div />").appendTo(h);h.css("background-image",g.iconurl);h.css("width","18px");h.css("height","18px");f.CswTable("cell",1,2).append(g.viewname);g.$selectdiv.CswComboBox("TopContent",e);g.$selectdiv.CswAttrDom("selectedValue",
g.viewid);setTimeout(function(){g.$selectdiv.CswComboBox("toggle")},g.ClickDelay);g.onSelect({iconurl:g.iconurl,type:g.type,viewid:g.viewid,viewname:g.viewname,viewmode:g.viewmode,actionid:g.actionid,actionurl:g.actionurl,reportid:g.reportid})}var b={init:function(e){var g={ID:"",onSelect:function(){},onSuccess:function(){},ClickDelay:300,issearchable:false,usesession:true};e&&a.extend(g,e);var f=a(this);$viewtreediv=a("<div/>");f.CswComboBox("init",{ID:g.ID+"_combo",TopContent:"Select a View",SelectContent:$viewtreediv,
Width:"266px"});$viewtreediv.CswViewTree({onSelect:function(h){d({ID:g.ID,ClickDelay:g.ClickDelay,iconurl:h.iconurl,type:h.type,viewid:h.viewid,viewname:h.viewname,viewmode:h.viewmode,actionid:h.actionid,actionurl:h.actionurl,reportid:h.reportid,onSelect:g.onSelect,$selectdiv:f})},onSuccess:g.onSuccess,issearchable:g.issearchable,usesession:g.usesession});return f},value:function(){return a(this).CswAttrDom("selectedValue")}};a.fn.CswViewSelect=function(e){if(b[e])return b[e].apply(this,Array.prototype.slice.call(arguments,
1));else if(typeof e==="object"||!e)return b.init.apply(this,arguments);else a.error("Method "+e+" does not exist on CswViewSelect")}})(jQuery);(function(a){a.fn.CswViewTree=function(d){var b={ViewUrl:"/NbtWebApp/wsNBT.asmx/getViewTree",viewid:"",issearchable:false,usesession:true,onSelect:function(){},onSuccess:function(){}};d&&a.extend(b,d);var e=a(this);CswAjaxXml({url:b.ViewUrl,data:{IsSearchable:b.issearchable,UseSession:b.usesession},stringify:false,success:function(g){var f=g.find("types").text();f=a.parseJSON(f);g=g.find("tree").children("root");g=xmlToString(g);e.jstree({xml_data:{data:g,xsl:"nest"},ui:{select_limit:1},core:{initially_open:["root"]},
types:{types:f},plugins:["themes","xml_data","ui","types"]}).bind("select_node.jstree",function(){var h=jsTreeGetSelected(e);h={iconurl:h.iconurl,type:h.$item.CswAttrXml("viewtype"),viewid:h.$item.CswAttrXml("viewid"),viewname:h.text,viewmode:h.$item.CswAttrXml("viewmode"),actionid:h.$item.CswAttrXml("actionid"),actionurl:h.$item.CswAttrXml("actionurl"),reportid:h.$item.CswAttrXml("reportid")};b.onSelect(h)});b.onSuccess()}});return this}})(jQuery);(function(a){function d(f){var h={cellset:"",row:"",column:"",RemoveWelcomeItemUrl:"",onSuccess:function(){}};f&&a.extend(h,f);f=a(h.cellset[2][1]);if(f.length>0){f={RoleId:"",WelcomeId:f.children("input").CswAttrDom("welcomeid")};CswAjaxJSON({url:h.RemoveWelcomeItemUrl,data:f,success:function(){h.onSuccess()}})}}function b(f){var h={AddWelcomeItemUrl:"",type:"",viewid:"",nodetypeid:"",text:"",iconfilename:"",onSuccess:function(){},onError:function(){}};f&&a.extend(h,f);CswAjaxJSON({url:h.AddWelcomeItemUrl,
data:{RoleId:"",Type:h.type,ViewId:h.viewid,NodeTypeId:h.nodetypeid,Text:h.text,IconFileName:h.iconfilename},success:function(){h.onSuccess()},error:h.onError})}function e(f,h,i,q){h=a(h[2][1]);if(h.length>0){i={RoleId:"",WelcomeId:h.children("input").CswAttrDom("welcomeid"),NewRow:i,NewColumn:q};CswAjaxJSON({url:f,data:i,success:function(){}})}}var g={initTable:function(f){var h={Url:"/NbtWebApp/wsNBT.asmx/getWelcomeItems",MoveWelcomeItemUrl:"/NbtWebApp/wsNBT.asmx/moveWelcomeItems",RemoveWelcomeItemUrl:"/NbtWebApp/wsNBT.asmx/deleteWelcomeItem",
onLinkClick:function(){},onSearchClick:function(){},onAddClick:function(){},onAddComponent:function(){}};f&&a.extend(h,f);var i=a(this);CswAjaxXml({url:h.Url,data:{RoleId:""},stringify:false,success:function(q){var j=a('<div id="welcomediv"></div>').appendTo(i).css("text-align","center").css("font-size","1.2em").CswLayoutTable("init",{ID:"welcometable",cellset:{rows:2,columns:1},TableCssClass:"WelcomeTable",cellpadding:10,align:"center",onSwap:function(o,k){var l={cellset:k.cellset,row:k.row,column:k.column,
swapcellset:k.swapcellset,swaprow:k.swaprow,swapcolumn:k.swapcolumn,MoveWelcomeItemUrl:h.MoveWelcomeItemUrl},m={cellset:"",row:"",column:"",swapcellset:"",swaprow:"",swapcolumn:"",MoveWelcomeItemUrl:""};l&&a.extend(m,l);e(m.MoveWelcomeItemUrl,m.cellset,m.swaprow,m.swapcolumn);e(m.MoveWelcomeItemUrl,m.swapcellset,m.row,m.column)},showConfigButton:true,showAddButton:true,showRemoveButton:true,onAddClick:function(){a.CswDialog("AddWelcomeItemDialog",{onAdd:h.onAddComponent})},onRemove:function(o,k){d({cellset:k.cellset,
row:k.row,column:k.column,RemoveWelcomeItemUrl:h.RemoveWelcomeItemUrl})}});q.children().each(function(){var o=a(this),k=j.CswLayoutTable("cellset",o.CswAttrXml("displayrow"),o.CswAttrXml("displaycol")),l=k[1][1];k=k[2][1];o.CswAttrXml("buttonicon")!==undefined&&o.CswAttrXml("buttonicon")!==""&&l.append(a('<a href=""><img border="0" src="'+o.CswAttrXml("buttonicon")+'"/></a>'));var m={type:o.CswAttrXml("type"),viewmode:o.CswAttrXml("viewmode"),itemid:o.CswAttrXml("itemid"),text:o.CswAttrXml("text"),
iconurl:o.CswAttrXml("iconurl"),viewid:o.CswAttrXml("viewid"),actionid:o.CswAttrXml("actionid"),reportid:o.CswAttrXml("reportid"),linktype:o.CswAttrXml("linktype")};switch(m.linktype.toLowerCase()){case "link":k.append(a('<a href="">'+m.text+"</a>"));k.find("a").click(function(){h.onLinkClick(m);return false});l.find("a").click(function(){h.onLinkClick(m);return false});break;case "search":k.append(a('<a href="">'+m.text+"</a>"));k.find("a").click(function(){h.onSearchClick(m);return false});l.find("a").click(function(){h.onSearchClick(m);
return false});break;case "text":k.append("<span>"+m.text+"</span>");break;case "add":k.append(a('<a href="">'+m.text+"</a>"));k.find("a").click(function(){h.onAddClick(o.CswAttrXml("nodetypeid"));return false});l.find("a").click(function(){h.onAddClick(o.CswAttrXml("nodetypeid"));return false})}k.CswInput("init",{ID:o.CswAttrXml("welcomeid"),type:CswInput_Types.hidden}).CswAttrDom("welcomeid",o.CswAttrXml("welcomeid"))})}})},getAddItemForm:function(f){var h={AddWelcomeItemUrl:"/NbtWebApp/wsNBT.asmx/addWelcomeItem",
onAdd:function(){}};f&&a.extend(h,f);f=a(this).CswTable("init",{ID:"addwelcomeitem_tbl"});a("<span>Type:</span>").appendTo(f.CswTable("cell",1,1));var i=a('<select id="welcome_type" name="welcome_type"></select>').appendTo(f.CswTable("cell",1,2));i.append('<option value="Add" selected>Add</option>');i.append('<option value="Link">Link</option>');i.append('<option value="Search">Search</option>');i.append('<option value="Text">Text</option>');var q=a("<span>View:</span>").appendTo(f.CswTable("cell",
2,1)).hide(),j=f.CswTable("cell",2,2).CswTable("init",{ID:"viewselecttable"}),o=j.CswTable("cell",1,1).CswViewSelect({ID:"welcome_viewsel"}).hide(),k=j.CswTable("cell",2,1).CswViewSelect({ID:"welcome_searchviewsel",issearchable:true,usesession:false}).hide(),l=a("<span>Add New:</span>").appendTo(f.CswTable("cell",3,1)),m=f.CswTable("cell",3,2).CswNodeTypeSelect({ID:"welcome_ntsel"});a("<span>Text:</span>").appendTo(f.CswTable("cell",4,1));var s=f.CswTable("cell",4,2).CswInput("init",{ID:"welcome_text",
type:CswInput_Types.text}),x=a("<span>Use Button:</span>").appendTo(f.CswTable("cell",5,1)),A=a('<select id="welcome_button" />').appendTo(f.CswTable("cell",5,2));A.append('<option value="blank.gif"></option>');var v=a('<img id="welcome_btnimg" />').appendTo(f.CswTable("cell",6,2)),w=f.CswTable("cell",7,2).CswButton({ID:"welcome_add",enabledText:"Add",disabledText:"Adding",onclick:function(){var t="";if(o.is(":hidden"))k.is(":hidden")||(t=k.CswViewSelect("value"));else t=o.CswViewSelect("value");
b({AddWelcomeItemUrl:h.AddWelcomeItemUrl,type:i.val(),welcomepkval:t,nodetypeid:m.CswNodeTypeSelect("value"),text:s.val(),iconfilename:A.val(),onSuccess:h.onAdd,onError:function(){w.CswButton("enable")}})}});f.CswTable("cell",7,2).append(w);A.change(function(){v.CswAttrDom("src","Images/biggerbuttons/"+A.val())});i.change(function(){var t={$typeselect:i,$viewselect_label:q,$viewselect:o,$searchviewselect:k,$ntselect_label:l,$ntselect:m,$buttonsel_label:x,$buttonsel:A,$buttonimg:v},z={$typeselect:"",
$viewselect_label:"",$viewselect:"",$searchviewselect:"",$ntselect_label:"",$ntselect:"",$buttonsel_label:"",$buttonsel:"",$buttonimg:""};t&&a.extend(z,t);switch(z.$typeselect.val()){case "Add":z.$viewselect_label.hide();z.$viewselect.hide();z.$searchviewselect.hide();z.$ntselect_label.show();z.$ntselect.show();z.$buttonsel_label.show();z.$buttonsel.show();z.$buttonimg.show();break;case "Link":z.$viewselect_label.show();z.$viewselect.show();z.$searchviewselect.hide();z.$ntselect_label.hide();z.$ntselect.hide();
z.$buttonsel_label.show();z.$buttonsel.show();z.$buttonimg.show();break;case "Search":z.$viewselect_label.show();z.$viewselect.hide();z.$searchviewselect.show();z.$ntselect_label.hide();z.$ntselect.hide();z.$buttonsel_label.show();z.$buttonsel.show();z.$buttonimg.show();break;case "Text":z.$viewselect_label.hide();z.$viewselect.hide();z.$searchviewselect.hide();z.$ntselect_label.hide();z.$ntselect.hide();z.$buttonsel_label.hide();z.$buttonsel.hide();z.$buttonimg.hide()}});CswAjaxXml({url:"/NbtWebApp/wsNBT.asmx/getWelcomeButtonIconList",
success:function(t){t.children().each(function(){var z=a(this).CswAttrDom("filename");z!=="blank.gif"&&A.append('<option value="'+z+'">'+z+"</option>")})}})}};a.fn.CswWelcome=function(f){if(g[f])return g[f].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof f==="object"||!f)return g.init.apply(this,arguments);else a.error("Method "+f+" does not exist on CswWelcome")}})(jQuery);(function(a){function d(g){return parseInt(g.find(".CswWizard_StepLinkDivSelected").CswAttrDom("stepno"))}function b(g,f){var h=g.CswAttrDom("stepcount"),i=g.CswAttrDom("startingstep");if(f>0&&f<=h){g.find(".CswWizard_StepLinkDiv").removeClass("CswWizard_StepLinkDivSelected");g.find(".CswWizard_StepLinkDiv[stepno="+f+"]").addClass("CswWizard_StepLinkDivSelected");g.find(".CswWizard_StepDiv").hide();g.find(".CswWizard_StepDiv[stepno="+f+"]").show();var q=a("#"+g.CswAttrDom("id")+"_prev");f<=i?q.CswButton("disable"):
q.CswButton("enable");i=a("#"+g.CswAttrDom("id")+"_next");f>=h?i.CswButton("disable"):i.CswButton("enable")}}var e={init:function(g){var f={ID:"",Title:"A Wizard",StepCount:1,Steps:{1:"Default"},StartingStep:1,SelectedStep:1,FinishText:"Finish",onNext:function(){},onPrevious:function(){},onBeforeNext:function(){return true},onBeforePrevious:function(){return true},onFinish:function(){},onCancel:function(){}};g&&a.extend(f,g);if(f.StartingStep>f.SelectedStep)f.SelectedStep=f.StartingStep;var h=a(this).CswTable({ID:f.ID,
TableCssClass:"CswWizard_WizardTable"});h.CswAttrDom("stepcount",f.StepCount);h.CswAttrDom("startingstep",f.StartingStep);h.CswTable("cell",1,1).addClass("CswWizard_TitleCell").CswAttrDom("colspan",2).append(f.Title);g=h.CswTable("cell",2,1).CswAttrDom("rowspan",2).addClass("CswWizard_IndexCell");for(var i=h.CswTable("cell",2,2).addClass("CswWizard_StepsCell"),q=h.CswTable("cell",3,1).addClass("CswWizard_ButtonsCell"),j=1;j<=f.StepCount;j++){var o=f.Steps[j];a('<div class="CswWizard_StepLinkDiv" stepno="'+
j+'">'+j+".&nbsp;"+o+"</div>").appendTo(g);a('<div class="CswWizard_StepDiv" id="'+f.ID+"_"+j+'" stepno="'+j+'" ><span class="CswWizard_StepTitle">'+o+'</span><br/></br><div id="'+f.ID+"_"+j+'_content"></div></div>').appendTo(i)}i=q.CswTable({ID:f.ID+"_btntbl",width:"100%"});g=i.CswTable("cell",1,1).CswAttrDom("align","right").CswAttrDom("width","65%");i=i.CswTable("cell",1,2).CswAttrDom("align","right").CswAttrDom("width","35%");g.CswButton("init",{ID:f.ID+"_prev",enabledText:"< Previous",disableOnClick:false,
onclick:function(){var k=d(h);if(f.onBeforePrevious(k)){b(h,k-1);f.onPrevious(k-1)}}});g.CswButton("init",{ID:f.ID+"_next",enabledText:"Next >",disableOnClick:false,onclick:function(){var k=d(h);if(f.onBeforeNext(k)){b(h,k+1);f.onNext(k+1)}}});g.CswButton("init",{ID:f.ID+"_finish",enabledText:f.FinishText,onclick:f.onFinish});i.CswButton("init",{ID:f.ID+"_cancel",enabledText:"Cancel",onclick:f.onCancel});b(h,f.SelectedStep);f.onNext(f.SelectedStep);return h},div:function(g){return a(this).find(".CswWizard_StepDiv[stepno="+
g+"] div")},button:function(g,f){var h=a(this);switch(g){case "previous":a("#"+h.CswAttrDom("id")+"_prev").CswButton(f);break;case "next":a("#"+h.CswAttrDom("id")+"_next").CswButton(f);break;case "finish":a("#"+h.CswAttrDom("id")+"_finish").CswButton(f);break;case "cancel":a("#"+h.CswAttrDom("id")+"_cancel").CswButton(f)}}};a.fn.CswWizard=function(g){if(e[g])return e[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return e.init.apply(this,arguments);else a.error("Method "+
g+" does not exist on CswWizard")}})(jQuery);var timeout="";function getTimeout(){return timeout}
function CswAjaxJSON(a){var d={url:"",data:{},onloginfail:function(){},success:function(){},error:function(){},formobile:false};a&&$.extend(d,a);$.ajax({type:"POST",url:d.url,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(d.data),success:function(b,e,g){b=$.parseJSON(b.d);if(b.error!==undefined){_handleAjaxError(g,{message:b.error.message,detail:b.error.detail},"");d.error()}else{g=tryParseString(b.AuthenticationStatus,"");timeout=tryParseString(b.timeout,"");d.formobile?
_handleAuthenticationStatus({status:g,success:d.success(b),failure:d.onloginfail}):d.success(b)}},error:function(b,e,g){_handleAjaxError(b,{message:"A Webservices Error Occurred",detail:e},g);d.error()}})}
function CswAjaxXml(a){var d={url:"",data:{},stringify:false,onloginfail:function(){},success:function(){},error:function(){},formobile:false};a&&$.extend(d,a);if(!isNullOrEmpty(d.url)){a=$.param(d.data);$.ajax({type:"POST",url:d.url,dataType:"xml",data:a,success:function(b,e,g){e=$(g.responseXML);b=e.children().first();b.CswAttrXml("authenticationstatus");timeout=b.CswAttrXml("timeout");if(b.first().get(0).nodeName==="error"){_handleAjaxError(g,{message:b.CswAttrXml("message"),detail:b.CswAttrXml("detail")},
"");d.error()}else if(d.formobile){g=tryParseString(e.find("AuthenticationStatus").text(),"");_handleAuthenticationStatus({status:g,success:d.success(b),failure:d.onloginfail})}else d.success(b)},error:function(b,e,g){_handleAjaxError(b,{message:"A Webservices Error Occurred",detail:e},g);d.error()}})}}function _handleAjaxError(a,d){var b=$("#ErrorDiv");b.length>0?b.CswErrorMessage({message:d.message,detail:d.detail}):log(d.message+"; "+d.detail)}
function _handleAuthenticationStatus(a){var d={status:"",success:function(){},failure:function(){},usernodeid:"",usernodekey:"",passwordpropid:""};a&&$.extend(d,a);a="";switch(d.status){case "Failed":a="Login Failed";break;case "Locked":a="Your account is locked.  Please see your account administrator.";break;case "Deactivated":a="Your account is deactivated.  Please see your account administrator.";break;case "TooManyUsers":a="Too many users are currently connected.  Try again later.";break;case "NonExistentAccessId":a=
"Login Failed";break;case "NonExistentSession":a="Login Failed";break;case "Unknown":a="An Unknown Error Occurred";break;case "ExpiredPassword":$.CswDialog("EditNodeDialog",{nodeid:d.usernodeid,cswnbtnodekey:d.usernodekey,filterToPropId:d.passwordpropid,title:"Your password has expired.  Please change it now:",onEditNode:function(){d.success()}});break;case "ShowLicense":$.CswDialog("ShowLicenseDialog",{onAccept:function(){d.success()},onDecline:function(){d.failure("You must accept the license agreement to use this application")}})}!isNullOrEmpty(a)&&
d.status!=="Authenticated"&&d.failure(a)}function xmlToString(a){var d="";a instanceof jQuery||(a=$(a));if(!isNullOrEmpty(a)){(d=a.get(0).xml)||(d=(new XMLSerializer).serializeToString(a.get(0)));d||$.error("Browser does not support XML operations necessary to convert to string")}return d}function jsonToString(a){return JSON.stringify(a)}var changed=new Number(0),checkChangesEnabled=true;function setChanged(){if(checkChangesEnabled)changed=1}
function unsetChanged(){if(checkChangesEnabled)changed=0}function checkChanges(){if(checkChangesEnabled&&changed===1)return"If you continue, you will lose any changes made on this page.  To save your changes, click Cancel and then click the Save button."}
function manuallyCheckChanges(){var a=true;if(checkChangesEnabled&&changed===1)if(a=confirm("Are you sure you want to navigate away from this page?\n\nIf you continue, you will lose any changes made on this page.  To save your changes, click Cancel and then click the Save button.\n\nPress OK to continue, or Cancel to stay on the current page."))changed=0;return a}
function initCheckChanges(){window.onbeforeunload=isNullOrEmpty(window.onbeforeunload)?function(){return checkChanges()}:function(){var a=window.onbeforeunload;return a()?checkChanges():false}}window.onload=isNullOrEmpty(window.onload)?function(){initCheckChanges()}:new Function("initCheckChanges(); var f="+window.onload+"; return f();");
function IsAdministrator(a){var d={Yes:function(){},No:function(){}};a&&$.extend(d,a);CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/isAdministrator",success:function(b){b.Administrator==="true"?d.Yes():d.No()}})}function copyNode(a){var d={nodeid:"",nodekey:"",onSuccess:function(){},onError:function(){}};a&&$.extend(d,a);CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/CopyNode",data:{NodePk:d.nodeid},success:function(b){d.onSuccess(b.NewNodeId,"")},error:d.onError})}
function deleteNodes(a){var d={nodeids:[],nodekeys:[],onSuccess:function(){},onError:function(){}};a&&$.extend(d,a);CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/DeleteNodes",data:{NodePks:d.nodeids,NodeKeys:d.nodekeys},success:function(){d.nodeid=$.CswCookie("clear",CswCookieName.CurrentNodeId);d.cswnbtnodekey=$.CswCookie("clear",CswCookieName.CurrentNodeKey);d.onSuccess("","")},error:d.onError})}
function jsTreeGetSelected(a){var d=a.CswAttrDom("id");$SelectedItem=a.jstree("get_selected");return{iconurl:$SelectedItem.children("a").children("ins").css("background-image"),id:$SelectedItem.CswAttrDom("id").substring(d.length),text:$SelectedItem.children("a").first().text().trim(),$item:$SelectedItem}}function GoHome(){$.CswCookie("clear",CswCookieName.CurrentViewId);$.CswCookie("clear",CswCookieName.CurrentViewMode);window.location="NewMain.html"}
function HandleMenuItem(a){var d={$ul:"",$itemxml:"",onLogout:function(){},onAlterNode:function(){},onSearch:{onViewSearch:function(){},onGenericSearch:function(){}},onMultiEdit:function(){},onEditView:function(){},Multi:false,NodeCheckTreeId:""};a&&$.extend(d,a);if(d.$itemxml.CswAttrXml("href")!==undefined&&d.$itemxml.CswAttrXml("href")!=="")a=$('<li><a href="'+d.$itemxml.CswAttrXml("href")+'">'+d.$itemxml.CswAttrXml("text")+"</a></li>").appendTo(d.$ul);else if(d.$itemxml.CswAttrXml("popup")!==undefined&&
d.$itemxml.CswAttrXml("popup")!=="")a=$('<li class="headermenu_dialog"><a href="#">'+d.$itemxml.CswAttrXml("text")+"</a></li>").appendTo(d.$ul).click(function(){$.CswDialog("OpenDialog",d.$itemxml.CswAttrXml("text"),d.$itemxml.CswAttrXml("popup"));return false});else if(d.$itemxml.CswAttrXml("action")!==undefined&&d.$itemxml.CswAttrXml("action")!==""){a=$('<li><a href="#">'+d.$itemxml.CswAttrXml("text")+"</a></li>").appendTo(d.$ul);var b=a.children("a");switch(d.$itemxml.CswAttrXml("action")){case "About":b.click(function(){$.CswDialog("AboutDialog");
return false});break;case "AddNode":b.click(function(){$.CswDialog("AddNodeDialog",{nodetypeid:d.$itemxml.CswAttrXml("nodetypeid"),relatednodeid:d.$itemxml.CswAttrXml("relatednodeid"),onAddNode:d.onAlterNode});return false});break;case "DeleteNode":b.click(function(){$.CswDialog("DeleteNodeDialog",{nodename:d.$itemxml.CswAttrXml("nodename"),nodeid:d.$itemxml.CswAttrXml("nodeid"),onDeleteNode:d.onAlterNode,NodeCheckTreeId:d.NodeCheckTreeId,Multi:d.Multi});return false});break;case "editview":b.click(function(){d.onEditView(d.$itemxml.CswAttrXml("viewid"));
return false});break;case "CopyNode":b.click(function(){$.CswDialog("CopyNodeDialog",{nodename:d.$itemxml.CswAttrXml("nodename"),nodeid:d.$itemxml.CswAttrXml("nodeid"),onCopyNode:d.onAlterNode});return false});break;case "PrintLabel":b.click(function(){$.CswDialog("PrintLabelDialog",{nodeid:d.$itemxml.CswAttrXml("nodeid"),propid:d.$itemxml.CswAttrXml("propid")});return false});break;case "Home":b.click(function(){GoHome();return false});break;case "Logout":b.click(function(){d.onLogout();return false});
break;case "Profile":b.click(function(){$.CswDialog("EditNodeDialog",{nodeid:d.$itemxml.CswAttrXml("userid"),cswnbtnodekey:"",filterToPropId:"",title:"User Profile",onEditNode:function(){}});return false});break;case "ViewSearch":b.click(function(){d.onSearch.onViewSearch()});break;case "GenericSearch":b.click(function(){d.onSearch.onGenericSearch()});break;case "multiedit":b.click(d.onMultiEdit)}}else a=$("<li>"+d.$itemxml.CswAttrXml("text")+"</li>").appendTo(d.$ul);return a}
function openPopup(a,d,b){a=window.open(a,null,"height="+d+", width="+b+", status=no, resizable=yes, scrollbars=yes, toolbar=yes, location=no, menubar=yes");a.focus();return a}function validateTime(a){var d=true,b=/^(\d?\d):(\d\d)\s?([APap][Mm])?$/g.exec(a);if(b===null)d=false;else{a=parseInt(b[1]);b=parseInt(b[2]);if(a<0||a>=24||b<0||b>=60)d=false}return d}function validateFloatMinValue(a,d){var b=parseFloat(a),e=parseFloat(d),g=true;if(e!==undefined)if(b===undefined||b<e)g=false;return g}
function validateFloatMaxValue(a,d){var b=parseFloat(a),e=parseFloat(d),g=true;if(e!==undefined)if(b===undefined||b>e)g=false;return g}function validateFloatPrecision(a,d){var b=true,e;e=d>0?/^\-?\d*\.?\d*$/g:/^\-?\d*$/g;if(b&&!e.test(a))b=false;return b}function validateInteger(a){return/^\-?\d*$/g.test(a)}function startsWith(a,d){return a.substr(0,d.length)===d}function getTimeString(a){var d="",b=a.getHours();a=a.getMinutes();if(a<10)a="0"+a;d=b%12+":"+a+" ";d+=b>11?"PM":"AM";return d}
function makeId(a){var d={ID:"",prefix:"",suffix:"",Delimiter:"_"};a&&$.extend(d,a);a=d.ID;if(!isNullOrEmpty(d.prefix)&&!isNullOrEmpty(a))a=d.prefix+d.Delimiter+a;if(!isNullOrEmpty(d.suffix)&&!isNullOrEmpty(a))a+=d.Delimiter+d.suffix;return a}
function makeSafeId(a){var d={ID:"",prefix:"",suffix:"",Delimiter:"_"};a&&$.extend(d,a);a=d.ID;var b=[/'/gi,/\//g];if(!isNullOrEmpty(d.prefix)&&!isNullOrEmpty(a))a=d.prefix+d.Delimiter+a;if(!isNullOrEmpty(d.suffix)&&!isNullOrEmpty(a))a+=d.Delimiter+d.suffix;for(d=0;d<b.length;d++)isNullOrEmpty(a)||(a=a.replace(b[d],""));return a}function isNullOrEmpty(a){var d=false;if(!isFunction(a)){d=$.isEmptyObject(a);if(!d&&isGeneric(a))d=trim(a)===""}return d}
function isGeneric(a){return!isFunction(a)&&!isArray(a)&&!isJQuery(a)&&!isJson(a)}function isFunction(a){return $.isFunction(a)}function isArray(a){return $.isArray(a)}function isJson(a){return $.isPlainObject(a)}function isJQuery(a){return ret=a instanceof jQuery}function isNumeric(a){var d=false;if(!isNullOrEmpty(a))if(parseInt(a)!==NaN)d=true;return d}
function isTrue(a){var d;if(a==="true"||a===true||a==="1"||a===1)d=true;else if(a==="false"||a===false||a==="0"||a===0)d=false;else{d=false;debug&&log("isTrue() was called on "+a+", which is not a boolean.",false)}return d}function tryParseString(a,d){var b=d;isNullOrEmpty(a)||(b=a);return b}var Int32MinVal=new Number(-2147483648);function tryParseNumber(a,d){var b=new Number(d),e=new Number(a);if(e!==NaN&&e!==Int32MinVal)b=e;return b}function trim(a){return $.trim(a)}
function iterate(a){var d,b;for(b in a)d=d+b+"="+a[b]+"<br><br>";a=window.open("","popup");a!==null?a.document.write(d):console.log("iterate() error: No popup!")}function log(a,d){var b="";if(isTrue(d))b=getCallStack();try{console.log(a);isNullOrEmpty(b)||console.log(b)}catch(e){alert(a);isNullOrEmpty(b)||alert(b)}}
function getCallStack(){for(var a="",d=arguments.callee.caller.name,b=arguments.callee.caller;!isNullOrEmpty(d);){if(d!="log")a+="Called by function "+d+"() \n";b=b.caller;d=!isNullOrEmpty(b)?b.name:""}return a}if(typeof String.prototype.trim!=="function")String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("barcode").text().trim();if(b.ReadOnly)e.append(g);else{e=e.CswTable("init",{ID:b.ID+"_tbl"});g=e.CswTable("cell",1,1).CswInput("init",{ID:b.ID,type:CswInput_Types.text,cssclass:"textinput",onChange:b.onchange,value:g});e=e.CswTable("cell",1,2);a("<div/>").appendTo(e).CswImageButton({ButtonType:CswImageButton_ButtonType.Print,AlternateText:"",ID:b.ID+"_print",onClick:function(){a.CswDialog("PrintLabelDialog",
{nodeid:b.nodeid,propid:b.ID});return CswImageButton_ButtonType.None}});b.Required&&g.addClass("required")}},save:function(b){var e=b.$propdiv.find("input");b.$propxml.children("barcode").text(e.val())}};a.fn.CswFieldTypeBarcode=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeBarcode")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();b=b.$propxml.children("value").text().trim();e.append(b)},save:function(){}};a.fn.CswFieldTypeComposite=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeComposite")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("value").text().trim();if(g==="1/1/0001")g="";if(b.ReadOnly)e.append(g);else{e=e.CswInput("init",{ID:b.ID,type:CswInput_Types.text,value:g,onChange:b.onchange,cssclass:"textinput date"});e.datepicker();b.Required&&e.addClass("required")}},save:function(b){var e=b.$propdiv.find("input");b.$propxml.children("value").text(e.val())}};a.fn.CswFieldTypeDate=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,
1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeDate")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("href").text().trim(),f=b.$propxml.children("name").text().trim(),h=e.CswTable("init",{ID:b.ID+"_tbl"});e=h.CswTable("cell",1,1);var i=h.CswTable("cell",1,2);h=h.CswTable("cell",1,3);e.append('<a href="'+g+'" target="_blank">'+f+"</a>");if(!b.ReadOnly){a("<div/>").appendTo(i).CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID+"_edit",onClick:function(){a.CswDialog("FileUploadDialog",
{url:"/NbtWebApp/wsNBT.asmx/fileForProp",params:{PropId:b.$propxml.CswAttrXml("id")},onSuccess:function(){b.onReload()}});return CswImageButton_ButtonType.None}});a("<div/>").appendTo(h).CswImageButton({ButtonType:CswImageButton_ButtonType.Clear,AlternateText:"Clear",ID:b.ID+"_clr",onClick:function(){if(confirm("Are you sure you want to clear this file?")){var q={PropId:b.$propxml.CswAttrXml("id"),IncludeBlob:true};CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/clearProp",data:q,success:function(){b.onReload()}})}return CswImageButton_ButtonType.None}})}},
save:function(){}};a.fn.CswFieldTypeFile=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeFile")}})(jQuery);(function(a){var d={init:function(b){function e(l){var m={reinit:true};l&&a.extend(l,m);j.CswNodeGrid("init",l)}var g=a(this);g.empty();var f=makeId({prefix:b.ID,ID:"grid_as_fieldtype_menu"});f=a('<div id="'+f+'" name="'+f+'"></div>');var h=makeId({prefix:b.ID,ID:"grid_as_fieldtype_search"}),i=a('<div id="'+h+'" name="'+h+'"></div>'),q=makeId({prefix:b.ID,ID:"grid_as_fieldtype"}),j=a('<div id="'+q+'" name="'+q+'"></div>'),o=b.$propxml.children("viewid").text().trim(),k={viewid:o,nodeid:b.nodeid,cswnbtnodekey:b.cswnbtnodekey,
readonly:b.ReadOnly,reinit:false,onEditNode:function(){e(k)},onDeleteNode:function(){e(k)}};j.CswNodeGrid("init",k);f.CswMenuMain({viewid:o,nodeid:b.nodeid,cswnbtnodekey:b.cswnbtnodekey,onAddNode:function(){e(k)},onSearch:{onViewSearch:function(){i.empty();i.CswSearch({viewid:o,cswnbtnodekey:b.cswnbtnodekey,ID:h,onSearchSubmit:function(l){var m={};a.extend(m,k);m.viewid=l.viewid;e(m)}})},onGenericSearch:function(){}},onEditView:function(){b.onEditView(o)}});g.append(f,a("<br/>"),i,a("<br/>"),j)},
save:function(){}};a.fn.CswFieldTypeGrid=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeGrid")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("href").text().trim(),f=b.$propxml.children("href").CswAttrXml("width"),h=b.$propxml.children("href").CswAttrXml("height"),i=b.$propxml.children("name").text().trim(),q=e.CswTable("init",{ID:b.ID+"_tbl"});e=q.CswTable("cell",1,1).CswAttrDom("colspan","3");var j=q.CswTable("cell",2,1).CswAttrDom("width",f-36),o=q.CswTable("cell",2,2).CswAttrDom("align","right");q=q.CswTable("cell",2,3).CswAttrDom("align",
"right");if(i!==""){a('<a href="'+g+'" target="_blank"><img src="'+g+'" alt="'+i+'" width="'+f+'" height="'+h+'"/></a>').appendTo(e);j.append('<a href="'+g+'" target="_blank">'+i+"</a>")}if(!b.ReadOnly){a("<div/>").appendTo(o).CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID+"_edit",onClick:function(){a.CswDialog("FileUploadDialog",{url:"/NbtWebApp/wsNBT.asmx/fileForProp",params:{PropId:b.$propxml.CswAttrXml("id")},onSuccess:function(){b.onReload()}});return CswImageButton_ButtonType.None}});
a("<div/>").appendTo(q).CswImageButton({ButtonType:CswImageButton_ButtonType.Clear,AlternateText:"Clear",ID:b.ID+"_clr",onClick:function(){if(confirm("Are you sure you want to clear this image?")){var k={PropId:b.$propxml.CswAttrXml("id"),IncludeBlob:true};CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/clearProp",data:k,success:function(){b.onReload()}})}return CswImageButton_ButtonType.None}})}},save:function(){}};a.fn.CswFieldTypeImage=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,
1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeImage")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("text").text().trim(),f=b.$propxml.children("href").text().trim();if(b.ReadOnly)e.append(Value);else{var h=e.CswTable("init",{ID:b.ID+"_tbl"});a('<a href="'+f+'" target="_blank">'+g+"</a>&nbsp;&nbsp;").appendTo(h.CswTable("cell",1,1));a("<div/>").appendTo(h.CswTable("cell",1,2)).CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID+"_edit",Required:b.Required,onClick:function(){i.show();
return CswImageButton_ButtonType.None}});var i=e.CswTable("init",{ID:b.ID+"_edittbl"}).hide();a("<span>Text</span>").appendTo(i.CswTable("cell",1,1));e=i.CswTable("cell",1,2).CswInput("init",{ID:b.ID+"_text",type:CswInput_Types.text,value:g,onChange:b.onchange});a("<span>URL</span>").appendTo(i.CswTable("cell",2,1));g=i.CswTable("cell",2,2).CswInput("init",{ID:b.ID+"_href",type:CswInput_Types.text,value:f,onChange:b.onchange});if(b.Required&&f===""){i.show();e.addClass("required");g.addClass("required")}}},
save:function(b){var e=b.$propdiv.find("#"+b.ID+"_text"),g=b.$propdiv.find("#"+b.ID+"_href");b.$propxml.children("text").text(e.val());b.$propxml.children("href").text(g.val())}};a.fn.CswFieldTypeLink=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeLink")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("value").text().trim(),f=b.$propxml.children("options").text().trim();if(b.ReadOnly)e.append(g);else{e=a('<select id="'+b.ID+'" name="'+b.ID+'" class="selectinput" />"').appendTo(e).change(b.onchange);f=f.split(",");for(var h=0;h<f.length;h++)e.append('<option value="'+f[h]+'">'+f[h]+"</option>");e.val(g);b.Required&&e.addClass("required")}},save:function(b){var e=b.$propdiv.find("select");b.$propxml.children("value").text(e.val())}};
a.fn.CswFieldTypeList=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeList")}})(jQuery);(function(a){a.fn.CswFieldTypeLocation=function(d){function b(g,f,h,i,q){if(f==="root")f="";g.CswComboBox("TopContent",h);if(g.val()!==f){g.val(f);q()}setTimeout(function(){g.CswComboBox("close")},300)}var e={init:function(g){var f=a(this);f.contents().remove();var h=g.$propxml.children("nodeid").text().trim(),i=g.$propxml.children("nodekey").text().trim(),q=g.$propxml.children("name").text().trim(),j=g.$propxml.children("path").text().trim(),o=g.$propxml.children("viewid").text().trim();if(g.ReadOnly)f.append(j);
else{f=f.CswTable("init",{ID:g.ID+"_tbl"});var k=f.CswTable("cell",1,1);k.CswAttrDom("colspan","2");k.append(j+"<br/>");j=f.CswTable("cell",2,1);var l=a('<div class="locationselect" value="'+h+'"/>').appendTo(j);h=a("<div />").CswNodeTree("init",{ID:g.ID,viewid:o,nodeid:h,cswnbtnodekey:i,onSelectNode:function(m){b(l,m.nodeid,m.nodename,m.iconurl,g.onchange)},onInitialSelectNode:function(m){b(l,m.nodeid,m.nodename,m.iconurl,function(){})},SelectFirstChild:false,UsePaging:false,IncludeInQuickLaunch:false});
l.CswComboBox("init",{ID:g.ID+"_combo",TopContent:q,SelectContent:h,Width:"266px"})}},save:function(g){var f=g.$propdiv.find(".locationselect");g.$propxml.children("nodeid").text(f.val())}};if(e[d])return e[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return e.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswFieldTypeLocation")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();b.$propxml.children("value").text().trim();e.append("[Not Implemented Yet]")},save:function(){}};a.fn.CswFieldTypeLocationContents=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeLocationContents")}})(jQuery);(function(a){var d={init:function(b){$Div=a(this);b={Checked:b.$propxml.children("checked").text().trim(),Required:b.Required,ReadOnly:b.ReadOnly,onchange:b.onchange};$Div.CswTristateCheckBox("init",b)},save:function(b){$Div=b.$propdiv.find("div");var e=$Div.CswTristateCheckBox("value");b.$propxml.children("checked").text(e)}};a.fn.CswFieldTypeLogical=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);
else a.error("Method "+b+" does not exist on CswFieldTypeLogical")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("logicalsetxml");e=a("<div />").appendTo(e);var f=[],h=0;g.find("item").first().children("column").each(function(){var j=a(this).CswAttrXml("field");if(j!=="name"&&j!="key"){f[h]=j;h++}});var i=[],q=0;g.find("item").each(function(){for(var j=a(this),o=[],k=0,l=0;l<f.length;l++){var m=j.children('column[field="'+f[l]+'"]').CswAttrXml("value");o[k]=m==="True";k++}j={label:j.children('column[field="name"]').CswAttrXml("value"),
key:j.children('column[field="key"]').CswAttrXml("value"),values:o};i[q]=j;q++});e.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:f,data:i,onchange:b.onchange,ReadOnly:b.ReadOnly})},save:function(b){var e=b.$propxml.children("logicalsetxml");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var g=0;g<b.length;g++)for(var f=0;f<b[g].length;f++){var h=b[g][f],i=e.find('item:has(column[field="key"][value="'+h.key+'"])').find('column[field="'+h.collabel+'"]');if(h.checked&&
i.CswAttrXml("value")==="False")i.CswAttrXml("value","True");else!h.checked&&i.CswAttrXml("value")==="True"&&i.CswAttrXml("value","False")}}};a.fn.CswFieldTypeLogicalSet=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeLogicalSet")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("text").text().trim(),f=b.$propxml.children("text").CswAttrXml("rows"),h=b.$propxml.children("text").CswAttrXml("columns");if(b.ReadOnly)e.append(g);else{e=a('<textarea id="'+b.ID+'" name="'+b.ID+'" rows="'+f+'" cols="'+h+'">'+g+"</textarea>").appendTo(e).change(b.onchange);b.Required&&e.addClass("required")}},save:function(b){var e=b.$propdiv.find("textarea");b.$propxml.children("text").text(e.val())}};
a.fn.CswFieldTypeMemo=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeMemo")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("startdatetime").text().trim(),f=b.$propxml.children("value").text().trim(),h=b.$propxml.children("units").text().trim();e=e.CswTable("init",{ID:b.ID+"_tbl"});var i=e.CswTable("cell",1,1),q=e.CswTable("cell",1,2);i.append(f+"&nbsp;"+h);if(!b.ReadOnly){q.CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID,onClick:function(){j.show()}});var j=e.CswTable("cell",2,2).CswTable("init",
{ID:b.ID+"_edittbl"});j.CswTable("cell",1,1).append("Start Date");j.CswTable("cell",1,2).CswInput("init",{ID:b.ID+"_sd",type:CswInput_Types.text,cssclass:"textinput date",value:g,onChange:b.onchange}).datepicker();j.CswTable("cell",3,1).append("Units");b=a('<select id="'+b.ID+'_units" />').appendTo(j.CswTable("cell",3,2)).change(b.onchange);g=a('<option value="hours">hours</option>').appendTo(b);h==="hours"&&g.CswAttrDom("selected","true");b=a('<option value="days">days</option>').appendTo(b);h===
"days"&&b.CswAttrDom("selected","true");j.hide()}},save:function(b){var e=b.$propdiv.find("#"+b.ID+"_sd").val(),g=b.$propdiv.find("#"+b.ID+"_units").val();b.$propxml.children("startdatetime").text(e);b.$propxml.children("units").text(g)}};a.fn.CswFieldTypeMTBF=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeMTBF")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("options");b.$propxml.children("NodeType").text().trim();var f=b.$propxml.children("NodeType").CswAttrXml("SelectMode");e=a("<div />").appendTo(e);var h=[],i=0;g.find("item").each(function(){var q=a(this);q={label:q.children('column[field="NodeTypeName"]').CswAttrXml("value"),key:q.children('column[field="nodetypeid"]').CswAttrXml("value"),values:[q.children('column[field="Include"]').CswAttrXml("value")===
"True"]};h[i]=q;i++});e.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:["Include"],data:h,UseRadios:f==="Single",Required:b.Required,ReadOnly:b.ReadOnly,onchange:b.onchange})},save:function(b){var e=b.$propxml.children("options");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var g=0;g<b.length;g++){var f=b[g][0],h=e.find('item:has(column[field="nodetypeid"][value="'+f.key+'"])').find('column[field="Include"]');if(f.checked&&h.CswAttrXml("value")==="False")h.CswAttrXml("value",
"True");else!f.checked&&h.CswAttrXml("value")==="True"&&h.CswAttrXml("value","False")}}};a.fn.CswFieldTypeNodeTypeSelect=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeNodeTypeSelect")}})(jQuery);(function(a){var d={init:function(b){a(this).CswNumberTextBox({ID:b.ID,Value:b.$propxml.children("value").text().trim(),MinValue:b.$propxml.children("value").CswAttrXml("minvalue"),MaxValue:b.$propxml.children("value").CswAttrXml("maxvalue"),Precision:b.$propxml.children("value").CswAttrXml("precision"),ReadOnly:b.ReadOnly,Required:b.Required,onchange:b.onchange})},save:function(b){b.$propxml.children("value").text(b.$propdiv.CswNumberTextBox("value"))}};a.fn.CswFieldTypeNumber=function(b){if(d[b])return d[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeNumber")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();if(!b.ReadOnly){var g=e.CswTable("init",{ID:b.ID+"_tbl"});e=g.CswTable("cell",1,1);g=g.CswTable("cell",2,1);e.CswInput("init",{ID:b.ID+"_pwd1",type:CswInput_Types.password,cssclass:"textinput",onChange:b.onchange});g.CswInput("init",{ID:b.ID+"_pwd2",type:CswInput_Types.password,cssclass:"textinput password2",onChange:b.onchange});jQuery.validator.addMethod("password2",function(){var f=a("#"+b.ID+"_pwd1").val(),h=a("#"+b.ID+"_pwd2").val();
return f===""&&h===""||f===h},"Passwords do not match!")}},save:function(b){var e=b.$propdiv.find("input#"+b.ID+"_pwd1").val();e!==""&&b.$propxml.children("newpassword").text(e)}};a.fn.CswFieldTypePassword=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypePassword")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("value").text().trim();g+="&nbsp;";a('<div id="'+b.ID+'" class="staticvalue">'+g+"</div>").appendTo(e)},save:function(){}};a.fn.CswFieldTypePropertyReference=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypePropertyReference")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();e.CswNumberTextBox({ID:b.ID+"_qty",Value:b.$propxml.children("value").text().trim(),MinValue:b.$propxml.children("value").CswAttrXml("minvalue"),MaxValue:b.$propxml.children("value").CswAttrXml("maxvalue"),Precision:b.$propxml.children("value").CswAttrXml("precision"),ReadOnly:b.ReadOnly,Required:b.Required,onchange:b.onchange});var g=b.$propxml.children("units").contents().first().text(),f=a('<select id="'+b.ID+'_units" />').appendTo(e).change(b.onchange);
b.$propxml.children("units").children().each(function(){var h=a(this).CswAttrXml("value"),i=a('<option value="'+h+'">'+h+"</option>").appendTo(f);g===h&&i.CswAttrDom("selected","true")})},save:function(b){b.$propxml.children("value").text(b.$propdiv.CswNumberTextBox("value"));var e=b.$propdiv.find("#"+b.ID+"_units").val();b.$propxml.children("units").text(e)}};a.fn.CswFieldTypeQuantity=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||
!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeQuantity")}})(jQuery);(function(a){function d(e,g,f,h){e=e.split(",");var i=true,q=g.val(),j=h.val();if(q!==""&&j===""){i=false;for(var o=0;o<e.length;o++)if(e[o]===q)i=true}if(i){g.removeClass("CswFieldTypeQuestion_OOC");if(j===""){f.hide();h.hide()}}else{g.addClass("CswFieldTypeQuestion_OOC");f.show();h.show()}}var b={init:function(e){var g=a(this);g.contents().remove();var f=e.$propxml.children("answer").text().trim(),h=e.$propxml.children("allowedanswers").text().trim(),i=e.$propxml.children("compliantanswers").text().trim(),
q=e.$propxml.children("comments").text().trim(),j=e.$propxml.children("correctiveaction").text().trim(),o=e.$propxml.children("dateanswered").text().trim(),k=e.$propxml.children("datecorrected").text().trim();e.$propxml.children("iscompliant").text().trim();if(e.ReadOnly){g.append("Answer: "+f);o!==""&&g.append(" ("+o+")");g.append("<br/>");g.append("Corrective Action: "+j);k!==""&&g.append(" ("+k+")");g.append("<br/>");g.append("Comments: "+q+"<br/>")}else{g=g.CswTable("init",{ID:e.ID+"_tbl",FirstCellRightAlign:true});
g.CswTable("cell",1,1).append("Answer");h=h.split(",");var l=a('<select id="'+e.ID+'_ans" />').appendTo(g.CswTable("cell",1,2)).change(function(){d(i,l,s,x);e.onchange()});o=a('<option value=""></option>').appendTo(l);for(k=0;k<h.length;k++){var m=h[k];o=a('<option value="'+m+'">'+m+"</option>").appendTo(l);m===f&&o.CswAttrDom("selected","true")}var s=g.CswTable("cell",2,1).append("Corrective Action"),x=a('<textarea id="'+e.ID+'_cor" />').appendTo(g.CswTable("cell",2,2)).text(j).change(function(){d(i,
l,s,x);e.onchange()});g.CswTable("cell",3,1).append("Comments");a('<textarea id="'+e.ID+'_com" />').appendTo(g.CswTable("cell",3,2)).text(q).change(e.onchange);d(i,l,s,x)}},save:function(e){var g=e.$propdiv.find("#"+e.ID+"_ans").val(),f=e.$propdiv.find("#"+e.ID+"_cor").val(),h=e.$propdiv.find("#"+e.ID+"_com").val();e.$propxml.children("answer").text(g);e.$propxml.children("correctiveaction").text(f);e.$propxml.children("comments").text(h)}};a.fn.CswFieldTypeQuestion=function(e){if(b[e])return b[e].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof e==="object"||!e)return b.init.apply(this,arguments);else a.error("Method "+e+" does not exist on CswFieldTypeQuestion")}})(jQuery);(function(a){a.fn.CswFieldTypeRelationship=function(d){var b={init:function(e){var g=a(this);g.contents().remove();var f=e.$propxml.children("nodeid").text().trim();if(e.relatednodeid!==""&&e.relatednodeid!==undefined&&(f===""||f===undefined))f=e.relatednodeid;var h=e.$propxml.children("name").text().trim(),i=e.$propxml.children("nodetypeid").text().trim(),q=isTrue(e.$propxml.children("allowadd").text().trim()),j=e.$propxml.children("options");if(e.ReadOnly)g.append(h);else{g=g.CswTable("init",{ID:e.ID+
"_tbl"});h=g.CswTable("cell",1,1);var o=a('<select id="'+e.ID+'" name="'+e.ID+'" class="selectinput" />"').appendTo(h).change(e.onchange);j.children().each(function(){var k=a(this);o.append('<option value="'+k.CswAttrXml("id")+'">'+k.CswAttrXml("value")+"</option>")});o.val(f);if(!isNullOrEmpty(i)&&q){f=g.CswTable("cell",1,2);a("<div />").appendTo(f).CswImageButton({ButtonType:CswImageButton_ButtonType.Add,AlternateText:"Add New",onClick:function(){a.CswDialog("AddNodeDialog",{nodetypeid:i,onAddNode:function(){e.onReload()}});
return CswImageButton_ButtonType.None}})}e.Required&&o.addClass("required")}},save:function(e){var g=e.$propdiv.find("select");e.$propxml.children("nodeid").text(g.val())}};if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswFieldTypeRelationship")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("sequence").text().trim();if(b.ReadOnly)e.append(g);else{e=e.CswInput("init",{ID:b.ID,type:CswInput_Types.text,cssclass:"textinput",onChange:b.onchange,value:g});b.Required&&e.addClass("required")}},save:function(b){var e=b.$propdiv.find("input");b.$propxml.children("sequence").text(e.val())}};a.fn.CswFieldTypeSequence=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));
else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeSequence")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("text").text().trim(),f=parseInt(b.$propxml.children("text").CswAttrXml("columns"));b=parseInt(b.$propxml.children("text").CswAttrXml("rows"));var h="auto",i="",q="";if(f>0&&b>0){h="scroll";i=Math.round(f+2-f/2.25)+"em";q=Math.round(b+2.5+b/5)+"em"}else if(f>0)i=Math.round(f-f/2.25)+"em";else if(b>0)q=Math.round(b+0.5+b/5)+"em";a('<div class="staticvalue" style="overflow: '+h+"; width: "+i+"; height: "+
q+';">'+g+"</div>").appendTo(e)},save:function(){}};a.fn.CswFieldTypeStatic=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeStatic")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("text").text().trim(),f=tryParseNumber(b.$propxml.children("text").CswAttrXml("length"),14);if(b.ReadOnly)e.append(g);else{e=e.CswInput("init",{ID:b.ID,type:CswInput_Types.text,value:g,cssclass:"textinput",width:f*7,onChange:b.onchange});b.Required&&e.addClass("required")}},save:function(b){var e=b.$propdiv.find("input");b.$propxml.children("text").text(e.val())}};a.fn.CswFieldTypeText=function(b){if(d[b])return d[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeText")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("value").text().trim();if(b.ReadOnly)e.append(g);else{var f=e.CswInput("init",{ID:b.ID,type:CswInput_Types.text,cssclass:"textinput validateTime",onChange:b.onchange,value:g});e.CswButton("init",{ID:b.ID+"_now",disableOnClick:false,onclick:function(){f.val(getTimeString(new Date))},enabledText:"Now"});jQuery.validator.addMethod("validateTime",function(h,i){return this.optional(i)||validateTime(a(i).val())},
"Enter a valid time (e.g. 12:30 PM)");b.Required&&f.addClass("required")}},save:function(b){var e=b.$propdiv.find("input");b.$propxml.children("value").text(e.val())}};a.fn.CswFieldTypeTime=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeTime")}})(jQuery);(function(a){function d(f,h,i,q){f=f.CswTable("init",{ID:h,cellalign:"center"});f.CswTable("cell",1,1).append("Su");f.CswTable("cell",1,2).append("M");f.CswTable("cell",1,3).append("Tu");f.CswTable("cell",1,4).append("W");f.CswTable("cell",1,5).append("Th");f.CswTable("cell",1,6).append("F");f.CswTable("cell",1,7).append("Sa");for(var j=1;j<=7;j++){var o=CswInput_Types.checkbox;if(q)o=CswInput_Types.radio;f.CswTable("cell",2,j).CswInput("init",{ID:h+"_"+j,name:h,type:o,onChange:i,value:j})}}function b(f,
h){a('[name="'+f+'"]').CswAttrDom("checked","");for(var i=h.split(","),q=0;q<i.length;q++)switch(i[q]){case "Sunday":a("#"+f+"_1").CswAttrDom("checked","true");break;case "Monday":a("#"+f+"_2").CswAttrDom("checked","true");break;case "Tuesday":a("#"+f+"_3").CswAttrDom("checked","true");break;case "Wednesday":a("#"+f+"_4").CswAttrDom("checked","true");break;case "Thursday":a("#"+f+"_5").CswAttrDom("checked","true");break;case "Friday":a("#"+f+"_6").CswAttrDom("checked","true");break;case "Saturday":a("#"+
f+"_7").CswAttrDom("checked","true")}}function e(f){var h="";a('[name="'+f+'"]').each(function(){var i=a(this);if(isTrue(i.CswAttrDom("checked"))){if(h!=="")h+=",";switch(i.val()){case "1":h+="Sunday";break;case "2":h+="Monday";break;case "3":h+="Tuesday";break;case "4":h+="Wednesday";break;case "5":h+="Thursday";break;case "6":h+="Friday";break;case "7":h+="Saturday"}}});return h}var g={init:function(f){var h=a(this);h.contents().remove();var i=f.$propxml.children("Interval").CswAttrXml("text");
h.append('<span id="'+f.ID+'_textvalue">'+i+"</span>");if(!f.ReadOnly){var q=h.CswTable("init",{ID:f.ID+"_tbl",cellspacing:5});h=q.CswTable("cell",1,1).CswInput("init",{ID:f.ID+"_type_weekly",name:f.ID+"_type",type:CswInput_Types.radio,value:"weekly"});q.CswTable("cell",1,2).append("<span>&nbsp;Weekly</span>");h.click(function(){k.show();l.hide();K.hide();f.onchange()});i=q.CswTable("cell",2,1).CswInput("init",{ID:f.ID+"_type_monthly",name:f.ID+"_type",type:CswInput_Types.radio,value:"monthly"});
q.CswTable("cell",2,2).append("<span>&nbsp;Monthly</span>");i.click(function(){k.hide();l.show();K.hide();f.onchange()});var j=q.CswTable("cell",3,1).CswInput("init",{ID:f.ID+"_type_yearly",name:f.ID+"_type",type:CswInput_Types.radio,value:"yearly"});q.CswTable("cell",3,2).append("<span>&nbsp;Yearly</span>");j.click(function(){k.hide();l.hide();K.show();f.onchange()});var o=q.CswTable("cell",1,3);o.CswAttrDom("rowspan","3");var k=a("<div />").appendTo(o).addClass("CswFieldTypeTimeInterval_Div");q=
k.CswTable("init",{ID:f.ID+"_weeklytbl",cellalign:"center",FirstCellRightAlign:true});q.CswTable("cell",1,1).append("Every:");d(q.CswTable("cell",1,2),f.ID+"_weeklyday",f.onchange,false);q.CswTable("cell",2,1).append("Starting On:");q=q.CswTable("cell",2,2).CswInput("init",{ID:f.ID+"_weekly_sd",type:CswInput_Types.text,cssclass:"textinput date",onChange:f.onchange});q.datepicker();var l=a("<div />").appendTo(o).addClass("CswFieldTypeTimeInterval_Div");l.append("Every ");for(var m=a('<select id="'+
f.ID+'_monthly_rate"/>').appendTo(l).change(f.onchange),s=1;s<=12;s++)m.append('<option value="'+s+'">'+s+"</option>");l.append(" Month(s)<br/>");var x=l.CswInput("init",{ID:f.ID+"_monthly_by_date",name:f.ID+"_monthly",type:CswInput_Types.radio,onChange:f.onchange,value:"MonthlyByDate"});l.append("On Day of Month:&nbsp;");var A=a('<select id="'+f.ID+'_monthly_date" />').appendTo(l).change(f.onchange);for(s=1;s<=31;s++)A.append('<option value="'+s+'">'+s+"</option>");l.append("<br/>");var v=l.CswInput("init",
{ID:f.ID+"_monthly_by_day",name:f.ID+"_monthly",type:CswInput_Types.radio,onChange:f.onchange,value:"MonthlyByWeekAndDay"});l.append("Every&nbsp;");var w=a('<select id="'+f.ID+'_monthly_week" />').appendTo(l);w.append('<option value="1">First:</option>');w.append('<option value="2">Second:</option>');w.append('<option value="3">Third:</option>');w.append('<option value="4">Fourth:</option>');l.append("<br/>");d(l,f.ID+"_monthly_day",f.onchange,true);l.append("<br/>Starting On:&nbsp;");var t=a('<select id="'+
f.ID+'_monthly_startMonth" />').appendTo(l).change(f.onchange);for(s=1;s<=12;s++)t.append('<option value="'+s+'">'+s+"</option>");l.append("/");var z=a('<select id="'+f.ID+'_monthly_startYear" />').appendTo(l).change(f.onchange),P=(new Date).getFullYear();for(s=P-10;s<=P+10;s++)z.append('<option value="'+s+'">'+s+"</option>");z.val(P);var K=a("<div />").appendTo(o).addClass("CswFieldTypeTimeInterval_Div");K.append("Every Year, Starting On:<br/>");o=K.CswInput("init",{ID:f.ID+"_yearly_sd",type:CswInput_Types.text,
cssclass:"textinput date",onChange:f.onchange});o.datepicker();s=f.$propxml.children("interval").children("rateintervalvalue");switch(s.children("ratetype").text()){case "WeeklyByDay":h.CswAttrDom("checked","true");k.show();l.hide();K.hide();b(f.ID+"_weeklyday",s.children("weeklyday").text());q.val(s.children("startingdate").text());x.CswAttrDom("checked","true");break;case "MonthlyByDate":i.CswAttrDom("checked","true");k.hide();l.show();K.hide();x.CswAttrDom("checked","true");m.val(s.children("monthlyfrequency").text());
A.val(s.children("monthlydate").text());t.val(s.children("startingmonth").text());z.val(s.children("startingyear").text());break;case "MonthlyByWeekAndDay":i.CswAttrDom("checked","true");k.hide();l.show();K.hide();v.CswAttrDom("checked","true");w.val(s.children("monthlyweek").text());b(f.ID+"_monthly_day",s.children("monthlyday").text());t.val(s.children("startingmonth").text());z.val(s.children("startingyear").text());break;case "YearlyByDate":j.CswAttrDom("checked","true");k.hide();l.show();K.hide();
o.val(s.children("yearlydate").text());x.CswAttrDom("checked","true")}}},save:function(f){var h=a('[name="'+f.ID+'_type"]:checked').val();f.$propxml.children().remove();var i=a("<interval />").appendTo(f.$propxml),q=a("<rateintervalvalue />").appendTo(i);switch(h){case "weekly":a("<ratetype>WeeklyByDay</ratetype>").appendTo(q);a("<weeklyday>"+e(f.ID+"_weeklyday")+"</weeklyday>").appendTo(q);a("<startingdate>"+a("#"+f.ID+"_weekly_sd").val()+"</startingdate>").appendTo(q);break;case "monthly":h=a('[name="'+
f.ID+'_monthly"]:checked').val();a("<ratetype>"+h+"</ratetype>").appendTo(q);a("<monthlyfrequency>"+a("#"+f.ID+"_monthly_rate").val()+"</monthlyfrequency>").appendTo(q);if(h==="MonthlyByDate")a("<monthlydate>"+a("#"+f.ID+"_monthly_date").val()+"</monthlydate>").appendTo(q);else{a("<monthlyweek>"+a("#"+f.ID+"_monthly_week").val()+"</monthlyweek>").appendTo(q);a("<monthlyday>"+e(f.ID+"_monthly_day")+"</monthlyday>").appendTo(q)}a("<startingmonth>"+a("#"+f.ID+"_monthly_startMonth").val()+"</startingmonth>").appendTo(q);
a("<startingyear>"+a("#"+f.ID+"_monthly_startYear").val()+"</startingyear>").appendTo(q);break;case "yearly":a("<ratetype>YearlyByDate</ratetype>").appendTo(q);a("<yearlydate>"+a("#"+f.ID+"_yearly_sd").val()+"</yearlydate>").appendTo(q)}i.find("*").andSelf().each(function(){a(this).CswAttrDom("xmlns","")})}};a.fn.CswFieldTypeTimeInterval=function(f){if(g[f])return g[f].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof f==="object"||!f)return g.init.apply(this,arguments);else a.error("Method "+
f+" does not exist on CswFieldTypeTimeInterval")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();b.$propxml.children("NodeId").text().trim();var g=b.$propxml.children("options");e=a("<div />").appendTo(e);var f=[],h=0;g.children().each(function(){var i=a(this);i={label:i.children('column[field="User Name"]').CswAttrXml("value"),key:i.children('column[field="UserId"]').CswAttrXml("value"),values:[i.children('column[field="Include"]').CswAttrXml("value")==="True"]};f[h]=i;h++});e.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:["Include"],
data:f,UseRadios:false,Required:b.Required,ReadOnly:b.ReadOnly,onchange:b.onchange})},save:function(b){var e=b.$propxml.children("options");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var g=0;g<b.length;g++){var f=b[g][0],h=e.find('user:has(column[field="UserId"][value="'+f.key+'"])').find('column[field="Include"]');if(f.checked&&h.CswAttrXml("value")==="False")h.CswAttrXml("value","True");else!f.checked&&h.CswAttrXml("value")==="True"&&h.CswAttrXml("value",
"False")}}};a.fn.CswFieldTypeUserSelect=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeUserSelect")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();b.$propxml.children("viewid").text().trim();var g=b.$propxml.children("options"),f=b.$propxml.children("viewid").CswAttrXml("SelectMode");e=a("<div />").appendTo(e);var h=[],i=0;g.children().each(function(){var q=a(this);q={label:q.children('column[field="View Name"]').CswAttrXml("value"),key:q.children('column[field="nodeviewid"]').CswAttrXml("value"),values:[q.children('column[field="Include"]').CswAttrXml("value")==="True"]};
h[i]=q;i++});e.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:["Include"],data:h,UseRadios:f==="Single",Required:b.Required,ReadOnly:b.ReadOnly,onchange:b.onchange})},save:function(b){var e=b.$propxml.children("options");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var g=0;g<b.length;g++){var f=b[g][0],h=e.find('user:has(column[field="nodeviewid"][value="'+f.key+'"])').find('column[field="Include"]');if(f.checked&&h.CswAttrXml("value")==="False")h.CswAttrXml("value",
"True");else!f.checked&&h.CswAttrXml("value")==="True"&&h.CswAttrXml("value","False")}}};a.fn.CswFieldTypeViewPickList=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeViewPickList")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("viewid").text().trim(),f=b.$propxml.children("viewmode").text().trim().toLowerCase();b.$propxml.children("name").text().trim();e=e.CswTable("init",{ID:b.ID+"_tbl"});e.CswTable("cell",1,1).CswImageButton({ID:b.ID+"_view",ButtonType:CswImageButton_ButtonType.View,AlternateText:"View",Required:b.Required,onClick:function(){a.CswCookie("set",CswCookieName.CurrentViewId,g);a.CswCookie("set",CswCookieName.CurrentViewMode,
f);a.CswCookie("clear",CswCookieName.CurrentNodeId);a.CswCookie("clear",CswCookieName.CurrentNodeKey);window.location="NewMain.html";return CswImageButton_ButtonType.None}});b.ReadOnly||e.CswTable("cell",1,2).CswImageButton({ID:b.ID+"_edit",ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",Required:b.Required,onClick:function(){window.location="EditView.aspx?step=2&return=NewMain.html&viewid="+g;return CswImageButton_ButtonType.None}})},save:function(){}};a.fn.CswFieldTypeViewReference=
function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeViewReference")}})(jQuery);$.CswFieldTypeFactory=function(a){var d={nodeid:"",fieldtype:"",$propdiv:"",$propxml:"",onchange:function(){},onReload:function(){},cswnbtnodekey:"",ID:"",Required:"",ReadOnly:"",EditMode:"Edit",onEditView:function(){}},b={make:function(e){e&&$.extend(d,e);d.ID=d.$propxml.CswAttrXml("id");d.Required=d.$propxml.CswAttrXml("required")==="true"||d.Required;d.ReadOnly=d.$propxml.CswAttrXml("readonly")==="true"||d.ReadOnly||d.EditMode==="PrintReport";switch(d.fieldtype){case "Barcode":d.$propdiv.CswFieldTypeBarcode("init",
d);break;case "Composite":d.$propdiv.CswFieldTypeComposite("init",d);break;case "Date":d.$propdiv.CswFieldTypeDate("init",d);break;case "File":d.$propdiv.CswFieldTypeFile("init",d);break;case "Grid":d.$propdiv.CswFieldTypeGrid("init",d);break;case "Image":d.$propdiv.CswFieldTypeImage("init",d);break;case "Link":d.$propdiv.CswFieldTypeLink("init",d);break;case "List":d.$propdiv.CswFieldTypeList("init",d);break;case "Location":d.$propdiv.CswFieldTypeLocation("init",d);break;case "LocationContents":d.$propdiv.CswFieldTypeLocationContents("init",
d);break;case "Logical":d.$propdiv.CswFieldTypeLogical("init",d);break;case "LogicalSet":d.$propdiv.CswFieldTypeLogicalSet("init",d);break;case "Memo":d.$propdiv.CswFieldTypeMemo("init",d);break;case "MTBF":d.$propdiv.CswFieldTypeMTBF("init",d);break;case "NodeTypeSelect":d.$propdiv.CswFieldTypeNodeTypeSelect("init",d);break;case "Number":d.$propdiv.CswFieldTypeNumber("init",d);break;case "Password":d.$propdiv.CswFieldTypePassword("init",d);break;case "PropertyReference":d.$propdiv.CswFieldTypePropertyReference("init",
d);break;case "Quantity":d.$propdiv.CswFieldTypeQuantity("init",d);break;case "Question":d.$propdiv.CswFieldTypeQuestion("init",d);break;case "Relationship":d.$propdiv.CswFieldTypeRelationship("init",d);break;case "Sequence":d.$propdiv.CswFieldTypeSequence("init",d);break;case "Static":d.$propdiv.CswFieldTypeStatic("init",d);break;case "Text":d.$propdiv.CswFieldTypeText("init",d);break;case "Time":d.$propdiv.CswFieldTypeTime("init",d);break;case "TimeInterval":d.$propdiv.CswFieldTypeTimeInterval("init",
d);break;case "UserSelect":d.$propdiv.CswFieldTypeUserSelect("init",d);break;case "ViewPickList":d.$propdiv.CswFieldTypeViewPickList("init",d);break;case "ViewReference":d.$propdiv.CswFieldTypeViewReference("init",d);break;default:d.$propdiv.append(d.$propxml.CswAttrXml("init",d))}},save:function(e){e&&$.extend(d,e);d.ID=d.$propxml.CswAttrXml("id");d.Required=d.$propxml.CswAttrXml("required")==="true";d.ReadOnly=d.$propxml.CswAttrXml("readonly")==="true";switch(d.fieldtype){case "Barcode":d.$propdiv.CswFieldTypeBarcode("save",
d);break;case "Composite":d.$propdiv.CswFieldTypeComposite("save",d);break;case "Date":d.$propdiv.CswFieldTypeDate("save",d);break;case "File":d.$propdiv.CswFieldTypeFile("save",d);break;case "Grid":d.$propdiv.CswFieldTypeGrid("save",d);break;case "Image":d.$propdiv.CswFieldTypeImage("save",d);break;case "Link":d.$propdiv.CswFieldTypeLink("save",d);break;case "List":d.$propdiv.CswFieldTypeList("save",d);break;case "Location":d.$propdiv.CswFieldTypeLocation("save",d);break;case "LocationContents":d.$propdiv.CswFieldTypeLocationContents("save",
d);break;case "Logical":d.$propdiv.CswFieldTypeLogical("save",d);break;case "LogicalSet":d.$propdiv.CswFieldTypeLogicalSet("save",d);break;case "Memo":d.$propdiv.CswFieldTypeMemo("save",d);break;case "MTBF":d.$propdiv.CswFieldTypeMTBF("save",d);break;case "NodeTypeSelect":d.$propdiv.CswFieldTypeNodeTypeSelect("save",d);break;case "Number":d.$propdiv.CswFieldTypeNumber("save",d);break;case "Password":d.$propdiv.CswFieldTypePassword("save",d);break;case "PropertyReference":d.$propdiv.CswFieldTypePropertyReference("save",
d);break;case "Quantity":d.$propdiv.CswFieldTypeQuantity("save",d);break;case "Question":d.$propdiv.CswFieldTypeQuestion("save",d);break;case "Relationship":d.$propdiv.CswFieldTypeRelationship("save",d);break;case "Sequence":d.$propdiv.CswFieldTypeSequence("save",d);break;case "Static":d.$propdiv.CswFieldTypeStatic("save",d);break;case "Text":d.$propdiv.CswFieldTypeText("save",d);break;case "Time":d.$propdiv.CswFieldTypeTime("save",d);break;case "TimeInterval":d.$propdiv.CswFieldTypeTimeInterval("save",
d);break;case "UserSelect":d.$propdiv.CswFieldTypeUserSelect("save",d);break;case "ViewPickList":d.$propdiv.CswFieldTypeViewPickList("save",d);break;case "ViewReference":d.$propdiv.CswFieldTypeViewReference("save",d)}}};if(b[a])return b[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return b.init.apply(this,arguments);else $.error("Method "+a+" does not exist on "+PluginName)};
