(function(a){var g={init:function(b){var d={ID:"",prefix:"",enabledText:"",disabledText:"",hasText:true,disableOnClick:true,inputType:"button",primaryicon:"",secondaryicon:"",ReadOnly:false,onclick:function(){}};b&&a.extend(d,b);b=a(this);var f=makeId({prefix:d.prefix,ID:d.ID}),e=a("<input />").attr("type",d.inputType).attr("id",f).attr("name",f);e.attr("enabledText",d.enabledText);e.attr("disabledText",d.disabledText);f={text:d.hasText,label:d.enabledText,disabled:d.ReadOnly,icons:{primary:d.primaryicon,
secondary:d.secondaryicon}};if(f.disabled)f.label=d.disabledText;e.button(f).click(function(){d.disableOnClick&&e.button({label:d.disabledText,disabled:true});d.onclick()});b.append(e);return e},enable:function(){var b=a(this);b.button({label:b.attr("enabledText"),disabled:false})},disable:function(){var b=a(this);b.button({label:b.attr("disabledText"),disabled:true})}};a.fn.CswButton=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||
!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswButton")}})(jQuery);(function(a){a.fn.CswCheckBoxArray=function(g){var b={init:function(d){var f={ID:"",cols:["col1","col2","col3"],data:[{label:"row1",key:1,values:[true,false,true]},{label:"row2",key:2,values:[false,true,false]},{label:"row3",key:3,values:[true,false,true]}],HeightInRows:4,UseRadios:false,Required:false,onchange:function(){}};d&&a.extend(f,d);var e="checkbox";if(f.UseRadios)e="radio";d=a(this);d.contents().remove();var h=a("<div/>").appendTo(d),j=h.CswTable("init",{ID:f.ID+"_tbl"});h.css("height",
25*f.HeightInRows+"px");h.addClass("cbarraydiv");j.addClass("cbarraytable");h=1;for(var n=0;n<f.cols.length;n++){var i=j.CswTable("cell",h,n+2);i.addClass("cbarraycell");i.append(f.cols[n])}h++;if(f.UseRadios&&!f.Required){n=j.CswTable("cell",h,1);n.addClass("cbarraycell");n.append("[none]");for(n=0;n<f.cols.length;n++){i=j.CswTable("cell",h,n+2);i.addClass("cbarraycell");var m=f.ID+"_none";i=a('<input type="'+e+'" class="CBACheckBox_'+f.ID+'" id="'+m+'" name="'+f.ID+'" />').appendTo(i).click(f.onchange);
i.attr("key","");i.attr("rowlabel","[none]");i.attr("collabel",f.cols[n]);i.attr("row",-1);i.attr("col",n);i.attr("checked","true")}}h++;for(var k=0;k<f.data.length;k++){var l=f.data[k];n=j.CswTable("cell",h+k,1);n.addClass("cbarraycell");n.append(l.label);for(n=0;n<f.cols.length;n++){i=j.CswTable("cell",h+k,n+2);i.addClass("cbarraycell");m=f.ID+"_"+k+"_"+n;i=a('<input type="'+e+'" class="CBACheckBox_'+f.ID+'" id="'+m+'" name="'+f.ID+'" />').appendTo(i).click(f.onchange);i.attr("key",l.key);i.attr("rowlabel",
l.label);i.attr("collabel",f.cols[n]);i.attr("row",k);i.attr("col",n);l.values[n]&&i.attr("checked","true")}}if(!f.UseRadios){e="Check All";if(a(".CBACheckBox_"+f.ID).not(":checked").length==0)e="Uncheck All";var p=a('<div style="text-align: right"><a href="#">'+e+"</a></div>").appendTo(d).children("a");p.click(function(){var o=f.ID;if(a(".CBACheckBox_"+o).not(":checked").length>0){a(".CBACheckBox_"+o).attr("checked","checked");p.text("Uncheck all")}else{a(".CBACheckBox_"+o).removeAttr("checked");
p.text("Check all")}return false})}},getdata:function(d){var f={ID:""};d&&a.extend(f,d);var e=[];a(this).find(".CBACheckBox_"+f.ID).each(function(){var h=a(this),j=parseInt(h.attr("row")),n=parseInt(h.attr("col"));if(e[j]==undefined)e[j]=[];e[j][n]={key:h.attr("key"),rowlabel:h.attr("rowlabel"),collabel:h.attr("collabel"),checked:h.attr("checked")}});return e}};if(b[g])return b[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return b.init.apply(this,arguments);
else a.error("Method "+g+" does not exist on "+PluginName)}})(jQuery);(function(a){a.fn.CswComboBox=function(g){function b(f,e){f.toggleClass("CswComboBox_TopDiv_click");e.toggle()}var d={init:function(f){var e={ID:"",TopContent:"",SelectContent:"This ComboBox Is Empty!",Width:"180px"};f&&a.extend(e,f);f=a(this);f.contents().remove();var h=a('<div id="'+e.ID+'_top" class="CswComboBox_TopDiv"></div>').appendTo(f).attr("style","width: "+e.Width),j=h.CswTable("init",{ID:e.ID+"_tbl"});j.attr("width","100%");$cell1=j.CswTable("cell",1,1);$cell1.attr("width","100%");$cell1.append(e.TopContent);
$cell2=j.CswTable("cell",1,2);$cell2.addClass("CswComboBox_ImageCell");var n=a('<div id="'+e.ID+'_child" class="CswComboBox_ChildDiv">').appendTo(f).attr("style","width: "+e.Width).append(e.SelectContent);$cell1.click(function(){b(h,n)});$cell2.CswImageButton({ButtonType:CswImageButton_ButtonType.Select,ID:e.ID+"_top_img",AlternateText:"",onClick:function(){b(h,n)}})},TopContent:function(f){var e=a(this).children(".CswComboBox_TopDiv").children("table").CswTable("cell",1,1);e.text("");e.contents().remove();
e.append(f)},toggle:function(){var f=a(this),e=f.children(".CswComboBox_TopDiv");f=f.children(".CswComboBox_ChildDiv");b(e,f)},close:function(){var f=a(this),e=f.children(".CswComboBox_TopDiv");f=f.children(".CswComboBox_ChildDiv");e.removeClass("CswComboBox_TopDiv_click");f.hide()}};if(d[g])return d[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return d.init.apply(this,arguments);else a.error("Method "+g+" does not exist on "+PluginName)}})(jQuery);var CswCookieName={SessionId:"CswSessionId",Username:"csw_username",CurrentView:{ViewId:"csw_currentviewid",ViewMode:"csw_currentviewmode"},CurrentNode:{NodeId:"csw_currentnodeid",NodeKey:"csw_currentnodekey"},CurrentTabId:"csw_currenttabid"};
(function(a){a.CswCookie=function(g){var b={get:function(d){return a.cookie(d)},set:function(d,f){a.cookie(d,f)},clear:function(d){a.cookie(d,null)},clearAll:function(){for(var d in CswCookieName)if(CswCookieName.hasOwnProperty(d)){a.cookie(CswCookieName[d],null);for(var f in CswCookieName[d])CswCookieName[d].hasOwnProperty(f)&&a.cookie(CswCookieName[d][f],null)}}};if(b[g])return b[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return b.init.apply(this,arguments);
else a.error("Method "+g+" does not exist on CswCookie")}})(jQuery);(function(a){a.fn.CswDashboard=function(g){var b={Url:"/NbtWebApp/wsNBT.asmx/getDashboard",onSuccess:function(){}};g&&a.extend(b,g);var d=a(this);CswAjaxXml({url:b.Url,data:"",success:function(f){var e=d.CswTable("init",{ID:"DashboardTable"});e.addClass("DashboardTable");var h=e.append("<tr />");f.children().each(function(){var j=a(this),n="";n=j.attr("href")!=undefined?'<td class="DashboardCell">  <a target="_blank" href="'+j.attr("href")+'">    <div title="'+j.attr("text")+'" id="'+j.attr("id")+
'" class="'+j.attr("id")+'" />  </a></td>':'<td class="DashboardCell">  <div title="'+j.attr("text")+'" id="'+j.attr("id")+'" class="'+j.attr("id")+'" /></td>';h.append(n)});b.onSuccess()}});return this}})(jQuery);(function(a){function g(d,f,e){d.dialog({modal:true,width:f,height:e,close:function(){d.remove()}})}var b={AddWelcomeItemDialog:function(d){var f={onAdd:function(){}};d&&a.extend(f,d);var e=a("<div></div>");e.CswWelcome("getAddItemForm",{onAdd:function(){e.dialog("close");f.onAdd()}});g(e,400,400)},AddViewDialog:function(d){var f={ID:"addviewdialog",onAddView:function(){},makeVisibilitySelect:function(){}};d&&a.extend(f,d);var e=a("<div></div>");d=e.CswTable("init",{ID:f.ID+"_tbl",FirstCellRightAlign:true});
d.CswTable("cell",1,1).append("Name:");var h=a('<input type="text" id="'+f.ID+'_nametb" value="" />').appendTo(d.CswTable("cell",1,2));d.CswTable("cell",2,1).append("Display Mode:");var j=a('<select id="'+f.ID+'_dmsel" />').appendTo(d.CswTable("cell",2,2));j.append('<option value="List">List</option>');j.append('<option value="Tree">Tree</option>');j.append('<option value="Grid">Grid</option>');var n=f.makeVisibilitySelect(d,3,"Available to:"),i=e.CswButton({ID:f.ID+"_submit",enabledText:"Create View",
disabledText:"Creating View",onclick:function(){var m={};m.ViewName=h.val();m.ViewMode=j.val();m.Visibility=n.getvisibilityselect().val();m.VisibilityRoleId=n.getvisroleselect().val();m.VisibilityUserId=n.getvisuserselect().val();CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/createView",data:jsonToString(m),success:function(k){e.dialog("close");f.onAddView(k.newviewid)},error:function(){i.CswButton("enable")}})}});e.CswButton({ID:f.ID+"_cancel",enabledText:"Cancel",disabledText:"Canceling",onclick:function(){e.dialog("close")}});
g(e,400,200)},AddNodeDialog:function(d){var f={nodetypeid:"",relatednodeid:"",onAddNode:function(){}};d&&a.extend(f,d);var e=a("<div></div>");e.CswNodeTabs({nodetypeid:f.nodetypeid,relatednodeid:f.relatednodeid,EditMode:"AddInPopup",onSave:function(h,j){e.dialog("close");f.onAddNode(h,j)}});g(e,800,600)},EditNodeDialog:function(d){var f={nodeid:"",cswnbtnodekey:"",filterToPropId:"",title:"",onEditNode:function(){}};d&&a.extend(f,d);var e=a("<div></div>");e.CswNodeTabs({nodeid:f.nodeid,cswnbtnodekey:f.cswnbtnodekey,
filterToPropId:f.filterToPropId,EditMode:"EditInPopup",title:f.title,onSave:function(h,j){e.dialog("close");f.onEditNode(h,j)}});f.filterToPropId!=""?g(e,600,400):g(e,800,600)},CopyNodeDialog:function(d){var f={nodename:"",nodeid:"",nodekey:"",onCopyNode:function(){}};d&&a.extend(f,d);var e=a("<div>Copying: "+f.nodename+"<br/><br/></div>");e.CswButton({ID:"copynode_submit",enabledText:"Copy",disabledText:"Copying",onclick:function(){e.dialog("close");copyNode({nodeid:f.nodeid,nodekey:f.nodekey,onSuccess:f.onCopyNode})}});
e.CswButton({ID:"copynode_cancel",enabledText:"Cancel",disabledText:"Canceling",onclick:function(){e.dialog("close")}});g(e,400,300)},DeleteNodeDialog:function(d){var f={nodename:"",nodeid:"",nodekey:"",onDeleteNode:function(){},Multi:false,NodeCheckTreeId:""};d&&a.extend(f,d);var e=a("<div><span>Are you sure you want to delete:</span></div>"),h=[];if(f.Multi)a("."+f.NodeCheckTreeId+"_check:checked").each(function(){var j=a(this);h[h.length]=j.attr("nodeid");e.append('<br/><span style="padding-left: 10px;">'+
j.attr("nodename")+"</span>")});else{e.append("<span>"+f.nodename+"?</span>");h[0]=f.nodeid}e.append("<br/><br/>");e.CswButton({ID:"deletenode_submit",enabledText:"Delete",disabledText:"Deleting",onclick:function(){e.dialog("close");deleteNodes({nodeids:h,onSuccess:f.onDeleteNode})}});e.CswButton({ID:"deletenode_cancel",enabledText:"Cancel",disabledText:"Canceling",onclick:function(){e.dialog("close")}});g(e,400,200)},AboutDialog:function(){var d=a("<div></div>");CswAjaxXml({url:"/NbtWebApp/wsNBT.asmx/getAbout",
data:"",success:function(f){d.append("NBT Assembly Version: "+f.children("assembly").text()+"<br/><br/>");var e=d.CswTable("init",{ID:"abouttable"}),h=1;f.children("component").each(function(){var j=e.CswTable("cell",h,1),n=e.CswTable("cell",h,2),i=e.CswTable("cell",h,3);j.css("padding","2px 5px 2px 5px");n.css("padding","2px 5px 2px 5px");i.css("padding","2px 5px 2px 5px");var m=a(this);j.append(m.children("name").text());n.append(m.children("version").text());i.append(m.children("copyright").text());
h++})}});g(d,600,400)},SearchDialog:function(d){var f={viewid:"",nodetypeid:""};d&&a.extend(f,d);d=a("<div></div>");d.CswSearch("getSearchForm",{viewid:f.viewid,nodetypeid:f.nodetypeid});d.dialog({modal:true,width:800,height:600})},FileUploadDialog:function(d){var f={url:"",params:{},onSuccess:function(){}};d&&a.extend(f,d);var e=a("<div></div>");new qq.FileUploader({element:e.get(0),action:f.url,params:f.params,debug:false,onComplete:function(){e.dialog("close");f.onSuccess()}});e.CswButton({ID:"fileupload_cancel",
enabledText:"Cancel",disabledText:"Canceling",onclick:function(){e.dialog("close")}});g(e,400,300)},ShowLicenseDialog:function(d){var f={GetLicenseUrl:"/NbtWebApp/wsNBT.asmx/getLicense",AcceptLicenseUrl:"/NbtWebApp/wsNBT.asmx/acceptLicense",onAccept:function(){},onDecline:function(){}};d&&a.extend(f,d);var e=a('<div align="center"></div>');e.append("Service Level Agreement<br/>");var h=a('<textarea id="license" disabled="true" rows="30" cols="80"></textarea>').appendTo(e);e.append("<br/>");CswAjaxJSON({url:f.GetLicenseUrl,
success:function(j){h.text(j.license)}});e.CswButton({ID:"license_accept",enabledText:"I Accept",disabledText:"Accepting...",onclick:function(){CswAjaxJSON({url:f.AcceptLicenseUrl,success:function(){e.dialog("close");f.onAccept()}})}});e.CswButton({ID:"license_decline",enabledText:"I Decline",disabledText:"Declining...",onclick:function(){e.dialog("close");f.onDecline()}});g(e,800,600)},OpenDialog:function(d,f){var e=a('<div id="'+d+'"></div>');e.load(f,{},function(){e.appendTo("body").dialog()})},
CloseDialog:function(d){a("#"+d).dialog("close").remove()}};a.CswDialog=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswDialog")}})(jQuery);(function(a){var g={div:function(b){var d={ID:"",prefix:"",suffix:"",value:"",cssclass:""};b&&a.extend(d,b);b=a(this);var f=a("<div></div>"),e=makeId(d);if(e!==""){f.attr("id",e);f.attr("name",e)}d.cssclass!==""&&f.attr("class",d.cssclass);d.value!==""&&f.text(d.value);b.append(f);return f},span:function(b){var d={ID:"",prefix:"",suffix:"",value:"",cssclass:""};b&&a.extend(d,b);b=a(this);var f=a("<span></span>"),e=makeId(d);if(e!==""){f.attr("id",e);f.attr("name",e)}d.cssclass!==""&&f.attr("class",
d.cssclass);d.value!==""&&f.text(d.value);b.append(f);return f},link:function(b){var d={ID:"",prefix:"",suffix:"",value:"",type:"",media:"all",target:"",rel:"",cssclass:"",onClick:function(){}};b&&a.extend(d,b);b=a(this);var f=a("<a></a>"),e=makeId(d);e!==""&&f.attr("id",e);d.href!==""&&f.attr("href",d.href);d.value!==""&&f.text(d.value);d.cssclass!==""&&f.attr("class",d.cssclass);d.type!==""&&f.attr("type",d.type);d.rel!==""&&f.attr("rel",d.rel);d.media!==""&&f.attr("media",d.media);d.target!==""&&
f.attr("target",d.target);d.onClick!==undefined&&f.click(function(){d.onClick()});b.append(f);return f},"break":function(b){var d={count:1};b&&a.extend(d,b);b=a(this);for(var f=0;f<d.count;){b.append(a("<br/>"));f++}},getchildren:function(b){var d={ID:"",prefix:"",suffix:""};b&&a.extend(d,b);b=a(this);var f;d=makeId(d);if(d!=="")f=b.children("#"+d);return f},findelement:function(b){var d={ID:"",prefix:"",suffix:""};b&&a.extend(d,b);b=a(this);var f;d=makeId(d);if(d!=="")f=b.find("#"+d);return f}};
a.fn.CswDOM=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswDOM")}})(jQuery);var CswImageButton_ButtonType={None:-1,Add:27,ArrowNorth:28,ArrowEast:29,ArrowSouth:30,ArrowWest:31,Calendar:6,CheckboxFalse:18,CheckboxNull:19,CheckboxTrue:20,Clear:4,Clock:10,ClockGrey:11,Configure:26,Delete:4,Edit:3,Fire:5,PageFirst:23,PagePrevious:24,PageNext:25,PageLast:22,PinActive:17,PinInactive:15,Print:2,Refresh:9,SaveStatus:13,Select:32,ToggleActive:1,ToggleInactive:0,View:8};
(function(a){a.fn.CswImageButton=function(g){function b(e){if(e!=undefined&&e!=CswImageButton_ButtonType.None){f.get(0).style.background="url('Images/buttons/buttons18.gif') 0px "+e*-18+"px no-repeat";f.unbind("mouseover");f.unbind("mouseout");f.unbind("mousedown");f.unbind("mouseup");f.bind("mouseover",function(){this.style.backgroundPosition="-18px "+e*-18+"px"});f.bind("mouseout",function(){this.style.backgroundPosition="0px "+e*-18+"px"});f.bind("mousedown",function(){this.style.backgroundPosition=
"-36px "+e*-18+"px"});f.bind("mouseup",function(){this.style.backgroundPosition="-18px "+e*-18+"px"})}}var d={ButtonType:CswImageButton_ButtonType.None,Active:false,AlternateText:"",ID:"",Required:false,onClick:function(){return CswImageButton_ButtonType.None}};g&&a.extend(d,g);$Div=a(this);var f=a('<div id="'+d.ID+'" class="divbutton" alt="'+d.AlternateText+'" />"').appendTo($Div).css("display","inline-block").click(function(){var e=d.onClick(f);b(e);return false});b(d.ButtonType);return f}})(jQuery);var CswInput_Types={button:{id:0,name:"button",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},checkbox:{id:1,name:"checkbox",placeholder:false,autocomplete:false,value:{required:true,allowed:true}},color:{id:2,name:"color",placeholder:false,autocomplete:true,value:{required:false,allowed:true}},date:{id:3,name:"date",placeholder:false,autocomplete:true,value:{required:false,allowed:true}},datetime:{id:4,name:"datetime",placeholder:false,autocomplete:false,value:{required:false,
allowed:true}},"datetime-local":{value:5,name:"datetime-local",placeholder:false,autocomplete:true,value:{required:false,allowed:true}},email:{id:6,name:"email",placeholder:true,autocomplete:true,value:{required:false,allowed:true}},file:{id:7,name:"file",placeholder:false,autocomplete:false,value:{required:false,allowed:false}},hidden:{id:8,name:"hidden",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},image:{id:9,name:"image",placeholder:false,autocomplete:false,value:{required:false,
allowed:true}},month:{id:10,name:"month",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},number:{id:11,name:"number",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},password:{id:12,name:"password",placeholder:true,value:{required:false,allowed:true}},radio:{id:13,name:"radio",placeholder:false,autocomplete:false,value:{required:true,allowed:true}},range:{id:14,name:"range",placeholder:false,autocomplete:true,value:{required:false,allowed:true}},
reset:{id:15,name:"reset",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},search:{id:16,name:"search",placeholder:true,autocomplete:true,value:{required:false,allowed:true}},submit:{id:17,name:"submit",placeholder:false,autocomplete:false,value:{required:false,allowed:true}},tel:{id:18,name:"button",placeholder:true,autocomplete:true,value:{required:false,allowed:true}},text:{id:19,name:"text",placeholder:true,autocomplete:true,value:{required:false,allowed:true}},time:{id:20,
name:"time",placeholder:false,autocomplete:true,value:{required:false,allowed:true}},url:{id:21,name:"url",placeholder:true,autocomplete:true,value:{required:false,allowed:true}},week:{id:22,name:"week",placeholder:false,autocomplete:false,value:{required:false,allowed:true}}};
(function(a){var g={init:function(b){var d={ID:"",type:CswInput_Types.text,placeholder:"",cssclass:"",value:"",width:"200px",autofocus:false,autocomplete:"on"};b&&a.extend(d,b);b=a(this);var f=a("<input />");if(d.ID!==""){f.attr("id",d.ID);f.attr("name",d.ID)}if(d.type!==""&&d.type!==undefined){f.attr("type",d.type.name);d.type.autocomplete===true&&d.autocomplete==="on"&&f.attr("autocomplete","on");if(d.type.value.required===true||d.value!==""&&d.value!==undefined){if(d.value===undefined)d.value=
"";f.attr("value",d.value)}}d.cssclass!==""&&f.attr("class",d.cssclass);d.width!==""&&f.attr({width:d.width});d.autofocus===true&&f.attr("autofocus");b.append(f);return f},get:function(b){var d={ID:""};b&&a.extend(d,b);b=a(this);var f;if(d.ID!==""&&d.ID!==undefined)f=b.find("#"+d.ID);return f}};a.fn.CswInput=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswInput")}})(jQuery);(function(a){a.fn.CswLayoutTable=function(g){function b(k,l,p){for(var o=parseInt(k.attr("cellset_rows")),t=parseInt(k.attr("cellset_columns")),u=[],q=1;q<=o;q++)for(var s=1;s<=t;s++){if(u[q]==undefined)u[q]=[];u[q][s]=j(k,l,p,q,s,o,t)}return u}function d(k){return k.attr("removemode")=="true"}function f(k){return k.attr("configmode")=="true"}function e(k,l){l.find("#"+k.attr("id")+"addbtn").hide();l.find("#"+k.attr("id")+"rembtn").hide();l.find("#"+k.attr("id")+"addcolumnbtn").hide();l.find("#"+
k.attr("id")+"addrowbtn").hide();k.CswTable("findCell",".CswLayoutTable_cell").removeClass("CswLayoutTable_configcell");k.attr("configmode","false");k.trigger(k.attr("id")+"CswLayoutTable_onConfigOff",l)}function h(k,l){l.find("#"+k.attr("id")+"addbtn").show();l.find("#"+k.attr("id")+"rembtn").show();l.find("#"+k.attr("id")+"addcolumnbtn").show();l.find("#"+k.attr("id")+"addrowbtn").show();parseInt(k.attr("cellset_rows"));parseInt(k.attr("cellset_columns"));k.CswTable("finish",null);k.CswTable("findCell",
".CswLayoutTable_cell").addClass("CswLayoutTable_configcell");k.attr("configmode","true");k.trigger(k.attr("id")+"CswLayoutTable_onConfigOn",l)}function j(k,l,p,o,t,u,q){if(l<1)l=1;if(p<1)p=1;return k.CswTable("cell",(l-1)*u+o,(p-1)*q+t)}function n(k,l,p,o,t,u){var q=Math.ceil(p/t),s=Math.ceil(o/u);p=parseInt(t-p%t);o=parseInt(u-o%u);l.attr("row",q).attr("column",s).attr("cellsetrow",p).attr("cellsetcolumn",o).click(function(){if(d(k)){var v=a(".CswLayoutTable_remove");v.length>0&&k.trigger(k.attr("id")+
"CswLayoutTable_onRemove",{table:k,cellset:b(k,q,s),row:v.attr("row"),column:v.attr("column")});v.children().hide();v.removeClass("CswLayoutTable_remove")}}).drag(function(v,y){if(f(k)){k.CswTable("findCell",".CswLayoutTable_swapcell").removeClass("CswLayoutTable_swapcell");k.CswTable("findCell",'[row="'+q+'"][column="'+s+'"]').addClass("CswLayoutTable_dragcell");var G=i(k,q,s,t,u,y);G.length>0&&G.addClass("CswLayoutTable_swapcell")}}).drop(function(v,y){if(f(k)){k.CswTable("findCell",".CswLayoutTable_swapcell").removeClass("CswLayoutTable_swapcell");
var G=k.CswTable("findCell",'[row="'+q+'"][column="'+s+'"]');G.removeClass("CswLayoutTable_dragcell");var B=i(k,q,s,t,u,y);if(B.length>0){k.trigger(k.attr("id")+"CswLayoutTable_onSwap",{table:k,cellset:b(k,q,s),swapcellset:b(k,B.first().attr("row"),B.first().attr("column")),row:q,column:s,swaprow:B.first().attr("row"),swapcolumn:B.first().attr("column")});var N=a("<div />");for(r=1;r<=t;r++)for(c=1;c<=u;c++){var P=G.filter('[cellsetrow="'+r+'"][cellsetcolumn="'+c+'"]'),O=B.filter('[cellsetrow="'+
r+'"][cellsetcolumn="'+c+'"]');P.contents().appendTo(N);O.contents().appendTo(P);N.contents().appendTo(O)}}}}).hover(function(){var v=a(this);f(k)&&v.addClass("CswLayoutTable_hover");d(k)&&k.CswTable("findCell",'[row="'+v.attr("row")+'"][column="'+v.attr("column")+'"]').addClass("CswLayoutTable_remove")},function(){var v=a(this);f(k)&&v.removeClass("CswLayoutTable_hover");d(k)&&k.CswTable("findCell",'[row="'+v.attr("row")+'"][column="'+v.attr("column")+'"]').removeClass("CswLayoutTable_remove")})}
function i(k){var l=a(".CswLayoutTable_hover");return k.CswTable("findCell",'[row="'+l.attr("row")+'"][column="'+l.attr("column")+'"]')}var m={init:function(k){var l={ID:"",cellset:{rows:1,columns:1},onSwap:function(){},onAddClick:function(){},onConfigOn:function(){},onConfigOff:function(){},onRemove:function(){},TableCssClass:"",CellCssClass:"",cellpadding:0,cellspacing:0,width:"",align:"",showConfigButton:false,showAddButton:false,showRemoveButton:false,OddCellRightAlign:false,ReadOnly:false};k&&
a.extend(l,k);k=a(this);var p=a("<div />").appendTo(k).css({"float":"right"});l.ReadOnly&&p.hide();var o=k.CswTable("init",{ID:l.ID,TableCssClass:l.TableCssClass+" CswLayoutTable_table",CellCssClass:l.CellCssClass+" CswLayoutTable_cell",cellpadding:l.cellpadding,cellspacing:l.cellspacing,OddCellRightAlign:l.OddCellRightAlign,width:l.width,align:l.align,onCreateCell:function(u,q,s,v,y){n(q,s,v,y,l.cellset.rows,l.cellset.columns)}}).attr("cellset_rows",l.cellset.rows).attr("cellset_columns",l.cellset.columns);
o.attr("configmode","false");o.bind(l.ID+"CswLayoutTable_onSwap",l.onSwap);o.bind(l.ID+"CswLayoutTable_onRemove",l.onRemove);o.bind(l.ID+"CswLayoutTable_onConfigOn",l.onConfigOn);o.bind(l.ID+"CswLayoutTable_onConfigOff",l.onConfigOff);var t=p.CswTable("init",{ID:l.ID+"_buttontbl"});l.showAddButton&&t.CswTable("cell",1,1).CswImageButton({ButtonType:CswImageButton_ButtonType.Add,AlternateText:"Add",ID:l.ID+"addbtn",onClick:function(){l.onAddClick();return CswImageButton_ButtonType.None}}).hide();l.showRemoveButton&&
t.CswTable("cell",1,2).CswImageButton({ButtonType:CswImageButton_ButtonType.Delete,AlternateText:"Remove",ID:l.ID+"rembtn",onClick:function(){var u=a(this);if(d(o)){o.attr("removemode","false");u.removeClass("CswLayoutTable_removeEnabled")}else{o.attr("removemode","true");u.addClass("CswLayoutTable_removeEnabled")}return CswImageButton_ButtonType.None}}).hide();if(l.showConfigButton){t.CswTable("cell",1,3).CswImageButton({ButtonType:CswImageButton_ButtonType.ArrowEast,AlternateText:"Add Column",ID:l.ID+
"addcolumnbtn",onClick:function(){var u=parseInt(o.attr("cellset_rows")),q=parseInt(o.attr("cellset_columns")),s=o.CswTable("maxrows"),v=o.CswTable("maxcolumns");j(o,s/u,v/q+1,u,q,u,q);o.CswTable("finish",null);f(o)&&o.CswTable("findCell",".CswLayoutTable_cell").addClass("CswLayoutTable_configcell");return CswImageButton_ButtonType.None}}).hide();t.CswTable("cell",1,4).CswImageButton({ButtonType:CswImageButton_ButtonType.ArrowSouth,AlternateText:"Add Row",ID:l.ID+"addrowbtn",onClick:function(){var u=
parseInt(o.attr("cellset_rows")),q=parseInt(o.attr("cellset_columns")),s=o.CswTable("maxrows"),v=o.CswTable("maxcolumns");j(o,s/u+1,v/q,u,q,u,q);o.CswTable("finish",null);f(o)&&o.CswTable("findCell",".CswLayoutTable_cell").addClass("CswLayoutTable_configcell");return CswImageButton_ButtonType.None}}).hide();t.CswTable("cell",1,5).CswImageButton({ButtonType:CswImageButton_ButtonType.Configure,AlternateText:"Configure",ID:l.ID+"configbtn",onClick:function(){f(o)?e(o,t):h(o,t);return CswImageButton_ButtonType.None}})}return o},
cellset:function(k,l){var p=a(this);return b(p,k,l)},isConfig:function(){var k=a(this);return f(k)},toggleConfig:function(){var k=a(this),l=a("#"+k.attr("id")+"_buttontbl");f(k)?e(k,l):h(k,l)},ConfigOn:function(){var k=a(this),l=a("#"+k.attr("id")+"_buttontbl");h(k,l)},ConfigOff:function(){var k=a(this),l=a("#"+k.attr("id")+"_buttontbl");e(k,l)}};if(m[g])return m[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return m.init.apply(this,arguments);else a.error("Method "+
g+" does not exist on CswLayoutTable")}})(jQuery);(function(a){a.fn.CswLogin=function(g){function b(e){var h={DeauthenticateUrl:"/NbtWebApp/wsNBT.asmx/deauthenticate",onDeauthenticate:function(){}};e&&a.extend(h,e);CswAjaxJSON({url:h.DeauthenticateUrl,data:"",success:function(){a.CswCookie("clear",CswCookieName.Username);h.onDeauthenticate()}})}function d(e,h){var j="";switch(e.AuthenticationStatus){case "Failed":j="Login Failed";break;case "Locked":j="Your account is locked.  Please see your account administrator.";break;case "Deactivated":j="Your account is deactivated.  Please see your account administrator.";
break;case "TooManyUsers":j="Too many users are currently connected.  Try again later.";break;case "NonExistentAccessId":j="Login Failed";break;case "NonExistentSession":j="Login Failed";break;case "Unknown":j="An Unknown Error Occurred";break;case "ExpiredPassword":a.CswDialog("EditNodeDialog",{nodeid:e.nodeid,cswnbtnodekey:e.cswnbtnodekey,filterToPropId:e.passwordpropid,title:"Your password has expired.  Please change it now:",onEditNode:function(){h()}});break;case "ShowLicense":a.CswDialog("ShowLicenseDialog",
{onAccept:function(){h()},onDecline:function(){b()}})}a("#loginmsg").text(j);a("#login_password").val("");a("#login_button").val("Login").attr("disabled","")}var f={login:function(e){var h={AuthenticateUrl:"/NbtWebApp/wsNBT.asmx/authenticate",onAuthenticate:function(){}};e&&a.extend(h,e);e=a.CswCookie("get",CswCookieName.SessionId);if(e!=undefined&&e!=""&&e!=null)h.onAuthenticate(a.CswCookie("get",CswCookieName.Username));else{var j=a('<form><div id="logindiv" align="center">  <table>  <form>    <table>    <tr>      <td align="right">Customer ID:</td>      <td><input type="text" name="accessid" id="login_accessid" /></td>    </tr>    <tr>      <td align="right">User Name:</td>      <td><input type="text" name="username" id="login_username" /></td>    </tr>    <tr>      <td align="right">Password:</td>      <td><input type="password" name="password" id="login_password" /></td>    </tr>    <tr>      <td align="right"></td>      <td id="login_button_cell">           <span id="loginmsg" class="errorcontent" display="none"></span></td>    </tr>    <tr>      <td></td>      <td></td>    </tr>  </table></form></div><br/><br/><br/><div id="assemblydiv" width="100%" align="right"></div>').appendTo(a(this));
a("#assemblydiv").load("_Assembly.txt");a("#login_accessid").focus();a("#login_button_cell").CswButton({ID:"login_button",enabledText:"Login",disabledText:"Logging in...",onclick:function(){function n(l){a.CswCookie("set",CswCookieName.Username,l);j.remove();h.onAuthenticate(l)}a("#loginmsg").text("");var i=a("#login_accessid").val(),m=a("#login_username").val(),k=a("#login_password").val();CswAjaxJSON({url:h.AuthenticateUrl,data:"{AccessId: '"+i+"', UserName: '"+m+"', Password: '"+k+"'}",success:function(l){auth=
l.AuthenticationStatus;auth=="Authenticated"?n(m):d(l,n)}})}})}},logout:function(e){b(e)}};if(f[g])return f[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return f.init.apply(this,arguments);else a.error("Method "+g+" does not exist on CswLogin")}})(jQuery);(function(a){a.fn.CswMenu=function(g){function b(){$this=a(this);d();$this.find("ul.subnav").slideDown("fast").show()}function d(){e.find("ul").stop(true,true);e.find("ul.subnav").slideUp("fast")}var f={};g&&a.extend(f,g);var e=a(this);e.children("li").click(b).hover(b,d);e.find(".subnav").children("li").click(function(){d();event.stopPropagation()});return this}})(jQuery);(function(a){a.fn.CswMenuHeader=function(g){var b={Url:"/NbtWebApp/wsNBT.asmx/getHeaderMenu",onLogout:function(){},onSuccess:function(){}};g&&a.extend(b,g);var d=a(this);CswAjaxXml({url:b.Url,data:"",success:function(f){var e=a('<ul class="topnav"></ul>');d.text("").append(e);f.children().each(function(){var h=a(this);if(h.attr("text")!=undefined){var j=HandleMenuItem({$ul:e,$itemxml:h,onLogout:b.onLogout});if(h.children().length>1){var n=a('<ul class="subnav"></ul>').appendTo(j);h.children().each(function(){HandleMenuItem({$ul:n,
$itemxml:a(this),onLogout:b.onLogout})})}}});e.CswMenu();b.onSuccess()}});return this}})(jQuery);(function(a){a.fn.CswMenuMain=function(g){var b={Url:"/NbtWebApp/wsNBT.asmx/getMainMenu",viewid:"",nodeid:"",cswnbtnodekey:"",onAddNode:function(){},onMultiEdit:function(){},onSearch:function(){},onEditView:function(){},Multi:false,NodeCheckTreeId:""};g&&a.extend(b,g);var d=a(this);CswAjaxXml({url:b.Url,data:"ViewNum="+b.viewid+"&SafeNodeKey="+b.cswnbtnodekey,success:function(f){var e=a('<ul class="topnav"></ul>');d.text("").append(e);f.children().each(function(){var h=a(this);if(h.attr("text")!=
undefined){var j={$ul:e,$itemxml:h,onAlterNode:b.onAddNode,onMultiEdit:b.onMultiEdit,onEditView:b.onEditView,onSearch:b.onSearch,Multi:b.Multi,NodeCheckTreeId:b.NodeCheckTreeId},n=HandleMenuItem(j);if(h.children().length>=1){var i=a('<ul class="subnav"></ul>').appendTo(n);h.children().each(function(){var m={$ul:i,$itemxml:a(this)};a.extend(j,m);HandleMenuItem(m)})}}});e.CswMenu()}});return this}})(jQuery);(function(a){var g={init:function(b){var d={datatype:"local",height:300,rowNum:10,autoencode:true,rowList:[10,25,50],sortname:"nodeid",shrinkToFit:true,viewrecords:true,emptyrecords:"No Data to Display",sortorder:"asc",multiselect:true,GridUrl:"/NbtWebApp/wsNBT.asmx/getGrid",viewid:"",prefix:"CswNodeGrid",nodeid:"",cswnbtnodekey:"",gridTableID:"gridTable",gridPagerID:"gridPager",onAddNode:function(){},onEditNode:function(){},onDeleteNode:function(){}};b&&a.extend(d,b);b=a(this);var f=[],e=[],h=makeId({ID:d.gridTableID,
prefix:d.prefix}),j=b.CswTable("init",{ID:h});h=makeId({ID:d.gridPagerID,prefix:d.prefix});var n=b.CswDOM("div",{ID:h}).css("width","100%").css("height","20px");CswAjaxJSON({url:d.GridUrl,data:"{ViewPk: '"+d.viewid+"', 'SafeNodeKey': '"+d.cswnbtnodekey+"'}",success:function(i){f=i.grid;e=f.rows;var m=i.viewname,k=i.nodetypeid,l=i.columnnames,p=i.columndefinition;i=i.viewwidth;if(i==="")i=650;m={data:e,colNames:l,colModel:p,width:i,pager:n,caption:m,toppager:true};a.extend(m,d);j.jqGrid(m).hideCol("nodeid").hideCol("cswnbtnodekey").hideCol("nodename").navGrid("#"+
n.attr("id"),{cloneToTop:true,edit:true,edittext:"",edittitle:"Edit row",editfunc:function(o){var t={cswnbtnodekey:"",nodeid:"",onEditNode:d.onEditNode};if(o!==null){t.cswnbtnodekey=j.jqGrid("getCell",o,"cswnbtnodekey");t.nodeid=j.jqGrid("getCell",o,"nodeid");a.CswDialog("EditNodeDialog",t)}else alert("Please select a row to edit");return t.CswNbtNodeKey},add:true,addtext:"",addtitle:"Add row",addfunc:function(){var o={nodetypeid:k,onAddNode:d.onAddNode};a.CswDialog("AddNodeDialog",o);return o.nodetypeid},
del:true,deltext:"",deltitle:"Delete row",delfunc:function(o){var t={cswnbtnodekey:"",nodeid:"",nodename:"",onDeleteNode:d.onDeleteNode};if(o!==null){t.cswnbtnodekey=j.jqGrid("getCell",o,"cswnbtnodekey");t.nodeid=j.jqGrid("getCell",o,"nodeid");t.nodename=j.jqGrid("getCell",o,"nodename");a.CswDialog("DeleteNodeDialog",t)}else alert("Please select a row to delete");return t.cswnbtnodekey},search:true,searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",
alerttext:"Please, select row",view:true,viewtext:"",viewtitle:"View row"},{},{},{},{caption:"Search...",Find:"Find",Reset:"Reset",odata:["equal","not equal","less","less or equal","greater","greater or equal","begins with","does not begin with","is in","is not in","ends with","does not end with","contains","does not contain"],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],matchText:"match",rulesText:"rules"},{});m=a("#"+j[0].id+"_toppager")[0];a("#edit_"+j[0].id+"_top",m).remove();a("#del_"+
j[0].id+"_top",m).remove();a("#search_"+j[0].id+"_top",m).remove();a("#add_"+j[0].id+"_top",m).remove();a("#view_"+j[0].id+"_top",m).remove();a("#"+j[0].id+"_toppager_center",m).remove();a(".ui-paging-info",m).remove();j.jqGrid("navButtonAdd","#"+j[0].id+"_toppager_left",{caption:"Columns",buttonicon:"ui-icon-wrench",onClickButton:function(){j.jqGrid("columnChooser",{done:function(o){if(!o)return false;j.jqGrid("remapColumns",o,true)}})}})}});return j},scrollToSelectedRow:function(){var b=a(this),
d=b.jqGrid("getGridParam","selrow"),f=null;try{f=b.find("tbody").find("tr:first").outerHeight()}catch(e){}f=f||23;d=b.getInd(d);b.closest(".ui-jqgrid-bdiv").scrollTop(f*(d-1))}};a.fn.CswNodeGrid=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on "+PluginName)}})(jQuery);(function(a){var g={init:function(b){var d={ID:"",NodesUrl:"/NbtWebApp/wsNBT.asmx/getNodes",nodetypeid:"",objectclassid:"",objectclass:"",onSelect:function(){},onSuccess:function(){}};b&&a.extend(d,b);b=a(this);var f=a('<select id="'+d.ID+'_nodeselect" />').appendTo(b);f.change(function(){d.onSelect(f.val())});CswAjaxXml({url:d.NodesUrl,data:"NodeTypeId="+d.nodetypeid+"&ObjectClassId="+d.objectclassid+"&ObjectClass="+d.objectclass,success:function(e){e.children("node").each(function(){var h=a(this);
f.append('<option value="'+h.attr("id")+'">'+h.attr("name")+"</option>")});d.onSuccess()}});return f},value:function(){return a(this).val()}};a.fn.CswNodeSelect=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswNodeSelect")}})(jQuery);(function(a){a.fn.CswNodeTabs=function(g){function b(l,p){CswAjaxXml({url:m.PropsUrl,data:"EditMode="+m.EditMode+"&SafeNodeKey="+m.cswnbtnodekey+"&TabId="+p+"&NodeTypeId="+m.nodetypeid,success:function(o){var t=l.children("form");t.contents().remove();m.title!=""&&t.append(m.title);var u=t.CswLayoutTable("init",{ID:m.ID+"_props",OddCellRightAlign:true,ReadOnly:m.EditMode=="PrintReport",cellset:{rows:1,columns:2},onSwap:function(q,s){d(s)},showConfigButton:m.filterToPropId=="",onConfigOn:function(){o.children().each(function(){var q=
a(this),s=u.CswLayoutTable("cellset",q.attr("displayrow"),q.attr("displaycol"))[1][2],v=s.children("#"+q.attr("id")+"_subproptable"),y={fieldtype:q.attr("fieldtype"),nodeid:m.nodeid,relatednodeid:m.relatednodeid,propid:q.attr("id"),$propdiv:s.children("div"),$propxml:q,onchange:function(){},onReload:function(){b(l,p)},cswnbtnodekey:m.cswnbtnodekey};v.length>0&&j(y,m.SinglePropUrl,m.EditMode,m.cswnbtnodekey,q.attr("id"),m.nodetypeid,q,s,l,p,true)})},onConfigOff:function(){o.children().each(function(){var q=
a(this),s=u.CswLayoutTable("cellset",q.attr("displayrow"),q.attr("displaycol"))[1][2],v=s.children("#"+q.attr("id")+"_subproptable"),y={fieldtype:q.attr("fieldtype"),nodeid:m.nodeid,relatednodeid:m.relatednodeid,propid:q.attr("id"),$propdiv:s.children("div"),$propxml:q,onchange:function(){},onReload:function(){b(l,p)},cswnbtnodekey:m.cswnbtnodekey};v.length>0&&j(y,m.SinglePropUrl,m.EditMode,m.cswnbtnodekey,q.attr("id"),m.nodetypeid,q,s,l,p,false)})}});e(u,o,l,p);m.EditMode!="PrintReport"&&t.CswButton({ID:"SaveTab",
enabledText:"Save Changes",disabledText:"Saving...",onclick:function(){n(t,u,o)}});t.validate({highlight:function(q){q=a(q);q.attr("csw_invalid","1");q.animate({backgroundColor:"#ff6666"})},unhighlight:function(q){var s=a(q);if(s.attr("csw_invalid")=="1"){s.css("background-color","#66ff66");s.attr("csw_invalid","0");setTimeout(function(){s.animate({backgroundColor:"transparent"})},500)}}})}})}function d(l){f(l.cellset[1][2].children("div").first(),l.swaprow,l.swapcolumn);f(l.swapcellset[1][2].children("div").first(),
l.row,l.column)}function f(l,p,o){if(l.length>0){l=l.attr("propid");CswAjaxJSON({url:m.MovePropUrl,data:'{ "PropId": "'+l+'", "NewRow": "'+p+'", "NewColumn": "'+o+'", "EditMode": "'+m.EditMode+'" }',success:function(){}})}}function e(l,p,o,t,u){p.children().each(function(){var q=a(this),s=q.attr("id"),v=q.attr("fieldtype"),y=l.CswLayoutTable("cellset",q.attr("displayrow"),q.attr("displaycol"));if((q.attr("display")!="false"||u)&&v!="Image"&&v!="Grid"&&(m.filterToPropId==""||m.filterToPropId==s)){v=
y[1][1];v.addClass("propertylabel");q.attr("helptext")!=""?a('<a href="#" title="'+q.attr("helptext")+'" onclick="return false;">'+q.attr("name")+"</a>").appendTo(v):v.append(q.attr("name"));m.ShowCheckboxes&&q.attr("copyable")=="true"&&a('<input type="checkbox" id="check_'+s+'" class="'+m.ID+'_check" propid="'+s+'"></input>').appendTo(v)}s=y[1][2];s.addClass("propertyvaluecell");h(s,q,o,t,u)})}function h(l,p,o,t,u){l.empty();if((p.attr("display")!="false"||u)&&(m.filterToPropId==""||m.filterToPropId==
p.attr("id"))){var q={fieldtype:p.attr("fieldtype"),nodeid:m.nodeid,relatednodeid:m.relatednodeid,propid:p.attr("id"),$propdiv:a("<div/>").appendTo(l),$propxml:p,onchange:function(){},onReload:function(){b(o,t)},cswnbtnodekey:m.cswnbtnodekey,EditMode:m.EditMode};q.$propdiv.attr("nodeid",q.nodeid);q.$propdiv.attr("propid",q.propid);q.$propdiv.attr("cswnbtnodekey",q.cswnbtnodekey);q.onchange=function(){m.onPropertyChange(q.propid,p.attr("name"))};if(p.attr("hassubprops")=="true")q.onchange=function(){j(q,
m.SinglePropUrl,m.EditMode,m.cswnbtnodekey,p.attr("id"),m.nodetypeid,p,l,o,t,false);m.onPropertyChange(q.propid,p.attr("name"))};a.CswFieldTypeFactory("make",q);var s=p.children("subprops");if(s.length>0&&s.children('[display != "false"]').length>0||u){var v=l.CswLayoutTable("init",{ID:q.propid+"_subproptable",OddCellRightAlign:true,ReadOnly:m.EditMode=="PrintReport",cellset:{rows:1,columns:2},onSwap:function(y,G){d(G)},showConfigButton:false});e(v,s,o,t,u);u?v.CswLayoutTable("ConfigOn"):v.CswLayoutTable("ConfigOff")}}}
function j(l,p,o,t,u,q,s,v,y,G,B){a.CswFieldTypeFactory("save",l);CswAjaxXml({url:p,data:"EditMode="+o+"&SafeNodeKey="+t+"&PropId="+u+"&NodeTypeId="+q+"&NewPropXml="+xmlToString(s),success:function(N){h(v,N.children().first(),y,G,B)}})}function n(l,p,o){if(l.valid()){i(p,o);CswAjaxJSON({url:m.SavePropUrl,data:"{ EditMode: '"+m.EditMode+"', SafeNodeKey: '"+m.cswnbtnodekey+"', NodeTypeId: '"+m.nodetypeid+"', ViewId: '"+a.CswCookie("get",CswCookieName.CurrentView.ViewId)+"', NewPropsXml: '"+xmlToString(o)+
"' }",success:function(t){if(m.ShowCheckboxes){var u=a("."+m.NodeCheckTreeId+"_check:checked"),q=a("."+m.ID+"_check:checked");if(u.length>0&&q.length>0){var s="{ SourceNodeKey: '"+m.cswnbtnodekey+"', CopyNodeIds: [",v=true;u.each(function(){var y=a(this).attr("nodeid");v||(s+=",");s+="'"+y+"'";v=false});s+="], PropIds: [";v=true;q.each(function(){var y=a(this).attr("propid");v||(s+=",");s+="'"+y+"'";v=false});s+="] }";CswAjaxJSON({url:m.CopyPropValuesUrl,data:s})}}m.onSave(t.nodeid,t.cswnbtnodekey)}})}}
function i(l,p){p.children().each(function(){var o={$propxml:a(this),$propdiv:"",$propCell:"",fieldtype:"",nodeid:m.nodeid,cswnbtnodekey:m.cswnbtnodekey};o.fieldtype=o.$propxml.attr("fieldtype");var t=l.CswLayoutTable("cellset",o.$propxml.attr("displayrow"),o.$propxml.attr("displaycol"));o.$propcell=t[1][2];o.$propdiv=o.$propcell.children("div").first();a.CswFieldTypeFactory("save",o);if(o.$propxml.attr("hassubprops")=="true"){t=o.$propxml.children("subprops");if(t.length>0&&t.children('[display != "false"]').length>
0){o=o.$propcell.children("#"+o.$propxml.attr("id")+"_subproptable").first();i(o,t)}}})}var m={ID:"",TabsUrl:"/NbtWebApp/wsNBT.asmx/getTabs",SinglePropUrl:"/NbtWebApp/wsNBT.asmx/getSingleProp",PropsUrl:"/NbtWebApp/wsNBT.asmx/getProps",MovePropUrl:"/NbtWebApp/wsNBT.asmx/moveProp",SavePropUrl:"/NbtWebApp/wsNBT.asmx/saveProps",CopyPropValuesUrl:"/NbtWebApp/wsNBT.asmx/copyPropValues",nodeid:"",relatednodeid:"",tabid:"",cswnbtnodekey:"",nodetypeid:"",filterToPropId:"",title:"",EditMode:"Edit",onSave:function(){},
onBeforeTabSelect:function(){return true},onTabSelect:function(){},onPropertyChange:function(){},ShowCheckboxes:false,NodeCheckTreeId:""};g&&a.extend(m,g);g=a(this);var k=a('<div id="'+m.ID+'_tabdiv" />').appendTo(g);(function(){CswAjaxXml({url:m.TabsUrl,data:"EditMode="+m.EditMode+"&SafeNodeKey="+m.cswnbtnodekey+"&NodeTypeId="+m.nodetypeid,success:function(l){k.contents().remove();var p=[],o=0,t=0;l.children().each(function(){$tab=a(this);if(m.EditMode=="PrintReport"||p.length==0)p[p.length]=a("<div><ul></ul></div>").appendTo(k);
var v=p[p.length-1];v.children("ul").append('<li><a href="#'+$tab.attr("id")+'">'+$tab.attr("name")+"</a></li>");v.append('<div id="'+$tab.attr("id")+'"><form id="'+$tab.attr("id")+'_form" /></div>');if($tab.attr("id")==m.tabid)o=t;t++});for(var u in p){var q=p[u];q.tabs({selected:o,select:function(v,y){if(m.onBeforeTabSelect(B)){var G=a(q.children("div")[y.index]),B=G.attr("id");b(G,B);m.onTabSelect(B)}else return false}});l=a(q.children("div")[q.tabs("option","selected")]);var s=l.attr("id");b(l,
s);m.onTabSelect(s)}}})})(m);if(m.EditMode!="PrintReport"){g=a('<div id="'+m.ID+'_linkdiv" align="right"/>').appendTo(g);a('<a href="#">As Report</a>').appendTo(g).click(function(){openPopup("NewNodeReport.html?nodeid="+m.nodeid+"&cswnbtnodekey="+m.cswnbtnodekey,600,800)})}return this}})(jQuery);(function(a){function g(d,f){return jsTreeGetSelected(d).$item.attr("rel")==f.attr("rel")}var b={init:function(d){var f={ID:"",ViewTreeUrl:"/NbtWebApp/wsNBT.asmx/getTreeOfView",NodeTreeUrl:"/NbtWebApp/wsNBT.asmx/getTreeOfNode",viewid:"",viewmode:"",nodeid:"",cswnbtnodekey:"",IncludeNodeRequired:false,UsePaging:true,onSelectNode:function(){},onViewChange:function(){},SelectFirstChild:true,ShowCheckboxes:false};d&&a.extend(f,d);var e=f.ID+"_",h=a('<div id="'+e+'" class="treediv" />').appendTo(a(this)),
j=f.ViewTreeUrl;d="UsePaging="+f.UsePaging+"&ViewNum="+f.viewid+"&IDPrefix="+e+"&IsFirstLoad=true&ParentNodeKey=&IncludeNodeRequired="+f.IncludeNodeRequired+"&IncludeNodeKey=";if(f.cswnbtnodekey!=undefined)d+=f.cswnbtnodekey;if(f.viewid==""||f.viewid==undefined){j=f.NodeTreeUrl;d="IDPrefix="+e+"&NodePk="+f.nodeid}CswAjaxXml({url:j,data:d,success:function(n){var i="",m=["themes","html_data","ui","types","crrm"],k;if(f.nodeid!=undefined&&f.nodeid!="")i=e+f.nodeid;var l=n.children("viewid").text();if(f.viewid!=
l){f.onViewChange(l);f.viewid=l}l=n.find('item[id="'+i+'"]');if(i==""||l.length==0)if(f.SelectFirstChild)if(f.viewmode=="list"){i=n.find("item").first().attr("id");k={dots:false}}else{i=n.find("item").first().find("item").first().attr("id");k={dots:true}}else i=e+"root";l=n.find('item[id="'+i+'"]');var p=[],o=0;l.parents("item").andSelf().each(function(){p[o]=a(this).attr("id");o++});l=n.find("types").text();l=a.parseJSON(l);n=n.find("tree").children("root");if(n.length>0){var t=function(q){var s=
q.attr("id").substring(e.length),v=q.children("content").children("name").text(),y='<li id="'+q.attr("id")+'" ';y+='    rel="'+q.attr("rel")+'" ';y+='    class="jstree-'+q.attr("state")+'" ';if(q.attr("cswnbtnodekey")!=undefined)y+='    cswnbtnodekey="'+q.attr("cswnbtnodekey").replace(/"/g,"&quot;")+'"';y+=">";if(f.ShowCheckboxes)y+='  <input type="checkbox" class="'+e+'check" id="check_'+s+'" rel="'+q.attr("rel")+'" nodeid="'+s+'" nodename="'+v+'"></input>';y+='  <a href="#">'+v+"</a>";if(q.children("item").length>
0){y+="<ul>";q.children("item").each(function(){y+=t(a(this))});y+="</ul>"}y+="</li>";return y},u="<ul>";n.children().each(function(){u+=t(a(this))});u+="</ul>";h.jstree({html_data:{data:u,ajax:{type:"POST",url:j,dataType:"xml",data:function(q){q=q.attr("cswnbtnodekey");return"UsePaging="+f.UsePaging+"&ViewNum="+f.viewid+"&IDPrefix="+e+"&IsFirstLoad=false&ParentNodeKey="+q+"&IncludeNodeRequired=false&IncludeNodeKey="},success:function(q,s,v){var y="";a(v.responseXML).children().first().children().each(function(){y+=
t(a(this))});return y}}},ui:{select_limit:1,initially_select:i,select_prev_on_delete:true},themes:k,core:{initially_open:p},types:{types:l,max_children:-2,max_depth:-2},plugins:m}).bind("load_node.jstree",function(){a("."+e+"check").unbind("click");a("."+e+"check").click(function(){return g(h,a(this))})}).bind("select_node.jstree",function(q,s){var v=jsTreeGetSelected(h),y={nodeid:v.id,nodename:v.text,iconurl:v.iconurl,cswnbtnodekey:v.$item.attr("cswnbtnodekey"),viewid:f.viewid};if(y.nodename=="More..."){v=
"";var G=s.inst._get_parent(s.rslt.obj);if(G!=-1)v=G.attr("cswnbtnodekey");if(v==undefined)v="";CswAjaxXml({url:j,data:"UsePaging="+f.UsePaging+"&ViewNum="+f.viewid+"&IDPrefix="+e+"&IsFirstLoad=false&ParentNodeKey="+v+"&IncludeNodeRequired=false&IncludeNodeKey="+y.cswnbtnodekey,success:function(B){function N(){K.length>0&&h.jstree("create","#"+O,"after",{attr:{id:K.attr("id"),rel:K.attr("rel"),cswnbtnodekey:K.attr("cswnbtnodekey")},data:K.children("content").children("name").text(),state:K.attr("state")},
function(){O=K.attr("id");K=K.next();N()},true,true)}h.jstree("remove","#"+e+y.nodeid);var P=jsTreeGetSelected(h),O=e+P.id,K=B.children().first();N()}})}else{a("."+e+"check").attr("checked","");f.onSelectNode(y)}});a("."+e+"check").click(function(){return g(h,a(this))});h.find("li").each(function(){var q=a(this);q.children("ins").attr("id",q.attr("id")+"_expand")})}else h.append("No Results")}});return h},selectNode:function(d){var f={newnodeid:"",newcswnbtnodekey:""};d&&a.extend(f,d);d=a(this).children(".treediv");
var e=d.attr("id");d.jstree("select_node","#"+e+f.newnodeid)}};a.fn.CswNodeTree=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswNodeTree")}})(jQuery);(function(a){var g={init:function(b){var d={ID:"",NodeTypesUrl:"/NbtWebApp/wsNBT.asmx/getNodeTypes",nodetypeid:"",onSelect:function(){},onSuccess:function(){}};b&&a.extend(d,b);b=a(this);b.contents().remove();var f=a('<select id="'+d.ID+'_sel" />').appendTo(b);f.change(function(){d.onSelect(f.val())});CswAjaxXml({url:d.NodeTypesUrl,data:"",success:function(e){e.children("nodetype").each(function(){var h=a(this);f.append('<option value="'+h.attr("id")+'">'+h.attr("name")+"</option>")});d.onSuccess()}});
return f},value:function(){return a(this).val()}};a.fn.CswNodeTypeSelect=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswNodeTypeSelect")}})(jQuery);(function(a){var g={init:function(b){var d={ID:"",Value:"",MinValue:"",MaxValue:"",Precision:"",ReadOnly:false,Required:false,onchange:function(){}};b&&a.extend(d,b);b=a(this);b.contents().remove();if(d.ReadOnly)b.append(d.Value);else{b=a('<input type="text" class="textinput number" id="'+d.ID+'" name="'+d.ID+'" value="'+d.Value+'" />"').appendTo(b).change(d.onchange);if(d.MinValue!=undefined){jQuery.validator.addMethod(d.ID+"_validateFloatMinValue",function(f,e){return this.optional(e)||validateFloatMinValue(a(e).val(),
d.MinValue)},"Number must be greater than or equal to "+d.MinValue);b.addClass(d.ID+"_validateFloatMinValue")}if(d.MaxValue!=undefined){jQuery.validator.addMethod(d.ID+"_validateFloatMaxValue",function(f,e){return this.optional(e)||validateFloatMaxValue(a(e).val(),d.MaxValue)},"Number must be less than or equal to "+d.MaxValue);b.addClass(d.ID+"_validateFloatMaxValue")}if(d.Precision==undefined||d.Precision<=0){jQuery.validator.addMethod(d.ID+"_validateInteger",function(f,e){return this.optional(e)||
validateInteger(a(e).val())},"Value must be an integer");b.addClass(d.ID+"_validateInteger")}else{jQuery.validator.addMethod(d.ID+"_validateFloatPrecision",function(f,e){return this.optional(e)||validateFloatPrecision(a(e).val(),d.Precision)},"Value must be numeric");b.addClass(d.ID+"_validateFloatPrecision")}d.Required&&b.addClass("required")}},value:function(){return a(this).find("input").val()},setValue:function(b){a(this).find("input").val(b)}};a.fn.CswNumberTextBox=function(b){if(g[b])return g[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswNumberTextBox")}})(jQuery);(function(a){a.CswQueryString=function(){for(var g={},b,d=/\+/g,f=/([^&=]+)=?([^&]*)/g,e=window.location.search.substring(1);b=f.exec(e);)g[decodeURIComponent(b[1].replace(d," "))]=decodeURIComponent(b[2].replace(d," "));return g}})(jQuery);(function(a){a.fn.CswQuickLaunch=function(g){var b={Url:"/NbtWebApp/wsNBT.asmx/getQuickLaunchItems",onLinkClick:function(){},onSuccess:function(){}};g&&a.extend(b,g);var d=a(this);CswAjaxXml({url:b.Url,data:"{ UserId: '' }",success:function(f){var e=a('<div id="quicklaunchdiv"><ul id="launchitems"></ul></div>').appendTo(d).children();f.children("items").children("item").each(function(){var h=a(this),j={type:h.attr("type"),viewmode:h.attr("viewmode"),text:h.attr("text"),url:h.attr("url"),viewid:h.attr("itemid")};
switch(j.type){case "view":a('<li><a href="#'+j.text+"_"+j.type+"_"+j.viewmode+"_"+j.viewid+'">'+j.text+"</a></li>").appendTo(e).children("a").click(function(){b.onLinkClick(j);return false});break;case "action":a("<li><a href="+j.url+">"+j.text+"</a></li>").appendTo(e)}});b.onSuccess()}});return this}})(jQuery);var CswSearch_CssClasses={nodetype_select:{name:"csw_search_nodetype_select"},property_select:{name:"csw_search_property_select"}};
(function(a){a.fn.CswSearch=function(g){function b(k){var l={$link:""};k&&a.extend(l,k);if("Advanced"===l.$link.text()){a("."+ViewBuilder_CssClasses.subfield_select.name).each(function(){a(this).show()});a("."+ViewBuilder_CssClasses.filter_select.name).each(function(){a(this).show()});a("."+ViewBuilder_CssClasses.default_filter.name).each(function(){a(this).hide()});l.$link.text("Simple");k=false}else{a("."+ViewBuilder_CssClasses.subfield_select.name).each(function(){a(this).hide()});a("."+ViewBuilder_CssClasses.filter_select.name).each(function(){a(this).hide()});
a("."+ViewBuilder_CssClasses.default_filter.name).each(function(){a(this).show()});l.$link.text("Advanced");k=true}return k}function d(){for(var k=2;k<=i.propsCount;){var l=i.$searchTable.CswTable("cell",k,1).attr({align:"right"}),p=a("<span>&nbsp;and&nbsp;</span>");l.append(p);k++}var o=1;i.$propsXml.children("property").each(function(){var t=a(this),u=i.$searchTable.CswTable("cell",o,2),q=makeId({ID:"viewbuilderpropid",suffix:t.attr("viewbuilderpropid"),prefix:i.idprefix});u.CswDOM("span",{ID:q,
value:t.attr("metadatatypename"),cssclass:ViewBuilder_CssClasses.metadatatype_static.name}).attr("relatedidtype",t.attr("relatedidtype"));i.selectedSubfieldVal="";i.selectedFilterVal="";u=t.attr("filtarbitraryid");i.$searchTable.CswViewPropFilter("init",{idprefix:i.idprefix,propRow:o,firstColumn:3,includePropertyName:true,$propsXml:t,filtarbitraryid:u});o++});i.bottomRow=o;i.bottomCell=1;i.searchtype="viewsearch";h()}function f(){var k=i.$searchTable.CswTable("cell",1,2).empty(),l=makeId({ID:"nodetype_select",
prefix:i.idprefix});l=a(xmlToString(i.$nodeTypesXml.children("select"))).attr("id",l).attr("name",l).attr("class",CswSearch_CssClasses.nodetype_select.name).change(function(){var p=a(this);p={nodetypeorobjectclassid:p.val(),relatedidtype:p.find(":selected").attr("title"),cswnbtnodekey:"",$parent:i.$searchTable,$nodeTypesSelect:p};a.extend(i,p);e()});i.$nodeTypesSelect=l;i.relatedidtype=l.find(":selected").attr("title");i.nodetypeorobjectclassid!==""&&l.val(i.nodetypeorobjectclassid).attr("selected",
true);k.append(l);k=i.$searchTable.CswTable("cell",1,3).empty();l=makeId({ID:"property_select",prefix:i.idprefix});l=a(xmlToString(i.$propsXml.children("properties").children("select"))).attr("id",l).attr("name",l).attr("class",CswSearch_CssClasses.property_select.name).change(function(){var p=a(this).val(),o={propertyid:p,selectedSubfieldVal:"",selectedFilterVal:"",$selectedPropXml:i.$propsXml.children("propertyfilters").children("property[viewbuilderpropid="+p+"]")};a.extend(i,o);i.$searchTable.CswViewPropFilter("init",
{idprefix:i.idprefix,propRow:1,firstColumn:3,includePropertyName:false,$propsXml:i.$selectedPropXml,viewbuilderpropid:p})});i.propertyid!==""&&l.val(i.propertyid).attr("selected",true);k.append(l);i.propertyid=l.find(":selected").val();i.$selectedPropXml=i.$propsXml.children("propertyfilters").children("property[viewbuilderpropid="+i.propertyid+"]");i.$searchTable.CswViewPropFilter("init",{idprefix:i.idprefix,propRow:1,firstColumn:3,includePropertyName:false,$propsXml:i.$selectedPropXml,viewbuilderpropid:i.propertyid});
i.bottomRow=i.propsCount+1;i.bottomCell=2;i.searchtype="nodetypesearch";h()}function e(){CswAjaxXml({url:i.getNewPropsUrl,data:"RelatedIdType="+i.relatedidtype+"&NodeTypeOrObjectClassId="+i.nodetypeorobjectclassid+"&IdPrefix="+i.idprefix+"&NodeKey="+i.cswnbtnodekey,success:function(k){i.$propsXml=k;f()}})}function h(){var k=i.$searchTable,l=i.bottomCell,p=l+1,o=i.bottomRow;if(i.searchtype==="nodetypesearch"){k=i.$searchTable.CswTable("cell",i.bottomRow,i.bottomCell).empty();p=makeId({prefix:i.idprefix,
ID:"split_cell_table"});k=k.CswTable("init",{ID:p,cellpadding:1,cellspacing:1,cellalign:"left",align:"left"});l=1;p=2;o=1}l=k.CswTable("cell",o,l).empty();var t=makeId({ID:"clear_button",prefix:i.idprefix});l.CswButton({ID:t,enabledText:"Clear",disabledText:"Clear",disableOnClick:false,onclick:function(){m.empty();var q=makeId({prefix:i.idprefix,ID:"search_tbl"});i.$searchTable=m.CswTable("init",{ID:q,cellpadding:1,cellspacing:1,cellalign:"center",align:"center"});switch(i.searchtype){case "nodetypesearch":f();
case "viewsearch":d()}}});k=k.CswTable("cell",o,p).empty();p=makeId({ID:"advanced_options",prefix:i.idprefix});var u=k.CswDOM("link",{ID:p,href:"#advanced",value:"Simple"}).click(function(){i.isHidden=b({$link:u})});if(i.isHidden)i.isHidden=b({$link:u});k=i.$searchTable.CswTable("cell",i.bottomRow,i.searchBtnCell).attr({align:"right"}).empty();p=makeId({ID:"search_button",prefix:i.idprefix});k.CswButton({ID:p,enabledText:"Search",disabledText:"Searching",enableAfterClick:true,onclick:function(){n()}})}
function j(){CswAjaxXml({url:i.getClientSearchXmlUrl,data:"ViewIdNum="+i.viewid+"&SelectedNodeTypeIdNum="+i.nodetypeorobjectclassid+"&IdPrefix="+i.idprefix+"&NodeKey="+i.cswnbtnodekey,success:function(k){m.empty();i.searchtype=k.attr("searchtype");var l=makeId({prefix:i.idprefix,ID:"search_tbl"});i.$searchTable=m.CswTable("init",{ID:l,cellpadding:1,cellspacing:1,cellalign:"left",align:"center"});i.$searchTable.css("background-color","0099FF");i.$searchTable.attr("frame","border");switch(i.searchtype){case "nodetypesearch":i.$nodeTypesXml=
k.children("nodetypes");i.$propsXml=k.children("viewbuilderprops");f();break;case "viewsearch":i.$propsXml=k.children("properties");i.propsCount=k.children("properties").children("property").size();d()}}})}function n(){var k,l=[],p;switch(i.searchtype){case "nodetypesearch":p=i.doNodeSearchUrl;var o=i.$nodeTypesSelect.val();i.relatedidtype=i.$nodeTypesSelect.find(":selected").attr("title");a("."+CswSearch_CssClasses.property_select.name).each(function(){var t=a(this),u=t.text(),q=t.val();u=i.$propsXml.children("propertyfilters").children('property[propname="'+
u+'"][viewbuilderpropid="'+q+'"]').attr("fieldtype");t=t.CswViewPropFilter("getFilterJson",{nodetypeorobjectclassid:o,relatedidtype:i.relatedidtype,fieldtype:u,idprefix:i.idprefix,$parent:i.$searchTable,viewbuilderpropid:q});l.push(t)});k={viewbuilderprops:l};break;case "viewsearch":p=i.doViewSearchUrl;i.$propsXml.children("property").each(function(){var t=a(this),u=t.attr("filtarbitraryid");t=t.CswViewPropFilter("getFilterJson",{idprefix:i.idprefix,$parent:i.$searchTable,filterarbitraryid:u});l.push(t)});
k={viewprops:l,viewid:i.viewid}}k&&CswAjaxJSON({url:p,data:'{SearchJson: "'+jsonToString(k)+'"}',success:function(t){i.viewid=t.sessionviewid;i.searchtype="viewsearch";j();i.onSearchSubmit({viewid:t.sessionviewid,viewmode:t.viewmode})}})}var i={$parent:"",$searchTable:"",getNewPropsUrl:"/NbtWebApp/wsNBT.asmx/getNodeTypeSearchProps",doViewSearchUrl:"/NbtWebApp/wsNBT.asmx/doViewSearch",doNodeSearchUrl:"/NbtWebApp/wsNBT.asmx/doNodeTypeSearch",getSearchableViewsUrl:"/NbtWebApp/wsNBT.asmx/getSearchableViews",
getClientSearchXmlUrl:"/NbtWebApp/wsNBT.asmx/getClientSearchXml",viewid:"",nodetypeorobjectclassid:"",propertyid:"",cswnbtnodekey:"",relatedidtype:"",idprefix:"csw",propsCount:1,isHidden:true,$propsXml:"",$selectedPropXml:"",$nodeTypesXml:"",$nodeTypesSelect:"",onSearchSubmit:function(){},selectedPropVal:"",selectedSubfieldVal:"",selectedFilterVal:"",bottomRow:2,bottomCell:1,propRow:"",clearBtnCell:1,searchBtnCell:6,searchtype:""};g&&a.extend(i,g);g=a(this);i.$searchTable=g.CswDOM("div",{ID:"CswSearchForm",
prefix:i.idprefix});var m=i.$searchTable.CswDOM("span").CswDOM("div",{ID:"search_criteria_div",prefix:i.idprefix});j();return i.$searchTable}})(jQuery);(function(a){a.fn.CswTable=function(g){function b(h){return h.children("tbody").children("tr").length}function d(h){h=h.children("tbody").children("tr");for(var j=0,n=0;n<h.length;n++){var i=a(h[n]).children("td");if(i.length>j)j=i.length}return j}function f(h,j,n){var i=null;if(h.length>0&&j!=undefined&&j!=""&&n!=undefined&&n!=""){if(j<=0){log("error: row must be greater than 1, got: "+j);j=1}if(n<=0){log("error: col must be greater than 1, got: "+n);n=1}for(;j>h.children("tbody").children("tr").length;)h.append("<tr></tr>");
for(i=a(h.children("tbody").children("tr")[j-1]);n>i.children("td").length;){var m=h.attr("cellalign");if(i.children("td").length==0&&h.attr("FirstCellRightAlign")=="true"||i.children("td").length%2==0&&h.attr("OddCellRightAlign")=="true")m="right";m=a('<td class="'+h.attr("cellcssclass")+'" align="'+m+'" valign="'+h.attr("cellvalign")+'"></td>').appendTo(i);h.trigger("CswTable_onCreateCell",[h,m,j,i.children("td").length])}i=a(i.children("td")[n-1])}return i}var e={init:function(h){var j={ID:"",
prefix:"",suffix:"",TableCssClass:"",CellCssClass:"",cellpadding:0,cellspacing:0,cellalign:"top",width:"",align:"",cellalign:"",cellvalign:"top",onCreateCell:function(){},FirstCellRightAlign:false,OddCellRightAlign:false};h&&a.extend(j,h);h=makeId({ID:j.ID,prefix:j.prefix,suffix:j.suffix});h=a('<table id="'+h+'"></table>');h.addClass(j.TableCssClass);h.attr("width",j.width);h.attr("align",j.align);h.attr("cellpadding",j.cellpadding);h.attr("cellspacing",j.cellspacing);h.attr("border","0");h.attr("cellalign",
j.cellalign);h.attr("cellvalign",j.cellvalign);h.attr("cellcssclass",j.CellCssClass);h.attr("FirstCellRightAlign",j.FirstCellRightAlign);h.attr("OddCellRightAlign",j.OddCellRightAlign);h.bind("CswTable_onCreateCell",function(n,i,m,k,l){j.onCreateCell(n,i,m,k,l);n.stopPropagation()});h.trigger("CswTable_onCreateCell",[h,h.find("td"),1,1]);a(this).append(h);return h},cell:function(h,j){var n=a(this);return f(n,h,j)},maxrows:function(){return b(a(this))},maxcolumns:function(){return d(a(this))},finish:function(h){for(var j=
a(this),n=b(j),i=d(j),m=1;m<=n;m++)for(var k=1;k<=i;k++){var l=f(j,m,k);if(l.contents().length==0)h!=null?h(l,m,k):l.append("&nbsp;")}},findRow:function(h){var j=a(this).children("tbody").children("tr");if(h!=""&&h!=null)j=j.filter(h);return j},findCell:function(h){var j=a(this).children("tbody").children("tr").children("td");if(h!=""&&h!=null)j=j.filter(h);return j},rowFindCell:function(h,j){var n=h.children("td");if(j!=""&&j!=null)n=n.filter(j);return n}};if(e[g])return e[g].apply(this,Array.prototype.slice.call(arguments,
1));else if(typeof g==="object"||!g)return e.init.apply(this,arguments);else a.error("Method "+g+" does not exist on CswTable")}})(jQuery);(function(a){var g={init:function(b){var d={ID:"",prefix:"",Checked:"",ReadOnly:false,Required:false,onchange:function(){}};b&&a.extend(d,b);b=a(this);b.empty();var f=makeId({prefix:d.prefix,ID:d.ID});if(d.Checked==""||d.Checked==undefined||d.Checked==null)d.Checked="null";if(d.ReadOnly)switch(d.Checked){case "true":b.append("Yes");break;case "false":b.append("No")}else{var e;switch(d.Checked){case "true":e=CswImageButton_ButtonType.CheckboxTrue;break;case "false":e=CswImageButton_ButtonType.CheckboxFalse;
break;default:e=CswImageButton_ButtonType.CheckboxNull}b.CswImageButton({ID:f,ButtonType:e,AlternateText:d.Checked,onClick:function(h){var j=d.Required,n=h.attr("alt"),i=CswImageButton_ButtonType.CheckboxNull,m="null";if(n=="null"){i=CswImageButton_ButtonType.CheckboxTrue;m="true"}else if(n=="false")if(j=="true"){i=CswImageButton_ButtonType.CheckboxTrue;m="true"}else{i=CswImageButton_ButtonType.CheckboxNull;m="null"}else if(n=="true"){i=CswImageButton_ButtonType.CheckboxFalse;m="false"}h.attr("alt",
m);h=i;d.onchange();return h}})}},value:function(){return a(this).attr("alt")}};a.fn.CswTristateCheckBox=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswTristateCheckBox")}})(jQuery);(function(a){a.fn.CswViewEditor=function(g){function b(x){o=x}function d(x,z){var E=false;if(a("#"+i.ID+"_all:checked").length>0)E=true;l.text("");m.CswWizard("button","next","disable");CswAjaxJSON({url:i.ViewGridUrl,data:"{ All: "+E+" }",success:function(C){p.empty();var F=a('<div id="'+i.ID+'_gp" style="width:100%; height:20px;" />').appendTo(p),w=a('<table id="'+i.ID+'_gt" />').appendTo(p);a.extend(C,{autowidth:true,height:180,onSelectRow:function(A,H){if(H){q.CswButton("enable");s.CswButton("enable")}else{q.CswButton("disable");
s.CswButton("disable")}l.text(f(w,i.ColumnViewName));m.CswWizard("button","next","enable")},pager:F});w.jqGrid(C).hideCol(i.ColumnViewId);if(z!=undefined){w.setSelection(e(w,z));w.CswNodeGrid("scrollToSelectedRow")}x(w)}})}function f(x,z){var E=x.jqGrid("getGridParam","selrow");return x.jqGrid("getCell",E,z)}function e(x,z){var E=x.jqGrid("getCol",i.ColumnViewId,true),C=0,F;for(F in E)if(E[F].value==z)C=E[F].id;return C}function h(x,z,E){var C,F,w;IsAdministrator({Yes:function(){x.CswTable("cell",
z,1).append(E);var A=x.CswTable("cell",z,2),H=x.attr("id");C=a('<select id="'+H+'_vissel" />').appendTo(A);C.append('<option value="User">User:</option>');C.append('<option value="Role">Role:</option>');C.append('<option value="Global">Global</option>');F=A.CswNodeSelect("init",{ID:H+"_visrolesel",objectclass:"RoleClass"}).hide();w=A.CswNodeSelect("init",{ID:H+"_visusersel",objectclass:"UserClass"});C.change(function(){var I=C.val();if(I=="Role"){F.show();w.hide()}else if(I=="User"){F.hide();w.show()}else{F.hide();
w.hide()}})}});return{getvisibilityselect:function(){return C},getvisroleselect:function(){return F},getvisuserselect:function(){return w}}}function j(x,z){var E=n(x,D);z.jstree({html_data:{data:E.htmlstring},ui:{select_limit:1},types:{types:E.types,max_children:-2,max_depth:-2},plugins:["themes","html_data","ui","types","crrm"]});z.find(".vieweditor_childselect").change(function(){var w=a(this),A=w.find("option:selected").data("optionviewxml");w.attr("arbid")=="root"?a(A).appendTo(D):a(A).appendTo(D.find('[arbitraryid="'+
w.attr("arbid")+'"]'));j(x,z)});z.find(".vieweditor_deletespan").each(function(){var w=a(this);w.CswImageButton({ButtonType:CswImageButton_ButtonType.Delete,AlternateText:"Delete",ID:w.attr("arbid")+"_delete",onClick:function(A){A=A.parent();D.find('[arbitraryid="'+A.attr("arbid")+'"]').remove();j(x,z);return CswImageButton_ButtonType.None}})});x==5&&z.find(".vieweditor_addfilter").each(function(){var w=a(this),A=w.CswTable({ID:i.ID+"_propfilttbl"});A.css("display","inline-table");A.CswViewPropFilter("init",
{viewxml:xmlToString(D),proparbitraryid:w.attr("proparbid"),filtarbitraryid:"",viewbuilderpropid:"",idprefix:i.ID,propRow:1,firstColumn:1,includePropertyName:false,selectedSubfieldVal:"",selectedFilterVal:"",autoFocusInput:false});A.CswTable("cell",1,5).CswButton("init",{ID:"addfiltbtn",prefix:i.ID,enabledText:"Add",disabledText:"Adding",onclick:function(){var H=A.CswViewPropFilter("getFilterJson",{idprefix:i.ID,$parent:w,proparbitraryid:w.attr("proparbid")});A.CswViewPropFilter("makeFilter",{viewxml:xmlToString(D),
filtJson:H,onSuccess:function(I){var L=D.find('[arbitraryid="'+w.attr("proparbid")+'"]');a(xmlToString(I)).appendTo(L);j(x,z)}})}})});if(x==6){var C=R.CswTable("cell",1,2),F=f(o,i.ColumnViewMode);z.find(".vieweditor_viewrootlink").click(function(){C.empty()});z.find(".vieweditor_viewrellink").click(function(){$a=a(this);C.empty();var w=D.find('[arbitraryid="'+$a.attr("arbid")+'"]'),A=C.CswTable({ID:i.ID+"_editrel",FirstCellRightAlign:true});A.CswTable("cell",1,1).append("Allow Deleting");var H=a('<input type="checkbox" id="'+
i.ID+'_adcb" />').appendTo(A.CswTable("cell",1,2));w.attr("allowdelete").toLowerCase()=="true"&&H.attr("checked","true");A.CswTable("cell",2,1).append("Group By");var I=a('<select id="'+i.ID+'_gbs" />').appendTo(A.CswTable("cell",2,2));CswAjaxXml({url:i.PropNamesUrl,data:"Type="+w.attr("secondtype")+"&Id="+w.attr("secondid"),success:function(J){I.empty();a('<option value="">[None]</option>').appendTo(I);J.children().each(function(){var M=a(this),Q=a('<option value="'+M.attr("propid")+'">'+M.attr("propname")+
"</option>").appendTo(I).data("propxml",M);w.attr("groupbypropid")==M.attr("propid")&&w.attr("groupbyproptype")==M.attr("proptype")&&w.attr("groupbypropname")==M.attr("propname")&&Q.attr("selected","true")})}});var L;if(F=="Tree"){A.CswTable("cell",3,1).append("Show In Tree");L=a('<input type="checkbox" id="'+i.ID+'_stcb" />').appendTo(A.CswTable("cell",3,2));w.attr("showintree").toLowerCase()=="true"&&L.attr("checked","true")}A.CswTable("cell",4,2).CswButton({ID:i.ID+"_saverel",enabledText:"Apply",
disableOnClick:false,onclick:function(){L!=undefined&&w.attr("showintree",L.is(":checked"));w.attr("allowdelete",H.is(":checked"));if(I.val()!=""){var J=I.find(":selected").data("propxml");w.attr("groupbypropid",J.attr("propid"));w.attr("groupbyproptype",J.attr("proptype"));w.attr("groupbypropname",J.attr("propname"))}else{w.attr("groupbypropid","");w.attr("groupbyproptype","");w.attr("groupbypropname","")}}})});z.find(".vieweditor_viewproplink").click(function(){$a=a(this);C.empty();if(F=="Grid"){var w=
D.find('[arbitraryid="'+$a.attr("arbid")+'"]'),A=C.CswTable({ID:i.ID+"_editprop",FirstCellRightAlign:true});A.CswTable("cell",1,1).append("Sort By");var H=a('<input type="checkbox" id="'+i.ID+'_sortcb" />').appendTo(A.CswTable("cell",1,2));w.attr("sortby").toLowerCase()=="true"&&H.attr("checked","true");A.CswTable("cell",2,1).append("Grid Column Order");var I=a('<input type="text" id="'+i.ID+'_gcotb" />').appendTo(A.CswTable("cell",2,2));I.val(w.attr("order"));A.CswTable("cell",3,1).append("Grid Column Width (in characters)");
var L=a('<input type="text" id="'+i.ID+'_gcwtb" />').appendTo(A.CswTable("cell",3,2));L.val(w.attr("width"));A.CswTable("cell",4,2).CswButton({ID:i.ID+"_saveprop",enabledText:"Apply",disableOnClick:false,onclick:function(){w.attr("sortby",H.is(":checked"));w.attr("order",I.val());w.attr("width",L.val())}})}});z.find(".vieweditor_viewfilterlink").click(function(){$a=a(this);C.empty();var w=D.find('[arbitraryid="'+$a.attr("arbid")+'"]'),A=C.CswTable({ID:i.ID+"_editfilt",FirstCellRightAlign:true});A.CswTable("cell",
1,1).append("Case Sensitive");var H=a('<input type="checkbox" id="'+i.ID+'_casecb" />').appendTo(A.CswTable("cell",1,2));w.attr("casesensitive").toLowerCase()=="true"&&H.attr("checked","true");A.CswTable("cell",4,2).CswButton({ID:i.ID+"_savefilt",enabledText:"Apply",disableOnClick:false,onclick:function(){w.attr("casesensitive",H.is(":checked"))}})})}}function n(x,z){var E={},C=z.attr("arbitraryid"),F=z.get(0).nodeName,w,A,H=false,I=true,L;if(F.toLowerCase()=="treeview"){if(x==3)I=false;C="root";
w=z.attr("viewname");A="root";E.root={icon:{image:z.attr("iconfilename")}};L="vieweditor_viewrootlink"}else if(F.toLowerCase()=="relationship"){if(x==3)I=false;if(x==4)I=false;w=z.attr("secondname");F=z.attr("propname");if(F!=""&&F!=undefined)w+=z.attr("propowner")=="First"?" (by "+z.attr("firstname")+"'s "+F+")":" (by "+F+")";A=z.attr("secondtype")+"_"+z.attr("secondid");E[A]={icon:{image:z.attr("secondiconfilename")}};L="vieweditor_viewrellink"}else if(F.toLowerCase()=="property"){if(x<=3)H=true;
if(x==5)I=false;w=z.attr("name");A="property";E.property={icon:{image:"Images/view/property.gif"}};L="vieweditor_viewproplink"}else if(F.toLowerCase()=="filter"){if(x<=4)H=true;w=z.attr("subfieldname")+" "+z.attr("filtermode")+" "+z.attr("value");A="filter";E.filter={icon:{image:"Images/view/filter.gif"}};L="vieweditor_viewfilterlink"}var J="";if(!H){J='<li id="'+C+'" ';J+='    rel="'+A+'" ';J+='    class="jstree-open" ';J+=">";J+=' <a href="#" class="'+L+'" arbid="'+C+'">'+w+"</a>";if(C!="root")J+=
' <span style="" class="vieweditor_deletespan" arbid="'+C+'"></span>';J+="<ul>";z.children().each(function(){var M=n(x,a(this));J+=M.htmlstring;a.extend(E,M.types)});if(!I)if(x==5)J+='<li><span class="vieweditor_addfilter" proparbid="'+C+'"></span></li>';else{J+='<li><select id="'+x+"_"+C+'_child" arbid="'+C+'" class="vieweditor_childselect"></select></li>';CswAjaxXml({url:i.ChildOptionsUrl,data:"StepNo="+x+"&ArbitraryId="+C+"&ViewXml="+xmlToString(D),success:function(M){var Q=a("#"+x+"_"+C+"_child");
Q.empty();Q.append('<option value="">Select...</option>');M.children().each(function(){var S=a(this),W=a(S.attr("value"));a('<option value="'+W.attr("arbitraryid")+'">'+S.attr("name")+"</option>").appendTo(Q).data("optionviewxml",S.attr("value"))})}})}J+="</ul>";J+="</li>"}return{htmlstring:J,types:E}}var i={ViewGridUrl:"/NbtWebApp/wsNBT.asmx/getViewGrid",ViewInfoUrl:"/NbtWebApp/wsNBT.asmx/getViewInfo",SaveViewUrl:"/NbtWebApp/wsNBT.asmx/saveViewInfo",CopyViewUrl:"/NbtWebApp/wsNBT.asmx/copyView",DeleteViewUrl:"/NbtWebApp/wsNBT.asmx/deleteView",
ChildOptionsUrl:"/NbtWebApp/wsNBT.asmx/getViewChildOptions",PropNamesUrl:"/NbtWebApp/wsNBT.asmx/getPropNames",viewid:"",ID:"vieweditor",ColumnViewName:"VIEWNAME",ColumnViewId:"NODEVIEWID",ColumnViewMode:"VIEWMODE",onCancel:function(){},onFinish:function(){}};g&&a.extend(i,g);g=a(this);g=a("<div></div>").appendTo(g);var m=g.CswWizard("init",{ID:i.ID+"_wizard",Title:"Edit View",StepCount:6,Steps:{1:"Choose a View",2:"Edit View Attributes",3:"Add Relationships",4:"Select Properties",5:"Set Filters",
6:"Fine Tuning"},FinishText:"Save and Finish",onNext:function(x){switch(x){case 2:CswAjaxXml({url:i.ViewInfoUrl,data:"ViewId="+f(o,i.ColumnViewId),success:function(E){D=E;y.val(D.attr("viewname"));G.val(D.attr("category"));if(B.getvisibilityselect()!=undefined){B.getvisibilityselect().val(D.attr("visibility")).trigger("change");B.getvisroleselect().val("nodes_"+D.attr("visibilityroleid"));B.getvisuserselect().val("nodes_"+D.attr("visibilityuserid"))}D.attr("formobile")=="true"&&N.attr("checked","true");
E=D.attr("mode");P.text(E);K.CswNumberTextBox("setValue",D.attr("width"));if(E=="Grid"){O.show();K.show()}else{O.hide();K.hide()}}});break;case 3:if(D!=undefined){D.attr("viewname",y.val());D.attr("category",G.val());D.attr("visibility",B.getvisibilityselect().val());x=B.getvisroleselect().val();if(x!=""&&x!=undefined)x=x.substr(6);var z=B.getvisuserselect().val();if(z!=""&&z!=undefined)z=z.substr(6);D.attr("visibilityroleid",x);D.attr("visibilityuserid",z);D.attr("formobile",N.attr("checked")=="true");
D.attr("width",K.CswNumberTextBox("value"))}j(3,T);break;case 4:j(4,U);break;case 5:j(5,V);break;case 6:j(6,R.CswTable("cell",1,1))}},onPrevious:function(x){switch(x){case 3:j(3,T);break;case 4:j(4,U);break;case 5:j(5,V);break;case 6:j(6,R.CswTable("cell",1,1))}},onBeforePrevious:function(x){return x!=2||confirm("You will lose any changes made to the current view if you continue.  Are you sure?")},onCancel:i.onCancel,onFinish:function(){var x=f(o,i.ColumnViewId);CswAjaxXml({url:i.SaveViewUrl,data:"ViewId="+
x+"&ViewXml="+xmlToString(D),success:function(){i.onFinish(x,f(o,i.ColumnViewMode))}})}}),k=m.CswWizard("div",1);k.append("A <em>View</em> controls the arrangement of information you see in a tree or grid.  Views are useful for defining a user's workflow or for creating elaborate search criteria. This wizard will take you step by step through the process of creating a new View or editing an existing View.<br/><br/>");k.append("Select a View to Edit:&nbsp;");var l=a('<span id="'+i.ID+'_selviewname" style="font-weight: bold"></span>').appendTo(k),
p=a("<div></div>").appendTo(k),o;d(b,i.viewid);var t=k.CswTable({ID:i.ID+"_1_btntbl",width:"100%"});k=t.CswTable("cell",1,1);t=t.CswTable("cell",1,2);t.attr("align","right");var u=a("<div></div>").appendTo(t);IsAdministrator({Yes:function(){a('<input type="checkbox" id="'+i.ID+'_all">Show Other Roles/Users</input>').appendTo(u).click(function(){d(b)})}});var q=k.CswButton({ID:i.ID+"_copyview",enabledText:"Copy View",disableOnClick:true,onclick:function(){var x=f(o,i.ColumnViewId);x!=""&&x!=undefined&&
CswAjaxJSON({url:i.CopyViewUrl,data:"{ ViewId: "+x+" }",success:function(z){d(b,z.copyviewid)}})}});q.CswButton("disable");var s=k.CswButton({ID:i.ID+"_deleteview",enabledText:"Delete View",disableOnClick:true,onclick:function(){var x=f(o,i.ColumnViewId);x!=""&&x!=undefined&&confirm("Are you sure you want to delete: "+f(o,i.ColumnViewName))&&CswAjaxJSON({url:i.DeleteViewUrl,data:"{ ViewId: "+x+" }",success:function(){d(b);q.CswButton("disable")}})}});s.CswButton("disable");var v=k.CswButton({ID:i.ID+
"_newview",enabledText:"Create New View",disableOnClick:false,onclick:function(){a.CswDialog("AddViewDialog",{onAddView:function(x){o=d(b,x)},onClose:function(){v.CswButton("enable")},makeVisibilitySelect:h})}});m.CswWizard("button","next","disable");k=m.CswWizard("div",2).CswTable({ID:i.ID+"_tbl2",FirstCellRightAlign:true});k.CswTable("cell",1,1).append("View Name:");var y=a('<input type="textbox" id="'+i.ID+'_viewname" />').appendTo(k.CswTable("cell",1,2));k.CswTable("cell",2,1).append("Category:");
var G=a('<input type="textbox" id="'+i.ID+'_category" />').appendTo(k.CswTable("cell",2,2)),B=h(k,3,"View Visibility:");k.CswTable("cell",4,1).append("For Mobile:");var N=a('<input type="checkbox" id="'+i.ID+'_formobile" />').appendTo(k.CswTable("cell",4,2));k.CswTable("cell",5,1).append("Display Mode:");var P=k.CswTable("cell",5,2).append('<span id="'+i.ID+'_displaymode"></span>'),O=k.CswTable("cell",6,1).append("Grid Width (in characters):"),K=k.CswTable("cell",6,2);K.CswNumberTextBox("init",{ID:i.ID+
"_gridwidth",Value:"",MinValue:"1",MaxValue:"",Precision:"0",onchange:function(){}});k=m.CswWizard("div",3);k.append("Add relationships from the select boxes below:<br/><br/>");var T=a("<div />").appendTo(k);k=m.CswWizard("div",4);k.append("Add properties from the select boxes below:<br/><br/>");var U=a("<div />").appendTo(k);k=m.CswWizard("div",5);k.append("Add filters by selecting properties from the tree:<br/><br/>");var V=a("<div />").appendTo(k);k=m.CswWizard("div",6);k.append("Select what you want to edit from the tree:<br/><br/>");
var R=k.CswTable({ID:i.ID+"_6_tbl"}),D;return g}})(jQuery);var ViewBuilder_CssClasses={subfield_select:{name:"csw_viewbuilder_subfield_select"},filter_select:{name:"csw_viewbuilder_filter_select"},default_filter:{name:"csw_viewbuilder_default_filter"},filter_value:{name:"csw_viewbuilder_filter_value"},metadatatype_static:{name:"csw_viewbuilder_metadatatype_static"}};
(function(a){function g(d,f){var e="";e={proparbitraryid:"",filtarbitraryid:"",viewbuilderpropid:"",idprefix:""};f&&a.extend(e,f);return e=e.filtarbitraryid!==""&&e.filtarbitraryid!==undefined?makeId({ID:d+"_filtarbitraryid",prefix:e.idprefix,suffix:e.filtarbitraryid}):e.viewbuilderpropid!==""&&e.viewbuilderpropid!==undefined?makeId({ID:d+"_viewbuilderpropid",prefix:e.idprefix,suffix:e.viewbuilderpropid}):e.proparbitraryid!==""&&e.proparbitraryid!==undefined?makeId({ID:d+"_proparbitraryid",prefix:e.idprefix,
suffix:e.proparbitraryid}):e.idprefix!==""&&e.idprefix!==undefined?makeId({ID:d,prefix:e.idprefix}):d}var b={init:function(d){function f(n){e.$propsXml.attr("viewbuilderpropid");var i=e.$propsXml.attr("propname");if(e.includePropertyName){var m=h.CswTable("cell",e.propRow,e.firstColumn).empty(),k=g(i,n);m.CswDOM("span",{ID:k,value:i})}m=e.$propsXml.attr("fieldtype");var l=e.$propsXml.children("defaultsubfield").attr("filter");k=h.CswTable("cell",e.propRow,e.firstColumn+1).empty();var p=g("default_filter",
n);k.CswDOM("span",{ID:p,value:l,cssclass:ViewBuilder_CssClasses.default_filter.name}).attr({align:"center"}).hide();l=g("subfield_select",n);var o=a(xmlToString(e.$propsXml.children("subfields").children("select"))).attr("id",l).attr("name",l).attr("class",ViewBuilder_CssClasses.subfield_select.name).change(function(){var u={selectedSubfieldVal:a(this).val(),selectedFilterVal:""};a.extend(e,u);f(n)});e.selectedSubfieldVal!==""&&o.val(e.selectedSubfieldVal).attr("selected",true);k.append(o);p=o.find(":selected").val();
k=o.find(":selected").attr("defaultvalue");l=h.CswTable("cell",e.propRow,e.firstColumn+2).empty();var t=g("filter_select",n);p=a(xmlToString(e.$propsXml.children("propertyfilters").children("subfield[column="+p+"]").children("select"))).attr("id",t).attr("name",t).attr("class",ViewBuilder_CssClasses.filter_select.name).change(function(){var u=a(this);u={selectedSubfieldVal:o.val(),selectedFilterVal:u.val()};a.extend(e,u);f(n)});e.selectedFilterVal!==""&&p.val(e.selectedFilterVal).attr("selected",
true);l.append(p);l=h.CswTable("cell",e.propRow,e.firstColumn+3).empty();p=g("propfilter_input",n);if(m==="List")l.append(a(xmlToString($propsXml.children("filtersoptions").children("select"))));else if(m==="Logical")l.CswTristateCheckBox("init",{ID:p,Checked:k});else{m={value:k,placeholder:""};if(m.value===""||m.value===undefined){e.placeholder=i;if(e.placeholder!==o.find(":selected").text())e.placeholder+="'s "+o.find(":selected").text()}l.CswInput("init",{ID:p,type:CswInput_Types.text,cssclass:ViewBuilder_CssClasses.filter_value.name,
value:m.value,placeholder:m.placeholder,width:"200px",autofocus:e.autoFocusInput,autocomplete:"on"})}}var e={getNewPropsUrl:"/NbtWebApp/wsNBT.asmx/getViewPropFilterUI",viewid:"",viewxml:"",$propsXml:"",proparbitraryid:"",filtarbitraryid:"",viewbuilderpropid:"",idprefix:"",propRow:1,firstColumn:3,includePropertyName:false,selectedSubfieldVal:"",selectedFilterVal:"",autoFocusInput:false};d&&a.extend(e,d);var h=a(this),j={proparbitraryid:e.proparbitraryid,filtarbitraryid:e.filtarbitraryid,viewbuilderpropid:e.viewbuilderpropid,
idprefix:e.idprefix};(e.$propsXml===""||e.$propsXml===undefined)&&e.proparbitraryid!==""&&e.proparbitraryid!==undefined?CswAjaxXml({url:e.getNewPropsUrl,data:"ViewXml="+e.viewxml+"&PropArbitraryId="+e.proparbitraryid,success:function(n){e.$propsXml=n.children("propertyfilters").children("property");j.filtarbitraryid=e.$propsXml.attr("filtarbitraryid");f(j)}}):f(j);return h},getFilterJson:function(d){var f=a(this),e={nodetypeorobjectclassid:"",relatedidtype:"",fieldtype:f.attr("fieldtype"),idprefix:"",
$parent:"",proparbitraryid:"",filtarbitraryid:f.attr("filtarbitraryid"),viewbuilderpropid:""};d&&a.extend(e,d);var h={proparbitraryid:e.proparbitraryid,filtarbitraryid:e.filtarbitraryid,viewbuilderpropid:e.viewbuilderpropid,idprefix:e.idprefix},j=g("propfilter_input",h),n=g("filtersoptions_select",h);d=g("subfield_select",h);h=g("filter_select",h);var i={};j=e.$parent.CswInput("get",{ID:j});switch(e.fieldtype){case "Logical":n=j.CswTristateCheckBox("value");break;case "List":n=e.$parent.CswDOM("findelement",
{ID:n}).find(":selected").val();break;default:n=j.val()}if(n!==""){d=e.$parent.CswDOM("findelement",{ID:d}).find(":selected").text();h=e.$parent.CswDOM("findelement",{ID:h}).find(":selected").val();f=f.attr("proptype");i={nodetypeorobjectclassid:e.nodetypeorobjectclassid,relatedidtype:e.relatedidtype,proptype:f,viewbuilderpropid:e.viewbuilderpropid,filtarbitraryid:e.filtarbitraryid,proparbitraryid:e.proparbitraryid,relatedidtype:e.relatedidtype,subfield:d,filter:h,filtervalue:n}}return i},makeFilter:function(d){var f=
{url:"/NbtWebApp/wsNBT.asmx/makeViewPropFilter",viewxml:"",filtJson:"",onSuccess:function(){}};d&&a.extend(f,d);CswAjaxXml({url:f.url,data:"ViewXml="+f.viewxml+"&PropFiltJson="+jsonToString(f.filtJson),success:function(e){f.onSuccess(e)}})}};a.fn.CswViewPropFilter=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswViewPropFilter")}})(jQuery);(function(a){function g(d){var f={ID:"",ClickDelay:300,iconurl:"",type:"",viewid:"",viewname:"",viewmode:"",onSelect:function(){},$selectdiv:""};d&&a.extend(f,d);d=a("<div></div>");var e=d.CswTable("init",{ID:f.ID+"selectedtbl"}),h=e.CswTable("cell",1,1);h=a("<div />").appendTo(h);h.css("background-image",f.iconurl);h.css("width","18px");h.css("height","18px");e.CswTable("cell",1,2).append(f.viewname);f.$selectdiv.CswComboBox("TopContent",d);f.$selectdiv.attr("selectedValue",f.viewid);setTimeout(function(){f.$selectdiv.CswComboBox("toggle")},
f.ClickDelay);f.onSelect({iconurl:f.iconurl,type:f.type,viewid:f.viewid,viewname:f.viewname,viewmode:f.viewmode})}var b={init:function(d){var f={ID:"",onSelect:function(){},onSuccess:function(){},ClickDelay:300};d&&a.extend(f,d);var e=a(this);e.contents().remove();$viewtreediv=a("<div/>");e.CswComboBox("init",{ID:f.ID+"_combo",TopContent:"Select a View",SelectContent:$viewtreediv,Width:"266px"});$viewtreediv.CswViewTree({onSelect:function(h){g({ID:f.ID,ClickDelay:f.ClickDelay,iconurl:h.iconurl,type:h.type,
viewid:h.viewid,viewname:h.viewname,viewmode:h.viewmode,onSelect:f.onSelect,$selectdiv:e})},onSuccess:f.onSuccess});return e},value:function(){return a(this).attr("selectedValue")}};a.fn.CswViewSelect=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswViewSelect")}})(jQuery);(function(a){a.fn.CswViewTree=function(g){var b={ViewUrl:"/NbtWebApp/wsNBT.asmx/getViewTree",viewid:"",onSelect:function(){},onSuccess:function(){}};g&&a.extend(b,g);var d=a(this);d.contents().remove();CswAjaxXml({url:b.ViewUrl,data:"",success:function(f){var e=f.find("types").text();e=a.parseJSON(e);f=f.find("tree").children("root");f=xmlToString(f);d.jstree({xml_data:{data:f,xsl:"nest"},ui:{select_limit:1},core:{initially_open:["root"]},types:{types:e},plugins:["themes","xml_data","ui","types"]}).bind("select_node.jstree",
function(){var h=jsTreeGetSelected(d);h={iconurl:h.iconurl,type:h.$item.attr("type"),viewid:h.$item.attr("viewid"),viewname:h.text,viewmode:h.$item.attr("viewmode")};b.onSelect(h)});b.onSuccess()}});return this}})(jQuery);(function(a){function g(e){var h={cellset:"",row:"",column:"",RemoveWelcomeItemUrl:"",onSuccess:function(){}};e&&a.extend(h,e);e=a(h.cellset[2][1]);if(e.length>0){e=e.children("input").attr("welcomeid");CswAjaxJSON({url:h.RemoveWelcomeItemUrl,data:'{ "RoleId": "", "WelcomeId": "'+e+'" }',success:function(){h.onSuccess()}})}}function b(e){var h={AddWelcomeItemUrl:"",type:"",viewid:"",nodetypeid:"",text:"",iconfilename:"",onSuccess:function(){}};e&&a.extend(h,e);CswAjaxJSON({url:h.AddWelcomeItemUrl,
data:'{ "RoleId": "", "Type": "'+h.type+'", "ViewId": "'+h.viewid+'", "NodeTypeId": "'+h.nodetypeid+'", "Text": "'+h.text+'", "IconFileName": "'+h.iconfilename+'" }',success:function(){h.onSuccess()}})}function d(e,h,j,n){h=a(h[2][1]);if(h.length>0){h=h.children("input").attr("welcomeid");CswAjaxJSON({url:e,data:'{ "RoleId": "", "WelcomeId": "'+h+'", "NewRow": "'+j+'", "NewColumn": "'+n+'" }',success:function(){}})}}var f={initTable:function(e){var h={Url:"/NbtWebApp/wsNBT.asmx/getWelcomeItems",MoveWelcomeItemUrl:"/NbtWebApp/wsNBT.asmx/moveWelcomeItems",
RemoveWelcomeItemUrl:"/NbtWebApp/wsNBT.asmx/deleteWelcomeItem",onLinkClick:function(){},onSearchClick:function(){},onAddClick:function(){},onAddComponent:function(){}};e&&a.extend(h,e);var j=a(this);CswAjaxXml({url:h.Url,data:"RoleId=",success:function(n){var i=a('<div id="welcomediv"></div>').appendTo(j).css("text-align","center").css("font-size","1.2em").CswLayoutTable("init",{ID:"welcometable",cellset:{rows:2,columns:1},TableCssClass:"WelcomeTable",cellpadding:10,align:"center",onSwap:function(m,
k){var l={cellset:k.cellset,row:k.row,column:k.column,swapcellset:k.swapcellset,swaprow:k.swaprow,swapcolumn:k.swapcolumn,MoveWelcomeItemUrl:h.MoveWelcomeItemUrl},p={cellset:"",row:"",column:"",swapcellset:"",swaprow:"",swapcolumn:"",MoveWelcomeItemUrl:""};l&&a.extend(p,l);d(p.MoveWelcomeItemUrl,p.cellset,p.swaprow,p.swapcolumn);d(p.MoveWelcomeItemUrl,p.swapcellset,p.row,p.column)},showConfigButton:true,showAddButton:true,showRemoveButton:true,onAddClick:function(){a.CswDialog("AddWelcomeItemDialog",
{onAdd:h.onAddComponent})},onRemove:function(m,k){g({cellset:k.cellset,row:k.row,column:k.column,RemoveWelcomeItemUrl:h.RemoveWelcomeItemUrl})}});n.children().each(function(){var m=a(this),k=i.CswLayoutTable("cellset",m.attr("displayrow"),m.attr("displaycol")),l=k[1][1];k=k[2][1];m.attr("buttonicon")!=undefined&&m.attr("buttonicon")!=""&&l.append(a('<a href=""><img border="0" src="'+m.attr("buttonicon")+'"/></a>'));var p={type:m.attr("type"),viewmode:m.attr("viewmode"),itemid:m.attr("itemid"),text:m.attr("text"),
iconurl:m.attr("iconurl"),viewid:m.attr("viewid"),actionid:m.attr("actionid"),reportid:m.attr("reportid"),linktype:m.attr("linktype")};switch(p.linktype){case "Link":k.append(a('<a href="">'+p.text+"</a>"));k.find("a").click(function(){h.onLinkClick(p);return false});l.find("a").click(function(){h.onLinkClick(p);return false});break;case "Search":k.append(a('<a href="">'+p.text+"</a>"));k.find("a").click(function(){h.onSearchClick(p);return false});l.find("a").click(function(){h.onSearchClick(p);
return false});break;case "Text":k.append("<span>"+p.text+"</span>");break;case "Add":k.append(a('<a href="">'+p.text+"</a>"));k.find("a").click(function(){h.onAddClick(m.attr("nodetypeid"));return false});l.find("a").click(function(){h.onAddClick(m.attr("nodetypeid"));return false})}k.append('<input type="hidden" welcomeid="'+m.attr("welcomeid")+'" />')})}})},getAddItemForm:function(e){var h={AddWelcomeItemUrl:"/NbtWebApp/wsNBT.asmx/addWelcomeItem",onAdd:function(){}};e&&a.extend(h,e);e=a(this).CswTable("init",
{ID:"addwelcomeitem_tbl"});a("<span>Type:</span>").appendTo(e.CswTable("cell",1,1));var j=a('<select id="welcome_type" name="welcome_type"></select>').appendTo(e.CswTable("cell",1,2));j.append('<option value="Add" selected>Add</option>');j.append('<option value="Link">Link</option>');j.append('<option value="Search">Search</option>');j.append('<option value="Text">Text</option>');var n=a("<span>View:</span>").appendTo(e.CswTable("cell",2,1)).hide(),i=e.CswTable("cell",2,2).CswViewSelect({ID:"welcome_viewsel"}).hide(),
m=a("<span>Add New:</span>").appendTo(e.CswTable("cell",3,1)),k=e.CswTable("cell",3,2).CswNodeTypeSelect({ID:"welcome_ntsel"});a("<span>Text:</span>").appendTo(e.CswTable("cell",4,1));var l=a('<input type="text" id="welcome_text" value="" />').appendTo(e.CswTable("cell",4,2)),p=a("<span>Use Button:</span>").appendTo(e.CswTable("cell",5,1)),o=a('<select id="welcome_button" />').appendTo(e.CswTable("cell",5,2));o.append('<option value="blank.gif"></option>');var t=a('<img id="welcome_btnimg" />').appendTo(e.CswTable("cell",
6,2)),u=e.CswTable("cell",7,2).CswButton({ID:"welcome_add",enabledText:"Add",disabledText:"Adding",onclick:function(){b({AddWelcomeItemUrl:h.AddWelcomeItemUrl,type:j.val(),viewid:i.CswViewSelect("value"),nodetypeid:k.CswNodeTypeSelect("value"),text:l.val(),iconfilename:o.val(),onSuccess:h.onAdd})}});e.CswTable("cell",7,2).append(u);o.change(function(){t.attr("src","Images/biggerbuttons/"+o.val())});j.change(function(){var q={$typeselect:j,$viewselect_label:n,$viewselect:i,$ntselect_label:m,$ntselect:k,
$buttonsel_label:p,$buttonsel:o,$buttonimg:t},s={$typeselect:"",$viewselect_label:"",$viewselect:"",$ntselect_label:"",$ntselect:"",$buttonsel_label:"",$buttonsel:"",$buttonimg:""};q&&a.extend(s,q);switch(s.$typeselect.val()){case "Add":s.$viewselect_label.hide();s.$viewselect.hide();s.$ntselect_label.show();s.$ntselect.show();s.$buttonsel_label.show();s.$buttonsel.show();s.$buttonimg.show();break;case "Link":s.$viewselect_label.show();s.$viewselect.show();s.$ntselect_label.hide();s.$ntselect.hide();
s.$buttonsel_label.show();s.$buttonsel.show();s.$buttonimg.show();break;case "Search":s.$viewselect_label.show();s.$viewselect.show();s.$ntselect_label.hide();s.$ntselect.hide();s.$buttonsel_label.show();s.$buttonsel.show();s.$buttonimg.show();break;case "Text":s.$viewselect_label.hide();s.$viewselect.hide();s.$ntselect_label.hide();s.$ntselect.hide();s.$buttonsel_label.hide();s.$buttonsel.hide();s.$buttonimg.hide()}});CswAjaxXml({url:"/NbtWebApp/wsNBT.asmx/getWelcomeButtonIconList",success:function(q){q.children().each(function(){var s=
a(this).attr("filename");s!="blank.gif"&&o.append('<option value="'+s+'">'+s+"</option>")})}})}};a.fn.CswWelcome=function(e){if(f[e])return f[e].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof e==="object"||!e)return f.init.apply(this,arguments);else a.error("Method "+e+" does not exist on CswWelcome")}})(jQuery);(function(a){function g(f){return parseInt(f.find(".CswWizard_StepLinkDivSelected").attr("stepno"))}function b(f,e){var h=f.attr("stepcount");if(e>0&&e<=h){f.find(".CswWizard_StepLinkDiv").removeClass("CswWizard_StepLinkDivSelected");f.find(".CswWizard_StepLinkDiv[stepno="+e+"]").addClass("CswWizard_StepLinkDivSelected");f.find(".CswWizard_StepDiv").hide();f.find(".CswWizard_StepDiv[stepno="+e+"]").show();var j=a("#"+f.attr("id")+"_prev");e==1?j.CswButton("disable"):j.CswButton("enable");j=a("#"+
f.attr("id")+"_next");e>=h?j.CswButton("disable"):j.CswButton("enable")}}var d={init:function(f){var e={ID:"",Title:"A Wizard",StepCount:1,Steps:{1:"Default"},SelectedStep:1,FinishText:"Finish",onNext:function(){},onPrevious:function(){},onBeforeNext:function(){return true},onBeforePrevious:function(){return true},onFinish:function(){},onCancel:function(){}};f&&a.extend(e,f);var h=a(this).CswTable({ID:e.ID,TableCssClass:"CswWizard_WizardTable"});h.attr("stepcount",e.StepCount);h.CswTable("cell",1,
1).addClass("CswWizard_TitleCell").attr("colspan",2).append(e.Title);f=h.CswTable("cell",2,1).attr("rowspan",2).addClass("CswWizard_IndexCell");for(var j=h.CswTable("cell",2,2).addClass("CswWizard_StepsCell"),n=h.CswTable("cell",3,1).addClass("CswWizard_ButtonsCell"),i=1;i<=e.StepCount;i++){var m=e.Steps[i];a('<div class="CswWizard_StepLinkDiv" stepno="'+i+'">'+i+".&nbsp;"+m+"</div>").appendTo(f);a('<div class="CswWizard_StepDiv" id="'+e.ID+"_"+i+'" stepno="'+i+'" ><span class="CswWizard_StepTitle">'+
m+'</span><br/></br><div id="'+e.ID+"_"+i+'_content"></div></div>').appendTo(j)}j=n.CswTable({ID:e.ID+"_btntbl",width:"100%"});f=j.CswTable("cell",1,1).attr("align","right").attr("width","65%");j=j.CswTable("cell",1,2).attr("align","right").attr("width","35%");f.CswButton("init",{ID:e.ID+"_prev",enabledText:"< Previous",disableOnClick:false,onclick:function(){var k=g(h);if(e.onBeforePrevious(k)){b(h,k-1);e.onPrevious(k-1)}}});f.CswButton("init",{ID:e.ID+"_next",enabledText:"Next >",disableOnClick:false,
onclick:function(){var k=g(h);if(e.onBeforeNext(k)){b(h,k+1);e.onNext(k+1)}}});f.CswButton("init",{ID:e.ID+"_finish",enabledText:e.FinishText,onclick:e.onFinish});j.CswButton("init",{ID:e.ID+"_cancel",enabledText:"Cancel",onclick:e.onCancel});b(h,e.SelectedStep);return h},div:function(f){return a(this).find(".CswWizard_StepDiv[stepno="+f+"] div")},button:function(f,e){var h=a(this);switch(f){case "previous":a("#"+h.attr("id")+"_prev").CswButton(e);break;case "next":a("#"+h.attr("id")+"_next").CswButton(e);
break;case "finish":a("#"+h.attr("id")+"_finish").CswButton(e);break;case "cancel":a("#"+h.attr("id")+"_cancel").CswButton(e)}}};a.fn.CswWizard=function(f){if(d[f])return d[f].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof f==="object"||!f)return d.init.apply(this,arguments);else a.error("Method "+f+" does not exist on CswWizard")}})(jQuery);function CswAjaxJSON(a){var g={url:"",data:"",success:function(){},error:function(){}};a&&$.extend(g,a);$.ajax({type:"POST",url:g.url,dataType:"json",contentType:"application/json; charset=utf-8",data:g.data,success:function(b,d,f){b=$.parseJSON(b.d);b.error!=undefined?_handleAjaxError(f,b.error,""):g.success(b)},error:function(b,d,f){_handleAjaxError(b,d,f);g.error()}})}
function CswAjaxXml(a){var g={url:"",data:"",success:function(){},error:function(){}};a&&$.extend(g,a);g.url!=""&&$.ajax({type:"POST",url:g.url,dataType:"xml",data:g.data,success:function(b,d,f){b=$(f.responseXML).children().first();b.first().get(0).nodeName=="error"?_handleAjaxError(f,b.text().trim(),""):g.success(b)},error:function(b,d,f){_handleAjaxError(b,d,f);g.error()}})}
function _handleAjaxError(a,g,b){ErrorMessage="A WebServices Error Occurred: "+g;if(null!=b)ErrorMessage+="; Exception: "+b.toString();log(ErrorMessage)}function xmlToString(a){var g="";if(a!=""&&a!=undefined){(g=a.get(0).xml)||(g=(new XMLSerializer).serializeToString(a.get(0)));g||$.error("Browser does not support XML operations necessary to convert to string")}return g}
function jsonToString(a){if(typeof a=="object"){var g="{",b=true,d;for(d in a)if(a.hasOwnProperty(d)){b||(g+=",");g+=" '"+d+"': ";g+=jsonToString(a[d]);b=false}g+="}"}else g="'"+a+"'";return g}var changed=0,checkChangesEnabled=true;function setChanged(){if(checkChangesEnabled)changed=1}function unsetChanged(){if(checkChangesEnabled)changed=0}
function checkChanges(){if(checkChangesEnabled&&changed==1)return"If you continue, you will lose any changes made on this page.  To save your changes, click Cancel and then click the Save button."}
function manuallyCheckChanges(){var a=true;if(checkChangesEnabled&&changed==1)if(a=confirm("Are you sure you want to navigate away from this page?\n\nIf you continue, you will lose any changes made on this page.  To save your changes, click Cancel and then click the Save button.\n\nPress OK to continue, or Cancel to stay on the current page."))changed=0;return a}
function initCheckChanges(){window.onbeforeunload=window.onbeforeunload!==null&&window.onbeforeunload!==undefined?function(){var a=window.onbeforeunload;return a()?checkChanges():false}:function(){return checkChanges()}}window.onload=window.onload!==null&&window.onload!==undefined?new Function("initCheckChanges(); var f="+window.onload+"; return f();"):function(){initCheckChanges()};
function IsAdministrator(a){var g={Yes:function(){},No:function(){}};a&&$.extend(g,a);CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/isAdministrator",success:function(b){b.Administrator=="true"?g.Yes():g.No()}})}function copyNode(a){var g={nodeid:"",nodekey:"",onSuccess:function(){}};a&&$.extend(g,a);CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/CopyNode",data:'{ "NodePk":"'+g.nodeid+'" }',success:function(b){g.onSuccess(b.NewNodeId,"")}})}
function deleteNodes(a){var g={nodeids:[],onSuccess:function(){}};a&&$.extend(g,a);a='{ "NodePks": [';var b=true,d;for(d in g.nodeids){b||(a+=",");a+='"'+g.nodeids[d]+'"';b=false}a+="] }";CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/DeleteNodes",data:a,success:function(){g.onSuccess("","")}})}
function jsTreeGetSelected(a){var g=a.attr("id");$SelectedItem=a.jstree("get_selected");return{iconurl:$SelectedItem.children("a").children("ins").css("background-image"),id:$SelectedItem.attr("id").substring(g.length),text:$SelectedItem.children("a").first().text().trim(),$item:$SelectedItem}}function GoHome(){$.CswCookie("clear",CswCookieName.CurrentView.ViewId);$.CswCookie("clear",CswCookieName.CurrentView.ViewMode);window.location="NewMain.html"}
function HandleMenuItem(a){var g={$ul:"",$itemxml:"",onLogout:function(){},onAlterNode:function(){},onSearch:function(){},onMultiEdit:function(){},onEditView:function(){},Multi:false,NodeCheckTreeId:""};a&&$.extend(g,a);if(g.$itemxml.attr("href")!=undefined&&g.$itemxml.attr("href")!="")a=$('<li><a href="'+g.$itemxml.attr("href")+'">'+g.$itemxml.attr("text")+"</a></li>").appendTo(g.$ul);else if(g.$itemxml.attr("popup")!=undefined&&g.$itemxml.attr("popup")!="")a=$('<li class="headermenu_dialog">'+g.$itemxml.attr("text")+
"</li>").appendTo(g.$ul).click(function(){OpenDialog(g.$itemxml.attr("text"),g.$itemxml.attr("popup"))});else if(g.$itemxml.attr("action")!=undefined&&g.$itemxml.attr("action")!=""){a=$('<li><a href="#">'+g.$itemxml.attr("text")+"</a></li>").appendTo(g.$ul);var b=a.children("a");switch(g.$itemxml.attr("action")){case "About":b.click(function(){$.CswDialog("AboutDialog");return false});break;case "AddNode":b.click(function(){$.CswDialog("AddNodeDialog",{nodetypeid:g.$itemxml.attr("nodetypeid"),relatednodeid:g.$this.attr("relatednodeid"),
onAddNode:g.onAlterNode});return false});break;case "DeleteNode":b.click(function(){$.CswDialog("DeleteNodeDialog",{nodename:g.$itemxml.attr("nodename"),nodeid:g.$itemxml.attr("nodeid"),onDeleteNode:g.onAlterNode,NodeCheckTreeId:g.NodeCheckTreeId,Multi:g.Multi});return false});break;case "editview":b.click(function(){g.onEditView(g.$itemxml.attr("viewid"));return false});break;case "CopyNode":b.click(function(){$.CswDialog("CopyNodeDialog",{nodename:g.$itemxml.attr("nodename"),nodeid:g.$itemxml.attr("nodeid"),
onCopyNode:g.onAlterNode});return false});break;case "Home":b.click(function(){GoHome();return false});break;case "Logout":b.click(function(){g.onLogout();return false});break;case "Search":b.click(function(){g.onSearch()});break;case "multiedit":b.click(g.onMultiEdit)}}else a=$("<li>"+g.$itemxml.attr("text")+"</li>").appendTo(g.$ul);return a}
function openPopup(a,g,b){a=window.open(a,null,"height="+g+", width="+b+", status=no, resizable=yes, scrollbars=yes, toolbar=yes, location=no, menubar=yes");a.focus();return a}function validateTime(a){var g=true,b=/^(\d?\d):(\d\d)\s?([APap][Mm])?$/g.exec(a);if(b==null)g=false;else{a=parseInt(b[1]);b=parseInt(b[2]);if(a<0||a>=24||b<0||b>=60)g=false}return g}function validateFloatMinValue(a,g){var b=parseFloat(a),d=parseFloat(g),f=true;if(d!=undefined)if(b==undefined||b<d)f=false;return f}
function validateFloatMaxValue(a,g){var b=parseFloat(a),d=parseFloat(g),f=true;if(d!=undefined)if(b==undefined||b>d)f=false;return f}function validateFloatPrecision(a,g){var b=true,d;d=g>0?/^\-?\d*\.?\d*$/g:/^\-?\d*$/g;if(b&&!d.test(a))b=false;return b}function validateInteger(a){return/^\-?\d*$/g.test(a)}function startsWith(a,g){return a.substr(0,g.length)==g}function getTimeString(a){var g="",b=a.getHours();a=a.getMinutes();if(a<10)a="0"+a;g=b%12+":"+a+" ";g+=b>11?"PM":"AM";return g}
function makeId(a){var g={ID:"",prefix:"",suffix:"",Delimiter:"_"};a&&$.extend(g,a);a=g.ID;if(g.prefix!==""&&a!=="")a=g.prefix+g.Delimiter+a;if(g.suffix!==""&&a!=="")a+=g.Delimiter+g.suffix;return a}function iterate(a){var g,b;for(b in a)g=g+b+"="+a[b]+"<br><br>";a=window.open("","popup");a!=null?a.document.write(g):console.log("iterate() error: No popup!")}function log(a){try{console.log(a)}catch(g){alert(a)}}
if(typeof String.prototype.trim!=="function")String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("barcode").text().trim();if(b.ReadOnly)d.append(f);else{d=d.CswTable("init",{ID:b.ID+"_tbl"});var e=d.CswTable("cell",1,1);f=a('<input type="text" class="textinput" id="'+b.ID+'" name="'+b.ID+'" value="'+f+'" />"').appendTo(e).change(b.onchange);d=d.CswTable("cell",1,2);a("<div/>").appendTo(d).CswImageButton({ButtonType:CswImageButton_ButtonType.Print,AlternateText:"",ID:b.ID+"_print",onClick:function(){a.CswDialog("OpenDialog",
b.ID+"_dialog","Popup_PrintLabel.aspx?nodeid="+b.nodeid+"&propid="+b.ID);return CswImageButton_ButtonType.None}});b.Required&&f.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("barcode").text(d.val())}};a.fn.CswFieldTypeBarcode=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeBarcode")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();b=b.$propxml.children("value").text().trim();d.append(b)},save:function(){}};a.fn.CswFieldTypeComposite=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeComposite")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("value").text().trim();if(f=="1/1/0001")f="";if(b.ReadOnly)d.append(f);else{d=a('<input type="text" class="textinput date" id="'+b.ID+'" name="'+b.ID+'" value="'+f+'" />"').appendTo(d).change(b.onchange).datepicker();b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("value").text(d.val())}};a.fn.CswFieldTypeDate=function(b){if(g[b])return g[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeDate")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("href").text().trim(),e=b.$propxml.children("name").text().trim(),h=d.CswTable("init",{ID:b.ID+"_tbl"});d=h.CswTable("cell",1,1);var j=h.CswTable("cell",1,2);h=h.CswTable("cell",1,3);d.append('<a href="'+f+'" target="_blank">'+e+"</a>");if(!b.ReadOnly){a("<div/>").appendTo(j).CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID+"_edit",onClick:function(){a.CswDialog("FileUploadDialog",
{url:"/NbtWebApp/wsNBT.asmx/fileForProp",params:{PropId:b.$propxml.attr("id")},onSuccess:function(){b.onReload()}});return CswImageButton_ButtonType.None}});a("<div/>").appendTo(h).CswImageButton({ButtonType:CswImageButton_ButtonType.Clear,AlternateText:"Clear",ID:b.ID+"_clr",onClick:function(){confirm("Are you sure you want to clear this file?")&&CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/clearProp",data:'{ "PropId": "'+b.$propxml.attr("id")+'", "IncludeBlob": "true" }',success:function(){b.onReload()}});
return CswImageButton_ButtonType.None}})}},save:function(){}};a.fn.CswFieldTypeFile=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeFile")}})(jQuery);(function(a){var g={init:function(b){log(b);var d=a(this);d.empty();var f=a('<div id="grid_as_fieldtype_menu" name="grid_as_fieldtype_menu"></div>'),e=a('<div id="grid_as_fieldtype" name="grid_as_fieldtype"></div>'),h=b.$propxml.children("viewid").text().trim();e.CswNodeGrid({viewid:h,nodeid:b.nodeid,cswnbtnodekey:b.cswnbtnodekey,readonly:b.ReadOnly});f.CswMenuMain({viewid:h,nodeid:b.nodeid,cswnbtnodekey:b.cswnbtnodekey,onAddNode:function(){refreshSelected({nodeid:b.nodeid,cswnbtnodekey:b.cswnbtnodekey})}});
d.append(f,a("<br/><br/>"),e)},save:function(){}};a.fn.CswFieldTypeGrid=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeGrid")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("href").text().trim(),e=b.$propxml.children("href").attr("width"),h=b.$propxml.children("href").attr("height"),j=b.$propxml.children("name").text().trim(),n=d.CswTable("init",{ID:b.ID+"_tbl"});d=n.CswTable("cell",1,1).attr("colspan","3");var i=n.CswTable("cell",2,1).attr("width",e-36),m=n.CswTable("cell",2,2).attr("align","right");n=n.CswTable("cell",2,3).attr("align","right");if(j!=""){a('<a href="'+
f+'" target="_blank"><img src="'+f+'" alt="'+j+'" width="'+e+'" height="'+h+'"/></a>').appendTo(d);i.append('<a href="'+f+'" target="_blank">'+j+"</a>")}if(!b.ReadOnly){a("<div/>").appendTo(m).CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID+"_edit",onClick:function(){a.CswDialog("FileUploadDialog",{url:"/NbtWebApp/wsNBT.asmx/fileForProp",params:{PropId:b.$propxml.attr("id")},onSuccess:function(){b.onReload()}});return CswImageButton_ButtonType.None}});a("<div/>").appendTo(n).CswImageButton({ButtonType:CswImageButton_ButtonType.Clear,
AlternateText:"Clear",ID:b.ID+"_clr",onClick:function(){confirm("Are you sure you want to clear this image?")&&CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/clearProp",data:'{ "PropId": "'+b.$propxml.attr("id")+'", "IncludeBlob": "true" }',success:function(){b.onReload()}});return CswImageButton_ButtonType.None}})}},save:function(){}};a.fn.CswFieldTypeImage=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);
else a.error("Method "+b+" does not exist on CswFieldTypeImage")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("text").text().trim(),e=b.$propxml.children("href").text().trim();if(b.ReadOnly)d.append(Value);else{var h=d.CswTable("init",{ID:b.ID+"_tbl"});a('<a href="'+e+'" target="_blank">'+f+"</a>&nbsp;&nbsp;").appendTo(h.CswTable("cell",1,1));a("<div/>").appendTo(h.CswTable("cell",1,2)).CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID+"_edit",Required:b.Required,onClick:function(){j.show();
return CswImageButton_ButtonType.None}});var j=d.CswTable("init",{ID:b.ID+"_edittbl"}).hide();a("<span>Text</span>").appendTo(j.CswTable("cell",1,1));d=a('<input type="text" id="'+b.ID+'_text" value="'+f+'" />').appendTo(j.CswTable("cell",1,2)).change(b.onchange);a("<span>URL</span>").appendTo(j.CswTable("cell",2,1));f=a('<input type="text" id="'+b.ID+'_href" value="'+e+'" />').appendTo(j.CswTable("cell",2,2)).change(b.onchange);if(b.Required&&e==""){j.show();d.addClass("required");f.addClass("required")}}},
save:function(b){var d=b.$propdiv.find("#"+b.ID+"_text"),f=b.$propdiv.find("#"+b.ID+"_href");b.$propxml.children("text").text(d.val());b.$propxml.children("href").text(f.val())}};a.fn.CswFieldTypeLink=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeLink")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("value").text().trim(),e=b.$propxml.children("options").text().trim();if(b.ReadOnly)d.append(f);else{d=a('<select id="'+b.ID+'" name="'+b.ID+'" class="selectinput" />"').appendTo(d).change(b.onchange);e=e.split(",");for(var h=0;h<e.length;h++)d.append('<option value="'+e[h]+'">'+e[h]+"</option>");d.val(f);b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("select");b.$propxml.children("value").text(d.val())}};
a.fn.CswFieldTypeList=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeList")}})(jQuery);(function(a){a.fn.CswFieldTypeLocation=function(g){function b(f,e,h,j,n){if(e=="root")e="";f.CswComboBox("TopContent",h);if(f.attr("value")!=e){f.attr("value",e);n()}setTimeout(function(){f.CswComboBox("close")},300)}var d={init:function(f){var e=a(this);e.contents().remove();var h=f.$propxml.children("nodeid").text().trim(),j=f.$propxml.children("nodekey").text().trim(),n=f.$propxml.children("name").text().trim(),i=f.$propxml.children("path").text().trim(),m=f.$propxml.children("viewid").text().trim();
if(f.ReadOnly)e.append(i);else{e=e.CswTable("init",{ID:f.ID+"_tbl"});var k=e.CswTable("cell",1,1);k.attr("colspan","2");k.append(i+"<br/>");i=e.CswTable("cell",2,1);var l=a('<div class="locationselect" value="'+h+'"/>').appendTo(i);h=a("<div />").CswNodeTree("init",{ID:f.ID,viewid:m,nodeid:h,cswnbtnodekey:j,onSelectNode:function(p){b(l,p.nodeid,p.nodename,p.iconurl,f.onchange)},SelectFirstChild:false,UsePaging:false});l.CswComboBox("init",{ID:f.ID+"_combo",TopContent:n,SelectContent:h,Width:"266px"})}},
save:function(f){var e=f.$propdiv.find(".locationselect");f.$propxml.children("nodeid").text(e.attr("value"))}};if(d[g])return d[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return d.init.apply(this,arguments);else a.error("Method "+g+" does not exist on CswFieldTypeLocation")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();b.$propxml.children("value").text().trim();d.append("[Not Implemented Yet]")},save:function(){}};a.fn.CswFieldTypeLocationContents=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeLocationContents")}})(jQuery);(function(a){var g={init:function(b){$Div=a(this);b={Checked:b.$propxml.children("checked").text().trim(),Required:b.Required,ReadOnly:b.ReadOnly,onchange:b.onchange};$Div.CswTristateCheckBox("init",b)},save:function(b){$Div=b.$propdiv.find("div");var d=$Div.CswTristateCheckBox("value");b.$propxml.children("checked").text(d)}};a.fn.CswFieldTypeLogical=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);
else a.error("Method "+b+" does not exist on CswFieldTypeLogical")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("logicalsetxml");d=a("<div />").appendTo(d);var e=[],h=0;f.find("item").first().children("column").each(function(){var i=a(this).attr("field");if(i!="name"&&i!="key"){e[h]=i;h++}});var j=[],n=0;f.find("item").each(function(){for(var i=a(this),m=[],k=0,l=0;l<e.length;l++){var p=i.children('column[field="'+e[l]+'"]').attr("value");m[k]=p=="True";k++}i={label:i.children('column[field="name"]').attr("value"),
key:i.children('column[field="key"]').attr("value"),values:m};j[n]=i;n++});d.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:e,data:j,onchange:b.onchange})},save:function(b){var d=b.$propxml.children("logicalsetxml");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var f=0;f<b.length;f++)for(var e=0;e<b[f].length;e++){var h=b[f][e],j=d.find('item:has(column[field="key"][value="'+h.key+'"])').find('column[field="'+h.collabel+'"]');if(h.checked&&j.attr("value")=="False")j.attr("value",
"True");else!h.checked&&j.attr("value")=="True"&&j.attr("value","False")}}};a.fn.CswFieldTypeLogicalSet=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeLogicalSet")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("text").text().trim(),e=b.$propxml.children("text").attr("rows"),h=b.$propxml.children("text").attr("columns");if(b.ReadOnly)d.append(f);else{d=a('<textarea id="'+b.ID+'" name="'+b.ID+'" rows="'+e+'" cols="'+h+'">'+f+"</textarea>").appendTo(d).change(b.onchange);b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("textarea");b.$propxml.children("text").text(d.val())}};a.fn.CswFieldTypeMemo=
function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeMemo")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("startdatetime").text().trim(),e=b.$propxml.children("value").text().trim(),h=b.$propxml.children("units").text().trim();d=d.CswTable("init",{ID:b.ID+"_tbl"});var j=d.CswTable("cell",1,1),n=d.CswTable("cell",1,2);j.append(e+"&nbsp;"+h);if(!b.ReadOnly){n.CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID,onClick:function(){i.show()}});var i=d.CswTable("cell",2,2).CswTable("init",
{ID:b.ID+"_edittbl"});i.CswTable("cell",1,1).append("Start Date");a('<input type="text" class="textinput date" id="'+b.ID+'_sd" name="'+b.ID+'_sd" value="'+f+'" />"').appendTo(i.CswTable("cell",1,2)).change(b.onchange).datepicker();i.CswTable("cell",3,1).append("Units");b=a('<select id="'+b.ID+'_units" />').appendTo(i.CswTable("cell",3,2)).change(b.onchange);f=a('<option value="hours">hours</option>').appendTo(b);h=="hours"&&f.attr("selected","true");b=a('<option value="days">days</option>').appendTo(b);
h=="days"&&b.attr("selected","true");i.hide()}},save:function(b){var d=b.$propdiv.find("#"+b.ID+"_sd").val(),f=b.$propdiv.find("#"+b.ID+"_units").val();b.$propxml.children("startdatetime").text(d);b.$propxml.children("units").text(f)}};a.fn.CswFieldTypeMTBF=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeMTBF")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("options");b.$propxml.children("NodeType").text().trim();var e=b.$propxml.children("NodeType").attr("SelectMode");d=a("<div />").appendTo(d);var h=[],j=0;f.find("item").each(function(){var n=a(this);n={label:n.children('column[field="NodeTypeName"]').attr("value"),key:n.children('column[field="nodetypeid"]').attr("value"),values:[n.children('column[field="Include"]').attr("value")=="True"]};h[j]=n;j++});
d.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:["Include"],data:h,UseRadios:e=="Single",Required:b.Required,onchange:b.onchange})},save:function(b){var d=b.$propxml.children("options");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var f=0;f<b.length;f++){var e=b[f][0],h=d.find('item:has(column[field="nodetypeid"][value="'+e.key+'"])').find('column[field="Include"]');if(e.checked&&h.attr("value")=="False")h.attr("value","True");else!e.checked&&h.attr("value")==
"True"&&h.attr("value","False")}}};a.fn.CswFieldTypeNodeTypeSelect=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeNodeTypeSelect")}})(jQuery);(function(a){var g={init:function(b){a(this).CswNumberTextBox({ID:b.ID,Value:b.$propxml.children("value").text().trim(),MinValue:b.$propxml.children("value").attr("minvalue"),MaxValue:b.$propxml.children("value").attr("maxvalue"),Precision:b.$propxml.children("value").attr("precision"),ReadOnly:b.ReadOnly,Required:b.Required,onchange:b.onchange})},save:function(b){b.$propxml.children("value").text(b.$propdiv.CswNumberTextBox("value"))}};a.fn.CswFieldTypeNumber=function(b){if(g[b])return g[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeNumber")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();if(!b.ReadOnly){var f=d.CswTable("init",{ID:b.ID+"_tbl"});d=f.CswTable("cell",1,1);f=f.CswTable("cell",2,1);a('<input type="password" class="textinput" id="'+b.ID+'_pwd1" name="'+b.ID+'" />"').appendTo(d).change(onchange);a('<input type="password" class="textinput password2" id="'+b.ID+'_pwd2" name="'+b.ID+'" />"').appendTo(f).change(onchange);jQuery.validator.addMethod("password2",function(){var e=a("#"+b.ID+"_pwd1").val(),
h=a("#"+b.ID+"_pwd2").val();return e==""&&h==""||e==h},"Passwords do not match!")}},save:function(b){var d=b.$propdiv.find("input#"+b.ID+"_pwd1").val();d!=""&&b.$propxml.children("newpassword").text(d)}};a.fn.CswFieldTypePassword=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypePassword")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("value").text().trim();f+="&nbsp;";a('<div id="'+b.ID+'" class="staticvalue">'+f+"</div>").appendTo(d)},save:function(){}};a.fn.CswFieldTypePropertyReference=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypePropertyReference")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();d.CswNumberTextBox({ID:b.ID+"_qty",Value:b.$propxml.children("value").text().trim(),MinValue:b.$propxml.children("value").attr("minvalue"),MaxValue:b.$propxml.children("value").attr("maxvalue"),Precision:b.$propxml.children("value").attr("precision"),ReadOnly:b.ReadOnly,Required:b.Required,onchange:b.onchange});var f=b.$propxml.children("units").contents().first().text(),e=a('<select id="'+b.ID+'_units" />').appendTo(d).change(b.onchange);
b.$propxml.children("units").children().each(function(){var h=a(this).attr("value"),j=a('<option value="'+h+'">'+h+"</option>").appendTo(e);f==h&&j.attr("selected","true")})},save:function(b){b.$propxml.children("value").text(b.$propdiv.CswNumberTextBox("value"));var d=b.$propdiv.find("#"+b.ID+"_units").val();b.$propxml.children("units").text(d)}};a.fn.CswFieldTypeQuantity=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,
arguments);else a.error("Method "+b+" does not exist on CswFieldTypeQuantity")}})(jQuery);(function(a){function g(d,f,e,h){d=d.split(",");var j=true,n=f.val(),i=h.val();if(n!=""&&i==""){j=false;for(var m=0;m<d.length;m++)if(d[m]==n)j=true}if(j){f.removeClass("CswFieldTypeQuestion_OOC");if(i==""){e.hide();h.hide()}}else{f.addClass("CswFieldTypeQuestion_OOC");e.show();h.show()}}var b={init:function(d){var f=a(this);f.contents().remove();var e=d.$propxml.children("answer").text().trim(),h=d.$propxml.children("allowedanswers").text().trim(),j=d.$propxml.children("compliantanswers").text().trim(),
n=d.$propxml.children("comments").text().trim(),i=d.$propxml.children("correctiveaction").text().trim();d.$propxml.children("dateanswered").text().trim();d.$propxml.children("datecorrected").text().trim();d.$propxml.children("iscompliant").text().trim();if(d.ReadOnly){f.append(e+"<br/>");f.append(n+"<br/>");f.append(i+"<br/>")}else{f=f.CswTable("init",{ID:d.ID+"_tbl",FirstCellRightAlign:true});f.CswTable("cell",1,1).append("Answer");h=h.split(",");for(var m=a('<select id="'+d.ID+'_ans" />').appendTo(f.CswTable("cell",
1,2)).change(function(){g(j,m,o,t);d.onchange()}),k=a('<option value=""></option>').appendTo(m),l=0;l<h.length;l++){var p=h[l];k=a('<option value="'+p+'">'+p+"</option>").appendTo(m);p==e&&k.attr("selected","true")}var o=f.CswTable("cell",2,1).append("Corrective Action"),t=a('<textarea id="'+d.ID+'_cor" />').appendTo(f.CswTable("cell",2,2)).text(i).change(function(){g(j,m,o,t);d.onchange()});f.CswTable("cell",3,1).append("Comments");a('<textarea id="'+d.ID+'_com" />').appendTo(f.CswTable("cell",3,
2)).text(n).change(d.onchange);g(j,m,o,t)}},save:function(d){var f=d.$propdiv.find("#"+d.ID+"_ans").val(),e=d.$propdiv.find("#"+d.ID+"_cor").val(),h=d.$propdiv.find("#"+d.ID+"_com").val();d.$propxml.children("answer").text(f);d.$propxml.children("correctiveaction").text(e);d.$propxml.children("comments").text(h)}};a.fn.CswFieldTypeQuestion=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+
d+" does not exist on CswFieldTypeQuestion")}})(jQuery);(function(a){a.fn.CswFieldTypeRelationship=function(g){var b={init:function(d){var f=a(this);f.contents().remove();var e=d.$propxml.children("nodeid").text().trim();if(d.relatednodeid!=""&&d.relatednodeid!=undefined&&(e==""||e==undefined))e=d.relatednodeid;var h=d.$propxml.children("name").text().trim(),j=d.$propxml.children("nodetypeid").text().trim(),n=d.$propxml.children("options");if(d.ReadOnly)f.append(h);else{f=f.CswTable("init",{ID:d.ID+"_tbl"});h=f.CswTable("cell",1,1);var i=a('<select id="'+
d.ID+'" name="'+d.ID+'" class="selectinput" />"').appendTo(h).change(d.onchange);n.children().each(function(){var m=a(this);i.append('<option value="'+m.attr("id")+'">'+m.attr("value")+"</option>")});i.val(e);if(j!=""){e=f.CswTable("cell",1,2);a("<div />").appendTo(e).CswImageButton({ButtonType:CswImageButton_ButtonType.Add,AlternateText:"Add New",onClick:function(){a.CswDialog("AddNodeDialog",{nodetypeid:j,onAddNode:function(){d.onReload()}});return CswImageButton_ButtonType.None}})}d.Required&&
i.addClass("required")}},save:function(d){var f=d.$propdiv.find("select");d.$propxml.children("nodeid").text(f.val())}};if(b[g])return b[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return b.init.apply(this,arguments);else a.error("Method "+g+" does not exist on CswFieldTypeRelationship")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("sequence").text().trim();if(b.ReadOnly)d.append(f);else{d=a('<input type="text" class="textinput" id="'+b.ID+'" name="'+b.ID+'" value="'+f+'" />"').appendTo(d).change(b.onchange);b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("sequence").text(d.val())}};a.fn.CswFieldTypeSequence=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,
1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeSequence")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("text").text().trim(),e=parseInt(b.$propxml.children("text").attr("columns"));b=parseInt(b.$propxml.children("text").attr("rows"));var h="auto",j="",n="";if(e>0&&b>0){h="scroll";j=Math.round(e+2-e/2.25)+"em";n=Math.round(b+2.5+b/5)+"em"}else if(e>0)j=Math.round(e-e/2.25)+"em";else if(b>0)n=Math.round(b+0.5+b/5)+"em";a('<div class="staticvalue" style="overflow: '+h+"; width: "+j+"; height: "+n+';">'+
f+"</div>").appendTo(d)},save:function(){}};a.fn.CswFieldTypeStatic=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeStatic")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("text").text().trim(),e=b.$propxml.children("text").attr("length");if(b.ReadOnly)d.append(f);else{d=a('<input type="text" class="textinput" size="'+e+'" id="'+b.ID+'" name="'+b.ID+'" value="'+f+'" />"').appendTo(d).change(b.onchange);b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("text").text(d.val())}};a.fn.CswFieldTypeText=function(b){if(g[b])return g[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeText")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("value").text().trim();if(b.ReadOnly)d.append(f);else{var e=a('<input type="text" class="textinput validateTime" id="'+b.ID+'" name="'+b.ID+'" value="'+f+'" />"').appendTo(d).change(b.onchange);a('<input type="button" id="'+b.ID+'_now" value="Now" />"').appendTo(d).click(function(){e.val(getTimeString(new Date))});jQuery.validator.addMethod("validateTime",function(h,j){return this.optional(j)||validateTime(a(j).val())},
"Enter a valid time (e.g. 12:30 PM)");b.Required&&e.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("value").text(d.val())}};a.fn.CswFieldTypeTime=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeTime")}})(jQuery);(function(a){function g(e,h,j){e=e.CswTable("init",{ID:h,cellalign:"center"});e.CswTable("cell",1,1).append("Su");e.CswTable("cell",1,2).append("M");e.CswTable("cell",1,3).append("Tu");e.CswTable("cell",1,4).append("W");e.CswTable("cell",1,5).append("Th");e.CswTable("cell",1,6).append("F");e.CswTable("cell",1,7).append("Sa");for(var n=1;n<=7;n++)a('<input type="checkbox" id="'+h+"_"+n+'" name="'+h+'" value="'+n+'" />').appendTo(e.CswTable("cell",2,n)).click(j)}function b(e,h){a('[name="'+e+'"]').attr("checked",
"");for(var j=h.split(","),n=0;n<j.length;n++)switch(j[n]){case "Sunday":a("#"+e+"_1").attr("checked","true");break;case "Monday":a("#"+e+"_2").attr("checked","true");break;case "Tuesday":a("#"+e+"_3").attr("checked","true");break;case "Wednesday":a("#"+e+"_4").attr("checked","true");break;case "Thursday":a("#"+e+"_5").attr("checked","true");break;case "Friday":a("#"+e+"_6").attr("checked","true");break;case "Saturday":a("#"+e+"_7").attr("checked","true")}}function d(e){var h="";a('[name="'+e+'"]').each(function(){var j=
a(this);if(j.attr("checked")!=""){if(h!="")h+=",";switch(j.attr("value")){case "1":h+="Sunday";break;case "2":h+="Monday";break;case "3":h+="Tuesday";break;case "4":h+="Wednesday";break;case "5":h+="Thursday";break;case "6":h+="Friday";break;case "7":h+="Saturday"}}});return h}var f={init:function(e){var h=a(this);h.contents().remove();var j=e.$propxml.children("Interval").attr("text");h.append('<span id="'+e.ID+'_textvalue">'+j+"</span>");if(!e.ReadOnly){var n=h.CswTable("init",{ID:e.ID+"_tbl",cellspacing:5});
h=a('<input type="radio" id="'+e.ID+'_type_weekly" name="'+e.ID+'_type" value="weekly" />').appendTo(n.CswTable("cell",1,1));n.CswTable("cell",1,2).append("<span>&nbsp;Weekly</span>");h.click(function(){m.show();l.hide();B.hide();e.onchange()});j=a('<input type="radio" id="'+e.ID+'_type_monthly" name="'+e.ID+'_type" value="monthly" />').appendTo(n.CswTable("cell",2,1));n.CswTable("cell",2,2).append("<span>&nbsp;Monthly</span>");j.click(function(){m.hide();l.show();B.hide();e.onchange()});var i=a('<input type="radio" id="'+
e.ID+'_type_yearly" name="'+e.ID+'_type" value="yearly" />').appendTo(n.CswTable("cell",3,1));n.CswTable("cell",3,2).append("<span>&nbsp;Yearly</span>");i.click(function(){m.hide();l.hide();B.show();e.onchange()});n=n.CswTable("cell",1,3);n.attr("rowspan","3");var m=a("<div />").appendTo(n).addClass("CswFieldTypeTimeInterval_Div"),k=m.CswTable("init",{ID:e.ID+"_weeklytbl",cellalign:"center",FirstCellRightAlign:true});k.CswTable("cell",1,1).append("Every:");g(k.CswTable("cell",1,2),e.ID+"_weeklyday",
e.onchange);k.CswTable("cell",2,1).append("Starting On:");k=k.CswTable("cell",2,2);k=a('<input type="text" class="textinput date" id="'+e.ID+'_weekly_sd" name="'+e.ID+'_weekly_sd" value="" />"').appendTo(k).change(e.onchange).datepicker();var l=a("<div />").appendTo(n).addClass("CswFieldTypeTimeInterval_Div");l.append("Every ");for(var p=a('<select id="'+e.ID+'_monthly_rate"/>').appendTo(l).change(e.onchange),o=1;o<=12;o++)p.append('<option value="'+o+'">'+o+"</option>");l.append(" Month(s)<br/>");
var t=a('<input type="radio" id="'+e.ID+'_monthly_by_date" name="'+e.ID+'_monthly_by" value="MonthlyByDate" />').appendTo(l).click(e.onchange);l.append("On Day of Month:&nbsp;");var u=a('<select id="'+e.ID+'_monthly_date" />').appendTo(l).change(e.onchange);for(o=1;o<=31;o++)u.append('<option value="'+o+'">'+o+"</option>");l.append("<br/>");var q=a('<input type="radio" id="'+e.ID+'_monthly_by_day" name="'+e.ID+'_monthly_by" value="MonthlyByWeekAndDay" />').appendTo(l).change(e.onchange);l.append("Every&nbsp;");
var s=a('<select id="'+e.ID+'_monthly_week" />').appendTo(l);s.append('<option value="1">First:</option>');s.append('<option value="2">Second:</option>');s.append('<option value="3">Third:</option>');s.append('<option value="4">Fourth:</option>');l.append("<br/>");g(l,e.ID+"_monthly_day",e.onchange);l.append("<br/>Starting On:&nbsp;");var v=a('<select id="'+e.ID+'_monthly_startMonth" />').appendTo(l).change(e.onchange);for(o=1;o<=12;o++)v.append('<option value="'+o+'">'+o+"</option>");l.append("/");
var y=a('<select id="'+e.ID+'_monthly_startYear" />').appendTo(l).change(e.onchange),G=(new Date).getFullYear();for(o=G-10;o<=G+10;o++)y.append('<option value="'+o+'">'+o+"</option>");y.val(G);var B=a("<div />").appendTo(n).addClass("CswFieldTypeTimeInterval_Div");B.append("Every Year, Starting On:<br/>");n=a('<input type="text" class="textinput date" id="'+e.ID+'_yearly_sd" name="'+e.ID+'_yearly_sd" value="" />"').appendTo(B).change(e.onchange).datepicker();o=e.$propxml.children("interval").children("rateintervalvalue");
switch(o.children("ratetype").text()){case "WeeklyByDay":h.attr("checked","true");m.show();l.hide();B.hide();b(e.ID+"_weeklyday",o.children("weeklyday").text());k.val(o.children("startingdate").text());break;case "MonthlyByDate":j.attr("checked","true");m.hide();l.show();B.hide();t.attr("checked","true");p.val(o.children("monthlyfrequency").text());u.val(o.children("monthlydate").text());v.val(o.children("startingmonth").text());y.val(o.children("startingyear").text());break;case "MonthlyByWeekAndDay":j.attr("checked",
"true");m.hide();l.show();B.hide();q.attr("checked","true");s.val(o.children("monthlyweek").text());b(e.ID+"_monthly_day",o.children("monthlyday").text());v.val(o.children("startingmonth").text());y.val(o.children("startingyear").text());break;case "YearlyByDate":i.attr("checked","true");m.hide();l.show();B.hide();n.val(o.children("yearlydate").text())}}},save:function(e){var h=a('[name="'+e.ID+'_type"]:checked').attr("value");e.$propxml.children().remove();var j=a("<interval />").appendTo(e.$propxml),
n=a("<rateintervalvalue />").appendTo(j);switch(h){case "weekly":a("<ratetype>WeeklyByDay</ratetype>").appendTo(n);a("<weeklyday>"+d(e.ID+"_weeklyday")+"</weeklyday>").appendTo(n);a("<startingdate>"+a("#"+e.ID+"_weekly_sd").val()+"</startingdate>").appendTo(n);break;case "monthly":h=a('[name="'+e.ID+'_monthly_by"]:checked').attr("value");a("<ratetype>"+h+"</ratetype>").appendTo(n);a("<monthlyfrequency>"+a("#"+e.ID+"_monthly_rate").val()+"</monthlyfrequency>").appendTo(n);if(h=="MonthlyByDate")a("<monthlydate>"+
a("#"+e.ID+"_monthly_date").val()+"</monthlydate>").appendTo(n);else{a("<monthlyweek>"+a("#"+e.ID+"_monthly_week").val()+"</monthlyweek>").appendTo(n);a("<monthlyday>"+d(e.ID+"_monthly_day")+"</monthlyday>").appendTo(n)}a("<startingmonth>"+a("#"+e.ID+"_monthly_startMonth").val()+"</startingmonth>").appendTo(n);a("<startingyear>"+a("#"+e.ID+"_monthly_startYear").val()+"</startingyear>").appendTo(n);break;case "yearly":a("<ratetype>YearlyByDate</ratetype>").appendTo(n);a("<yearlydate>"+a("#"+e.ID+"_yearly_sd").val()+
"</yearlydate>").appendTo(n)}log(j.find("*").length);j.find("*").andSelf().each(function(){a(this).attr("xmlns","")})}};a.fn.CswFieldTypeTimeInterval=function(e){if(f[e])return f[e].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof e==="object"||!e)return f.init.apply(this,arguments);else a.error("Method "+e+" does not exist on CswFieldTypeTimeInterval")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();b.$propxml.children("NodeId").text().trim();var f=b.$propxml.children("options");d=a("<div />").appendTo(d);var e=[],h=0;f.children().each(function(){var j=a(this);j={label:j.children('column[field="User Name"]').attr("value"),key:j.children('column[field="UserId"]').attr("value"),values:[j.children('column[field="Include"]').attr("value")=="True"]};e[h]=j;h++});d.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:["Include"],data:e,
UseRadios:false,Required:b.Required,onchange:b.onchange})},save:function(b){var d=b.$propxml.children("options");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var f=0;f<b.length;f++){var e=b[f][0],h=d.find('user:has(column[field="UserId"][value="'+e.key+'"])').find('column[field="Include"]');if(e.checked&&h.attr("value")=="False")h.attr("value","True");else!e.checked&&h.attr("value")=="True"&&h.attr("value","False")}}};a.fn.CswFieldTypeUserSelect=function(b){if(g[b])return g[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeUserSelect")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();b.$propxml.children("viewid").text().trim();var f=b.$propxml.children("options"),e=b.$propxml.children("viewid").attr("SelectMode");d=a("<div />").appendTo(d);var h=[],j=0;f.children().each(function(){var n=a(this);n={label:n.children('column[field="View Name"]').attr("value"),key:n.children('column[field="nodeviewid"]').attr("value"),values:[n.children('column[field="Include"]').attr("value")=="True"]};h[j]=n;j++});d.CswCheckBoxArray("init",
{ID:b.ID+"_cba",cols:["Include"],data:h,UseRadios:e=="Single",Required:b.Required,onchange:b.onchange})},save:function(b){var d=b.$propxml.children("options");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var f=0;f<b.length;f++){var e=b[f][0],h=d.find('user:has(column[field="nodeviewid"][value="'+e.key+'"])').find('column[field="Include"]');if(e.checked&&h.attr("value")=="False")h.attr("value","True");else!e.checked&&h.attr("value")=="True"&&h.attr("value",
"False")}}};a.fn.CswFieldTypeViewPickList=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeViewPickList")}})(jQuery);(function(a){var g={init:function(b){var d=a(this);d.contents().remove();var f=b.$propxml.children("viewid").text().trim(),e=b.$propxml.children("viewmode").text().trim().toLowerCase();b.$propxml.children("name").text().trim();d=d.CswTable("init",{ID:b.ID+"_tbl"});d.CswTable("cell",1,1).CswImageButton({ID:b.ID+"_view",ButtonType:CswImageButton_ButtonType.View,AlternateText:"View",Required:b.Required,onClick:function(){a.CswCookie("set",CswCookieName.CurrentView.ViewId,f);a.CswCookie("set",CswCookieName.CurrentView.ViewMode,
e);a.CswCookie("clear",CswCookieName.CurrentNode.NodeId,b.viewid);a.CswCookie("clear",CswCookieName.CurrentNode.NodeKey,b.viewmode);window.location="NewMain.html";return CswImageButton_ButtonType.None}});b.ReadOnly||d.CswTable("cell",1,2).CswImageButton({ID:b.ID+"_edit",ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",Required:b.Required,onClick:function(){window.location="EditView.aspx?step=2&return=NewMain.html&viewid="+f;return CswImageButton_ButtonType.None}})},save:function(){}};
a.fn.CswFieldTypeViewReference=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return g.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeViewReference")}})(jQuery);$.CswFieldTypeFactory=function(a){var g={nodeid:"",fieldtype:"",$propdiv:"",$propxml:"",onchange:function(){},onReload:function(){},cswnbtnodekey:"",ID:"",Required:"",ReadOnly:"",EditMode:"Edit"},b={make:function(d){d&&$.extend(g,d);g.ID=g.$propxml.attr("id");g.Required=g.$propxml.attr("required")=="true"||g.Required;g.ReadOnly=g.$propxml.attr("readonly")=="true"||g.ReadOnly||g.EditMode=="PrintReport";switch(g.fieldtype){case "Barcode":g.$propdiv.CswFieldTypeBarcode("init",g);break;case "Composite":g.$propdiv.CswFieldTypeComposite("init",
g);break;case "Date":g.$propdiv.CswFieldTypeDate("init",g);break;case "File":g.$propdiv.CswFieldTypeFile("init",g);break;case "Grid":g.$propdiv.CswFieldTypeGrid("init",g);break;case "Image":g.$propdiv.CswFieldTypeImage("init",g);break;case "Link":g.$propdiv.CswFieldTypeLink("init",g);break;case "List":g.$propdiv.CswFieldTypeList("init",g);break;case "Location":g.$propdiv.CswFieldTypeLocation("init",g);break;case "LocationContents":g.$propdiv.CswFieldTypeLocationContents("init",g);break;case "Logical":g.$propdiv.CswFieldTypeLogical("init",
g);break;case "LogicalSet":g.$propdiv.CswFieldTypeLogicalSet("init",g);break;case "Memo":g.$propdiv.CswFieldTypeMemo("init",g);break;case "MTBF":g.$propdiv.CswFieldTypeMTBF("init",g);break;case "NodeTypeSelect":g.$propdiv.CswFieldTypeNodeTypeSelect("init",g);break;case "Number":g.$propdiv.CswFieldTypeNumber("init",g);break;case "Password":g.$propdiv.CswFieldTypePassword("init",g);break;case "PropertyReference":g.$propdiv.CswFieldTypePropertyReference("init",g);break;case "Quantity":g.$propdiv.CswFieldTypeQuantity("init",
g);break;case "Question":g.$propdiv.CswFieldTypeQuestion("init",g);break;case "Relationship":g.$propdiv.CswFieldTypeRelationship("init",g);break;case "Sequence":g.$propdiv.CswFieldTypeSequence("init",g);break;case "Static":g.$propdiv.CswFieldTypeStatic("init",g);break;case "Text":g.$propdiv.CswFieldTypeText("init",g);break;case "Time":g.$propdiv.CswFieldTypeTime("init",g);break;case "TimeInterval":g.$propdiv.CswFieldTypeTimeInterval("init",g);break;case "UserSelect":g.$propdiv.CswFieldTypeUserSelect("init",
g);break;case "ViewPickList":g.$propdiv.CswFieldTypeViewPickList("init",g);break;case "ViewReference":g.$propdiv.CswFieldTypeViewReference("init",g);break;default:g.$propdiv.append(g.$propxml.attr("init",g))}},save:function(d){d&&$.extend(g,d);g.ID=g.$propxml.attr("id");g.Required=g.$propxml.attr("required")=="true";g.ReadOnly=g.$propxml.attr("readonly")=="true";switch(g.fieldtype){case "Barcode":g.$propdiv.CswFieldTypeBarcode("save",g);break;case "Composite":g.$propdiv.CswFieldTypeComposite("save",
g);break;case "Date":g.$propdiv.CswFieldTypeDate("save",g);break;case "File":g.$propdiv.CswFieldTypeFile("save",g);break;case "Grid":g.$propdiv.CswFieldTypeGrid("save",g);break;case "Image":g.$propdiv.CswFieldTypeImage("save",g);break;case "Link":g.$propdiv.CswFieldTypeLink("save",g);break;case "List":g.$propdiv.CswFieldTypeList("save",g);break;case "Location":g.$propdiv.CswFieldTypeLocation("save",g);break;case "LocationContents":g.$propdiv.CswFieldTypeLocationContents("save",g);break;case "Logical":g.$propdiv.CswFieldTypeLogical("save",
g);break;case "LogicalSet":g.$propdiv.CswFieldTypeLogicalSet("save",g);break;case "Memo":g.$propdiv.CswFieldTypeMemo("save",g);break;case "MTBF":g.$propdiv.CswFieldTypeMTBF("save",g);break;case "NodeTypeSelect":g.$propdiv.CswFieldTypeNodeTypeSelect("save",g);break;case "Number":g.$propdiv.CswFieldTypeNumber("save",g);break;case "Password":g.$propdiv.CswFieldTypePassword("save",g);break;case "PropertyReference":g.$propdiv.CswFieldTypePropertyReference("save",g);break;case "Quantity":g.$propdiv.CswFieldTypeQuantity("save",
g);break;case "Question":g.$propdiv.CswFieldTypeQuestion("save",g);break;case "Relationship":g.$propdiv.CswFieldTypeRelationship("save",g);break;case "Sequence":g.$propdiv.CswFieldTypeSequence("save",g);break;case "Static":g.$propdiv.CswFieldTypeStatic("save",g);break;case "Text":g.$propdiv.CswFieldTypeText("save",g);break;case "Time":g.$propdiv.CswFieldTypeTime("save",g);break;case "TimeInterval":g.$propdiv.CswFieldTypeTimeInterval("save",g);break;case "UserSelect":g.$propdiv.CswFieldTypeUserSelect("save",
g);break;case "ViewPickList":g.$propdiv.CswFieldTypeViewPickList("save",g);break;case "ViewReference":g.$propdiv.CswFieldTypeViewReference("save",g)}}};if(b[a])return b[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return b.init.apply(this,arguments);else $.error("Method "+a+" does not exist on "+PluginName)};
