(function(a){var f={init:function(b){var d={ID:"",prefix:"",enabledText:"",disabledText:"",hasText:true,disableOnClick:true,inputType:"button",primaryicon:"",secondaryicon:"",ReadOnly:false,onclick:function(){}};b&&a.extend(d,b);b=a(this);var g=d.prefix+"_"+d.ID,e=a("<input />").attr("type",d.inputType).attr("id",g).attr("name",g);e.attr("enabledText",d.enabledText);e.attr("disabledText",d.disabledText);g={text:d.hasText,label:d.enabledText,disabled:d.ReadOnly,icons:{primary:d.primaryicon,secondary:d.secondaryicon}};
if(g.disabled)g.label=d.disabledText;e.button(g).click(function(){d.disableOnClick&&e.button({label:d.disabledText,disabled:true});d.onclick()});b.append(e);return e},enable:function(){var b=a(this);b.button({label:b.attr("enabledText"),disabled:false})},disable:function(){var b=a(this);b.button({label:b.attr("disabledText"),disabled:true})}};a.fn.CswButton=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,
arguments);else a.error("Method "+b+" does not exist on CswButton")}})(jQuery);(function(a){a.fn.CswCheckBoxArray=function(f){var b={init:function(d){var g={ID:"",cols:["col1","col2","col3"],data:[{label:"row1",key:1,values:[true,false,true]},{label:"row2",key:2,values:[false,true,false]},{label:"row3",key:3,values:[true,false,true]}],HeightInRows:4,UseRadios:false,Required:false,onchange:function(){}};d&&a.extend(g,d);var e="checkbox";if(g.UseRadios)e="radio";d=a(this);d.contents().remove();var h=a("<div/>").appendTo(d),j=h.CswTable("init",{ID:g.ID+"_tbl"});h.css("height",
25*g.HeightInRows+"px");h.addClass("cbarraydiv");j.addClass("cbarraytable");h=1;for(var l=0;l<g.cols.length;l++){var n=j.CswTable("cell",h,l+2);n.addClass("cbarraycell");n.append(g.cols[l])}h++;if(g.UseRadios&&!g.Required){l=j.CswTable("cell",h,1);l.addClass("cbarraycell");l.append("[none]");for(l=0;l<g.cols.length;l++){n=j.CswTable("cell",h,l+2);n.addClass("cbarraycell");var o=g.ID+"_none";n=a('<input type="'+e+'" class="CBACheckBox_'+g.ID+'" id="'+o+'" name="'+g.ID+'" />').appendTo(n).click(g.onchange);
n.attr("key","");n.attr("rowlabel","[none]");n.attr("collabel",g.cols[l]);n.attr("row",-1);n.attr("col",l);n.attr("checked","true")}}h++;for(var i=0;i<g.data.length;i++){var k=g.data[i];l=j.CswTable("cell",h+i,1);l.addClass("cbarraycell");l.append(k.label);for(l=0;l<g.cols.length;l++){n=j.CswTable("cell",h+i,l+2);n.addClass("cbarraycell");o=g.ID+"_"+i+"_"+l;n=a('<input type="'+e+'" class="CBACheckBox_'+g.ID+'" id="'+o+'" name="'+g.ID+'" />').appendTo(n).click(g.onchange);n.attr("key",k.key);n.attr("rowlabel",
k.label);n.attr("collabel",g.cols[l]);n.attr("row",i);n.attr("col",l);k.values[l]&&n.attr("checked","true")}}e="Check All";if(a(".CBACheckBox_"+g.ID).not(":checked").length==0)e="Uncheck All";var p=a('<div style="text-align: right"><a href="#">'+e+"</a></div>").appendTo(d).children("a");p.click(function(){var m=g.ID;if(a(".CBACheckBox_"+m).not(":checked").length>0){a(".CBACheckBox_"+m).attr("checked","checked");p.text("Uncheck all")}else{a(".CBACheckBox_"+m).removeAttr("checked");p.text("Check all")}return false})},
getdata:function(d){var g={ID:""};d&&a.extend(g,d);var e=[];a(this).find(".CBACheckBox_"+g.ID).each(function(){var h=a(this),j=parseInt(h.attr("row")),l=parseInt(h.attr("col"));if(e[j]==undefined)e[j]=[];e[j][l]={key:h.attr("key"),rowlabel:h.attr("rowlabel"),collabel:h.attr("collabel"),checked:h.attr("checked")}});return e}};if(b[f])return b[f].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof f==="object"||!f)return b.init.apply(this,arguments);else a.error("Method "+f+" does not exist on "+
PluginName)}})(jQuery);(function(a){a.fn.CswComboBox=function(f){function b(g,e){g.toggleClass("CswComboBox_TopDiv_click");e.toggle()}var d={init:function(g){var e={ID:"",TopContent:"",SelectContent:"This ComboBox Is Empty!",Width:"180px"};g&&a.extend(e,g);g=a(this);g.contents().remove();var h=a('<div id="'+e.ID+'_top" class="CswComboBox_TopDiv"></div>').appendTo(g).attr("style","width: "+e.Width),j=h.CswTable("init",{ID:e.ID+"_tbl"});j.attr("width","100%");$cell1=j.CswTable("cell",1,1);$cell1.attr("width","100%");$cell1.append(e.TopContent);
$cell2=j.CswTable("cell",1,2);$cell2.addClass("CswComboBox_ImageCell");var l=a('<div id="'+e.ID+'_child" class="CswComboBox_ChildDiv">').appendTo(g).attr("style","width: "+e.Width).append(e.SelectContent);$cell1.click(function(){b(h,l)});$cell2.CswImageButton({ButtonType:CswImageButton_ButtonType.Select,ID:e.ID+"_top_img",AlternateText:"",onClick:function(){b(h,l)}})},TopContent:function(g){var e=a(this).children(".CswComboBox_TopDiv").children("table").CswTable("cell",1,1);e.text("");e.contents().remove();
e.append(g)},toggle:function(){var g=a(this),e=g.children(".CswComboBox_TopDiv");g=g.children(".CswComboBox_ChildDiv");b(e,g)},close:function(){var g=a(this),e=g.children(".CswComboBox_TopDiv");g=g.children(".CswComboBox_ChildDiv");e.removeClass("CswComboBox_TopDiv_click");g.hide()}};if(d[f])return d[f].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof f==="object"||!f)return d.init.apply(this,arguments);else a.error("Method "+f+" does not exist on "+PluginName)}})(jQuery);var CswCookieName={SessionId:"CswSessionId",Username:"csw_username",CurrentView:{ViewId:"csw_currentviewid",ViewMode:"csw_currentviewmode"},CurrentNode:{NodeId:"csw_currentnodeid",NodeKey:"csw_currentnodekey"},CurrentTabId:"csw_currenttabid"};
(function(a){a.CswCookie=function(f){var b={get:function(d){return a.cookie(d)},set:function(d,g){a.cookie(d,g)},clear:function(d){a.cookie(d,null)},clearAll:function(){for(var d in CswCookieName)if(CswCookieName.hasOwnProperty(d)){a.cookie(CswCookieName[d],null);for(var g in CswCookieName[d])CswCookieName[d].hasOwnProperty(g)&&a.cookie(CswCookieName[d][g],null)}}};if(b[f])return b[f].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof f==="object"||!f)return b.init.apply(this,arguments);
else a.error("Method "+f+" does not exist on CswCookie")}})(jQuery);(function(a){a.fn.CswDashboard=function(f){var b={Url:"/NbtWebApp/wsNBT.asmx/getDashboard",onSuccess:function(){}};f&&a.extend(b,f);var d=a(this);CswAjaxXml({url:b.Url,data:"",success:function(g){var e=d.CswTable("init",{ID:"DashboardTable"});e.addClass("DashboardTable");var h=e.append("<tr />");g.children().each(function(){var j=a(this),l="";l=j.attr("href")!=undefined?'<td class="DashboardCell">  <a target="_blank" href="'+j.attr("href")+'">    <div title="'+j.attr("text")+'" id="'+j.attr("id")+
'" class="'+j.attr("id")+'" />  </a></td>':'<td class="DashboardCell">  <div title="'+j.attr("text")+'" id="'+j.attr("id")+'" class="'+j.attr("id")+'" /></td>';h.append(l)});b.onSuccess()}});return this}})(jQuery);(function(a){function f(d,g,e){d.dialog({modal:true,width:g,height:e,close:function(){d.remove()}})}var b={AddWelcomeItemDialog:function(d){var g={onAdd:function(){}};d&&a.extend(g,d);var e=a("<div></div>");e.CswWelcome("getAddItemForm",{onAdd:function(){e.dialog("close");g.onAdd()}});f(e,400,400)},AddViewDialog:function(d){var g={ID:"addviewdialog",onAddView:function(){},makeVisibilitySelect:function(){}};d&&a.extend(g,d);var e=a("<div></div>");d=e.CswTable("init",{ID:g.ID+"_tbl",FirstCellRightAlign:true});
d.CswTable("cell",1,1).append("Name:");var h=a('<input type="text" id="'+g.ID+'_nametb" value="" />').appendTo(d.CswTable("cell",1,2));d.CswTable("cell",2,1).append("Display Mode:");var j=a('<select id="'+g.ID+'_dmsel" />').appendTo(d.CswTable("cell",2,2));j.append('<option value="List">List</option>');j.append('<option value="Tree">Tree</option>');j.append('<option value="Grid">Grid</option>');var l=g.makeVisibilitySelect(d,3,"Available to:"),n=e.CswButton({ID:g.ID+"_submit",enabledText:"Create View",
disabledText:"Creating View",onclick:function(){var o={};o.ViewName=h.val();o.ViewMode=j.val();o.Visibility=l.getvisibilityselect().val();o.VisibilityRoleId=l.getvisroleselect().val();o.VisibilityUserId=l.getvisuserselect().val();CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/createView",data:jsonToString(o),success:function(i){e.dialog("close");g.onAddView(i.newviewid)},error:function(){n.CswButton("enable")}})}});e.CswButton({ID:g.ID+"_cancel",enabledText:"Cancel",disabledText:"Canceling",onclick:function(){e.dialog("close")}});
f(e,400,200)},AddNodeDialog:function(d){var g={nodetypeid:"",relatednodeid:"",onAddNode:function(){}};d&&a.extend(g,d);var e=a("<div></div>");e.CswNodeTabs({nodetypeid:g.nodetypeid,relatednodeid:g.relatednodeid,EditMode:"AddInPopup",onSave:function(h,j){e.dialog("close");g.onAddNode(h,j)}});f(e,800,600)},EditNodeDialog:function(d){var g={nodeid:"",cswnbtnodekey:"",filterToPropId:"",title:"",onEditNode:function(){}};d&&a.extend(g,d);var e=a("<div></div>");e.CswNodeTabs({nodeid:g.nodeid,cswnbtnodekey:g.cswnbtnodekey,
filterToPropId:g.filterToPropId,EditMode:"EditInPopup",title:g.title,onSave:function(h,j){e.dialog("close");g.onEditNode(h,j)}});g.filterToPropId!=""?f(e,600,400):f(e,800,600)},CopyNodeDialog:function(d){var g={nodename:"",nodeid:"",nodekey:"",onCopyNode:function(){}};d&&a.extend(g,d);var e=a("<div>Copying: "+g.nodename+"<br/><br/></div>");e.CswButton({ID:"copynode_submit",enabledText:"Copy",disabledText:"Copying",onclick:function(){e.dialog("close");copyNode({nodeid:g.nodeid,nodekey:g.nodekey,onSuccess:g.onCopyNode})}});
e.CswButton({ID:"copynode_cancel",enabledText:"Cancel",disabledText:"Canceling",onclick:function(){e.dialog("close")}});f(e,400,300)},DeleteNodeDialog:function(d){var g={nodename:"",nodeid:"",nodekey:"",onDeleteNode:function(){},Multi:false,NodeCheckTreeId:""};d&&a.extend(g,d);var e=a("<div><span>Are you sure you want to delete:</span></div>"),h=[];if(g.Multi)a("."+g.NodeCheckTreeId+"_check:checked").each(function(){var j=a(this);h[h.length]=j.attr("nodeid");e.append('<br/><span style="padding-left: 10px;">'+
j.attr("nodename")+"</span>")});else{e.append("<span>"+g.nodename+"?</span>");h[0]=g.nodeid}e.append("<br/><br/>");e.CswButton({ID:"deletenode_submit",enabledText:"Delete",disabledText:"Deleting",onclick:function(){e.dialog("close");deleteNodes({nodeids:h,onSuccess:g.onDeleteNode})}});e.CswButton({ID:"deletenode_cancel",enabledText:"Cancel",disabledText:"Canceling",onclick:function(){e.dialog("close")}});f(e,400,200)},AboutDialog:function(){var d=a("<div></div>");CswAjaxXml({url:"/NbtWebApp/wsNBT.asmx/getAbout",
data:"",success:function(g){d.append("NBT Assembly Version: "+g.children("assembly").text()+"<br/><br/>");var e=d.CswTable("init",{ID:"abouttable"}),h=1;g.children("component").each(function(){var j=e.CswTable("cell",h,1),l=e.CswTable("cell",h,2),n=e.CswTable("cell",h,3);j.css("padding","2px 5px 2px 5px");l.css("padding","2px 5px 2px 5px");n.css("padding","2px 5px 2px 5px");var o=a(this);j.append(o.children("name").text());l.append(o.children("version").text());n.append(o.children("copyright").text());
h++})}});f(d,600,400)},SearchDialog:function(d){var g={viewid:"",nodetypeid:""};d&&a.extend(g,d);d=a("<div></div>");d.CswSearch("getSearchForm",{viewid:g.viewid,nodetypeid:g.nodetypeid});d.dialog({modal:true,width:800,height:600})},FileUploadDialog:function(d){var g={url:"",params:{},onSuccess:function(){}};d&&a.extend(g,d);var e=a("<div></div>");new qq.FileUploader({element:e.get(0),action:g.url,params:g.params,debug:false,onComplete:function(){e.dialog("close");g.onSuccess()}});e.CswButton({ID:"fileupload_cancel",
enabledText:"Cancel",disabledText:"Canceling",onclick:function(){e.dialog("close")}});f(e,400,300)},ShowLicenseDialog:function(d){var g={GetLicenseUrl:"/NbtWebApp/wsNBT.asmx/getLicense",AcceptLicenseUrl:"/NbtWebApp/wsNBT.asmx/acceptLicense",onAccept:function(){},onDecline:function(){}};d&&a.extend(g,d);var e=a('<div align="center"></div>');e.append("Service Level Agreement<br/>");var h=a('<textarea id="license" disabled="true" rows="30" cols="80"></textarea>').appendTo(e);e.append("<br/>");CswAjaxJSON({url:g.GetLicenseUrl,
success:function(j){h.text(j.license)}});e.CswButton({ID:"license_accept",enabledText:"I Accept",disabledText:"Accepting...",onclick:function(){CswAjaxJSON({url:g.AcceptLicenseUrl,success:function(){e.dialog("close");g.onAccept()}})}});e.CswButton({ID:"license_decline",enabledText:"I Decline",disabledText:"Declining...",onclick:function(){e.dialog("close");g.onDecline()}});f(e,800,600)},OpenDialog:function(d,g){var e=a('<div id="'+d+'"></div>');e.load(g,{},function(){e.appendTo("body").dialog()})},
CloseDialog:function(d){a("#"+d).dialog("close").remove()}};a.CswDialog=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswDialog")}})(jQuery);(function(a){var f={div:function(b){var d={ID:"",prefix:"",suffix:"",value:"",cssclass:""};b&&a.extend(d,b);b=a(this);var g=a("<div></div>"),e=makeId(d);if(e!==""){g.attr("id",e);g.attr("name",e)}d.cssclass!==""&&g.attr("class",d.cssclass);d.value!==""&&g.text(d.value);b.append(g);return g},span:function(b){var d={ID:"",prefix:"",suffix:"",value:"",cssclass:""};b&&a.extend(d,b);b=a(this);var g=a("<span></span>"),e=makeId(d);if(e!==""){g.attr("id",e);g.attr("name",e)}d.cssclass!==""&&g.attr("class",
d.cssclass);d.value!==""&&g.text(d.value);b.append(g);return g},input:function(b){var d={ID:"",prefix:"",suffix:"",type:"",placeholder:"",cssclass:"",value:""};b&&a.extend(d,b);b=a(this);var g=a("<input />"),e=makeId(d);if(e!==""){g.attr("id",e);g.attr("name",e)}d.type!==""&&g.attr("type",d.type);d.cssclass!==""&&g.attr("class",d.cssclass);d.placeholder!==""&&g.attr("placeholder",d.placeholder);b.append(g);return g},link:function(b){var d={ID:"",prefix:"",suffix:"",value:"",type:"",media:"all",target:"",
rel:"",cssclass:"",onClick:function(){}};b&&a.extend(d,b);b=a(this);var g=a("<a></a>"),e=makeId(d);e!==""&&g.attr("id",e);d.href!==""&&g.attr("href",d.href);d.value!==""&&g.text(d.value);d.cssclass!==""&&g.attr("class",d.cssclass);d.type!==""&&g.attr("type",d.type);d.rel!==""&&g.attr("rel",d.rel);d.media!==""&&g.attr("media",d.media);d.target!==""&&g.attr("target",d.target);d.onClick!==undefined&&g.click(function(){d.onClick()});b.append(g);return g},"break":function(b){var d={count:1};b&&a.extend(d,
b);b=a(this);for(var g=0;g<d.count;){b.append(a("<br/>"));g++}},getchildren:function(b){var d={ID:"",prefix:"",suffix:""};b&&a.extend(d,b);b=a(this);var g;d=makeId(d);if(d!=="")g=b.children("#"+d);return g},findelement:function(b){var d={ID:"",prefix:"",suffix:""};b&&a.extend(d,b);b=a(this);d=makeId(d);if(d!=="")$children=b.find("#"+d)}};a.fn.CswDOM=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);
else a.error("Method "+b+" does not exist on CswDOM")}})(jQuery);var CswImageButton_ButtonType={None:-1,Add:27,ArrowNorth:28,ArrowEast:29,ArrowSouth:30,ArrowWest:31,Calendar:6,CheckboxFalse:18,CheckboxNull:19,CheckboxTrue:20,Clear:4,Clock:10,ClockGrey:11,Configure:26,Delete:4,Edit:3,Fire:5,PageFirst:23,PagePrevious:24,PageNext:25,PageLast:22,PinActive:17,PinInactive:15,Print:2,Refresh:9,SaveStatus:13,Select:32,ToggleActive:1,ToggleInactive:0,View:8};
(function(a){a.fn.CswImageButton=function(f){function b(e){if(e!=undefined&&e!=CswImageButton_ButtonType.None){g.get(0).style.background="url('Images/buttons/buttons18.gif') 0px "+e*-18+"px no-repeat";g.unbind("mouseover");g.unbind("mouseout");g.unbind("mousedown");g.unbind("mouseup");g.bind("mouseover",function(){this.style.backgroundPosition="-18px "+e*-18+"px"});g.bind("mouseout",function(){this.style.backgroundPosition="0px "+e*-18+"px"});g.bind("mousedown",function(){this.style.backgroundPosition=
"-36px "+e*-18+"px"});g.bind("mouseup",function(){this.style.backgroundPosition="-18px "+e*-18+"px"})}}var d={ButtonType:CswImageButton_ButtonType.None,Active:false,AlternateText:"",ID:"",Required:false,onClick:function(){return CswImageButton_ButtonType.None}};f&&a.extend(d,f);$Div=a(this);var g=a('<div id="'+d.ID+'" class="divbutton" alt="'+d.AlternateText+'" />"').appendTo($Div).css("display","inline-block").click(function(){var e=d.onClick(g);b(e);return false});b(d.ButtonType);return g}})(jQuery);(function(a){a.fn.CswLayoutTable=function(f){function b(i,k,p){for(var m=parseInt(i.attr("cellset_rows")),t=parseInt(i.attr("cellset_columns")),v=[],q=1;q<=m;q++)for(var s=1;s<=t;s++){if(v[q]==undefined)v[q]=[];v[q][s]=j(i,k,p,q,s,m,t)}return v}function d(i){return i.attr("removemode")=="true"}function g(i){return i.attr("configmode")=="true"}function e(i,k){k.find("#"+i.attr("id")+"addbtn").hide();k.find("#"+i.attr("id")+"rembtn").hide();k.find("#"+i.attr("id")+"addcolumnbtn").hide();k.find("#"+
i.attr("id")+"addrowbtn").hide();i.CswTable("findCell",".CswLayoutTable_cell").removeClass("CswLayoutTable_configcell");i.attr("configmode","false");i.trigger(i.attr("id")+"CswLayoutTable_onConfigOff",k)}function h(i,k){k.find("#"+i.attr("id")+"addbtn").show();k.find("#"+i.attr("id")+"rembtn").show();k.find("#"+i.attr("id")+"addcolumnbtn").show();k.find("#"+i.attr("id")+"addrowbtn").show();parseInt(i.attr("cellset_rows"));parseInt(i.attr("cellset_columns"));i.CswTable("finish",null);i.CswTable("findCell",
".CswLayoutTable_cell").addClass("CswLayoutTable_configcell");i.attr("configmode","true");i.trigger(i.attr("id")+"CswLayoutTable_onConfigOn",k)}function j(i,k,p,m,t,v,q){if(k<1)k=1;if(p<1)p=1;return i.CswTable("cell",(k-1)*v+m,(p-1)*q+t)}function l(i,k,p,m,t,v){var q=Math.ceil(p/t),s=Math.ceil(m/v);p=parseInt(t-p%t);m=parseInt(v-m%v);k.attr("row",q).attr("column",s).attr("cellsetrow",p).attr("cellsetcolumn",m).click(function(){var u=q,w=s;if(d(i)){var A=a(".CswLayoutTable_remove");if(A.length>0){u=
A.attr("row");w=A.attr("column");i.trigger(i.attr("id")+"CswLayoutTable_onRemove",{table:i,cellset:b(i,u,w),row:A.attr("row"),column:A.attr("column")})}A.children().hide();A.removeClass("CswLayoutTable_remove")}}).drag(function(u,w){if(g(i)){i.CswTable("findCell",".CswLayoutTable_swapcell").removeClass("CswLayoutTable_swapcell");i.CswTable("findCell",'[row="'+q+'"][column="'+s+'"]').addClass("CswLayoutTable_dragcell");var A=n(i,q,s,t,v,w);A.length>0&&A.addClass("CswLayoutTable_swapcell")}}).drop(function(u,
w){if(g(i)){i.CswTable("findCell",".CswLayoutTable_swapcell").removeClass("CswLayoutTable_swapcell");var A=i.CswTable("findCell",'[row="'+q+'"][column="'+s+'"]');A.removeClass("CswLayoutTable_dragcell");var x=n(i,q,s,t,v,w);if(x.length>0){i.trigger(i.attr("id")+"CswLayoutTable_onSwap",{table:i,cellset:b(i,q,s),swapcellset:b(i,x.first().attr("row"),x.first().attr("column")),row:q,column:s,swaprow:x.first().attr("row"),swapcolumn:x.first().attr("column")});var H=a("<div />");for(r=1;r<=t;r++)for(c=
1;c<=v;c++){var P=A.filter('[cellsetrow="'+r+'"][cellsetcolumn="'+c+'"]'),O=x.filter('[cellsetrow="'+r+'"][cellsetcolumn="'+c+'"]');P.contents().appendTo(H);O.contents().appendTo(P);H.contents().appendTo(O)}}}}).hover(function(){var u=a(this);g(i)&&u.addClass("CswLayoutTable_hover");d(i)&&i.CswTable("findCell",'[row="'+u.attr("row")+'"][column="'+u.attr("column")+'"]').addClass("CswLayoutTable_remove")},function(){var u=a(this);g(i)&&u.removeClass("CswLayoutTable_hover");d(i)&&i.CswTable("findCell",
'[row="'+u.attr("row")+'"][column="'+u.attr("column")+'"]').removeClass("CswLayoutTable_remove")})}function n(i){var k=a(".CswLayoutTable_hover");return i.CswTable("findCell",'[row="'+k.attr("row")+'"][column="'+k.attr("column")+'"]')}var o={init:function(i){var k={ID:"",cellset:{rows:1,columns:1},onSwap:function(){},onAddClick:function(){},onConfigOn:function(){},onConfigOff:function(){},onRemove:function(){},TableCssClass:"",CellCssClass:"",cellpadding:0,cellspacing:0,width:"",align:"",showConfigButton:false,
showAddButton:false,showRemoveButton:false,OddCellRightAlign:false};i&&a.extend(k,i);i=a(this);var p=a("<div />").appendTo(i).css({"float":"right"}),m=i.CswTable("init",{ID:k.ID,TableCssClass:k.TableCssClass+" CswLayoutTable_table",CellCssClass:k.CellCssClass+" CswLayoutTable_cell",cellpadding:k.cellpadding,cellspacing:k.cellspacing,OddCellRightAlign:k.OddCellRightAlign,width:k.width,align:k.align,onCreateCell:function(v,q,s,u,w){l(q,s,u,w,k.cellset.rows,k.cellset.columns)}}).attr("cellset_rows",
k.cellset.rows).attr("cellset_columns",k.cellset.columns);m.attr("configmode","false");m.bind(k.ID+"CswLayoutTable_onSwap",k.onSwap);m.bind(k.ID+"CswLayoutTable_onRemove",k.onRemove);m.bind(k.ID+"CswLayoutTable_onConfigOn",k.onConfigOn);m.bind(k.ID+"CswLayoutTable_onConfigOff",k.onConfigOff);var t=p.CswTable("init",{ID:k.ID+"_buttontbl"});k.showAddButton&&t.CswTable("cell",1,1).CswImageButton({ButtonType:CswImageButton_ButtonType.Add,AlternateText:"Add",ID:k.ID+"addbtn",onClick:function(){k.onAddClick();
return CswImageButton_ButtonType.None}}).hide();k.showRemoveButton&&t.CswTable("cell",1,2).CswImageButton({ButtonType:CswImageButton_ButtonType.Delete,AlternateText:"Remove",ID:k.ID+"rembtn",onClick:function(){var v=$rembtn;if(d(m)){m.attr("removemode","false");v.removeClass("CswLayoutTable_removeEnabled")}else{m.attr("removemode","true");v.addClass("CswLayoutTable_removeEnabled")}return CswImageButton_ButtonType.None}}).hide();if(k.showConfigButton){t.CswTable("cell",1,3).CswImageButton({ButtonType:CswImageButton_ButtonType.ArrowEast,
AlternateText:"Add Column",ID:k.ID+"addcolumnbtn",onClick:function(){var v=parseInt(m.attr("cellset_rows")),q=parseInt(m.attr("cellset_columns")),s=m.CswTable("maxrows"),u=m.CswTable("maxcolumns");j(m,s/v,u/q+1,v,q,v,q);m.CswTable("finish",null);g(m)&&m.CswTable("findCell",".CswLayoutTable_cell").addClass("CswLayoutTable_configcell");return CswImageButton_ButtonType.None}}).hide();t.CswTable("cell",1,4).CswImageButton({ButtonType:CswImageButton_ButtonType.ArrowSouth,AlternateText:"Add Row",ID:k.ID+
"addrowbtn",onClick:function(){var v=parseInt(m.attr("cellset_rows")),q=parseInt(m.attr("cellset_columns")),s=m.CswTable("maxrows"),u=m.CswTable("maxcolumns");j(m,s/v+1,u/q,v,q,v,q);m.CswTable("finish",null);g(m)&&m.CswTable("findCell",".CswLayoutTable_cell").addClass("CswLayoutTable_configcell");return CswImageButton_ButtonType.None}}).hide();t.CswTable("cell",1,5).CswImageButton({ButtonType:CswImageButton_ButtonType.Configure,AlternateText:"Configure",ID:k.ID+"configbtn",onClick:function(){g(m)?
e(m,t):h(m,t);return CswImageButton_ButtonType.None}})}return m},cellset:function(i,k){var p=a(this);return b(p,i,k)},isConfig:function(){var i=a(this);return g(i)},toggleConfig:function(){var i=a(this),k=a("#"+i.attr("id")+"_buttontbl");g(i)?e(i,k):h(i,k)},ConfigOn:function(){var i=a(this),k=a("#"+i.attr("id")+"_buttontbl");h(i,k)},ConfigOff:function(){var i=a(this),k=a("#"+i.attr("id")+"_buttontbl");e(i,k)}};if(o[f])return o[f].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof f===
"object"||!f)return o.init.apply(this,arguments);else a.error("Method "+f+" does not exist on CswLayoutTable")}})(jQuery);(function(a){a.fn.CswLogin=function(f){function b(e){var h={DeauthenticateUrl:"/NbtWebApp/wsNBT.asmx/deauthenticate",onDeauthenticate:function(){}};e&&a.extend(h,e);CswAjaxJSON({url:h.DeauthenticateUrl,data:"",success:function(){a.CswCookie("clear",CswCookieName.Username);h.onDeauthenticate()}})}function d(e,h){var j="";switch(e.AuthenticationStatus){case "Failed":j="Login Failed";break;case "Locked":j="Your account is locked.  Please see your account administrator.";break;case "Deactivated":j="Your account is deactivated.  Please see your account administrator.";
break;case "TooManyUsers":j="Too many users are currently connected.  Try again later.";break;case "NonExistentAccessId":j="Login Failed";break;case "NonExistentSession":j="Login Failed";break;case "Unknown":j="An Unknown Error Occurred";break;case "ExpiredPassword":a.CswDialog("EditNodeDialog",{nodeid:e.nodeid,cswnbtnodekey:e.cswnbtnodekey,filterToPropId:e.passwordpropid,title:"Your password has expired.  Please change it now:",onEditNode:function(){h()}});break;case "ShowLicense":a.CswDialog("ShowLicenseDialog",
{onAccept:function(){h()},onDecline:function(){b()}})}a("#loginmsg").text(j);a("#login_password").val("");a("#login_button").val("Login").attr("disabled","")}var g={login:function(e){var h={AuthenticateUrl:"/NbtWebApp/wsNBT.asmx/authenticate",onAuthenticate:function(){}};e&&a.extend(h,e);e=a.CswCookie("get",CswCookieName.SessionId);if(e!=undefined&&e!=""&&e!=null)h.onAuthenticate(a.CswCookie("get",CswCookieName.Username));else{var j=a('<form><div id="logindiv" align="center">  <table>  <form>    <table>    <tr>      <td align="right">Customer ID:</td>      <td><input type="text" name="accessid" id="login_accessid" /></td>    </tr>    <tr>      <td align="right">User Name:</td>      <td><input type="text" name="username" id="login_username" /></td>    </tr>    <tr>      <td align="right">Password:</td>      <td><input type="password" name="password" id="login_password" /></td>    </tr>    <tr>      <td align="right"></td>      <td id="login_button_cell">           <span id="loginmsg" class="errorcontent" display="none"></span></td>    </tr>    <tr>      <td></td>      <td></td>    </tr>  </table></form></div><br/><br/><br/><div id="assemblydiv" width="100%" align="right"></div>').appendTo(a(this));
a("#assemblydiv").load("_Assembly.txt");a("#login_accessid").focus();a("#login_button_cell").CswButton({ID:"login_button",enabledText:"Login",disabledText:"Logging in...",onclick:function(){function l(k){a.CswCookie("set",CswCookieName.Username,k);j.remove();h.onAuthenticate(k)}a("#loginmsg").text("");var n=a("#login_accessid").val(),o=a("#login_username").val(),i=a("#login_password").val();CswAjaxJSON({url:h.AuthenticateUrl,data:"{AccessId: '"+n+"', UserName: '"+o+"', Password: '"+i+"'}",success:function(k){auth=
k.AuthenticationStatus;auth=="Authenticated"?l(o):d(k,l)}})}})}},logout:function(e){b(e)}};if(g[f])return g[f].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof f==="object"||!f)return g.init.apply(this,arguments);else a.error("Method "+f+" does not exist on CswLogin")}})(jQuery);(function(a){a.fn.CswMenu=function(f){function b(){$this=a(this);d();$this.find("ul.subnav").slideDown("fast").show()}function d(){e.find("ul").stop(true,true);e.find("ul.subnav").slideUp("fast")}var g={};f&&a.extend(g,f);var e=a(this);e.children("li").click(b).hover(b,d);e.find(".subnav").children("li").click(function(){d();event.stopPropagation()});return this}})(jQuery);(function(a){a.fn.CswMenuHeader=function(f){var b={Url:"/NbtWebApp/wsNBT.asmx/getHeaderMenu",onLogout:function(){},onSuccess:function(){}};f&&a.extend(b,f);var d=a(this);CswAjaxXml({url:b.Url,data:"",success:function(g){var e=a('<ul class="topnav"></ul>');d.text("").append(e);g.children().each(function(){var h=a(this);if(h.attr("text")!=undefined){var j=HandleMenuItem({$ul:e,$itemxml:h,onLogout:b.onLogout});if(h.children().length>1){var l=a('<ul class="subnav"></ul>').appendTo(j);h.children().each(function(){HandleMenuItem({$ul:l,
$itemxml:a(this),onLogout:b.onLogout})})}}});e.CswMenu();b.onSuccess()}});return this}})(jQuery);(function(a){a.fn.CswMenuMain=function(f){var b={Url:"/NbtWebApp/wsNBT.asmx/getMainMenu",viewid:"",nodeid:"",cswnbtnodekey:"",onAddNode:function(){},onMultiEdit:function(){},onSearch:function(){},onEditView:function(){},Multi:false,NodeCheckTreeId:""};f&&a.extend(b,f);var d=a(this);CswAjaxXml({url:b.Url,data:"ViewNum="+b.viewid+"&SafeNodeKey="+b.cswnbtnodekey,success:function(g){var e=a('<ul class="topnav"></ul>');d.text("").append(e);g.children().each(function(){var h=a(this);if(h.attr("text")!=
undefined){var j={$ul:e,$itemxml:h,onAlterNode:b.onAddNode,onMultiEdit:b.onMultiEdit,onEditView:b.onEditView,onSearch:b.onSearch,Multi:b.Multi,NodeCheckTreeId:b.NodeCheckTreeId},l=HandleMenuItem(j);if(h.children().length>=1){var n=a('<ul class="subnav"></ul>').appendTo(l);h.children().each(function(){var o={$ul:n,$itemxml:a(this)};a.extend(j,o);HandleMenuItem(o)})}}});e.CswMenu()}});return this}})(jQuery);(function(a){a.fn.CswNodeGrid=function(f){var b={datatype:"local",height:300,rowNum:10,autoencode:true,rowList:[10,25,50],sortname:"nodeid",shrinkToFit:true,viewrecords:true,emptyrecords:"No Data to Display",sortorder:"asc",multiselect:true,GridUrl:"/NbtWebApp/wsNBT.asmx/getGrid",viewid:"",prefix:"CswNodeGrid",nodeid:"",cswnbtnodekey:"",gridTableID:"gridTable",gridPagerID:"gridPager",onAddNode:function(){},onEditNode:function(){},onDeleteNode:function(){}};f&&a.extend(b,f);f=a(this);var d=[],g=[],
e=f.CswTable("init",{ID:b.gridTableID,prefix:b.prefix}),h=f.CswDOM("div",{ID:b.gridPagerID,prefix:b.prefix}).css("width","100%").css("height","20px");CswAjaxJSON({url:b.GridUrl,data:"{ViewPk: '"+b.viewid+"', 'SafeNodeKey': '"+b.cswnbtnodekey+"'}",success:function(j){d=j.grid;g=d.rows;var l=j.viewname,n=j.nodetypeid,o=j.columnnames,i=j.columndefinition;j=j.viewwidth;if(j==="")j=650;l={data:g,colNames:o,colModel:i,width:j,pager:h,caption:l,toppager:true};a.extend(l,b);e.jqGrid(l).hideCol("nodeid").hideCol("cswnbtnodekey").hideCol("nodename").navGrid("#"+
h.attr("id"),{cloneToTop:true,edit:true,edittext:"",edittitle:"Edit row",editfunc:function(k){var p={cswnbtnodekey:"",nodeid:"",onEditNode:b.onEditNode};if(k!==null){p.cswnbtnodekey=e.jqGrid("getCell",k,"cswnbtnodekey");p.nodeid=e.jqGrid("getCell",k,"nodeid");a.CswDialog("EditNodeDialog",p)}else alert("Please select a row to edit");return p.CswNbtNodeKey},add:true,addtext:"",addtitle:"Add row",addfunc:function(){var k={nodetypeid:n,onAddNode:b.onAddNode};a.CswDialog("AddNodeDialog",k);return k.nodetypeid},
del:true,deltext:"",deltitle:"Delete row",delfunc:function(k){var p={cswnbtnodekey:"",nodeid:"",nodename:"",onDeleteNode:b.onDeleteNode};if(k!==null){p.cswnbtnodekey=e.jqGrid("getCell",k,"cswnbtnodekey");p.nodeid=e.jqGrid("getCell",k,"nodeid");p.nodename=e.jqGrid("getCell",k,"nodename");a.CswDialog("DeleteNodeDialog",p)}else alert("Please select a row to delete");return p.cswnbtnodekey},search:true,searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",
alerttext:"Please, select row",view:true,viewtext:"",viewtitle:"View row"},{},{},{},{caption:"Search...",Find:"Find",Reset:"Reset",odata:["equal","not equal","less","less or equal","greater","greater or equal","begins with","does not begin with","is in","is not in","ends with","does not end with","contains","does not contain"],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],matchText:"match",rulesText:"rules"},{});l=a("#"+e[0].id+"_toppager")[0];a("#edit_"+e[0].id+"_top",l).remove();a("#del_"+
e[0].id+"_top",l).remove();a("#search_"+e[0].id+"_top",l).remove();a("#add_"+e[0].id+"_top",l).remove();a("#view_"+e[0].id+"_top",l).remove();a("#"+e[0].id+"_toppager_center",l).remove();a(".ui-paging-info",l).remove();e.jqGrid("navButtonAdd","#"+e[0].id+"_toppager_left",{caption:"Columns",buttonicon:"ui-icon-wrench",onClickButton:function(){e.jqGrid("columnChooser",{done:function(k){if(!k)return false;e.jqGrid("remapColumns",k,true)}})}})}});return this}})(jQuery);(function(a){var f={init:function(b){var d={ID:"",NodesUrl:"/NbtWebApp/wsNBT.asmx/getNodes",nodetypeid:"",objectclassid:"",objectclass:"",onSelect:function(){},onSuccess:function(){}};b&&a.extend(d,b);b=a(this);var g=a('<select id="'+d.ID+'_nodeselect" />').appendTo(b);g.change(function(){d.onSelect(g.val())});CswAjaxXml({url:d.NodesUrl,data:"NodeTypeId="+d.nodetypeid+"&ObjectClassId="+d.objectclassid+"&ObjectClass="+d.objectclass,success:function(e){e.children("node").each(function(){var h=a(this);
g.append('<option value="'+h.attr("id")+'">'+h.attr("name")+"</option>")});d.onSuccess()}});return g},value:function(){return a(this).val()}};a.fn.CswNodeSelect=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswNodeSelect")}})(jQuery);(function(a){a.fn.CswNodeTabs=function(f){function b(k,p){CswAjaxXml({url:o.PropsUrl,data:"EditMode="+o.EditMode+"&SafeNodeKey="+o.cswnbtnodekey+"&TabId="+p+"&NodeTypeId="+o.nodetypeid,success:function(m){var t=k.children("form");t.contents().remove();o.title!=""&&t.append(o.title);var v=t.CswLayoutTable("init",{ID:o.ID+"_props",OddCellRightAlign:true,cellset:{rows:1,columns:2},onSwap:function(q,s){d(s)},showConfigButton:o.filterToPropId=="",onConfigOn:function(){m.children().each(function(){var q=
a(this),s=v.CswLayoutTable("cellset",q.attr("displayrow"),q.attr("displaycol"))[1][2],u=s.children("#"+q.attr("id")+"_subproptable"),w={fieldtype:q.attr("fieldtype"),nodeid:o.nodeid,relatednodeid:o.relatednodeid,propid:q.attr("id"),$propdiv:s.children("div"),$propxml:q,onchange:function(){},onReload:function(){b(k,p)},cswnbtnodekey:o.cswnbtnodekey};u.length>0&&j(w,o.SinglePropUrl,o.EditMode,o.cswnbtnodekey,q.attr("id"),o.nodetypeid,q,s,k,p,true)})},onConfigOff:function(){m.children().each(function(){var q=
a(this),s=v.CswLayoutTable("cellset",q.attr("displayrow"),q.attr("displaycol"))[1][2],u=s.children("#"+q.attr("id")+"_subproptable"),w={fieldtype:q.attr("fieldtype"),nodeid:o.nodeid,relatednodeid:o.relatednodeid,propid:q.attr("id"),$propdiv:s.children("div"),$propxml:q,onchange:function(){},onReload:function(){b(k,p)},cswnbtnodekey:o.cswnbtnodekey};u.length>0&&j(w,o.SinglePropUrl,o.EditMode,o.cswnbtnodekey,q.attr("id"),o.nodetypeid,q,s,k,p,false)})}});e(v,m,k,p);t.CswButton({ID:"SaveTab",enabledText:"Save Changes",
disabledText:"Saving...",onclick:function(){l(t,v,m)}});t.validate({highlight:function(q){q=a(q);q.attr("csw_invalid","1");q.animate({backgroundColor:"#ff6666"})},unhighlight:function(q){var s=a(q);if(s.attr("csw_invalid")=="1"){s.css("background-color","#66ff66");s.attr("csw_invalid","0");setTimeout(function(){s.animate({backgroundColor:"transparent"})},500)}}})}})}function d(k){g(k.cellset[1][2].children("div").first(),k.swaprow,k.swapcolumn);g(k.swapcellset[1][2].children("div").first(),k.row,
k.column)}function g(k,p,m){if(k.length>0){k=k.attr("propid");CswAjaxJSON({url:o.MovePropUrl,data:'{ "PropId": "'+k+'", "NewRow": "'+p+'", "NewColumn": "'+m+'", "EditMode": "'+o.EditMode+'" }',success:function(){}})}}function e(k,p,m,t,v){p.children().each(function(){var q=a(this),s=q.attr("id"),u=q.attr("fieldtype"),w=k.CswLayoutTable("cellset",q.attr("displayrow"),q.attr("displaycol"));if((q.attr("display")!="false"||v)&&u!="Image"&&u!="Grid"&&(o.filterToPropId==""||o.filterToPropId==s)){u=w[1][1];
u.addClass("propertylabel");q.attr("helptext")!=""?a('<a href="#" title="'+q.attr("helptext")+'" onclick="return false;">'+q.attr("name")+"</a>").appendTo(u):u.append(q.attr("name"));o.ShowCheckboxes&&q.attr("copyable")=="true"&&a('<input type="checkbox" id="check_'+s+'" class="'+o.ID+'_check" propid="'+s+'"></input>').appendTo(u)}s=w[1][2];s.addClass("propertyvaluecell");h(s,q,m,t,v)})}function h(k,p,m,t,v){k.empty();if((p.attr("display")!="false"||v)&&(o.filterToPropId==""||o.filterToPropId==p.attr("id"))){var q=
{fieldtype:p.attr("fieldtype"),nodeid:o.nodeid,relatednodeid:o.relatednodeid,propid:p.attr("id"),$propdiv:a("<div/>").appendTo(k),$propxml:p,onchange:function(){},onReload:function(){b(m,t)},cswnbtnodekey:o.cswnbtnodekey};q.$propdiv.attr("nodeid",q.nodeid);q.$propdiv.attr("propid",q.propid);q.$propdiv.attr("cswnbtnodekey",q.cswnbtnodekey);q.onchange=function(){o.onPropertyChange(q.propid,p.attr("name"))};if(p.attr("hassubprops")=="true")q.onchange=function(){j(q,o.SinglePropUrl,o.EditMode,o.cswnbtnodekey,
p.attr("id"),o.nodetypeid,p,k,m,t,false);o.onPropertyChange(q.propid,p.attr("name"))};a.CswFieldTypeFactory("make",q);var s=p.children("subprops");if(s.length>0&&s.children('[display != "false"]').length>0||v){var u=k.CswLayoutTable("init",{ID:q.propid+"_subproptable",OddCellRightAlign:true,cellset:{rows:1,columns:2},onSwap:function(w,A){d(A)},showConfigButton:false});e(u,s,m,t,v);v?u.CswLayoutTable("ConfigOn"):u.CswLayoutTable("ConfigOff")}}}function j(k,p,m,t,v,q,s,u,w,A,x){a.CswFieldTypeFactory("save",
k);CswAjaxXml({url:p,data:"EditMode="+m+"&SafeNodeKey="+t+"&PropId="+v+"&NodeTypeId="+q+"&NewPropXml="+xmlToString(s),success:function(H){h(u,H.children().first(),w,A,x)}})}function l(k,p,m){if(k.valid()){n(p,m);CswAjaxJSON({url:o.SavePropUrl,data:"{ EditMode: '"+o.EditMode+"', SafeNodeKey: '"+o.cswnbtnodekey+"', NodeTypeId: '"+o.nodetypeid+"', ViewId: '"+a.CswCookie("get",CswCookieName.CurrentView.ViewId)+"', NewPropsXml: '"+xmlToString(m)+"' }",success:function(t){if(o.ShowCheckboxes){var v=a("."+
o.NodeCheckTreeId+"_check:checked"),q=a("."+o.ID+"_check:checked");if(v.length>0&&q.length>0){var s="{ SourceNodeKey: '"+o.cswnbtnodekey+"', CopyNodeIds: [",u=true;v.each(function(){var w=a(this).attr("nodeid");u||(s+=",");s+="'"+w+"'";u=false});s+="], PropIds: [";u=true;q.each(function(){var w=a(this).attr("propid");u||(s+=",");s+="'"+w+"'";u=false});s+="] }";CswAjaxJSON({url:o.CopyPropValuesUrl,data:s})}}o.onSave(t.nodeid,t.cswnbtnodekey)}})}}function n(k,p){p.children().each(function(){var m={$propxml:a(this),
$propdiv:"",$propCell:"",fieldtype:"",nodeid:o.nodeid,cswnbtnodekey:o.cswnbtnodekey};m.fieldtype=m.$propxml.attr("fieldtype");var t=k.CswLayoutTable("cellset",m.$propxml.attr("displayrow"),m.$propxml.attr("displaycol"));m.$propcell=t[1][2];m.$propdiv=m.$propcell.children("div").first();a.CswFieldTypeFactory("save",m);if(m.$propxml.attr("hassubprops")=="true"){t=m.$propxml.children("subprops");if(t.length>0&&t.children('[display != "false"]').length>0){m=m.$propcell.children("#"+m.$propxml.attr("id")+
"_subproptable").first();n(m,t)}}})}var o={ID:"",TabsUrl:"/NbtWebApp/wsNBT.asmx/getTabs",SinglePropUrl:"/NbtWebApp/wsNBT.asmx/getSingleProp",PropsUrl:"/NbtWebApp/wsNBT.asmx/getProps",MovePropUrl:"/NbtWebApp/wsNBT.asmx/moveProp",SavePropUrl:"/NbtWebApp/wsNBT.asmx/saveProps",CopyPropValuesUrl:"/NbtWebApp/wsNBT.asmx/copyPropValues",nodeid:"",relatednodeid:"",tabid:"",cswnbtnodekey:"",nodetypeid:"",filterToPropId:"",title:"",EditMode:"Edit",onSave:function(){},onBeforeTabSelect:function(){return true},
onTabSelect:function(){},onPropertyChange:function(){},ShowCheckboxes:false,NodeCheckTreeId:""};f&&a.extend(o,f);var i=a('<div id="'+o.ID+'_tabdiv" />').appendTo(a(this));(function(){CswAjaxXml({url:o.TabsUrl,data:"EditMode="+o.EditMode+"&SafeNodeKey="+o.cswnbtnodekey+"&NodeTypeId="+o.nodetypeid,success:function(k){i.contents().remove();var p=a("<div><ul></ul></div>");i.append(p);var m=0,t=0;k.children().each(function(){$tab=a(this);p.children("ul").append('<li><a href="#'+$tab.attr("id")+'">'+$tab.attr("name")+
"</a></li>");p.append('<div id="'+$tab.attr("id")+'"><form id="'+$tab.attr("id")+'_form" /></div>');if($tab.attr("id")==o.tabid)m=t;t++});p.tabs({selected:m,select:function(q,s){if(o.onBeforeTabSelect(w)){var u=a(p.children("div")[s.index]),w=u.attr("id");b(u,w);o.onTabSelect(w)}else return false}});k=a(p.children("div")[p.tabs("option","selected")]);var v=k.attr("id");b(k,v);o.onTabSelect(v)}})})(o);return this}})(jQuery);(function(a){function f(d,g){return jsTreeGetSelected(d).$item.attr("rel")==g.attr("rel")}var b={init:function(d){var g={ID:"",ViewTreeUrl:"/NbtWebApp/wsNBT.asmx/getTreeOfView",NodeTreeUrl:"/NbtWebApp/wsNBT.asmx/getTreeOfNode",viewid:"",viewmode:"",nodeid:"",cswnbtnodekey:"",IncludeNodeRequired:false,UsePaging:true,onSelectNode:function(){},onViewChange:function(){},SelectFirstChild:true,ShowCheckboxes:false};d&&a.extend(g,d);var e=g.ID+"_",h=a('<div id="'+e+'" class="treediv" />').appendTo(a(this)),
j=g.ViewTreeUrl;d="UsePaging="+g.UsePaging+"&ViewNum="+g.viewid+"&IDPrefix="+e+"&IsFirstLoad=true&ParentNodeKey=&IncludeNodeRequired="+g.IncludeNodeRequired+"&IncludeNodeKey=";if(g.cswnbtnodekey!=undefined)d+=g.cswnbtnodekey;if(g.viewid==""||g.viewid==undefined){j=g.NodeTreeUrl;d="IDPrefix="+e+"&NodePk="+g.nodeid}CswAjaxXml({url:j,data:d,success:function(l){var n="",o=["themes","html_data","ui","types","crrm"],i;if(g.nodeid!=undefined&&g.nodeid!="")n=e+g.nodeid;var k=l.children("viewid").text();if(g.viewid!=
k){g.onViewChange(k);g.viewid=k}k=l.find('item[id="'+n+'"]');if(n==""||k.length==0)if(g.SelectFirstChild)if(g.viewmode=="list"){n=l.find("item").first().attr("id");i={dots:false}}else{n=l.find("item").first().find("item").first().attr("id");i={dots:true}}else n=e+"root";k=l.find('item[id="'+n+'"]');var p=[],m=0;k.parents("item").andSelf().each(function(){p[m]=a(this).attr("id");m++});k=l.find("types").text();k=a.parseJSON(k);l=l.find("tree").children("root");if(l.length>0){var t=function(q){var s=
q.attr("id").substring(e.length),u=q.children("content").children("name").text(),w='<li id="'+q.attr("id")+'" ';w+='    rel="'+q.attr("rel")+'" ';w+='    class="jstree-'+q.attr("state")+'" ';if(q.attr("cswnbtnodekey")!=undefined)w+='    cswnbtnodekey="'+q.attr("cswnbtnodekey").replace(/"/g,"&quot;")+'"';w+=">";if(g.ShowCheckboxes)w+='  <input type="checkbox" class="'+e+'check" id="check_'+s+'" rel="'+q.attr("rel")+'" nodeid="'+s+'" nodename="'+u+'"></input>';w+='  <a href="#">'+u+"</a>";if(q.children("item").length>
0){w+="<ul>";q.children("item").each(function(){w+=t(a(this))});w+="</ul>"}w+="</li>";return w},v="<ul>";l.children().each(function(){v+=t(a(this))});v+="</ul>";h.jstree({html_data:{data:v,ajax:{type:"POST",url:j,dataType:"xml",data:function(q){q=q.attr("cswnbtnodekey");return"UsePaging="+g.UsePaging+"&ViewNum="+g.viewid+"&IDPrefix="+e+"&IsFirstLoad=false&ParentNodeKey="+q+"&IncludeNodeRequired=false&IncludeNodeKey="},success:function(q,s,u){var w="";a(u.responseXML).children().first().children().each(function(){w+=
t(a(this))});return w}}},ui:{select_limit:1,initially_select:n,select_prev_on_delete:true},themes:i,core:{initially_open:p},types:{types:k,max_children:-2,max_depth:-2},plugins:o}).bind("load_node.jstree",function(){a("."+e+"check").unbind("click");a("."+e+"check").click(function(){return f(h,a(this))})}).bind("select_node.jstree",function(q,s){var u=jsTreeGetSelected(h),w={nodeid:u.id,nodename:u.text,iconurl:u.iconurl,cswnbtnodekey:u.$item.attr("cswnbtnodekey"),viewid:g.viewid};if(w.nodename=="More..."){u=
"";var A=s.inst._get_parent(s.rslt.obj);if(A!=-1)u=A.attr("cswnbtnodekey");if(u==undefined)u="";CswAjaxXml({url:j,data:"UsePaging="+g.UsePaging+"&ViewNum="+g.viewid+"&IDPrefix="+e+"&IsFirstLoad=false&ParentNodeKey="+u+"&IncludeNodeRequired=false&IncludeNodeKey="+w.cswnbtnodekey,success:function(x){function H(){L.length>0&&h.jstree("create","#"+O,"after",{attr:{id:L.attr("id"),rel:L.attr("rel"),cswnbtnodekey:L.attr("cswnbtnodekey")},data:L.children("content").children("name").text(),state:L.attr("state")},
function(){O=L.attr("id");L=L.next();H()},true,true)}h.jstree("remove","#"+e+w.nodeid);var P=jsTreeGetSelected(h),O=e+P.id,L=x.children().first();H()}})}else{a("."+e+"check").attr("checked","");g.onSelectNode(w)}});a("."+e+"check").click(function(){return f(h,a(this))})}else h.append("No Results")}});return h},selectNode:function(d){var g={newnodeid:"",newcswnbtnodekey:""};d&&a.extend(g,d);d=a(this).children(".treediv");var e=d.attr("id");d.jstree("select_node","#"+e+g.newnodeid)}};a.fn.CswNodeTree=
function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswNodeTree")}})(jQuery);(function(a){var f={init:function(b){var d={ID:"",NodeTypesUrl:"/NbtWebApp/wsNBT.asmx/getNodeTypes",nodetypeid:"",onSelect:function(){},onSuccess:function(){}};b&&a.extend(d,b);b=a(this);b.contents().remove();var g=a('<select id="'+d.ID+'_sel" />').appendTo(b);g.change(function(){d.onSelect(g.val())});CswAjaxXml({url:d.NodeTypesUrl,data:"",success:function(e){e.children("nodetype").each(function(){var h=a(this);g.append('<option value="'+h.attr("id")+'">'+h.attr("name")+"</option>")});d.onSuccess()}});
return g},value:function(){return a(this).val()}};a.fn.CswNodeTypeSelect=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswNodeTypeSelect")}})(jQuery);(function(a){var f={init:function(b){var d={ID:"",Value:"",MinValue:"",MaxValue:"",Precision:"",ReadOnly:false,Required:false,onchange:function(){}};b&&a.extend(d,b);b=a(this);b.contents().remove();if(d.ReadOnly)b.append(d.Value);else{b=a('<input type="text" class="textinput number" id="'+d.ID+'" name="'+d.ID+'" value="'+d.Value+'" />"').appendTo(b).change(d.onchange);if(d.MinValue!=undefined){jQuery.validator.addMethod(d.ID+"_validateFloatMinValue",function(g,e){return this.optional(e)||validateFloatMinValue(a(e).val(),
d.MinValue)},"Number must be greater than or equal to "+d.MinValue);b.addClass(d.ID+"_validateFloatMinValue")}if(d.MaxValue!=undefined){jQuery.validator.addMethod(d.ID+"_validateFloatMaxValue",function(g,e){return this.optional(e)||validateFloatMaxValue(a(e).val(),d.MaxValue)},"Number must be less than or equal to "+d.MaxValue);b.addClass(d.ID+"_validateFloatMaxValue")}if(d.Precision==undefined||d.Precision<=0){jQuery.validator.addMethod(d.ID+"_validateInteger",function(g,e){return this.optional(e)||
validateInteger(a(e).val())},"Value must be an integer");b.addClass(d.ID+"_validateInteger")}else{jQuery.validator.addMethod(d.ID+"_validateFloatPrecision",function(g,e){return this.optional(e)||validateFloatPrecision(a(e).val(),d.Precision)},"Value must be numeric");b.addClass(d.ID+"_validateFloatPrecision")}d.Required&&b.addClass("required")}},value:function(){return a(this).find("input").val()},setValue:function(b){a(this).find("input").val(b)}};a.fn.CswNumberTextBox=function(b){if(f[b])return f[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswNumberTextBox")}})(jQuery);(function(a){a.fn.CswQuickLaunch=function(f){var b={Url:"/NbtWebApp/wsNBT.asmx/getQuickLaunchItems",onLinkClick:function(){},onSuccess:function(){}};f&&a.extend(b,f);var d=a(this);CswAjaxXml({url:b.Url,data:"{ UserId: '' }",success:function(g){var e=a('<div id="quicklaunchdiv"><ul id="launchitems"></ul></div>').appendTo(d).children();g.children("items").children("item").each(function(){var h=a(this),j={type:h.attr("type"),viewmode:h.attr("viewmode"),text:h.attr("text"),url:h.attr("url"),viewid:h.attr("itemid")};
switch(j.type){case "view":a('<li><a href="#'+j.text+"_"+j.type+"_"+j.viewmode+"_"+j.viewid+'">'+j.text+"</a></li>").appendTo(e).children("a").click(function(){b.onLinkClick(j);return false});break;case "action":a("<li><a href="+j.url+">"+j.text+"</a></li>").appendTo(e)}});b.onSuccess()}});return this}})(jQuery);(function(a){a.fn.CswSearch=function(f){function b(p){var m={$link:""};p&&a.extend(m,p);if("Advanced"===m.$link.text()){a(".csw_viewbuilder_subfield_select").each(function(){a(this).show()});a(".csw_viewbuilder_filter_select").each(function(){a(this).show()});a(".csw_viewbuilder_default_filter").each(function(){a(this).hide()});m.$link.text("Simple");p=false}else{a(".csw_viewbuilder_subfield_select").each(function(){a(this).hide()});a(".csw_viewbuilder_filter_select").each(function(){a(this).hide()});
a(".csw_viewbuilder_default_filter").each(function(){a(this).show()});m.$link.text("Advanced");p=true}return p}function d(){for(var p=2;p<=i.propsCount;){var m=i.$searchTable.CswTable("cell",p,1).attr({align:"right"}),t=a("<span>&nbsp;and&nbsp;</span>");m.append(t);p++}var v=1;i.$propsXml.children("property").each(function(){var q=a(this),s=i.$searchTable.CswTable("cell",v,2),u=makeId({ID:"viewbuilderpropid",suffix:q.attr("propid"),prefix:i.idprefix});s.CswDOM("span",{ID:u,value:q.attr("metadatatypename"),
cssclass:"csw_viewbuilder_metadatatype_static"}).attr("relatedidtype",q.attr("relatedidtype"));i.$parent=i.$searchTable;i.selectedSubfieldVal="";i.selectedFilterVal="";i.isHidden=true;j({$thisProp:q,propRow:v});v++});i.bottomRow=v;i.bottomCell=1;i.searchtype="viewsearch";i.$parent=i.$searchTable;l()}function g(){var p=i.$searchTable.CswTable("cell",1,2),m=a(xmlToString(i.$nodeTypesXml.children("select"))).change(function(){var t=a(this);t={objectPk:t.val(),relatedIdType:t.find(":selected").attr("title"),
cswnbtnodekey:"",idprefix:"",$propsXml:"",$parent:i.$searchTable,$nodeTypesSelect:t};a.extend(i,t);e()});i.$nodeTypesSelect=m;p.append(m);i.$parent=i.$searchTable;h();i.bottomRow=i.propsCount+1;i.bottomCell=2;i.searchtype="nodetypesearch";l()}function e(){CswAjaxXml({url:i.getNewPropsUrl,data:"RelatedIdType="+i.relatedIdType+"&ObjectPk="+i.nodetypeid+"&IdPrefix="+i.idprefix+"&NodeKey="+i.cswnbtnodekey,success:function(p){i.$propsXml=p;h()}})}function h(){for(var p=1;p<=i.propsCount;){var m=i.$parent.CswTable("cell",
p,3).empty(),t=a(xmlToString(i.$propsXml.children("properties").children("select"))).change(function(){var x={selectedPropVal:a(this).val(),selectedSubfieldVal:"",selectedFilterVal:""};a.extend(i,x);h()});i.selectedPropVal!==""&&t.val(i.selectedPropVal).attr("selected",true);m.append(t);var v=t.find(":selected").val();m=i.$propsXml.children("propertyfilters").children("property[propid="+v+"]");var q=m.children("defaultsubfield").attr("filter"),s=m.attr("fieldtype"),u=i.$parent.CswTable("cell",p,4).empty();
q=u.CswDOM("span",{ID:"default_filter_"+p,prefix:i.idprefix,value:q,cssclass:"csw_viewbuilder_default_filter"}).attr({align:"center"});i.isHidden||q.hide();var w=a(xmlToString(m.children("subfields").children("select"))).change(function(){var x=a(this);x={selectedPropVal:t.val(),selectedSubfieldVal:x.val(),selectedFilterVal:"",isHidden:false};a.extend(i,x);h()});i.isHidden&&w.hide();i.selectedSubfieldVal!==""&&w.val(i.selectedSubfieldVal).attr("selected",true);u.append(w);var A=w.find(":selected").val();
u=w.find(":selected").attr("defaultvalue");q=i.$parent.CswTable("cell",p,5).empty();A=a(xmlToString(m.children("propertyfilters").children("subfield[column="+A+"]").children("select"))).change(function(){var x=a(this);x={$thisProp:t.val(),selectedSubfieldVal:w.val(),selectedFilterVal:x.val(),isHidden:false};a.extend(i,x);h()});i.isHidden&&A.hide();i.selectedFilterVal!==""&&A.val(i.selectedFilterVal).attr("selected",true);q.append(A);A.find(":selected").val();q=i.$parent.CswTable("cell",p,6).empty();
v=makeId({ID:"search_input_viewbuilderpropid",suffix:v,prefix:i.idprefix});if(s==="List")q.append(a(xmlToString(m.children("filtersoptions").children("select"))));else if(s==="Logical")q.CswTristateCheckBox("init",{ID:v});else{if(u!==""&&u!=undefined)m=u;else{m=t.find(":selected").text();if(m!==w.find(":selected").text())m+="'s "+w.find(":selected").text()}q.CswDOM("input",{ID:v,type:"text",cssclass:"csw_viewbuilder_input",placeholder:m}).attr("autocomplete","on").attr("autofocus","true").attr({width:"200px"})}p++}}
function j(p){var m={$thisProp:"",propRow:""};p&&a.extend(m,p);var t=m.$thisProp,v=m.propRow,q=t.attr("propid");m=t.attr("propname");p=t.attr("filtarbitraryid");var s=i.$parent.CswTable("cell",v,3).empty();q=makeId({ID:q,prefix:i.idprefix});s.CswDOM("span",{ID:q,value:m});var u=t.children("defaultsubfield").attr("filter");s=t.attr("fieldtype");q=i.$parent.CswTable("cell",v,4).empty();var w=makeId({ID:"default_filter",suffix:p,prefix:i.idprefix});u=q.CswDOM("span",{ID:w,value:u,cssclass:"csw_viewbuilder_default_filter"}).attr({align:"center"});
i.isHidden||u.hide();var A=a(xmlToString(t.children("subfields").children("select"))).change(function(){var H={selectedSubfieldVal:a(this).val(),selectedFilterVal:"",isHidden:false};a.extend(i,H);j({$thisProp:t,propRow:v})});i.isHidden&&A.hide();i.selectedSubfieldVal!==""&&A.val(i.selectedSubfieldVal).attr("selected",true);q.append(A);u=A.find(":selected").val();q=A.find(":selected").attr("defaultvalue");w=i.$parent.CswTable("cell",v,5).empty();var x=a(xmlToString(t.children("propertyfilters").children("subfield[column="+
u+"]").children("select"))).change(function(){a(this);var H={selectedSubfieldVal:A.val(),selectedFilterVal:x.val(),isHidden:false};a.extend(i,H);j({$thisProp:t,propRow:v})});i.isHidden&&x.hide();i.selectedFilterVal!==""&&x.val(i.selectedFilterVal).attr("selected",true);w.append(x);x.find(":selected").val();u=i.$parent.CswTable("cell",v,6).empty();if(s==="List")u.append(a(xmlToString(t.children("filtersoptions").children("select"))));else if(s==="Logical"){p=makeId({ID:"search_input_filtarbitraryid",
suffix:p,prefix:i.idprefix});u.CswTristateCheckBox("init",{ID:p,Checked:q})}else{if(q!==""&&q!==undefined)m=q;else if(m!==A.find(":selected").text())m+="'s "+A.find(":selected").text();p=makeId({ID:"search_input_filtarbitraryid",suffix:p,prefix:i.idprefix});p=u.CswDOM("input",{ID:p,type:"text",cssclass:"csw_viewbuilder_input",placeholder:m}).attr("autocomplete","on").attr("autofocus","true").attr({width:"200px"});s==="Date"&&p.datepicker()}}function l(){var p=i.$parent,m=i.bottomCell,t=m+1,v=i.bottomRow;
if(i.searchtype==="nodetypesearch"){p=i.$parent.CswTable("cell",i.bottomRow,i.bottomCell).empty();t=makeId({prefix:i.idprefix,ID:"split_cell_table"});p=p.CswTable("init",{ID:t,cellpadding:1,cellspacing:1,cellalign:"left",align:"left"});m=1;t=2;v=1}m=p.CswTable("cell",v,m).empty();var q=makeId({ID:"clear_button",prefix:i.idprefix});m.CswButton({ID:q,enabledText:"Clear",disabledText:"Clear",disableOnClick:false,onclick:function(){k.empty();var u=makeId({prefix:i.idprefix,ID:"search_tbl"});i.$searchTable=
k.CswTable("init",{ID:u,cellpadding:1,cellspacing:1,cellalign:"center",align:"center"});switch(i.searchtype){case "nodetypesearch":g();case "viewsearch":d()}}});p=p.CswTable("cell",v,t).empty();t=makeId({ID:"advanced_options",prefix:i.idprefix});var s=p.CswDOM("link",{ID:t,href:"#advanced",value:"Advanced"}).click(function(){i.isHidden=b({$link:s})});p=i.$parent.CswTable("cell",i.bottomRow,i.searchBtnCell).attr({align:"right"}).empty();t=makeId({ID:"search_button",prefix:i.idprefix});p.CswButton({ID:t,
enabledText:"Search",disabledText:"Searching",enableAfterClick:true,onclick:function(){o()}})}function n(){k.empty();CswAjaxXml({url:i.getClientSearchXmlUrl,data:"ViewIdNum="+i.viewid+"&SelectedNodeTypeIdNum="+i.nodetypeid+"&IdPrefix="+i.idprefix+"&NodeKey="+i.cswnbtnodekey,success:function(p){i.searchtype=p.attr("searchtype");var m=makeId({prefix:i.idprefix,ID:"search_tbl"});switch(i.searchtype){case "nodetypesearch":i.$searchTable=k.CswTable("init",{ID:m,cellpadding:1,cellspacing:1,cellalign:"center",
align:"center"});i.$nodeTypesXml=p.children("nodetypes");i.$propsXml=p.children("nodetypeprops");g();break;case "viewsearch":i.$searchTable=k.CswTable("init",{ID:m,cellpadding:1,cellspacing:1,cellalign:"left",align:"center"});i.$propsXml=p.children("properties");i.propsCount=p.children("properties").children("property").size();d()}}})}function o(){var p,m=[],t;switch(i.searchtype){case "nodetypesearch":t=i.doNodeSearchUrl;var v=i.$nodeTypesSelect.val(),q=i.$nodeTypesSelect.find(":selected").attr("title");
a(".csw_viewbuilder_properties_select").each(function(){var s=a(this),u=s.text();s=s.val();var w=i.$parent.CswDOM("findelement",{ID:"subfield_select_viewbuilderpropid_"+s,prefix:i.idprefix}).find(":selected").text(),A=i.$parent.CswDOM("findelement",{ID:"filter_select_viewbuilderpropid_"+s,prefix:i.idprefix}).find(":selected").val();u=i.$propsXml.children("propertyfilters").children('property[propname="'+u+'"][propid="'+s+'"]').attr("fieldtype");var x=i.$parent.CswDOM("findelement",{ID:"search_input_viewbuilderpropid_"+
s,prefix:i.idprefix});if(u==="Logical")u=x.CswTristateCheckBox("value");else if(u==="List"){$searchList=i.$parent.CswDOM("findelement",{ID:"filtersoptions_select_viewbuilderpropid_"+s,prefix:i.idprefix});u=$searchList.find(":selected").val()}else u=x.val();m.push({objectpk:v,relatedidtype:q,propid:s,subfield:w,filter:A,searchtext:u})});p={nodetypeprops:m};break;case "viewsearch":t=i.doViewSearchUrl;i.$propsXml.children("property").each(function(){var s=a(this);s.val();var u=s.attr("filtarbitraryid"),
w=s.attr("proparbitraryid"),A=s.attr("propid"),x=s.attr("fieldtype"),H=i.$parent.CswDOM("findelement",{ID:"search_input_filtarbitraryid_"+u,prefix:i.idprefix});if(x==="Logical")x=H.CswTristateCheckBox("value");else if(x==="List"){$searchList=i.$parent.CswDOM("findelement",{ID:"filtersoptions_select_filtarbitraryid_"+u,prefix:i.idprefix});x=$searchList.find(":selected").val()}else x=H.val();if(x!==""){H=i.$parent.CswDOM("findelement",{ID:"subfield_select_filtarbitraryid_"+u,prefix:i.idprefix}).find(":selected").text();
var P=i.$parent.CswDOM("findelement",{ID:"filter_select_filtarbitraryid_"+u,prefix:i.idprefix}).find(":selected").val(),O=s.attr("relatedidtype");s={proptype:s.attr("proptype"),propid:A,filtarbitraryid:u,proparbitraryid:w,relatedidtype:O,subfield:H,filter:P,searchtext:x};m.push(s)}});p={viewprops:m,viewid:i.viewid}}p&&CswAjaxJSON({url:t,data:'{SearchJson: "'+jsonToString(p)+'"}',success:function(s){i.viewid=s.sessionviewid;i.searchtype="viewsearch";n();i.onSearchSubmit({viewid:s.sessionviewid,viewmode:s.viewmode})}})}
var i={$parent:"",$searchTable:"",getNewPropsUrl:"/NbtWebApp/wsNBT.asmx/getNodeTypeSearchProps",doViewSearchUrl:"/NbtWebApp/wsNBT.asmx/doViewSearch",doNodeSearchUrl:"/NbtWebApp/wsNBT.asmx/doNodeTypeSearch",getSearchableViewsUrl:"/NbtWebApp/wsNBT.asmx/getSearchableViews",getClientSearchXmlUrl:"/NbtWebApp/wsNBT.asmx/getClientSearchXml",viewid:"",nodetypeid:"",cswnbtnodekey:"",relatedidtype:"",idprefix:"csw",propsCount:1,isHidden:true,$propsXml:"",$nodeTypesXml:"",$nodeTypesSelect:"",onSearchSubmit:function(){},
selectedPropVal:"",selectedSubfieldVal:"",selectedFilterVal:"",bottomRow:2,bottomCell:1,propRow:"",clearBtnCell:1,searchBtnCell:6,searchtype:""};f&&a.extend(i,f);f=a(this).CswDOM("div",{ID:"CswSearchForm",prefix:i.idprefix});i.$parent=f;var k=f.CswDOM("span").CswDOM("div",{ID:"search_criteria_div",prefix:i.idprefix});n();return f}})(jQuery);(function(a){a.fn.CswTable=function(f){function b(h){return h.children("tbody").children("tr").length}function d(h){h=h.children("tbody").children("tr");for(var j=0,l=0;l<h.length;l++){var n=a(h[l]).children("td");if(n.length>j)j=n.length}return j}function g(h,j,l){var n=null;if(h.length>0&&j!=undefined&&j!=""&&l!=undefined&&l!=""){if(j<=0){log("error: row must be greater than 1, got: "+j);j=1}if(l<=0){log("error: col must be greater than 1, got: "+l);l=1}for(;j>h.children("tbody").children("tr").length;)h.append("<tr></tr>");
for(n=a(h.children("tbody").children("tr")[j-1]);l>n.children("td").length;){var o=h.attr("cellalign");if(n.children("td").length==0&&h.attr("FirstCellRightAlign")=="true"||n.children("td").length%2==0&&h.attr("OddCellRightAlign")=="true")o="right";o=a('<td class="'+h.attr("cellcssclass")+'" align="'+o+'" valign="'+h.attr("cellvalign")+'"></td>').appendTo(n);h.trigger("CswTable_onCreateCell",[h,o,j,n.children("td").length])}n=a(n.children("td")[l-1])}return n}var e={init:function(h){var j={ID:"",
prefix:"",suffix:"",TableCssClass:"",CellCssClass:"",cellpadding:0,cellspacing:0,cellalign:"top",width:"",align:"",cellalign:"",cellvalign:"top",onCreateCell:function(){},FirstCellRightAlign:false,OddCellRightAlign:false};h&&a.extend(j,h);h=makeId({ID:j.ID,prefix:j.prefix,suffix:j.suffix});h=a('<table id="'+h+'"></table>');h.addClass(j.TableCssClass);h.attr("width",j.width);h.attr("align",j.align);h.attr("cellpadding",j.cellpadding);h.attr("cellspacing",j.cellspacing);h.attr("border","0");h.attr("cellalign",
j.cellalign);h.attr("cellvalign",j.cellvalign);h.attr("cellcssclass",j.CellCssClass);h.attr("FirstCellRightAlign",j.FirstCellRightAlign);h.attr("OddCellRightAlign",j.OddCellRightAlign);h.bind("CswTable_onCreateCell",function(l,n,o,i,k){j.onCreateCell(l,n,o,i,k);l.stopPropagation()});h.trigger("CswTable_onCreateCell",[h,h.find("td"),1,1]);a(this).append(h);return h},cell:function(h,j){var l=a(this);return g(l,h,j)},maxrows:function(){return b(a(this))},maxcolumns:function(){return d(a(this))},finish:function(h){for(var j=
a(this),l=b(j),n=d(j),o=1;o<=l;o++)for(var i=1;i<=n;i++){var k=g(j,o,i);if(k.contents().length==0)h!=null?h(k,o,i):k.append("&nbsp;")}},findRow:function(h){var j=a(this).children("tbody").children("tr");if(h!=""&&h!=null)j=j.filter(h);return j},findCell:function(h){var j=a(this).children("tbody").children("tr").children("td");if(h!=""&&h!=null)j=j.filter(h);return j},rowFindCell:function(h,j){var l=h.children("td");if(j!=""&&j!=null)l=l.filter(j);return l}};if(e[f])return e[f].apply(this,Array.prototype.slice.call(arguments,
1));else if(typeof f==="object"||!f)return e.init.apply(this,arguments);else a.error("Method "+f+" does not exist on CswTable")}})(jQuery);(function(a){var f={init:function(b){var d={ID:"",prefix:"",Checked:"",ReadOnly:false,Required:false,onchange:function(){}};b&&a.extend(d,b);b=a(this);b.empty();var g=d.prefix+"_"+d.ID;if(d.Checked==""||d.Checked==undefined||d.Checked==null)d.Checked="null";if(d.ReadOnly)switch(d.Checked){case "true":b.append("Yes");break;case "false":b.append("No")}else{var e;switch(d.Checked){case "true":e=CswImageButton_ButtonType.CheckboxTrue;break;case "false":e=CswImageButton_ButtonType.CheckboxFalse;break;
default:e=CswImageButton_ButtonType.CheckboxNull}b.CswImageButton({ID:g,ButtonType:e,AlternateText:d.Checked,onClick:function(h){var j=d.Required,l=h.attr("alt"),n=CswImageButton_ButtonType.CheckboxNull,o="null";if(l=="null"){n=CswImageButton_ButtonType.CheckboxTrue;o="true"}else if(l=="false")if(j=="true"){n=CswImageButton_ButtonType.CheckboxTrue;o="true"}else{n=CswImageButton_ButtonType.CheckboxNull;o="null"}else if(l=="true"){n=CswImageButton_ButtonType.CheckboxFalse;o="false"}h.attr("alt",o);
h=n;d.onchange();return h}})}},value:function(){return a(this).attr("alt")}};a.fn.CswTristateCheckBox=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswTristateCheckBox")}})(jQuery);(function(a){a.fn.CswViewEditor=function(f){function b(y){m=y}function d(y,B){var F=false;if(a("#"+n.ID+"_all:checked").length>0)F=true;k.text("");o.CswWizard("button","next","disable");CswAjaxJSON({url:n.ViewGridUrl,data:"{ All: "+F+" }",success:function(D){p.empty();var G=a('<div id="'+n.ID+'_gp" style="width:100%; height:20px;" />').appendTo(p),z=a('<table id="'+n.ID+'_gt" />').appendTo(p);a.extend(D,{autowidth:true,height:180,onSelectRow:function(C,J){if(J){q.CswButton("enable");s.CswButton("enable")}else{q.CswButton("disable");
s.CswButton("disable")}k.text(g(z,n.ColumnViewName));o.CswWizard("button","next","enable")},pager:G});z.jqGrid(D).hideCol(n.ColumnViewId);B!=undefined&&z.setSelection(e(z,B));y(z)}})}function g(y,B){var F=y.jqGrid("getGridParam","selrow");return y.jqGrid("getCell",F,B)}function e(y,B){var F=y.jqGrid("getCol",n.ColumnViewId,true),D=0,G;for(G in F)if(F[G].value==B)D=F[G].id;return D}function h(y,B,F){var D,G,z;IsAdministrator({Yes:function(){y.CswTable("cell",B,1).append(F);var C=y.CswTable("cell",
B,2),J=y.attr("id");D=a('<select id="'+J+'_vissel" />').appendTo(C);D.append('<option value="User">User:</option>');D.append('<option value="Role">Role:</option>');D.append('<option value="Global">Global</option>');G=C.CswNodeSelect("init",{ID:J+"_visrolesel",objectclass:"RoleClass"}).hide();z=C.CswNodeSelect("init",{ID:J+"_visusersel",objectclass:"UserClass"});D.change(function(){var K=D.val();if(K=="Role"){G.show();z.hide()}else if(K=="User"){G.hide();z.show()}else{G.hide();z.hide()}})}});return{getvisibilityselect:function(){return D},
getvisroleselect:function(){return G},getvisuserselect:function(){return z}}}function j(y,B){var F=l(y,E);B.jstree({html_data:{data:F.htmlstring},ui:{select_limit:1},types:{types:F.types,max_children:-2,max_depth:-2},plugins:["themes","html_data","ui","types","crrm"]});B.find(".vieweditor_childselect").change(function(){var z=a(this),C=z.find("option:selected").data("optionviewxml");z.attr("arbid")=="root"?a(C).appendTo(E):a(C).appendTo(E.find('[arbitraryid="'+z.attr("arbid")+'"]'));j(y,B)});B.find(".vieweditor_deletespan").each(function(){var z=
a(this);z.CswImageButton({ButtonType:CswImageButton_ButtonType.Delete,AlternateText:"Delete",ID:z.attr("arbid")+"_delete",onClick:function(C){C=C.parent();E.find('[arbitraryid="'+C.attr("arbid")+'"]').remove();j(y,B);return CswImageButton_ButtonType.None}})});y==5&&B.find(".vieweditor_viewproplink").click(function(){a(".vieweditor_addfilter").hide();a(this).parent().children("ul").children("li").children("span.vieweditor_addfilter").show()});if(y==6){var D=S.CswTable("cell",1,2),G=g(m,n.ColumnViewMode);
B.find(".vieweditor_viewrootlink").click(function(){D.empty()});B.find(".vieweditor_viewrellink").click(function(){$a=a(this);D.empty();var z=E.find('[arbitraryid="'+$a.attr("arbid")+'"]'),C=D.CswTable({ID:n.ID+"_editrel",FirstCellRightAlign:true});C.CswTable("cell",1,1).append("Allow Deleting");var J=a('<input type="checkbox" id="'+n.ID+'_adcb" />').appendTo(C.CswTable("cell",1,2));z.attr("allowdelete").toLowerCase()=="true"&&J.attr("checked","true");C.CswTable("cell",2,1).append("Group By");var K=
a('<select id="'+n.ID+'_gbs" />').appendTo(C.CswTable("cell",2,2));CswAjaxXml({url:n.PropNamesUrl,data:"Type="+z.attr("secondtype")+"&Id="+z.attr("secondid"),success:function(I){K.empty();a('<option value="">[None]</option>').appendTo(K);I.children().each(function(){var N=a(this),Q=a('<option value="'+N.attr("propid")+'">'+N.attr("propname")+"</option>").appendTo(K).data("propxml",N);z.attr("groupbypropid")==N.attr("propid")&&z.attr("groupbyproptype")==N.attr("proptype")&&z.attr("groupbypropname")==
N.attr("propname")&&Q.attr("selected","true")})}});var M;if(G=="Tree"){C.CswTable("cell",3,1).append("Show In Tree");M=a('<input type="checkbox" id="'+n.ID+'_stcb" />').appendTo(C.CswTable("cell",3,2));z.attr("showintree").toLowerCase()=="true"&&M.attr("checked","true")}C.CswTable("cell",4,2).CswButton({ID:n.ID+"_saverel",enabledText:"Apply",disableOnClick:false,onclick:function(){M!=undefined&&z.attr("showintree",M.is(":checked"));z.attr("allowdelete",J.is(":checked"));if(K.val()!=""){var I=K.find(":selected").data("propxml");
z.attr("groupbypropid",I.attr("propid"));z.attr("groupbyproptype",I.attr("proptype"));z.attr("groupbypropname",I.attr("propname"))}else{z.attr("groupbypropid","");z.attr("groupbyproptype","");z.attr("groupbypropname","")}}})});B.find(".vieweditor_viewproplink").click(function(){$a=a(this);D.empty();if(G=="Grid"){var z=E.find('[arbitraryid="'+$a.attr("arbid")+'"]'),C=D.CswTable({ID:n.ID+"_editprop",FirstCellRightAlign:true});C.CswTable("cell",1,1).append("Sort By");var J=a('<input type="checkbox" id="'+
n.ID+'_sortcb" />').appendTo(C.CswTable("cell",1,2));z.attr("sortby").toLowerCase()=="true"&&J.attr("checked","true");C.CswTable("cell",2,1).append("Grid Column Order");var K=a('<input type="text" id="'+n.ID+'_gcotb" />').appendTo(C.CswTable("cell",2,2));K.val(z.attr("order"));C.CswTable("cell",3,1).append("Grid Column Width (in characters)");var M=a('<input type="text" id="'+n.ID+'_gcwtb" />').appendTo(C.CswTable("cell",3,2));M.val(z.attr("width"));C.CswTable("cell",4,2).CswButton({ID:n.ID+"_saveprop",
enabledText:"Apply",disableOnClick:false,onclick:function(){z.attr("sortby",J.is(":checked"));z.attr("order",K.val());z.attr("width",M.val())}})}});B.find(".vieweditor_viewfilterlink").click(function(){$a=a(this);D.empty();var z=E.find('[arbitraryid="'+$a.attr("arbid")+'"]'),C=D.CswTable({ID:n.ID+"_editfilt",FirstCellRightAlign:true});C.CswTable("cell",1,1).append("Case Sensitive");var J=a('<input type="checkbox" id="'+n.ID+'_casecb" />').appendTo(C.CswTable("cell",1,2));z.attr("casesensitive").toLowerCase()==
"true"&&J.attr("checked","true");C.CswTable("cell",4,2).CswButton({ID:n.ID+"_savefilt",enabledText:"Apply",disableOnClick:false,onclick:function(){z.attr("casesensitive",J.is(":checked"))}})})}}function l(y,B){var F={},D=B.attr("arbitraryid"),G=B.get(0).nodeName,z,C,J=false,K=true,M;if(G.toLowerCase()=="treeview"){if(y==3)K=false;D="root";z=B.attr("viewname");C="root";F.root={icon:{image:B.attr("iconfilename")}};M="vieweditor_viewrootlink"}else if(G.toLowerCase()=="relationship"){if(y==3)K=false;
if(y==4)K=false;z=B.attr("secondname");G=B.attr("propname");if(G!=""&&G!=undefined)z+=B.attr("propowner")=="First"?" (by "+B.attr("firstname")+"'s "+G+")":" (by "+G+")";C=B.attr("secondtype")+"_"+B.attr("secondid");F[C]={icon:{image:B.attr("secondiconfilename")}};M="vieweditor_viewrellink"}else if(G.toLowerCase()=="property"){if(y<=3)J=true;if(y==5)K=false;z=B.attr("name");C="property";F.property={icon:{image:"Images/view/property.gif"}};M="vieweditor_viewproplink"}else if(G.toLowerCase()=="filter"){if(y<=
4)J=true;z=B.attr("subfieldname")+" "+B.attr("filtermode")+" "+B.attr("value");C="filter";F.filter={icon:{image:"Images/view/filter.gif"}};M="vieweditor_viewfilterlink"}var I="";if(!J){I='<li id="'+D+'" ';I+='    rel="'+C+'" ';I+='    class="jstree-open" ';I+=">";I+=' <a href="#" class="'+M+'" arbid="'+D+'">'+z+"</a>";if(D!="root")I+=' <span style="" class="vieweditor_deletespan" arbid="'+D+'"></span>';I+="<ul>";B.children().each(function(){var N=l(y,a(this));I+=N.htmlstring;a.extend(F,N.types)});
if(!K)if(y==5)I+='<li><span class="vieweditor_addfilter" style="display: none"></span></li>';else{I+='<li><select id="'+y+"_"+D+'_child" arbid="'+D+'" class="vieweditor_childselect"></select></li>';CswAjaxXml({url:n.ChildOptionsUrl,data:"StepNo="+y+"&ArbitraryId="+D+"&ViewXml="+xmlToString(E),success:function(N){var Q=a("#"+y+"_"+D+"_child");Q.empty();Q.append('<option value="">Select...</option>');N.children().each(function(){var R=a(this),T=a(R.attr("value"));a('<option value="'+T.attr("arbitraryid")+
'">'+R.attr("name")+"</option>").appendTo(Q).data("optionviewxml",R.attr("value"))})}})}I+="</ul>";I+="</li>"}return{htmlstring:I,types:F}}var n={ViewGridUrl:"/NbtWebApp/wsNBT.asmx/getViewGrid",ViewInfoUrl:"/NbtWebApp/wsNBT.asmx/getViewInfo",SaveViewUrl:"/NbtWebApp/wsNBT.asmx/saveViewInfo",CopyViewUrl:"/NbtWebApp/wsNBT.asmx/copyView",DeleteViewUrl:"/NbtWebApp/wsNBT.asmx/deleteView",ChildOptionsUrl:"/NbtWebApp/wsNBT.asmx/getViewChildOptions",PropNamesUrl:"/NbtWebApp/wsNBT.asmx/getPropNames",viewid:"",
ID:"vieweditor",ColumnViewName:"VIEWNAME",ColumnViewId:"NODEVIEWID",ColumnViewMode:"VIEWMODE",onCancel:function(){},onFinish:function(){}};f&&a.extend(n,f);f=a(this);f=a("<div></div>").appendTo(f);var o=f.CswWizard("init",{ID:n.ID+"_wizard",Title:"Edit View",StepCount:6,Steps:{1:"Choose a View",2:"Edit View Attributes",3:"Add Relationships",4:"Select Properties",5:"Set Filters",6:"Fine Tuning"},FinishText:"Save and Finish",onNext:function(y){switch(y){case 2:CswAjaxXml({url:n.ViewInfoUrl,data:"ViewId="+
g(m,n.ColumnViewId),success:function(F){E=F;w.val(E.attr("viewname"));A.val(E.attr("category"));if(x.getvisibilityselect()!=undefined){x.getvisibilityselect().val(E.attr("visibility")).trigger("change");x.getvisroleselect().val("nodes_"+E.attr("visibilityroleid"));x.getvisuserselect().val("nodes_"+E.attr("visibilityuserid"))}E.attr("formobile")=="true"&&H.attr("checked","true");F=E.attr("mode");P.text(F);L.CswNumberTextBox("setValue",E.attr("width"));if(F=="Grid"){O.show();L.show()}else{O.hide();
L.hide()}}});break;case 3:if(E!=undefined){E.attr("viewname",w.val());E.attr("category",A.val());E.attr("visibility",x.getvisibilityselect().val());y=x.getvisroleselect().val();if(y!=""&&y!=undefined)y=y.substr(6);var B=x.getvisuserselect().val();if(B!=""&&B!=undefined)B=B.substr(6);E.attr("visibilityroleid",y);E.attr("visibilityuserid",B);E.attr("formobile",H.attr("checked")=="true");E.attr("width",L.CswNumberTextBox("value"))}j(3,U);break;case 4:j(4,V);break;case 5:j(5,W);break;case 6:j(6,S.CswTable("cell",
1,1))}},onBeforePrevious:function(y){return y!=2||confirm("You will lose any changes made to the current view if you continue.  Are you sure?")},onCancel:n.onCancel,onFinish:function(){var y=g(m,n.ColumnViewId);CswAjaxXml({url:n.SaveViewUrl,data:"ViewId="+y+"&ViewXml="+xmlToString(E),success:function(){n.onFinish(y,g(m,n.ColumnViewMode))}})}}),i=o.CswWizard("div",1);i.append("A <em>View</em> controls the arrangement of information you see in a tree or grid.  Views are useful for defining a user's workflow or for creating elaborate search criteria. This wizard will take you step by step through the process of creating a new View or editing an existing View.<br/><br/>");
i.append("Select a View to Edit:&nbsp;");var k=a('<span id="'+n.ID+'_selviewname" style="font-weight: bold"></span>').appendTo(i),p=a("<div></div>").appendTo(i),m;d(b,n.viewid);var t=i.CswTable({ID:n.ID+"_1_btntbl",width:"100%"});i=t.CswTable("cell",1,1);t=t.CswTable("cell",1,2);t.attr("align","right");var v=a("<div></div>").appendTo(t);IsAdministrator({Yes:function(){a('<input type="checkbox" id="'+n.ID+'_all">Show Other Roles/Users</input>').appendTo(v).click(function(){d(b)})}});var q=i.CswButton({ID:n.ID+
"_copyview",enabledText:"Copy View",disableOnClick:true,onclick:function(){var y=g(m,n.ColumnViewId);y!=""&&y!=undefined&&CswAjaxJSON({url:n.CopyViewUrl,data:"{ ViewId: "+y+" }",success:function(B){d(b,B.copyviewid)}})}});q.CswButton("disable");var s=i.CswButton({ID:n.ID+"_deleteview",enabledText:"Delete View",disableOnClick:true,onclick:function(){var y=g(m,n.ColumnViewId);y!=""&&y!=undefined&&confirm("Are you sure you want to delete: "+g(m,n.ColumnViewName))&&CswAjaxJSON({url:n.DeleteViewUrl,data:"{ ViewId: "+
y+" }",success:function(){d(b);q.CswButton("disable")}})}});s.CswButton("disable");var u=i.CswButton({ID:n.ID+"_newview",enabledText:"Create New View",disableOnClick:false,onclick:function(){a.CswDialog("AddViewDialog",{onAddView:function(y){m=d(b,y)},onClose:function(){u.CswButton("enable")},makeVisibilitySelect:h})}});o.CswWizard("button","next","disable");i=o.CswWizard("div",2).CswTable({ID:n.ID+"_tbl2",FirstCellRightAlign:true});i.CswTable("cell",1,1).append("View Name:");var w=a('<input type="textbox" id="'+
n.ID+'_viewname" />').appendTo(i.CswTable("cell",1,2));i.CswTable("cell",2,1).append("Category:");var A=a('<input type="textbox" id="'+n.ID+'_category" />').appendTo(i.CswTable("cell",2,2)),x=h(i,3,"View Visibility:");i.CswTable("cell",4,1).append("For Mobile:");var H=a('<input type="checkbox" id="'+n.ID+'_formobile" />').appendTo(i.CswTable("cell",4,2));i.CswTable("cell",5,1).append("Display Mode:");var P=i.CswTable("cell",5,2).append('<span id="'+n.ID+'_displaymode"></span>'),O=i.CswTable("cell",
6,1).append("Grid Width (in characters):"),L=i.CswTable("cell",6,2);L.CswNumberTextBox("init",{ID:n.ID+"_gridwidth",Value:"",MinValue:"1",MaxValue:"",Precision:"0",onchange:function(){}});i=o.CswWizard("div",3);i.append("Add relationships from the select boxes below:<br/><br/>");var U=a("<div />").appendTo(i);i=o.CswWizard("div",4);i.append("Add properties from the select boxes below:<br/><br/>");var V=a("<div />").appendTo(i);i=o.CswWizard("div",5);i.append("Add filters by selecting properties from the tree:<br/><br/>");
var W=a("<div />").appendTo(i);i=o.CswWizard("div",6);i.append("Select what you want to edit from the tree:<br/><br/>");var S=i.CswTable({ID:n.ID+"_6_tbl"}),E;return f}})(jQuery);(function(a){a.fn.CswViewPropFilter=function(f){function b(){var j=e.attr("propid"),l=e.attr("propname");e.attr("filtarbitraryid");var n=h.CswTable("cell",propRow,3).empty(),o=makeId({ID:j,prefix:d.idprefix});l=n.CswDOM("span",{ID:o,value:l});e.children("defaultsubfield").attr("filter");n=e.attr("fieldtype");var i=a(xmlToString(e.children("subfields").children("select"))).change(function(){var m={selectedSubfieldVal:a(this).val(),selectedFilterVal:""};a.extend(d,m);b()});d.selectedSubfieldVal!==""&&
i.val(d.selectedSubfieldVal).attr("selected",true);$subfieldCell.append(i);var k=i.find(":selected").val();o=i.find(":selected").attr("defaultvalue");var p=h.CswTable("cell",propRow,5).empty();k=a(xmlToString(e.children("propertyfilters").children("subfield[column="+k+"]").children("select"))).change(function(){var m=a(this);m={selectedSubfieldVal:i.val(),selectedFilterVal:m.val()};a.extend(d,m);b()});d.selectedFilterVal!==""&&k.val(d.selectedFilterVal).attr("selected",true);p.append(k);k.find(":selected").val();
p=h.CswTable("cell",propRow,6).empty();if(n==="List")p.append(a(xmlToString(e.children("filtersoptions").children("select"))));else if(n==="Logical")p.CswTristateCheckBox("init",{ID:"search_input_searchpropid_"+j,prefix:d.idprefix});else{if(o!==""&&o!=undefined)l=o;else{l=l.find(":selected").text();if(l!==i.find(":selected").text())l+="'s "+i.find(":selected").text()}j=makeId({ID:"search_input_searchpropid",prefix:d.idprefix,suffix:j});p.CswDOM("input",{ID:j,type:"text",cssclass:"csw_search_input",
placeholder:l}).attr("autocomplete","on").attr("autofocus","true").attr({width:"200px"})}}var d={getNewPropsUrl:"/NbtWebApp/wsNBT.asmx/getViewPropFilter",viewid:"",viewxml:"",proparbitraryid:"",idprefix:"csw",selectedSubfieldVal:"",selectedFilterVal:""};f&&a.extend(d,f);var g=a(this).CswDOM("span",{ID:"cswPropFilterRow",prefix:d.idprefix}),e,h;(function(){CswAjaxXml({url:d.getNewPropsUrl,data:"ViewXml="+d.viewxml+"&PropArbitraryId="+d.proparbitraryid,success:function(j){h=g.CswTable("init",{ID:makeId({prefix:d.idprefix,
ID:"search_tbl"}),cellpadding:1,cellspacing:1,cellalign:"center",align:"center"});e=j.children("nodetypeprops").children("property");b()}})})();return g}})(jQuery);(function(a){function f(d){var g={ID:"",ClickDelay:300,iconurl:"",type:"",viewid:"",viewname:"",viewmode:"",onSelect:function(){},$selectdiv:""};d&&a.extend(g,d);d=a("<div></div>");var e=d.CswTable("init",{ID:g.ID+"selectedtbl"}),h=e.CswTable("cell",1,1);h=a("<div />").appendTo(h);h.css("background-image",g.iconurl);h.css("width","18px");h.css("height","18px");e.CswTable("cell",1,2).append(g.viewname);g.$selectdiv.CswComboBox("TopContent",d);g.$selectdiv.attr("selectedValue",g.viewid);setTimeout(function(){g.$selectdiv.CswComboBox("toggle")},
g.ClickDelay);g.onSelect({iconurl:g.iconurl,type:g.type,viewid:g.viewid,viewname:g.viewname,viewmode:g.viewmode})}var b={init:function(d){var g={ID:"",onSelect:function(){},onSuccess:function(){},ClickDelay:300};d&&a.extend(g,d);var e=a(this);e.contents().remove();$viewtreediv=a("<div/>");e.CswComboBox("init",{ID:g.ID+"_combo",TopContent:"Select a View",SelectContent:$viewtreediv,Width:"266px"});$viewtreediv.CswViewTree({onSelect:function(h){f({ID:g.ID,ClickDelay:g.ClickDelay,iconurl:h.iconurl,type:h.type,
viewid:h.viewid,viewname:h.viewname,viewmode:h.viewmode,onSelect:g.onSelect,$selectdiv:e})},onSuccess:g.onSuccess});return e},value:function(){return a(this).attr("selectedValue")}};a.fn.CswViewSelect=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswViewSelect")}})(jQuery);(function(a){a.fn.CswViewTree=function(f){var b={ViewUrl:"/NbtWebApp/wsNBT.asmx/getViewTree",viewid:"",onSelect:function(){},onSuccess:function(){}};f&&a.extend(b,f);var d=a(this);d.contents().remove();CswAjaxXml({url:b.ViewUrl,data:"",success:function(g){var e=g.find("types").text();e=a.parseJSON(e);g=g.find("tree").children("root");g=xmlToString(g);d.jstree({xml_data:{data:g,xsl:"nest"},ui:{select_limit:1},core:{initially_open:["root"]},types:{types:e},plugins:["themes","xml_data","ui","types"]}).bind("select_node.jstree",
function(){var h=jsTreeGetSelected(d);h={iconurl:h.iconurl,type:h.$item.attr("type"),viewid:h.$item.attr("viewid"),viewname:h.text,viewmode:h.$item.attr("viewmode")};b.onSelect(h)});b.onSuccess()}});return this}})(jQuery);(function(a){function f(e){var h={cellset:"",row:"",column:"",RemoveWelcomeItemUrl:"",onSuccess:function(){}};e&&a.extend(h,e);e=a(h.cellset[2][1]);if(e.length>0){e=e.children("input").attr("welcomeid");CswAjaxJSON({url:h.RemoveWelcomeItemUrl,data:'{ "RoleId": "", "WelcomeId": "'+e+'" }',success:function(){h.onSuccess()}})}}function b(e){var h={AddWelcomeItemUrl:"",type:"",viewid:"",nodetypeid:"",text:"",iconfilename:"",onSuccess:function(){}};e&&a.extend(h,e);CswAjaxJSON({url:h.AddWelcomeItemUrl,
data:'{ "RoleId": "", "Type": "'+h.type+'", "ViewId": "'+h.viewid+'", "NodeTypeId": "'+h.nodetypeid+'", "Text": "'+h.text+'", "IconFileName": "'+h.iconfilename+'" }',success:function(){h.onSuccess()}})}function d(e,h,j,l){h=a(h[2][1]);if(h.length>0){h=h.children("input").attr("welcomeid");CswAjaxJSON({url:e,data:'{ "RoleId": "", "WelcomeId": "'+h+'", "NewRow": "'+j+'", "NewColumn": "'+l+'" }',success:function(){}})}}var g={initTable:function(e){var h={Url:"/NbtWebApp/wsNBT.asmx/getWelcomeItems",MoveWelcomeItemUrl:"/NbtWebApp/wsNBT.asmx/moveWelcomeItems",
RemoveWelcomeItemUrl:"/NbtWebApp/wsNBT.asmx/deleteWelcomeItem",onLinkClick:function(){},onSearchClick:function(){},onAddClick:function(){},onAddComponent:function(){}};e&&a.extend(h,e);var j=a(this);CswAjaxXml({url:h.Url,data:"RoleId=",success:function(l){var n=a('<div id="welcomediv"></div>').appendTo(j).css("text-align","center").css("font-size","1.2em").CswLayoutTable("init",{ID:"welcometable",cellset:{rows:2,columns:1},TableCssClass:"WelcomeTable",cellpadding:10,align:"center",onSwap:function(o,
i){var k={cellset:i.cellset,row:i.row,column:i.column,swapcellset:i.swapcellset,swaprow:i.swaprow,swapcolumn:i.swapcolumn,MoveWelcomeItemUrl:h.MoveWelcomeItemUrl},p={cellset:"",row:"",column:"",swapcellset:"",swaprow:"",swapcolumn:"",MoveWelcomeItemUrl:""};k&&a.extend(p,k);d(p.MoveWelcomeItemUrl,p.cellset,p.swaprow,p.swapcolumn);d(p.MoveWelcomeItemUrl,p.swapcellset,p.row,p.column)},showConfigButton:true,showAddButton:true,showRemoveButton:true,onAddClick:function(){a.CswDialog("AddWelcomeItemDialog",
{onAdd:h.onAddComponent})},onRemove:function(o,i){f({cellset:i.cellset,row:i.row,column:i.column,RemoveWelcomeItemUrl:h.RemoveWelcomeItemUrl})}});l.children().each(function(){var o=a(this),i=n.CswLayoutTable("cellset",o.attr("displayrow"),o.attr("displaycol")),k=i[1][1];i=i[2][1];o.attr("buttonicon")!=undefined&&o.attr("buttonicon")!=""&&k.append(a('<a href=""><img border="0" src="'+o.attr("buttonicon")+'"/></a>'));var p={type:o.attr("type"),viewmode:o.attr("viewmode"),itemid:o.attr("itemid"),text:o.attr("text"),
iconurl:o.attr("iconurl"),viewid:o.attr("viewid"),actionid:o.attr("actionid"),reportid:o.attr("reportid"),linktype:o.attr("linktype")};switch(p.linktype){case "Link":i.append(a('<a href="">'+p.text+"</a>"));i.find("a").click(function(){h.onLinkClick(p);return false});k.find("a").click(function(){h.onLinkClick(p);return false});break;case "Search":i.append(a('<a href="">'+p.text+"</a>"));i.find("a").click(function(){h.onSearchClick(p);return false});k.find("a").click(function(){h.onSearchClick(p);
return false});break;case "Text":i.append("<span>"+p.text+"</span>");break;case "Add":i.append(a('<a href="">'+p.text+"</a>"));i.find("a").click(function(){h.onAddClick(o.attr("nodetypeid"));return false});k.find("a").click(function(){h.onAddClick(o.attr("nodetypeid"));return false})}i.append('<input type="hidden" welcomeid="'+o.attr("welcomeid")+'" />')})}})},getAddItemForm:function(e){var h={AddWelcomeItemUrl:"/NbtWebApp/wsNBT.asmx/addWelcomeItem",onAdd:function(){}};e&&a.extend(h,e);e=a(this).CswTable("init",
{ID:"addwelcomeitem_tbl"});a("<span>Type:</span>").appendTo(e.CswTable("cell",1,1));var j=a('<select id="welcome_type" name="welcome_type"></select>').appendTo(e.CswTable("cell",1,2));j.append('<option value="Add" selected>Add</option>');j.append('<option value="Link">Link</option>');j.append('<option value="Search">Search</option>');j.append('<option value="Text">Text</option>');var l=a("<span>View:</span>").appendTo(e.CswTable("cell",2,1)).hide(),n=e.CswTable("cell",2,2).CswViewSelect({ID:"welcome_viewsel"}).hide(),
o=a("<span>Add New:</span>").appendTo(e.CswTable("cell",3,1)),i=e.CswTable("cell",3,2).CswNodeTypeSelect({ID:"welcome_ntsel"});a("<span>Text:</span>").appendTo(e.CswTable("cell",4,1));var k=a('<input type="text" id="welcome_text" value="" />').appendTo(e.CswTable("cell",4,2)),p=a("<span>Use Button:</span>").appendTo(e.CswTable("cell",5,1)),m=a('<select id="welcome_button" />').appendTo(e.CswTable("cell",5,2));m.append('<option value="blank.gif"></option>');var t=a('<img id="welcome_btnimg" />').appendTo(e.CswTable("cell",
6,2)),v=e.CswTable("cell",7,2).CswButton({ID:"welcome_add",enabledText:"Add",disabledText:"Adding",onclick:function(){b({AddWelcomeItemUrl:h.AddWelcomeItemUrl,type:j.val(),viewid:n.CswViewSelect("value"),nodetypeid:i.CswNodeTypeSelect("value"),text:k.val(),iconfilename:m.val(),onSuccess:h.onAdd})}});e.CswTable("cell",7,2).append(v);m.change(function(){t.attr("src","Images/biggerbuttons/"+m.val())});j.change(function(){var q={$typeselect:j,$viewselect_label:l,$viewselect:n,$ntselect_label:o,$ntselect:i,
$buttonsel_label:p,$buttonsel:m,$buttonimg:t},s={$typeselect:"",$viewselect_label:"",$viewselect:"",$ntselect_label:"",$ntselect:"",$buttonsel_label:"",$buttonsel:"",$buttonimg:""};q&&a.extend(s,q);switch(s.$typeselect.val()){case "Add":s.$viewselect_label.hide();s.$viewselect.hide();s.$ntselect_label.show();s.$ntselect.show();s.$buttonsel_label.show();s.$buttonsel.show();break;case "Link":s.$viewselect_label.show();s.$viewselect.show();s.$ntselect_label.hide();s.$ntselect.hide();s.$buttonsel_label.show();
s.$buttonsel.show();break;case "Search":s.$viewselect_label.show();s.$viewselect.show();s.$ntselect_label.hide();s.$ntselect.hide();s.$buttonsel_label.show();s.$buttonsel.show();break;case "Text":s.$viewselect_label.hide();s.$viewselect.hide();s.$ntselect_label.hide();s.$ntselect.hide();s.$buttonsel_label.hide();s.$buttonsel.hide()}});CswAjaxXml({url:"/NbtWebApp/wsNBT.asmx/getWelcomeButtonIconList",success:function(q){q.children().each(function(){var s=a(this).attr("filename");s!="blank.gif"&&m.append('<option value="'+
s+'">'+s+"</option>")})}})}};a.fn.CswWelcome=function(e){if(g[e])return g[e].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof e==="object"||!e)return g.init.apply(this,arguments);else a.error("Method "+e+" does not exist on CswWelcome")}})(jQuery);(function(a){function f(g){return parseInt(g.find(".CswWizard_StepLinkDivSelected").attr("stepno"))}function b(g,e){var h=g.attr("stepcount");if(e>0&&e<=h){g.find(".CswWizard_StepLinkDiv").removeClass("CswWizard_StepLinkDivSelected");g.find(".CswWizard_StepLinkDiv[stepno="+e+"]").addClass("CswWizard_StepLinkDivSelected");g.find(".CswWizard_StepDiv").hide();g.find(".CswWizard_StepDiv[stepno="+e+"]").show();var j=a("#"+g.attr("id")+"_prev");e==1?j.CswButton("disable"):j.CswButton("enable");j=a("#"+
g.attr("id")+"_next");e>=h?j.CswButton("disable"):j.CswButton("enable")}}var d={init:function(g){var e={ID:"",Title:"A Wizard",StepCount:1,Steps:{1:"Default"},SelectedStep:1,FinishText:"Finish",onNext:function(){},onPrevious:function(){},onBeforeNext:function(){return true},onBeforePrevious:function(){return true},onFinish:function(){},onCancel:function(){}};g&&a.extend(e,g);var h=a(this).CswTable({ID:e.ID,TableCssClass:"CswWizard_WizardTable"});h.attr("stepcount",e.StepCount);h.CswTable("cell",1,
1).addClass("CswWizard_TitleCell").attr("colspan",2).append(e.Title);g=h.CswTable("cell",2,1).attr("rowspan",2).addClass("CswWizard_IndexCell");for(var j=h.CswTable("cell",2,2).addClass("CswWizard_StepsCell"),l=h.CswTable("cell",3,1).addClass("CswWizard_ButtonsCell"),n=1;n<=e.StepCount;n++){var o=e.Steps[n];a('<div class="CswWizard_StepLinkDiv" stepno="'+n+'">'+n+".&nbsp;"+o+"</div>").appendTo(g);a('<div class="CswWizard_StepDiv" id="'+e.ID+"_"+n+'" stepno="'+n+'" ><span class="CswWizard_StepTitle">'+
o+'</span><br/></br><div id="'+e.ID+"_"+n+'_content"></div></div>').appendTo(j)}j=l.CswTable({ID:e.ID+"_btntbl",width:"100%"});g=j.CswTable("cell",1,1).attr("align","right").attr("width","65%");j=j.CswTable("cell",1,2).attr("align","right").attr("width","35%");g.CswButton("init",{ID:e.ID+"_prev",enabledText:"< Previous",disableOnClick:false,onclick:function(){var i=f(h);if(e.onBeforePrevious(i)){b(h,i-1);e.onPrevious(i-1)}}});g.CswButton("init",{ID:e.ID+"_next",enabledText:"Next >",disableOnClick:false,
onclick:function(){var i=f(h);if(e.onBeforeNext(i)){b(h,i+1);e.onNext(i+1)}}});g.CswButton("init",{ID:e.ID+"_finish",enabledText:e.FinishText,onclick:e.onFinish});j.CswButton("init",{ID:e.ID+"_cancel",enabledText:"Cancel",onclick:e.onCancel});b(h,e.SelectedStep);return h},div:function(g){return a(this).find(".CswWizard_StepDiv[stepno="+g+"] div")},button:function(g,e){var h=a(this);switch(g){case "previous":a("#"+h.attr("id")+"_prev").CswButton(e);break;case "next":a("#"+h.attr("id")+"_next").CswButton(e);
break;case "finish":a("#"+h.attr("id")+"_finish").CswButton(e);break;case "cancel":a("#"+h.attr("id")+"_cancel").CswButton(e)}}};a.fn.CswWizard=function(g){if(d[g])return d[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return d.init.apply(this,arguments);else a.error("Method "+g+" does not exist on CswWizard")}})(jQuery);function CswAjaxJSON(a){var f={url:"",data:"",success:function(){},error:function(){}};a&&$.extend(f,a);$.ajax({type:"POST",url:f.url,dataType:"json",contentType:"application/json; charset=utf-8",data:f.data,success:function(b,d,g){b=$.parseJSON(b.d);b.error!=undefined?_handleAjaxError(g,b.error,""):f.success(b)},error:function(b,d,g){_handleAjaxError(b,d,g);f.error()}})}
function CswAjaxXml(a){var f={url:"",data:"",success:function(){},error:function(){}};a&&$.extend(f,a);f.url!=""&&$.ajax({type:"POST",url:f.url,dataType:"xml",data:f.data,success:function(b,d,g){b=$(g.responseXML).children().first();b.first().get(0).nodeName=="error"?_handleAjaxError(g,b.text().trim(),""):f.success(b)},error:function(b,d,g){_handleAjaxError(b,d,g);f.error()}})}
function _handleAjaxError(a,f,b){ErrorMessage="A WebServices Error Occurred: "+f;if(null!=b)ErrorMessage+="; Exception: "+b.toString();log(ErrorMessage)}function xmlToString(a){var f="";if(a!=""&&a!=undefined){(f=a.get(0).xml)||(f=(new XMLSerializer).serializeToString(a.get(0)));f||$.error("Browser does not support XML operations necessary to convert to string")}return f}
function jsonToString(a){if(typeof a=="object"){var f="{",b=true,d;for(d in a)if(a.hasOwnProperty(d)){b||(f+=",");f+=" '"+d+"': ";f+=jsonToString(a[d]);b=false}f+="}"}else f="'"+a+"'";return f}var changed=0,checkChangesEnabled=true;function setChanged(){if(checkChangesEnabled)changed=1}function unsetChanged(){if(checkChangesEnabled)changed=0}
function checkChanges(){if(checkChangesEnabled&&changed==1)return"If you continue, you will lose any changes made on this page.  To save your changes, click Cancel and then click the Save button."}
function manuallyCheckChanges(){var a=true;if(checkChangesEnabled&&changed==1)if(a=confirm("Are you sure you want to navigate away from this page?\n\nIf you continue, you will lose any changes made on this page.  To save your changes, click Cancel and then click the Save button.\n\nPress OK to continue, or Cancel to stay on the current page."))changed=0;return a}
function initCheckChanges(){window.onbeforeunload=window.onbeforeunload!==null&&window.onbeforeunload!==undefined?function(){var a=window.onbeforeunload;return a()?checkChanges():false}:function(){return checkChanges()}}window.onload=window.onload!==null&&window.onload!==undefined?new Function("initCheckChanges(); var f="+window.onload+"; return f();"):function(){initCheckChanges()};
function IsAdministrator(a){var f={Yes:function(){},No:function(){}};a&&$.extend(f,a);CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/isAdministrator",success:function(b){b.Administrator=="true"?f.Yes():f.No()}})}function copyNode(a){var f={nodeid:"",nodekey:"",onSuccess:function(){}};a&&$.extend(f,a);CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/CopyNode",data:'{ "NodePk":"'+f.nodeid+'" }',success:function(b){f.onSuccess(b.NewNodeId,"")}})}
function deleteNodes(a){var f={nodeids:[],onSuccess:function(){}};a&&$.extend(f,a);a='{ "NodePks": [';var b=true,d;for(d in f.nodeids){b||(a+=",");a+='"'+f.nodeids[d]+'"';b=false}a+="] }";CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/DeleteNodes",data:a,success:function(){f.onSuccess("","")}})}
function jsTreeGetSelected(a){var f=a.attr("id");$SelectedItem=a.jstree("get_selected");return{iconurl:$SelectedItem.children("a").children("ins").css("background-image"),id:$SelectedItem.attr("id").substring(f.length),text:$SelectedItem.children("a").first().text().trim(),$item:$SelectedItem}}function GoHome(){$.CswCookie("clear",CswCookieName.CurrentView.ViewId);$.CswCookie("clear",CswCookieName.CurrentView.ViewMode);window.location="NewMain.html"}
function HandleMenuItem(a){var f={$ul:"",$itemxml:"",onLogout:function(){},onAlterNode:function(){},onSearch:function(){},onMultiEdit:function(){},onEditView:function(){},Multi:false,NodeCheckTreeId:""};a&&$.extend(f,a);if(f.$itemxml.attr("href")!=undefined&&f.$itemxml.attr("href")!="")a=$('<li><a href="'+f.$itemxml.attr("href")+'">'+f.$itemxml.attr("text")+"</a></li>").appendTo(f.$ul);else if(f.$itemxml.attr("popup")!=undefined&&f.$itemxml.attr("popup")!="")a=$('<li class="headermenu_dialog">'+f.$itemxml.attr("text")+
"</li>").appendTo(f.$ul).click(function(){OpenDialog(f.$itemxml.attr("text"),f.$itemxml.attr("popup"))});else if(f.$itemxml.attr("action")!=undefined&&f.$itemxml.attr("action")!=""){a=$('<li><a href="#">'+f.$itemxml.attr("text")+"</a></li>").appendTo(f.$ul);var b=a.children("a");switch(f.$itemxml.attr("action")){case "About":b.click(function(){$.CswDialog("AboutDialog");return false});break;case "AddNode":b.click(function(){$.CswDialog("AddNodeDialog",{nodetypeid:f.$itemxml.attr("nodetypeid"),relatednodeid:f.$this.attr("relatednodeid"),
onAddNode:f.onAlterNode});return false});break;case "DeleteNode":b.click(function(){$.CswDialog("DeleteNodeDialog",{nodename:f.$itemxml.attr("nodename"),nodeid:f.$itemxml.attr("nodeid"),onDeleteNode:f.onAlterNode,NodeCheckTreeId:f.NodeCheckTreeId,Multi:f.Multi});return false});break;case "editview":b.click(function(){f.onEditView(f.$itemxml.attr("viewid"));return false});break;case "CopyNode":b.click(function(){$.CswDialog("CopyNodeDialog",{nodename:f.$itemxml.attr("nodename"),nodeid:f.$itemxml.attr("nodeid"),
onCopyNode:f.onAlterNode});return false});break;case "Home":b.click(function(){GoHome();return false});break;case "Logout":b.click(function(){f.onLogout();return false});break;case "Search":b.click(function(){f.onSearch()});break;case "multiedit":b.click(f.onMultiEdit)}}else a=$("<li>"+f.$itemxml.attr("text")+"</li>").appendTo(f.$ul);return a}
function validateTime(a){var f=true,b=/^(\d?\d):(\d\d)\s?([APap][Mm])?$/g.exec(a);if(b==null)f=false;else{a=parseInt(b[1]);b=parseInt(b[2]);if(a<0||a>=24||b<0||b>=60)f=false}return f}function validateFloatMinValue(a,f){var b=parseFloat(a),d=parseFloat(f),g=true;if(d!=undefined)if(b==undefined||b<d)g=false;return g}function validateFloatMaxValue(a,f){var b=parseFloat(a),d=parseFloat(f),g=true;if(d!=undefined)if(b==undefined||b>d)g=false;return g}
function validateFloatPrecision(a,f){var b=true,d;d=f>0?/^\-?\d*\.?\d*$/g:/^\-?\d*$/g;if(b&&!d.test(a))b=false;return b}function validateInteger(a){return/^\-?\d*$/g.test(a)}function startsWith(a,f){return a.substr(0,f.length)==f}function getTimeString(a){var f="",b=a.getHours();a=a.getMinutes();if(a<10)a="0"+a;f=b%12+":"+a+" ";f+=b>11?"PM":"AM";return f}
function makeId(a){var f={ID:"",prefix:"",suffix:"",Delimiter:"_"};a&&$.extend(f,a);a=f.ID;if(f.prefix!==""&&a!=="")a=f.prefix+f.Delimiter+a;if(f.suffix!==""&&a!=="")a+=f.Delimiter+f.suffix;return a}function iterate(a){var f,b;for(b in a)f=f+b+"="+a[b]+"<br><br>";a=window.open("","popup");a!=null?a.document.write(f):console.log("iterate() error: No popup!")}function log(a){try{console.log(a)}catch(f){alert(a)}}
if(typeof String.prototype.trim!=="function")String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};(function(a){var f={init:function(b){var d=a(this);d.contents().remove();var g=b.$propxml.children("barcode").text().trim();if(b.ReadOnly)d.append(g);else{d=d.CswTable("init",{ID:b.ID+"_tbl"});var e=d.CswTable("cell",1,1);g=a('<input type="text" class="textinput" id="'+b.ID+'" name="'+b.ID+'" value="'+g+'" />"').appendTo(e).change(b.onchange);d=d.CswTable("cell",1,2);a("<div/>").appendTo(d).CswImageButton({ButtonType:CswImageButton_ButtonType.Print,AlternateText:"",ID:b.ID+"_print",onClick:function(){a.CswDialog("OpenDialog",
b.ID+"_dialog","Popup_PrintLabel.aspx?nodeid="+b.nodeid+"&propid="+b.ID);return CswImageButton_ButtonType.None}});b.Required&&g.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("barcode").text(d.val())}};a.fn.CswFieldTypeBarcode=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeBarcode")}})(jQuery);(function(a){var f={init:function(b){var d=a(this);d.contents().remove();b=b.$propxml.children("value").text().trim();d.append(b)},save:function(){}};a.fn.CswFieldTypeComposite=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeComposite")}})(jQuery);(function(a){var f={init:function(b){var d=a(this);d.contents().remove();var g=b.$propxml.children("value").text().trim();if(g=="1/1/0001")g="";if(b.ReadOnly)d.append(g);else{d=a('<input type="text" class="textinput date" id="'+b.ID+'" name="'+b.ID+'" value="'+g+'" />"').appendTo(d).change(b.onchange).datepicker();b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("value").text(d.val())}};a.fn.CswFieldTypeDate=function(b){if(f[b])return f[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeDate")}})(jQuery);(function(a){var f={init:function(b){var d=a(this);d.contents().remove();var g=b.$propxml.children("href").text().trim(),e=b.$propxml.children("name").text().trim(),h=d.CswTable("init",{ID:b.ID+"_tbl"});d=h.CswTable("cell",1,1);var j=h.CswTable("cell",1,2);h=h.CswTable("cell",1,3);d.append('<a href="'+g+'" target="_blank">'+e+"</a>");if(!b.ReadOnly){a("<div/>").appendTo(j).CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID+"_edit",onClick:function(){a.CswDialog("FileUploadDialog",
{url:"/NbtWebApp/wsNBT.asmx/fileForProp",params:{PropId:b.$propxml.attr("id")},onSuccess:function(){b.onReload()}});return CswImageButton_ButtonType.None}});a("<div/>").appendTo(h).CswImageButton({ButtonType:CswImageButton_ButtonType.Clear,AlternateText:"Clear",ID:b.ID+"_clr",onClick:function(){confirm("Are you sure you want to clear this file?")&&CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/clearProp",data:'{ "PropId": "'+b.$propxml.attr("id")+'", "IncludeBlob": "true" }',success:function(){b.onReload()}});
return CswImageButton_ButtonType.None}})}},save:function(){}};a.fn.CswFieldTypeFile=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeFile")}})(jQuery);(function(a){var f={init:function(b){log(b);var d=a(this);d.empty();var g=a('<div id="grid_as_fieldtype_menu" name="grid_as_fieldtype_menu"></div>'),e=a('<div id="grid_as_fieldtype" name="grid_as_fieldtype"></div>'),h=b.$propxml.children("viewid").text().trim();e.CswNodeGrid({viewid:h,nodeid:b.nodeid,cswnbtnodekey:b.cswnbtnodekey,readonly:b.ReadOnly});g.CswMenuMain({viewid:h,nodeid:b.nodeid,cswnbtnodekey:b.cswnbtnodekey,onAddNode:function(){refreshSelected({nodeid:b.nodeid,cswnbtnodekey:b.cswnbtnodekey})}});
d.append(g,a("<br/><br/>"),e)},save:function(){}};a.fn.CswFieldTypeGrid=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeGrid")}})(jQuery);(function(a){var f={init:function(b){var d=a(this);d.contents().remove();var g=b.$propxml.children("href").text().trim(),e=b.$propxml.children("href").attr("width"),h=b.$propxml.children("href").attr("height"),j=b.$propxml.children("name").text().trim(),l=d.CswTable("init",{ID:b.ID+"_tbl"});d=l.CswTable("cell",1,1).attr("colspan","3");var n=l.CswTable("cell",2,1).attr("width",e-36),o=l.CswTable("cell",2,2).attr("align","right");l=l.CswTable("cell",2,3).attr("align","right");if(j!=""){a('<a href="'+
g+'" target="_blank"><img src="'+g+'" alt="'+j+'" width="'+e+'" height="'+h+'"/></a>').appendTo(d);n.append('<a href="'+g+'" target="_blank">'+j+"</a>")}if(!b.ReadOnly){a("<div/>").appendTo(o).CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID+"_edit",onClick:function(){a.CswDialog("FileUploadDialog",{url:"/NbtWebApp/wsNBT.asmx/fileForProp",params:{PropId:b.$propxml.attr("id")},onSuccess:function(){b.onReload()}});return CswImageButton_ButtonType.None}});a("<div/>").appendTo(l).CswImageButton({ButtonType:CswImageButton_ButtonType.Clear,
AlternateText:"Clear",ID:b.ID+"_clr",onClick:function(){confirm("Are you sure you want to clear this image?")&&CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/clearProp",data:'{ "PropId": "'+b.$propxml.attr("id")+'", "IncludeBlob": "true" }',success:function(){b.onReload()}});return CswImageButton_ButtonType.None}})}},save:function(){}};a.fn.CswFieldTypeImage=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);
else a.error("Method "+b+" does not exist on CswFieldTypeImage")}})(jQuery);(function(a){var f={init:function(b){var d=a(this);d.contents().remove();var g=b.$propxml.children("text").text().trim(),e=b.$propxml.children("href").text().trim();if(b.ReadOnly)d.append(Value);else{var h=d.CswTable("init",{ID:b.ID+"_tbl"});a('<a href="'+e+'" target="_blank">'+g+"</a>&nbsp;&nbsp;").appendTo(h.CswTable("cell",1,1));a("<div/>").appendTo(h.CswTable("cell",1,2)).CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID+"_edit",Required:b.Required,onClick:function(){j.show();
return CswImageButton_ButtonType.None}});var j=d.CswTable("init",{ID:b.ID+"_edittbl"}).hide();a("<span>Text</span>").appendTo(j.CswTable("cell",1,1));d=a('<input type="text" id="'+b.ID+'_text" value="'+g+'" />').appendTo(j.CswTable("cell",1,2)).change(b.onchange);a("<span>URL</span>").appendTo(j.CswTable("cell",2,1));g=a('<input type="text" id="'+b.ID+'_href" value="'+e+'" />').appendTo(j.CswTable("cell",2,2)).change(b.onchange);if(b.Required&&e==""){j.show();d.addClass("required");g.addClass("required")}}},
save:function(b){var d=b.$propdiv.find("#"+b.ID+"_text"),g=b.$propdiv.find("#"+b.ID+"_href");b.$propxml.children("text").text(d.val());b.$propxml.children("href").text(g.val())}};a.fn.CswFieldTypeLink=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeLink")}})(jQuery);(function(a){var f={init:function(b){var d=a(this);d.contents().remove();var g=b.$propxml.children("value").text().trim(),e=b.$propxml.children("options").text().trim();if(b.ReadOnly)d.append(g);else{d=a('<select id="'+b.ID+'" name="'+b.ID+'" class="selectinput" />"').appendTo(d).change(b.onchange);e=e.split(",");for(var h=0;h<e.length;h++)d.append('<option value="'+e[h]+'">'+e[h]+"</option>");d.val(g);b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("select");b.$propxml.children("value").text(d.val())}};
a.fn.CswFieldTypeList=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeList")}})(jQuery);(function(a){a.fn.CswFieldTypeLocation=function(f){function b(g,e,h,j,l){if(e=="root")e="";g.CswComboBox("TopContent",h);if(g.attr("value")!=e){g.attr("value",e);l()}setTimeout(function(){g.CswComboBox("close")},300)}var d={init:function(g){var e=a(this);e.contents().remove();var h=g.$propxml.children("nodeid").text().trim(),j=g.$propxml.children("nodekey").text().trim(),l=g.$propxml.children("name").text().trim(),n=g.$propxml.children("path").text().trim(),o=g.$propxml.children("viewid").text().trim();
if(g.ReadOnly)e.append(n);else{e=e.CswTable("init",{ID:g.ID+"_tbl"});var i=e.CswTable("cell",1,1);i.attr("colspan","2");i.append(n+"<br/>");n=e.CswTable("cell",2,1);var k=a('<div class="locationselect" value="'+h+'"/>').appendTo(n);h=a("<div />").CswNodeTree("init",{ID:g.ID,viewid:o,nodeid:h,cswnbtnodekey:j,onSelectNode:function(p){b(k,p.nodeid,p.nodename,p.iconurl,g.onchange)},SelectFirstChild:false,UsePaging:false});k.CswComboBox("init",{ID:g.ID+"_combo",TopContent:l,SelectContent:h,Width:"266px"})}},
save:function(g){var e=g.$propdiv.find(".locationselect");g.$propxml.children("nodeid").text(e.attr("value"))}};if(d[f])return d[f].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof f==="object"||!f)return d.init.apply(this,arguments);else a.error("Method "+f+" does not exist on CswFieldTypeLocation")}})(jQuery);(function(a){var f={init:function(b){var d=a(this);d.contents().remove();b.$propxml.children("value").text().trim();d.append("[Not Implemented Yet]")},save:function(){}};a.fn.CswFieldTypeLocationContents=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeLocationContents")}})(jQuery);(function(a){var f={init:function(b){$Div=a(this);b={Checked:b.$propxml.children("checked").text().trim(),Required:b.Required,ReadOnly:b.ReadOnly,onchange:b.onchange};$Div.CswTristateCheckBox("init",b)},save:function(b){$Div=b.$propdiv.find("div");var d=$Div.CswTristateCheckBox("value");b.$propxml.children("checked").text(d)}};a.fn.CswFieldTypeLogical=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);
else a.error("Method "+b+" does not exist on CswFieldTypeLogical")}})(jQuery);(function(a){var f={init:function(b){var d=a(this);d.contents().remove();var g=b.$propxml.children("logicalsetxml");d=a("<div />").appendTo(d);var e=[],h=0;g.find("item").first().children("column").each(function(){var n=a(this).attr("field");if(n!="name"&&n!="key"){e[h]=n;h++}});var j=[],l=0;g.find("item").each(function(){for(var n=a(this),o=[],i=0,k=0;k<e.length;k++){var p=n.children('column[field="'+e[k]+'"]').attr("value");o[i]=p=="True";i++}n={label:n.children('column[field="name"]').attr("value"),
key:n.children('column[field="key"]').attr("value"),values:o};j[l]=n;l++});d.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:e,data:j,onchange:b.onchange})},save:function(b){var d=b.$propxml.children("logicalsetxml");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var g=0;g<b.length;g++)for(var e=0;e<b[g].length;e++){var h=b[g][e],j=d.find('item:has(column[field="key"][value="'+h.key+'"])').find('column[field="'+h.collabel+'"]');if(h.checked&&j.attr("value")=="False")j.attr("value",
"True");else!h.checked&&j.attr("value")=="True"&&j.attr("value","False")}}};a.fn.CswFieldTypeLogicalSet=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeLogicalSet")}})(jQuery);(function(a){var f={init:function(b){var d=a(this);d.contents().remove();var g=b.$propxml.children("text").text().trim(),e=b.$propxml.children("text").attr("rows"),h=b.$propxml.children("text").attr("columns");if(b.ReadOnly)d.append(g);else{d=a('<textarea id="'+b.ID+'" name="'+b.ID+'" rows="'+e+'" cols="'+h+'">'+g+"</textarea>").appendTo(d).change(b.onchange);b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("textarea");b.$propxml.children("text").text(d.val())}};a.fn.CswFieldTypeMemo=
function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeMemo")}})(jQuery);(function(a){var f={init:function(b){var d=a(this);d.contents().remove();var g=b.$propxml.children("startdatetime").text().trim(),e=b.$propxml.children("value").text().trim(),h=b.$propxml.children("units").text().trim();d=d.CswTable("init",{ID:b.ID+"_tbl"});var j=d.CswTable("cell",1,1),l=d.CswTable("cell",1,2);j.append(e+"&nbsp;"+h);if(!b.ReadOnly){l.CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID,onClick:function(){n.show()}});var n=d.CswTable("cell",2,2).CswTable("init",
{ID:b.ID+"_edittbl"});n.CswTable("cell",1,1).append("Start Date");a('<input type="text" class="textinput date" id="'+b.ID+'_sd" name="'+b.ID+'_sd" value="'+g+'" />"').appendTo(n.CswTable("cell",1,2)).change(b.onchange).datepicker();n.CswTable("cell",3,1).append("Units");b=a('<select id="'+b.ID+'_units" />').appendTo(n.CswTable("cell",3,2)).change(b.onchange);g=a('<option value="hours">hours</option>').appendTo(b);h=="hours"&&g.attr("selected","true");b=a('<option value="days">days</option>').appendTo(b);
h=="days"&&b.attr("selected","true");n.hide()}},save:function(b){var d=b.$propdiv.find("#"+b.ID+"_sd").val(),g=b.$propdiv.find("#"+b.ID+"_units").val();b.$propxml.children("startdatetime").text(d);b.$propxml.children("units").text(g)}};a.fn.CswFieldTypeMTBF=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeMTBF")}})(jQuery);(function(a){var f={init:function(b){var d=a(this);d.contents().remove();var g=b.$propxml.children("options");b.$propxml.children("NodeType").text().trim();var e=b.$propxml.children("NodeType").attr("SelectMode");d=a("<div />").appendTo(d);var h=[],j=0;g.find("item").each(function(){var l=a(this);l={label:l.children('column[field="NodeTypeName"]').attr("value"),key:l.children('column[field="nodetypeid"]').attr("value"),values:[l.children('column[field="Include"]').attr("value")=="True"]};h[j]=l;j++});
d.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:["Include"],data:h,UseRadios:e=="Single",Required:b.Required,onchange:b.onchange})},save:function(b){var d=b.$propxml.children("options");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var g=0;g<b.length;g++){var e=b[g][0],h=d.find('item:has(column[field="nodetypeid"][value="'+e.key+'"])').find('column[field="Include"]');if(e.checked&&h.attr("value")=="False")h.attr("value","True");else!e.checked&&h.attr("value")==
"True"&&h.attr("value","False")}}};a.fn.CswFieldTypeNodeTypeSelect=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeNodeTypeSelect")}})(jQuery);(function(a){var f={init:function(b){a(this).CswNumberTextBox({ID:b.ID,Value:b.$propxml.children("value").text().trim(),MinValue:b.$propxml.children("value").attr("minvalue"),MaxValue:b.$propxml.children("value").attr("maxvalue"),Precision:b.$propxml.children("value").attr("precision"),ReadOnly:b.ReadOnly,Required:b.Required,onchange:b.onchange})},save:function(b){b.$propxml.children("value").text(b.$propdiv.CswNumberTextBox("value"))}};a.fn.CswFieldTypeNumber=function(b){if(f[b])return f[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeNumber")}})(jQuery);(function(a){var f={init:function(b){var d=a(this);d.contents().remove();if(!b.ReadOnly){var g=d.CswTable("init",{ID:b.ID+"_tbl"});d=g.CswTable("cell",1,1);g=g.CswTable("cell",2,1);a('<input type="password" class="textinput" id="'+b.ID+'_pwd1" name="'+b.ID+'" />"').appendTo(d).change(onchange);a('<input type="password" class="textinput password2" id="'+b.ID+'_pwd2" name="'+b.ID+'" />"').appendTo(g).change(onchange);jQuery.validator.addMethod("password2",function(){var e=a("#"+b.ID+"_pwd1").val(),
h=a("#"+b.ID+"_pwd2").val();return e==""&&h==""||e==h},"Passwords do not match!")}},save:function(b){var d=b.$propdiv.find("input#"+b.ID+"_pwd1").val();d!=""&&b.$propxml.children("newpassword").text(d)}};a.fn.CswFieldTypePassword=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypePassword")}})(jQuery);(function(a){var f={init:function(b){var d=a(this);d.contents().remove();var g=b.$propxml.children("value").text().trim();g+="&nbsp;";a('<div id="'+b.ID+'" class="staticvalue">'+g+"</div>").appendTo(d)},save:function(){}};a.fn.CswFieldTypePropertyReference=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypePropertyReference")}})(jQuery);(function(a){var f={init:function(b){var d=a(this);d.contents().remove();d.CswNumberTextBox({ID:b.ID+"_qty",Value:b.$propxml.children("value").text().trim(),MinValue:b.$propxml.children("value").attr("minvalue"),MaxValue:b.$propxml.children("value").attr("maxvalue"),Precision:b.$propxml.children("value").attr("precision"),ReadOnly:b.ReadOnly,Required:b.Required,onchange:b.onchange});var g=b.$propxml.children("units").contents().first().text(),e=a('<select id="'+b.ID+'_units" />').appendTo(d).change(b.onchange);
b.$propxml.children("units").children().each(function(){var h=a(this).attr("value"),j=a('<option value="'+h+'">'+h+"</option>").appendTo(e);g==h&&j.attr("selected","true")})},save:function(b){b.$propxml.children("value").text(b.$propdiv.CswNumberTextBox("value"));var d=b.$propdiv.find("#"+b.ID+"_units").val();b.$propxml.children("units").text(d)}};a.fn.CswFieldTypeQuantity=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,
arguments);else a.error("Method "+b+" does not exist on CswFieldTypeQuantity")}})(jQuery);(function(a){function f(d,g,e,h){d=d.split(",");var j=true,l=g.val(),n=h.val();if(l!=""&&n==""){j=false;for(var o=0;o<d.length;o++)if(d[o]==l)j=true}if(j){g.removeClass("CswFieldTypeQuestion_OOC");if(n==""){e.hide();h.hide()}}else{g.addClass("CswFieldTypeQuestion_OOC");e.show();h.show()}}var b={init:function(d){var g=a(this);g.contents().remove();var e=d.$propxml.children("answer").text().trim(),h=d.$propxml.children("allowedanswers").text().trim(),j=d.$propxml.children("compliantanswers").text().trim(),
l=d.$propxml.children("comments").text().trim(),n=d.$propxml.children("correctiveaction").text().trim();d.$propxml.children("dateanswered").text().trim();d.$propxml.children("datecorrected").text().trim();d.$propxml.children("iscompliant").text().trim();if(d.ReadOnly){g.append(e+"<br/>");g.append(l+"<br/>");g.append(n+"<br/>")}else{g=g.CswTable("init",{ID:d.ID+"_tbl",FirstCellRightAlign:true});g.CswTable("cell",1,1).append("Answer");h=h.split(",");for(var o=a('<select id="'+d.ID+'_ans" />').appendTo(g.CswTable("cell",
1,2)).change(function(){f(j,o,m,t);d.onchange()}),i=a('<option value=""></option>').appendTo(o),k=0;k<h.length;k++){var p=h[k];i=a('<option value="'+p+'">'+p+"</option>").appendTo(o);p==e&&i.attr("selected","true")}var m=g.CswTable("cell",2,1).append("Corrective Action"),t=a('<textarea id="'+d.ID+'_cor" />').appendTo(g.CswTable("cell",2,2)).text(n).change(function(){f(j,o,m,t);d.onchange()});g.CswTable("cell",3,1).append("Comments");a('<textarea id="'+d.ID+'_com" />').appendTo(g.CswTable("cell",3,
2)).text(l).change(d.onchange);f(j,o,m,t)}},save:function(d){var g=d.$propdiv.find("#"+d.ID+"_ans").val(),e=d.$propdiv.find("#"+d.ID+"_cor").val(),h=d.$propdiv.find("#"+d.ID+"_com").val();d.$propxml.children("answer").text(g);d.$propxml.children("correctiveaction").text(e);d.$propxml.children("comments").text(h)}};a.fn.CswFieldTypeQuestion=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+
d+" does not exist on CswFieldTypeQuestion")}})(jQuery);(function(a){a.fn.CswFieldTypeRelationship=function(f){var b={init:function(d){var g=a(this);g.contents().remove();var e=d.$propxml.children("nodeid").text().trim();if(d.relatednodeid!=""&&d.relatednodeid!=undefined&&(e==""||e==undefined))e=d.relatednodeid;var h=d.$propxml.children("name").text().trim(),j=d.$propxml.children("nodetypeid").text().trim(),l=d.$propxml.children("options");if(d.ReadOnly)g.append(h);else{g=g.CswTable("init",{ID:d.ID+"_tbl"});h=g.CswTable("cell",1,1);var n=a('<select id="'+
d.ID+'" name="'+d.ID+'" class="selectinput" />"').appendTo(h).change(d.onchange);l.children().each(function(){var o=a(this);n.append('<option value="'+o.attr("id")+'">'+o.attr("value")+"</option>")});n.val(e);if(j!=""){e=g.CswTable("cell",1,2);a("<div />").appendTo(e).CswImageButton({ButtonType:CswImageButton_ButtonType.Add,AlternateText:"Add New",onClick:function(){a.CswDialog("AddNodeDialog",{nodetypeid:j,onAddNode:function(){d.onReload()}});return CswImageButton_ButtonType.None}})}d.Required&&
n.addClass("required")}},save:function(d){var g=d.$propdiv.find("select");d.$propxml.children("nodeid").text(g.val())}};if(b[f])return b[f].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof f==="object"||!f)return b.init.apply(this,arguments);else a.error("Method "+f+" does not exist on CswFieldTypeRelationship")}})(jQuery);(function(a){var f={init:function(b){var d=a(this);d.contents().remove();var g=b.$propxml.children("sequence").text().trim();if(b.ReadOnly)d.append(g);else{d=a('<input type="text" class="textinput" id="'+b.ID+'" name="'+b.ID+'" value="'+g+'" />"').appendTo(d).change(b.onchange);b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("sequence").text(d.val())}};a.fn.CswFieldTypeSequence=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,
1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeSequence")}})(jQuery);(function(a){var f={init:function(b){var d=a(this);d.contents().remove();var g=b.$propxml.children("text").text().trim(),e=parseInt(b.$propxml.children("text").attr("columns"));b=parseInt(b.$propxml.children("text").attr("rows"));var h="auto",j="",l="";if(e>0&&b>0){h="scroll";j=Math.round(e+2-e/2.25)+"em";l=Math.round(b+2.5+b/5)+"em"}else if(e>0)j=Math.round(e-e/2.25)+"em";else if(b>0)l=Math.round(b+0.5+b/5)+"em";a('<div class="staticvalue" style="overflow: '+h+"; width: "+j+"; height: "+l+';">'+
g+"</div>").appendTo(d)},save:function(){}};a.fn.CswFieldTypeStatic=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeStatic")}})(jQuery);(function(a){var f={init:function(b){var d=a(this);d.contents().remove();var g=b.$propxml.children("text").text().trim(),e=b.$propxml.children("text").attr("length");if(b.ReadOnly)d.append(g);else{d=a('<input type="text" class="textinput" size="'+e+'" id="'+b.ID+'" name="'+b.ID+'" value="'+g+'" />"').appendTo(d).change(b.onchange);b.Required&&d.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("text").text(d.val())}};a.fn.CswFieldTypeText=function(b){if(f[b])return f[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeText")}})(jQuery);(function(a){var f={init:function(b){var d=a(this);d.contents().remove();var g=b.$propxml.children("value").text().trim();if(b.ReadOnly)d.append(g);else{var e=a('<input type="text" class="textinput validateTime" id="'+b.ID+'" name="'+b.ID+'" value="'+g+'" />"').appendTo(d).change(b.onchange);a('<input type="button" id="'+b.ID+'_now" value="Now" />"').appendTo(d).click(function(){e.val(getTimeString(new Date))});jQuery.validator.addMethod("validateTime",function(h,j){return this.optional(j)||validateTime(a(j).val())},
"Enter a valid time (e.g. 12:30 PM)");b.Required&&e.addClass("required")}},save:function(b){var d=b.$propdiv.find("input");b.$propxml.children("value").text(d.val())}};a.fn.CswFieldTypeTime=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeTime")}})(jQuery);(function(a){function f(e,h,j){e=e.CswTable("init",{ID:h,cellalign:"center"});e.CswTable("cell",1,1).append("Su");e.CswTable("cell",1,2).append("M");e.CswTable("cell",1,3).append("Tu");e.CswTable("cell",1,4).append("W");e.CswTable("cell",1,5).append("Th");e.CswTable("cell",1,6).append("F");e.CswTable("cell",1,7).append("Sa");for(var l=1;l<=7;l++)a('<input type="checkbox" id="'+h+"_"+l+'" name="'+h+'" value="'+l+'" />').appendTo(e.CswTable("cell",2,l)).click(j)}function b(e,h){a('[name="'+e+'"]').attr("checked",
"");for(var j=h.split(","),l=0;l<j.length;l++)switch(j[l]){case "Sunday":a("#"+e+"_1").attr("checked","true");break;case "Monday":a("#"+e+"_2").attr("checked","true");break;case "Tuesday":a("#"+e+"_3").attr("checked","true");break;case "Wednesday":a("#"+e+"_4").attr("checked","true");break;case "Thursday":a("#"+e+"_5").attr("checked","true");break;case "Friday":a("#"+e+"_6").attr("checked","true");break;case "Saturday":a("#"+e+"_7").attr("checked","true")}}function d(e){var h="";a('[name="'+e+'"]').each(function(){var j=
a(this);if(j.attr("checked")!=""){if(h!="")h+=",";switch(j.attr("value")){case "1":h+="Sunday";break;case "2":h+="Monday";break;case "3":h+="Tuesday";break;case "4":h+="Wednesday";break;case "5":h+="Thursday";break;case "6":h+="Friday";break;case "7":h+="Saturday"}}});return h}var g={init:function(e){var h=a(this);h.contents().remove();var j=e.$propxml.children("Interval").attr("text");h.append('<span id="'+e.ID+'_textvalue">'+j+"</span>");if(!e.ReadOnly){var l=h.CswTable("init",{ID:e.ID+"_tbl",cellspacing:5});
h=a('<input type="radio" id="'+e.ID+'_type_weekly" name="'+e.ID+'_type" value="weekly" />').appendTo(l.CswTable("cell",1,1));l.CswTable("cell",1,2).append("<span>&nbsp;Weekly</span>");h.click(function(){o.show();k.hide();x.hide();e.onchange()});j=a('<input type="radio" id="'+e.ID+'_type_monthly" name="'+e.ID+'_type" value="monthly" />').appendTo(l.CswTable("cell",2,1));l.CswTable("cell",2,2).append("<span>&nbsp;Monthly</span>");j.click(function(){o.hide();k.show();x.hide();e.onchange()});var n=a('<input type="radio" id="'+
e.ID+'_type_yearly" name="'+e.ID+'_type" value="yearly" />').appendTo(l.CswTable("cell",3,1));l.CswTable("cell",3,2).append("<span>&nbsp;Yearly</span>");n.click(function(){o.hide();k.hide();x.show();e.onchange()});l=l.CswTable("cell",1,3);l.attr("rowspan","3");var o=a("<div />").appendTo(l).addClass("CswFieldTypeTimeInterval_Div"),i=o.CswTable("init",{ID:e.ID+"_weeklytbl",cellalign:"center",FirstCellRightAlign:true});i.CswTable("cell",1,1).append("Every:");f(i.CswTable("cell",1,2),e.ID+"_weeklyday",
e.onchange);i.CswTable("cell",2,1).append("Starting On:");i=i.CswTable("cell",2,2);i=a('<input type="text" class="textinput date" id="'+e.ID+'_weekly_sd" name="'+e.ID+'_weekly_sd" value="" />"').appendTo(i).change(e.onchange).datepicker();var k=a("<div />").appendTo(l).addClass("CswFieldTypeTimeInterval_Div");k.append("Every ");for(var p=a('<select id="'+e.ID+'_monthly_rate"/>').appendTo(k).change(e.onchange),m=1;m<=12;m++)p.append('<option value="'+m+'">'+m+"</option>");k.append(" Month(s)<br/>");
var t=a('<input type="radio" id="'+e.ID+'_monthly_by_date" name="'+e.ID+'_monthly_by" value="MonthlyByDate" />').appendTo(k).click(e.onchange);k.append("On Day of Month:&nbsp;");var v=a('<select id="'+e.ID+'_monthly_date" />').appendTo(k).change(e.onchange);for(m=1;m<=31;m++)v.append('<option value="'+m+'">'+m+"</option>");k.append("<br/>");var q=a('<input type="radio" id="'+e.ID+'_monthly_by_day" name="'+e.ID+'_monthly_by" value="MonthlyByWeekAndDay" />').appendTo(k).change(e.onchange);k.append("Every&nbsp;");
var s=a('<select id="'+e.ID+'_monthly_week" />').appendTo(k);s.append('<option value="1">First:</option>');s.append('<option value="2">Second:</option>');s.append('<option value="3">Third:</option>');s.append('<option value="4">Fourth:</option>');k.append("<br/>");f(k,e.ID+"_monthly_day",e.onchange);k.append("<br/>Starting On:&nbsp;");var u=a('<select id="'+e.ID+'_monthly_startMonth" />').appendTo(k).change(e.onchange);for(m=1;m<=12;m++)u.append('<option value="'+m+'">'+m+"</option>");k.append("/");
var w=a('<select id="'+e.ID+'_monthly_startYear" />').appendTo(k).change(e.onchange),A=(new Date).getFullYear();for(m=A-10;m<=A+10;m++)w.append('<option value="'+m+'">'+m+"</option>");w.val(A);var x=a("<div />").appendTo(l).addClass("CswFieldTypeTimeInterval_Div");x.append("Every Year, Starting On:<br/>");l=a('<input type="text" class="textinput date" id="'+e.ID+'_yearly_sd" name="'+e.ID+'_yearly_sd" value="" />"').appendTo(x).change(e.onchange).datepicker();m=e.$propxml.children("interval").children("rateintervalvalue");
switch(m.children("ratetype").text()){case "WeeklyByDay":h.attr("checked","true");o.show();k.hide();x.hide();b(e.ID+"_weeklyday",m.children("weeklyday").text());i.val(m.children("startingdate").text());break;case "MonthlyByDate":j.attr("checked","true");o.hide();k.show();x.hide();t.attr("checked","true");p.val(m.children("monthlyfrequency").text());v.val(m.children("monthlydate").text());u.val(m.children("startingmonth").text());w.val(m.children("startingyear").text());break;case "MonthlyByWeekAndDay":j.attr("checked",
"true");o.hide();k.show();x.hide();q.attr("checked","true");s.val(m.children("monthlyweek").text());b(e.ID+"_monthly_day",m.children("monthlyday").text());u.val(m.children("startingmonth").text());w.val(m.children("startingyear").text());break;case "YearlyByDate":n.attr("checked","true");o.hide();k.show();x.hide();l.val(m.children("yearlydate").text())}}},save:function(e){var h=a('[name="'+e.ID+'_type"]:checked').attr("value");e.$propxml.children().remove();var j=a("<interval />").appendTo(e.$propxml),
l=a("<rateintervalvalue />").appendTo(j);switch(h){case "weekly":a("<ratetype>WeeklyByDay</ratetype>").appendTo(l);a("<weeklyday>"+d(e.ID+"_weeklyday")+"</weeklyday>").appendTo(l);a("<startingdate>"+a("#"+e.ID+"_weekly_sd").val()+"</startingdate>").appendTo(l);break;case "monthly":h=a('[name="'+e.ID+'_monthly_by"]:checked').attr("value");a("<ratetype>"+h+"</ratetype>").appendTo(l);a("<monthlyfrequency>"+a("#"+e.ID+"_monthly_rate").val()+"</monthlyfrequency>").appendTo(l);if(h=="MonthlyByDate")a("<monthlydate>"+
a("#"+e.ID+"_monthly_date").val()+"</monthlydate>").appendTo(l);else{a("<monthlyweek>"+a("#"+e.ID+"_monthly_week").val()+"</monthlyweek>").appendTo(l);a("<monthlyday>"+d(e.ID+"_monthly_day")+"</monthlyday>").appendTo(l)}a("<startingmonth>"+a("#"+e.ID+"_monthly_startMonth").val()+"</startingmonth>").appendTo(l);a("<startingyear>"+a("#"+e.ID+"_monthly_startYear").val()+"</startingyear>").appendTo(l);break;case "yearly":a("<ratetype>YearlyByDate</ratetype>").appendTo(l);a("<yearlydate>"+a("#"+e.ID+"_yearly_sd").val()+
"</yearlydate>").appendTo(l)}log(j.find("*").length);j.find("*").andSelf().each(function(){a(this).attr("xmlns","")})}};a.fn.CswFieldTypeTimeInterval=function(e){if(g[e])return g[e].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof e==="object"||!e)return g.init.apply(this,arguments);else a.error("Method "+e+" does not exist on CswFieldTypeTimeInterval")}})(jQuery);(function(a){var f={init:function(b){var d=a(this);d.contents().remove();b.$propxml.children("NodeId").text().trim();var g=b.$propxml.children("options");d=a("<div />").appendTo(d);var e=[],h=0;g.children().each(function(){var j=a(this);j={label:j.children('column[field="User Name"]').attr("value"),key:j.children('column[field="UserId"]').attr("value"),values:[j.children('column[field="Include"]').attr("value")=="True"]};e[h]=j;h++});d.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:["Include"],data:e,
UseRadios:false,Required:b.Required,onchange:b.onchange})},save:function(b){var d=b.$propxml.children("options");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var g=0;g<b.length;g++){var e=b[g][0],h=d.find('user:has(column[field="UserId"][value="'+e.key+'"])').find('column[field="Include"]');if(e.checked&&h.attr("value")=="False")h.attr("value","True");else!e.checked&&h.attr("value")=="True"&&h.attr("value","False")}}};a.fn.CswFieldTypeUserSelect=function(b){if(f[b])return f[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeUserSelect")}})(jQuery);(function(a){var f={init:function(b){var d=a(this);d.contents().remove();b.$propxml.children("viewid").text().trim();var g=b.$propxml.children("options"),e=b.$propxml.children("viewid").attr("SelectMode");d=a("<div />").appendTo(d);var h=[],j=0;g.children().each(function(){var l=a(this);l={label:l.children('column[field="View Name"]').attr("value"),key:l.children('column[field="nodeviewid"]').attr("value"),values:[l.children('column[field="Include"]').attr("value")=="True"]};h[j]=l;j++});d.CswCheckBoxArray("init",
{ID:b.ID+"_cba",cols:["Include"],data:h,UseRadios:e=="Single",Required:b.Required,onchange:b.onchange})},save:function(b){var d=b.$propxml.children("options");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var g=0;g<b.length;g++){var e=b[g][0],h=d.find('user:has(column[field="nodeviewid"][value="'+e.key+'"])').find('column[field="Include"]');if(e.checked&&h.attr("value")=="False")h.attr("value","True");else!e.checked&&h.attr("value")=="True"&&h.attr("value",
"False")}}};a.fn.CswFieldTypeViewPickList=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeViewPickList")}})(jQuery);(function(a){var f={init:function(b){var d=a(this);d.contents().remove();var g=b.$propxml.children("viewid").text().trim(),e=b.$propxml.children("viewmode").text().trim();b.$propxml.children("name").text().trim();d=d.CswTable("init",{ID:b.ID+"_tbl"});d.CswTable("cell",1,1).CswImageButton({ID:b.ID+"_view",ButtonType:CswImageButton_ButtonType.View,AlternateText:"View",Required:b.Required,onClick:function(){a.CswCookie("set",CswCookieName.CurrentView.ViewId,g);a.CswCookie("set",CswCookieName.CurrentView.ViewMode,
e);window.location="NewMain.html";return CswImageButton_ButtonType.None}});b.ReadOnly||d.CswTable("cell",1,2).CswImageButton({ID:b.ID+"_edit",ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",Required:b.Required,onClick:function(){window.location="EditView.aspx?step=2&return=NewMain.html&viewid="+g;return CswImageButton_ButtonType.None}})},save:function(){}};a.fn.CswFieldTypeViewReference=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b===
"object"||!b)return f.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeViewReference")}})(jQuery);$.CswFieldTypeFactory=function(a){var f={nodeid:"",fieldtype:"",$propdiv:"",$propxml:"",onchange:function(){},onReload:function(){},cswnbtnodekey:"",ID:"",Required:"",ReadOnly:""},b={make:function(d){d&&$.extend(f,d);f.ID=f.$propxml.attr("id");f.Required=f.$propxml.attr("required")=="true";f.ReadOnly=f.$propxml.attr("readonly")=="true";switch(f.fieldtype){case "Barcode":f.$propdiv.CswFieldTypeBarcode("init",f);break;case "Composite":f.$propdiv.CswFieldTypeComposite("init",f);break;case "Date":f.$propdiv.CswFieldTypeDate("init",
f);break;case "File":f.$propdiv.CswFieldTypeFile("init",f);break;case "Grid":f.$propdiv.CswFieldTypeGrid("init",f);break;case "Image":f.$propdiv.CswFieldTypeImage("init",f);break;case "Link":f.$propdiv.CswFieldTypeLink("init",f);break;case "List":f.$propdiv.CswFieldTypeList("init",f);break;case "Location":f.$propdiv.CswFieldTypeLocation("init",f);break;case "LocationContents":f.$propdiv.CswFieldTypeLocationContents("init",f);break;case "Logical":f.$propdiv.CswFieldTypeLogical("init",f);break;case "LogicalSet":f.$propdiv.CswFieldTypeLogicalSet("init",
f);break;case "Memo":f.$propdiv.CswFieldTypeMemo("init",f);break;case "MTBF":f.$propdiv.CswFieldTypeMTBF("init",f);break;case "NodeTypeSelect":f.$propdiv.CswFieldTypeNodeTypeSelect("init",f);break;case "Number":f.$propdiv.CswFieldTypeNumber("init",f);break;case "Password":f.$propdiv.CswFieldTypePassword("init",f);break;case "PropertyReference":f.$propdiv.CswFieldTypePropertyReference("init",f);break;case "Quantity":f.$propdiv.CswFieldTypeQuantity("init",f);break;case "Question":f.$propdiv.CswFieldTypeQuestion("init",
f);break;case "Relationship":f.$propdiv.CswFieldTypeRelationship("init",f);break;case "Sequence":f.$propdiv.CswFieldTypeSequence("init",f);break;case "Static":f.$propdiv.CswFieldTypeStatic("init",f);break;case "Text":f.$propdiv.CswFieldTypeText("init",f);break;case "Time":f.$propdiv.CswFieldTypeTime("init",f);break;case "TimeInterval":f.$propdiv.CswFieldTypeTimeInterval("init",f);break;case "UserSelect":f.$propdiv.CswFieldTypeUserSelect("init",f);break;case "ViewPickList":f.$propdiv.CswFieldTypeViewPickList("init",
f);break;case "ViewReference":f.$propdiv.CswFieldTypeViewReference("init",f);break;default:f.$propdiv.append(f.$propxml.attr("init",f))}},save:function(d){d&&$.extend(f,d);f.ID=f.$propxml.attr("id");f.Required=f.$propxml.attr("required")=="true";f.ReadOnly=f.$propxml.attr("readonly")=="true";switch(f.fieldtype){case "Barcode":f.$propdiv.CswFieldTypeBarcode("save",f);break;case "Composite":f.$propdiv.CswFieldTypeComposite("save",f);break;case "Date":f.$propdiv.CswFieldTypeDate("save",f);break;case "File":f.$propdiv.CswFieldTypeFile("save",
f);break;case "Grid":f.$propdiv.CswFieldTypeGrid("save",f);break;case "Image":f.$propdiv.CswFieldTypeImage("save",f);break;case "Link":f.$propdiv.CswFieldTypeLink("save",f);break;case "List":f.$propdiv.CswFieldTypeList("save",f);break;case "Location":f.$propdiv.CswFieldTypeLocation("save",f);break;case "LocationContents":f.$propdiv.CswFieldTypeLocationContents("save",f);break;case "Logical":f.$propdiv.CswFieldTypeLogical("save",f);break;case "LogicalSet":f.$propdiv.CswFieldTypeLogicalSet("save",f);
break;case "Memo":f.$propdiv.CswFieldTypeMemo("save",f);break;case "MTBF":f.$propdiv.CswFieldTypeMTBF("save",f);break;case "NodeTypeSelect":f.$propdiv.CswFieldTypeNodeTypeSelect("save",f);break;case "Number":f.$propdiv.CswFieldTypeNumber("save",f);break;case "Password":f.$propdiv.CswFieldTypePassword("save",f);break;case "PropertyReference":f.$propdiv.CswFieldTypePropertyReference("save",f);break;case "Quantity":f.$propdiv.CswFieldTypeQuantity("save",f);break;case "Question":f.$propdiv.CswFieldTypeQuestion("save",
f);break;case "Relationship":f.$propdiv.CswFieldTypeRelationship("save",f);break;case "Sequence":f.$propdiv.CswFieldTypeSequence("save",f);break;case "Static":f.$propdiv.CswFieldTypeStatic("save",f);break;case "Text":f.$propdiv.CswFieldTypeText("save",f);break;case "Time":f.$propdiv.CswFieldTypeTime("save",f);break;case "TimeInterval":f.$propdiv.CswFieldTypeTimeInterval("save",f);break;case "UserSelect":f.$propdiv.CswFieldTypeUserSelect("save",f);break;case "ViewPickList":f.$propdiv.CswFieldTypeViewPickList("save",
f);break;case "ViewReference":f.$propdiv.CswFieldTypeViewReference("save",f)}}};if(b[a])return b[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return b.init.apply(this,arguments);else $.error("Method "+a+" does not exist on "+PluginName)};
