function CswString(a){var d=a;this.val=function(b){if(arguments.length===1){d=b;return this}else return d};this.contains=function(b){return d.indexOf(b)!==-1}}CswString.prototype.toString=function(){return this.value};function CswArray(){var a=[];a.push.apply(arr,arguments);a.__proto__=CswArray.prototype;return a}CswArray.prototype=[];CswArray.prototype={last:function(){return this[this.length-1]},contains:function(a){this.indexOf(a)}};
function CswStorage(a){this.storage=a;this.serializer=new ONEGEEK.GSerializer;this.keys=[]}
CswStorage.prototype={clear:function(){for(var a in this.keys)this.storage.removeItem(this.keys[a]);return this},purgeAllStorage:function(){this.storage.clear();return this},getItem:function(a,d){var b=this.storage.getItem(a);return isNullOrEmpty(b)?!isNullOrEmpty(d)?d:null:this.serializer.deserialize(b)},getKeys:function(){return this.keys},hasItem:function(a){return ret=!isNullOrEmpty(this.storage.getItem(a))},removeItem:function(a){this.storage.removeItem(a);return this},setItem:function(a,d){this.keys.indexOf(a)===
-1&&this.keys.push(a);this.storage.setItem(a,this.serializer.serialize(d));return this}};var EditMode={Edit:{name:"Edit"},AddInPopup:{name:"AddInPopup"},EditInPopup:{name:"EditInPopup"},Demo:{name:"Demo"},PrintReport:{name:"PrintReport"},DefaultValue:{name:"DefaultValue"}},CswInput_Types={button:{id:0,name:"button",placeholder:false,autocomplete:false,value:{required:false,allowed:true},defaultwidth:""},checkbox:{id:1,name:"checkbox",placeholder:false,autocomplete:false,value:{required:true,allowed:true},defaultwidth:""},color:{id:2,name:"color",placeholder:false,autocomplete:true,value:{required:false,
allowed:true},defaultwidth:""},date:{id:3,name:"date",placeholder:false,autocomplete:true,value:{required:false,allowed:true},defaultwidth:"200px"},datetime:{id:4,name:"datetime",placeholder:false,autocomplete:false,value:{required:false,allowed:true},defaultwidth:"200px"},"datetime-local":{value:5,name:"datetime-local",placeholder:false,autocomplete:true,value:{required:false,allowed:true},defaultwidth:"200px"},email:{id:6,name:"email",placeholder:true,autocomplete:true,value:{required:false,allowed:true},
defaultwidth:"200px"},file:{id:7,name:"file",placeholder:false,autocomplete:false,value:{required:false,allowed:false},defaultwidth:""},hidden:{id:8,name:"hidden",placeholder:false,autocomplete:false,value:{required:false,allowed:true},defaultwidth:""},image:{id:9,name:"image",placeholder:false,autocomplete:false,value:{required:false,allowed:true},defaultwidth:""},month:{id:10,name:"month",placeholder:false,autocomplete:false,value:{required:false,allowed:true},defaultwidth:""},number:{id:11,name:"number",
placeholder:false,autocomplete:false,value:{required:false,allowed:true},defaultwidth:"200px"},password:{id:12,name:"password",placeholder:true,value:{required:false,allowed:true},defaultwidth:"200px"},radio:{id:13,name:"radio",placeholder:false,autocomplete:false,value:{required:true,allowed:true},defaultwidth:""},range:{id:14,name:"range",placeholder:false,autocomplete:true,value:{required:false,allowed:true},defaultwidth:""},reset:{id:15,name:"reset",placeholder:false,autocomplete:false,value:{required:false,
allowed:true},defaultwidth:""},search:{id:16,name:"search",placeholder:true,autocomplete:true,value:{required:false,allowed:true},defaultwidth:""},submit:{id:17,name:"submit",placeholder:false,autocomplete:false,value:{required:false,allowed:true},defaultwidth:""},tel:{id:18,name:"button",placeholder:true,autocomplete:true,value:{required:false,allowed:true},defaultwidth:""},text:{id:19,name:"text",placeholder:true,autocomplete:true,value:{required:false,allowed:true},defaultwidth:"200px"},time:{id:20,
name:"time",placeholder:false,autocomplete:true,value:{required:false,allowed:true},defaultwidth:"200px"},url:{id:21,name:"url",placeholder:true,autocomplete:true,value:{required:false,allowed:true},defaultwidth:"200px"},week:{id:22,name:"week",placeholder:false,autocomplete:false,value:{required:false,allowed:true},defaultwidth:""}},homeUrl="NewMain.html",timeout="";function getTimeout(){return timeout}
function CswAjaxJSON(a){var d={url:"",data:{},onloginfail:function(){_finishLogout()},success:function(){},error:function(){},formobile:false,async:true};a&&$.extend(d,a);$.ajax({type:"POST",async:d.async,url:d.url,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(d.data),success:function(b,e,g){var f=$.parseJSON(b.d);if(f.error!==undefined){_handleAjaxError(g,{message:f.error.message,detail:f.error.detail},"");d.error(g,e,errorThrown)}else{b=tryParseString(f.AuthenticationStatus,
"Unknown");timeout=tryParseString(f.timeout,"");_handleAuthenticationStatus({status:b,success:function(){d.success(f)},failure:d.onloginfail,usernodeid:f.nodeid,usernodekey:f.cswnbtnodekey,passwordpropid:f.passwordpropid,ForMobile:d.formobile})}},error:function(b,e,g){log("Webservice Request ("+d.url+") Failed: "+e);d.error(b,e,g)}})}
function CswAjaxXml(a){var d={url:"",data:{},stringify:false,onloginfail:function(){_finishLogout()},success:function(){},error:function(){},formobile:false,async:true};a&&$.extend(d,a);isNullOrEmpty(d.url)||$.ajax({type:"POST",async:d.async,url:d.url,dataType:"text",data:$.param(d.data),success:function(b,e,g){var f;f=$.browser.msie?$.xml(b):$(g.responseXML).children().first();if(f.first().get(0).nodeName==="error"){_handleAjaxError(g,{message:f.CswAttrXml("message"),detail:f.CswAttrXml("detail")},
"");d.error()}else{b=tryParseString(f.CswAttrXml("authenticationstatus"),"Unknown");timeout=f.CswAttrXml("timeout");_handleAuthenticationStatus({status:b,success:function(){d.success(f)},failure:d.onloginfail,usernodeid:tryParseString(f.CswAttrXml("nodeid"),""),usernodekey:tryParseString(f.CswAttrXml("cswnbtnodekey"),""),passwordpropid:tryParseString(f.CswAttrXml("passwordpropid"),""),ForMobile:d.formobile})}},error:function(b,e){log("Webservice Request ("+d.url+") Failed: "+e);d.error()}})}
function _handleAjaxError(a,d){var b=$("#ErrorDiv");b.length>0?b.CswErrorMessage({message:d.message,detail:d.detail}):log(d.message+"; "+d.detail)}
function _handleAuthenticationStatus(a){var d={status:"",success:function(){},failure:function(){},usernodeid:"",usernodekey:"",passwordpropid:"",ForMobile:false};a&&$.extend(d,a);a="";var b=false;switch(d.status){case "Authenticated":d.success();break;case "Deauthenticated":d.success();break;case "Failed":a="Invalid login.";break;case "Locked":a="Your account is locked.  Please see your account administrator.";break;case "Deactivated":a="Your account is deactivated.  Please see your account administrator.";
break;case "TooManyUsers":a="Too many users are currently connected.  Try again later.";break;case "NonExistentAccessId":a="Invalid login.";break;case "NonExistentSession":a="Your session has timed out.  Please login again.";break;case "Unknown":a="An Unknown Error Occurred";break;case "TimedOut":b=true;a="Your session has timed out.  Please login again.";break;case "ExpiredPassword":b=true;d.ForMobile||$.CswDialog("EditNodeDialog",{nodeid:d.usernodeid,cswnbtnodekey:d.usernodekey,filterToPropId:d.passwordpropid,
title:"Your password has expired.  Please change it now:",onEditNode:function(){d.success()}});break;case "ShowLicense":b=true;d.ForMobile||$.CswDialog("ShowLicenseDialog",{onAccept:function(){d.success()},onDecline:function(){d.failure("You must accept the license agreement to use this application")}})}if(d.ForMobile&&d.status!=="Authenticated"&&b)d.success();else!isNullOrEmpty(a)&&d.status!=="Authenticated"&&d.failure(a,d.status)}
function Logout(a){var d={DeauthenticateUrl:"/NbtWebApp/wsNBT.asmx/deauthenticate",onDeauthenticate:function(){}};a&&$.extend(d,a);CswAjaxJSON({url:d.DeauthenticateUrl,data:{},success:function(){_finishLogout();d.onDeauthenticate()}})}function _finishLogout(){$.CswCookie("clearAll");window.location=homeUrl}
function xmlToString(a){var d="";a instanceof jQuery||(a=$(a));if(!isNullOrEmpty(a)){(d=a.get(0).xml)||(d=(new XMLSerializer).serializeToString(a.get(0)));d||$.error("Browser does not support XML operations necessary to convert to string")}return d}function jsonToString(a){return JSON.stringify(a)}var changed=new Number(0),checkChangesEnabled=true;function setChanged(){if(checkChangesEnabled)changed=1}function unsetChanged(){if(checkChangesEnabled)changed=0}
function checkChanges(){if(checkChangesEnabled&&changed===1)return"If you continue, you will lose any changes made on this page.  To save your changes, click Cancel and then click the Save button."}
function manuallyCheckChanges(){var a=true;if(checkChangesEnabled&&changed===1)if(a=confirm("Are you sure you want to navigate away from this page?\n\nIf you continue, you will lose any changes made on this page.  To save your changes, click Cancel and then click the Save button.\n\nPress OK to continue, or Cancel to stay on the current page."))changed=0;return a}
function initCheckChanges(){window.onbeforeunload=isNullOrEmpty(window.onbeforeunload)?function(){return checkChanges()}:function(){var a=window.onbeforeunload;return a()?checkChanges():false}}window.onload=isNullOrEmpty(window.onload)?function(){initCheckChanges()}:new Function("initCheckChanges(); var f="+window.onload+"; return f();");
function IsAdministrator(a){var d={Yes:function(){},No:function(){}};a&&$.extend(d,a);CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/isAdministrator",success:function(b){b.Administrator==="true"?d.Yes():d.No()}})}function copyNode(a){var d={nodeid:"",nodekey:"",onSuccess:function(){},onError:function(){}};a&&$.extend(d,a);CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/CopyNode",data:{NodePk:d.nodeid},success:function(b){d.onSuccess(b.NewNodeId,"")},error:d.onError})}
function deleteNodes(a){var d={nodeids:[],nodekeys:[],onSuccess:function(){},onError:function(){}};a&&$.extend(d,a);CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/DeleteNodes",data:{NodePks:d.nodeids,NodeKeys:d.nodekeys},success:function(){d.nodeid=$.CswCookie("clear",CswCookieName.CurrentNodeId);d.cswnbtnodekey=$.CswCookie("clear",CswCookieName.CurrentNodeKey);d.onSuccess("","")},error:d.onError})}
function jsTreeGetSelected(a){var d=a.CswAttrDom("id");$SelectedItem=a.jstree("get_selected");return{iconurl:$SelectedItem.children("a").children("ins").css("background-image"),id:$SelectedItem.CswAttrDom("id").substring(d.length),text:$SelectedItem.children("a").first().text().trim(),$item:$SelectedItem}}function GoHome(){$.CswCookie("clear",CswCookieName.CurrentViewId);$.CswCookie("clear",CswCookieName.CurrentViewMode);window.location=homeUrl}
function HandleMenuItem(a){var d={$ul:"",$itemxml:"",onLogout:function(){},onAlterNode:function(){},onSearch:{onViewSearch:function(){},onGenericSearch:function(){}},onMultiEdit:function(){},onEditView:function(){},onSaveView:function(){},Multi:false,NodeCheckTreeId:""};a&&$.extend(d,a);if(d.$itemxml.CswAttrXml("href")!==undefined&&d.$itemxml.CswAttrXml("href")!=="")a=$('<li><a href="'+d.$itemxml.CswAttrXml("href")+'">'+d.$itemxml.CswAttrXml("text")+"</a></li>").appendTo(d.$ul);else if(d.$itemxml.CswAttrXml("popup")!==
undefined&&d.$itemxml.CswAttrXml("popup")!=="")a=$('<li class="headermenu_dialog"><a href="#">'+d.$itemxml.CswAttrXml("text")+"</a></li>").appendTo(d.$ul).click(function(){$.CswDialog("OpenDialog",d.$itemxml.CswAttrXml("text"),d.$itemxml.CswAttrXml("popup"));return false});else if(d.$itemxml.CswAttrXml("action")!==undefined&&d.$itemxml.CswAttrXml("action")!==""){a=$('<li><a href="#">'+d.$itemxml.CswAttrXml("text")+"</a></li>").appendTo(d.$ul);var b=a.children("a");switch(d.$itemxml.CswAttrXml("action")){case "About":b.click(function(){$.CswDialog("AboutDialog");
return false});break;case "AddNode":b.click(function(){$.CswDialog("AddNodeDialog",{nodetypeid:d.$itemxml.CswAttrXml("nodetypeid"),relatednodeid:d.$itemxml.CswAttrXml("relatednodeid"),onAddNode:d.onAlterNode});return false});break;case "DeleteNode":b.click(function(){$.CswDialog("DeleteNodeDialog",{nodename:d.$itemxml.CswAttrXml("nodename"),nodeid:d.$itemxml.CswAttrXml("nodeid"),onDeleteNode:d.onAlterNode,NodeCheckTreeId:d.NodeCheckTreeId,Multi:d.Multi});return false});break;case "editview":b.click(function(){d.onEditView(d.$itemxml.CswAttrXml("viewid"));
return false});break;case "CopyNode":b.click(function(){$.CswDialog("CopyNodeDialog",{nodename:d.$itemxml.CswAttrXml("nodename"),nodeid:d.$itemxml.CswAttrXml("nodeid"),onCopyNode:d.onAlterNode});return false});break;case "PrintLabel":b.click(function(){$.CswDialog("PrintLabelDialog",{nodeid:d.$itemxml.CswAttrXml("nodeid"),propid:d.$itemxml.CswAttrXml("propid")});return false});break;case "Home":b.click(function(){GoHome();return false});break;case "Logout":b.click(function(){d.onLogout();return false});
break;case "Profile":b.click(function(){$.CswDialog("EditNodeDialog",{nodeid:d.$itemxml.CswAttrXml("userid"),cswnbtnodekey:"",filterToPropId:"",title:"User Profile",onEditNode:function(){}});return false});break;case "ViewSearch":b.click(function(){d.onSearch.onViewSearch()});break;case "GenericSearch":b.click(function(){d.onSearch.onGenericSearch()});break;case "multiedit":b.click(d.onMultiEdit);break;case "SaveViewAs":b.click(function(){$.CswDialog("AddViewDialog",{viewid:d.$itemxml.CswAttrXml("viewid"),
onAddView:d.onSaveView});return false})}}else a=$("<li>"+d.$itemxml.CswAttrXml("text")+"</li>").appendTo(d.$ul);return a}
function makeViewVisibilitySelect(a,d,b){var e,g,f;IsAdministrator({Yes:function(){a.CswTable("cell",d,1).append(b);var h=a.CswTable("cell",d,2),i=a.CswAttrDom("id");e=$('<select id="'+i+'_vissel" />').appendTo(h);e.append('<option value="User">User:</option>');e.append('<option value="Role">Role:</option>');e.append('<option value="Global">Global</option>');g=h.CswNodeSelect("init",{ID:i+"_visrolesel",objectclass:"RoleClass"}).hide();f=h.CswNodeSelect("init",{ID:i+"_visusersel",objectclass:"UserClass"});
e.change(function(){var n=e.val();if(n==="Role"){g.show();f.hide()}else if(n==="User"){g.hide();f.show()}else{g.hide();f.hide()}})}});return{getvisibilityselect:function(){return e},getvisroleselect:function(){return g},getvisuserselect:function(){return f}}}function openPopup(a,d,b){a=window.open(a,null,"height="+d+", width="+b+", status=no, resizable=yes, scrollbars=yes, toolbar=yes, location=no, menubar=yes");a.focus();return a}
function validateTime(a){var d=true,b=/^(\d?\d):(\d\d)\s?([APap][Mm])?$/g.exec(a);if(b===null)d=false;else{a=parseInt(b[1]);b=parseInt(b[2]);if(a<0||a>=24||b<0||b>=60)d=false}return d}function validateFloatMinValue(a,d){var b=parseFloat(a),e=parseFloat(d),g=true;if(e!==undefined)if(b===undefined||b<e)g=false;return g}function validateFloatMaxValue(a,d){var b=parseFloat(a),e=parseFloat(d),g=true;if(e!==undefined)if(b===undefined||b>e)g=false;return g}
function validateFloatPrecision(a,d){var b=true,e;e=d>0?/^\-?\d*\.?\d*$/g:/^\-?\d*$/g;if(b&&!e.test(a))b=false;return b}function validateInteger(a){return/^\-?\d*$/g.test(a)}function startsWith(a,d){return a.substr(0,d.length)===d}function getTimeString(a){var d="",b=a.getHours();a=a.getMinutes();if(a<10)a="0"+a;d=b%12+":"+a+" ";d+=b>11?"PM":"AM";return d}
function makeId(a){var d={ID:"",prefix:"",suffix:"",Delimiter:"_"};a&&$.extend(d,a);a=d.ID;if(!isNullOrEmpty(d.prefix)&&!isNullOrEmpty(a))a=d.prefix+d.Delimiter+a;if(!isNullOrEmpty(d.suffix)&&!isNullOrEmpty(a))a+=d.Delimiter+d.suffix;return a}
function makeSafeId(a){var d={ID:"",prefix:"",suffix:"",Delimiter:"_"};a&&$.extend(d,a);a=d.ID;var b=[/'/gi,/\//g];if(!isNullOrEmpty(d.prefix)&&!isNullOrEmpty(a))a=d.prefix+d.Delimiter+a;if(!isNullOrEmpty(d.suffix)&&!isNullOrEmpty(a))a+=d.Delimiter+d.suffix;for(d=0;d<b.length;d++)isNullOrEmpty(a)||(a=a.replace(b[d],""));return a}function isNullOrEmpty(a){var d=false;if(!isFunction(a)){d=$.isPlainObject(a)&&$.isEmptyObject(a);if(!d&&isGeneric(a))d=trim(a)===""}return d}
function isGeneric(a){return!isFunction(a)&&!isArray(a)&&!isJQuery(a)&&!isJson(a)}function isFunction(a){return $.isFunction(a)}function isArray(a){return $.isArray(a)}function isJson(a){return $.isPlainObject(a)}function isJQuery(a){return ret=a instanceof jQuery}function isNumeric(a){var d=false;if(!isNullOrEmpty(a))if(parseInt(a)!==NaN)d=true;return d}function isTrue(a){return a==="true"||a===true||a==="1"||a===1?true:false}
function tryParseString(a,d){var b=d;isNullOrEmpty(a)||(b=a);return b}var Int32MinVal=new Number(-2147483648);function tryParseNumber(a,d){var b=new Number(d),e=new Number(a);if(e!==NaN&&e!==Int32MinVal)b=e;return b}function tryParseElement(a,d){var b=$("");if(!isNullOrEmpty(a)){b=arguments.length==2&&!isNullOrEmpty(d)?$("#"+a,d):$("#"+a);if(b.length===0)b=$(document.getElementById(a));if(b.length===0)b=$(document.getElementsByName(a))}return b}function trim(a){return $.trim(a)}
function iterate(a){var d,b;for(b in a)d=d+b+"="+a[b]+"<br><br>";a=window.open("","popup");a!==null?a.document.write(d):console.log("iterate() error: No popup!")}function log(a,d){var b="";if(isTrue(d))b=getCallStack();try{console.log(a);isNullOrEmpty(b)||console.log(b)}catch(e){alert(a);isNullOrEmpty(b)||alert(b)}}
function getCallStack(){for(var a="",d=arguments.callee.caller.name,b=arguments.callee.caller;!isNullOrEmpty(d);){if(d!="log")a+="Called by function "+d+"() \n";b=b.caller;d=!isNullOrEmpty(b)?b.name:""}return a}function errorHandler(a,d,b){Modernizr.localstorage&&b&&log(localStorage);log("localStorage Error: "+a.message+" (Code "+a.code+")",d)}if(typeof String.prototype.trim!=="function")String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};(function(a){function d(e,g,f){var h=undefined;e.prop(g,f);h=arguments.length===2?e.prop(g):e.prop(g,f);if(h===undefined||g==="href"||g==="cellpadding"||g==="cellspacing"||g==="rowspan"||g==="colspan")h=arguments.length===2?e.attr(g):e.attr(g,f);return h}function b(e,g,f){var h=undefined;switch(arguments.length){case 2:h=e.attr(g);break;case 3:h=e.attr(g,f)}return h}a.fn.CswAttrDom=function(e,g){var f=a(this),h=undefined;if(typeof e==="object")for(prop in e)h=d(f,prop,e[prop]);else h=d(f,e,g);return h};
a.fn.CswAttrXml=function(e,g){var f=a(this),h=undefined;if(typeof e==="object")for(prop in e)h=b(f,prop,e[prop]);else h=b(f,e,g);return h}})(jQuery);(function(a){function d(e){e.length>0&&e.button({label:e.CswAttrDom("disabledText"),disabled:true})}var b={init:function(e){var g={ID:"",enabledText:"",disabledText:"",hasText:true,disableOnClick:true,inputType:"button",primaryicon:"",secondaryicon:"",ReadOnly:false,onclick:function(){}};e&&a.extend(g,e);e=a(this);var f=a("<input />").CswAttrDom("type",g.inputType).CswAttrDom("id",g.ID).CswAttrDom("name",g.ID);f.CswAttrDom("enabledText",g.enabledText);f.CswAttrDom("disabledText",g.disabledText);var h=
{text:g.hasText,label:g.enabledText,disabled:g.ReadOnly,icons:{primary:g.primaryicon,secondary:g.secondaryicon}};if(h.disabled)h.label=g.disabledText;f.button(h).click(function(){g.disableOnClick&&d(f);g.onclick()});e.append(f);return f},enable:function(){var e=a(this);e.length>0&&e.button({label:e.CswAttrDom("enabledText"),disabled:false})},disable:function(){var e=a(this);d(e)}};a.fn.CswButton=function(e){if(b[e])return b[e].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof e===
"object"||!e)return b.init.apply(this,arguments);else a.error("Method "+e+" does not exist on CswButton")}})(jQuery);(function(a){a.fn.CswCheckBoxArray=function(d){var b={init:function(e){var g={ID:"",cols:["col1","col2","col3"],data:[{label:"row1",key:1,values:[true,false,true]},{label:"row2",key:2,values:[false,true,false]},{label:"row3",key:3,values:[true,false,true]}],HeightInRows:4,UseRadios:false,Required:false,ReadOnly:false,onchange:function(){}};e&&a.extend(g,e);var f="checkbox";if(g.UseRadios)f="radio";var h=a(this);h.contents().remove();var i=a("<div/>").appendTo(h);if(g.ReadOnly)for(e=0;e<g.data.length;e++){var n=
g.data[e];h=false;f=true;for(var k=0;k<g.cols.length;k++)if(isTrue(n.values[k])){if(!h){i.append(n.label+": ");h=true}f||i.append(", ");i.append(g.cols[k]);f=false}h&&i.append("<br/>")}else{var s=i.CswTable("init",{ID:g.ID+"_tbl"});i.css("height",25*g.HeightInRows+"px");i.addClass("cbarraydiv");s.addClass("cbarraytable");i=1;for(k=0;k<g.cols.length;k++){var m=s.CswTable("cell",i,k+2);m.addClass("cbarraycell");m.append(g.cols[k])}i++;if(g.UseRadios&&!g.Required){k=s.CswTable("cell",i,1);k.addClass("cbarraycell");
k.append("[none]");for(k=0;k<g.cols.length;k++){m=s.CswTable("cell",i,k+2);m.addClass("cbarraycell");var j=g.ID+"_none";m=a('<input type="'+f+'" class="CBACheckBox_'+g.ID+'" id="'+j+'" name="'+g.ID+'" />').appendTo(m).click(g.onchange);m.CswAttrDom("key","");m.CswAttrDom("rowlabel","[none]");m.CswAttrDom("collabel",g.cols[k]);m.CswAttrDom("row",-1);m.CswAttrDom("col",k);m.CswAttrDom("checked","true")}}i++;for(e=0;e<g.data.length;e++){n=g.data[e];k=s.CswTable("cell",i+e,1);k.addClass("cbarraycell");
k.append(n.label);for(k=0;k<g.cols.length;k++){m=s.CswTable("cell",i+e,k+2);m.addClass("cbarraycell");j=g.ID+"_"+e+"_"+k;m=a('<input type="'+f+'" class="CBACheckBox_'+g.ID+'" id="'+j+'" name="'+g.ID+'" />').appendTo(m).click(g.onchange);m.CswAttrDom("key",n.key);m.CswAttrDom("rowlabel",n.label);m.CswAttrDom("collabel",g.cols[k]);m.CswAttrDom("row",e);m.CswAttrDom("col",k);n.values[k]&&m.CswAttrDom("checked","true")}}if(!g.UseRadios){e="Check All";if(a(".CBACheckBox_"+g.ID).not(":checked").length===
0)e="Uncheck All";var l=a('<div style="text-align: right"><a href="#">'+e+"</a></div>").appendTo(h).children("a");l.click(function(){var q=g.ID;if(a(".CBACheckBox_"+q).not(":checked").length>0){a(".CBACheckBox_"+q).CswAttrDom("checked","checked");l.text("Uncheck all")}else{a(".CBACheckBox_"+q).removeAttr("checked");l.text("Check all")}return false})}}},getdata:function(e){var g={ID:""};e&&a.extend(g,e);var f=[];a(this).find(".CBACheckBox_"+g.ID).each(function(){var h=a(this),i=parseInt(h.CswAttrDom("row")),
n=parseInt(h.CswAttrDom("col"));if(f[i]===undefined)f[i]=[];f[i][n]={key:h.CswAttrDom("key"),rowlabel:h.CswAttrDom("rowlabel"),collabel:h.CswAttrDom("collabel"),checked:h.CswAttrDom("checked")}});return f}};if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on "+PluginName)}})(jQuery);(function(a){a.fn.CswComboBox=function(d){function b(g,f){g.toggleClass("CswComboBox_TopDiv_click");f.toggle()}var e={init:function(g){var f={ID:"",TopContent:"",SelectContent:"This ComboBox Is Empty!",Width:"180px"};g&&a.extend(f,g);g=a(this);g.contents().remove();var h=a('<div id="'+f.ID+'_top" class="CswComboBox_TopDiv"></div>').appendTo(g).css("width",f.Width),i=h.CswTable("init",{ID:f.ID+"_tbl"});i.CswAttrDom("width","100%");$cell1=i.CswTable("cell",1,1);$cell1.CswAttrDom("width","100%");$cell1.append(f.TopContent);
$cell2=i.CswTable("cell",1,2);$cell2.addClass("CswComboBox_ImageCell");var n=a('<div id="'+f.ID+'_child" class="CswComboBox_ChildDiv">').appendTo(g).css("width",f.Width).append(f.SelectContent).hover(function(){},function(){n.hide()});$cell1.click(function(){b(h,n)});$cell2.CswImageButton({ButtonType:CswImageButton_ButtonType.Select,ID:f.ID+"_top_img",AlternateText:"",onClick:function(){b(h,n)}})},TopContent:function(g){var f=a(this).children(".CswComboBox_TopDiv").children("table").CswTable("cell",
1,1);f.text("");f.contents().remove();f.append(g)},toggle:function(){var g=a(this),f=g.children(".CswComboBox_TopDiv");g=g.children(".CswComboBox_ChildDiv");b(f,g)},close:function(){var g=a(this),f=g.children(".CswComboBox_TopDiv");g=g.children(".CswComboBox_ChildDiv");f.removeClass("CswComboBox_TopDiv_click");g.hide()}};if(e[d])return e[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return e.init.apply(this,arguments);else a.error("Method "+d+" does not exist on "+
PluginName)}})(jQuery);var CswCookieName={SessionId:"CswSessionId",Username:"csw_username",CurrentViewId:"csw_currentviewid",CurrentViewMode:"csw_currentviewmode",CurrentNodeId:"csw_currentnodeid",CurrentNodeKey:"csw_currentnodekey",CurrentTabId:"csw_currenttabid"};
(function(a){a.CswCookie=function(d){var b={get:function(e){e=a.cookie(e);if(e==undefined)e="";return e},set:function(e,g){a.cookie(e,g)},clear:function(e){a.cookie(e,"")},clearAll:function(){for(var e in CswCookieName)CswCookieName.hasOwnProperty(e)&&a.cookie(CswCookieName[e],null)}};if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswCookie")}})(jQuery);(function(a){a.fn.CswDashboard=function(d){var b={Url:"/NbtWebApp/wsNBT.asmx/getDashboard",onSuccess:function(){}};d&&a.extend(b,d);var e=a(this);CswAjaxXml({url:b.Url,data:{},stringify:false,success:function(g){var f=e.CswTable("init",{ID:"DashboardTable"});f.addClass("DashboardTable");var h=f.append("<tr />");g.children().each(function(){var i=a(this),n="";n=i.CswAttrXml("href")!==undefined?'<td class="DashboardCell">  <a target="_blank" href="'+i.CswAttrXml("href")+'">    <div title="'+i.CswAttrXml("text")+
'" id="'+i.CswAttrXml("id")+'" class="'+i.CswAttrXml("id")+'" />  </a></td>':'<td class="DashboardCell">  <div title="'+i.CswAttrXml("text")+'" id="'+i.CswAttrXml("id")+'" class="'+i.CswAttrXml("id")+'" /></td>';h.append(n)});b.onSuccess()}});return this}})(jQuery);(function(a){function d(e,g,f){e.dialog({modal:true,width:g,height:f,close:function(){e.remove()}})}var b={AddWelcomeItemDialog:function(e){var g={onAdd:function(){}};e&&a.extend(g,e);var f=a("<div></div>");f.CswWelcome("getAddItemForm",{onAdd:function(){f.dialog("close");g.onAdd()}});d(f,400,400)},AddViewDialog:function(e){var g={ID:"addviewdialog",onAddView:function(){},viewid:""};e&&a.extend(g,e);var f=a("<div></div>");e=f.CswTable("init",{ID:g.ID+"_tbl",FirstCellRightAlign:true});e.CswTable("cell",
1,1).append("Name:");var h=e.CswTable("cell",1,2).CswInput("init",{ID:g.ID+"_nametb",type:CswInput_Types.text,cssclass:"textinput"}),i=a('<select id="'+g.ID+'_dmsel" />');if(isNullOrEmpty(g.viewid)){e.CswTable("cell",2,1).append("Display Mode:");i.append('<option value="List">List</option>');i.append('<option value="Tree">Tree</option>');i.append('<option value="Grid">Grid</option>');i.appendTo(e.CswTable("cell",2,2))}var n=makeViewVisibilitySelect(e,3,"Available to:"),k=f.CswButton({ID:g.ID+"_submit",
enabledText:"Create View",disabledText:"Creating View",onclick:function(){var s={};s.ViewName=h.val();s.ViewMode=i.val();s.ViewId=g.viewid;if(!isNullOrEmpty(n.getvisibilityselect())){s.Visibility=n.getvisibilityselect().val();s.VisibilityRoleId=n.getvisroleselect().val();s.VisibilityUserId=n.getvisuserselect().val()}CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/createView",data:s,success:function(m){f.dialog("close");g.onAddView(m.newviewid)},error:function(){k.CswButton("enable")}})}});f.CswButton({ID:g.ID+
"_cancel",enabledText:"Cancel",disabledText:"Canceling",onclick:function(){f.dialog("close")}});d(f,400,200)},AddNodeDialog:function(e){var g={nodetypeid:"",relatednodeid:"",onAddNode:function(){}};e&&a.extend(g,e);var f=a("<div></div>");f.CswNodeTabs({nodetypeid:g.nodetypeid,relatednodeid:g.relatednodeid,EditMode:"AddInPopup",onSave:function(h,i){f.dialog("close");g.onAddNode(h,i)}});d(f,800,600)},EditNodeDialog:function(e){var g={nodeid:"",cswnbtnodekey:"",filterToPropId:"",title:"",onEditNode:function(){}};
e&&a.extend(g,e);var f=a("<div></div>");f.CswNodeTabs({nodeid:g.nodeid,cswnbtnodekey:g.cswnbtnodekey,filterToPropId:g.filterToPropId,EditMode:"EditInPopup",title:g.title,onSave:function(h,i){f.dialog("close");g.onEditNode(h,i)}});g.filterToPropId!==""?d(f,600,400):d(f,900,600)},CopyNodeDialog:function(e){var g={nodename:"",nodeid:"",cswnbtnodekey:"",onCopyNode:function(){}};e&&a.extend(g,e);var f=a("<div>Copying: "+g.nodename+"<br/><br/></div>"),h=f.CswButton({ID:"copynode_submit",enabledText:"Copy",
disabledText:"Copying",onclick:function(){copyNode({nodeid:g.nodeid,nodekey:g.nodekey,onSuccess:function(i,n){f.dialog("close");g.onCopyNode(i,n)},onError:function(){h.CswButton("enable")}})}});f.CswButton({ID:"copynode_cancel",enabledText:"Cancel",disabledText:"Canceling",onclick:function(){f.dialog("close")}});d(f,400,300)},DeleteNodeDialog:function(e){var g={nodename:"",nodeid:"",cswnbtnodekey:"",onDeleteNode:function(){},Multi:false,NodeCheckTreeId:""};e&&a.extend(g,e);var f=a("<div><span>Are you sure you want to delete:</span></div>"),
h=[],i=[];if(g.Multi)a("."+g.NodeCheckTreeId+"_check:checked").each(function(){var k=a(this);h[h.length]=k.CswAttrDom("nodeid");f.append('<br/><span style="padding-left: 10px;">'+k.CswAttrDom("nodename")+"</span>")});else{f.append("<span>"+g.nodename+"?</span>");h[0]=g.nodeid;i[0]=g.cswnbtnodekey}f.append("<br/><br/>");var n=f.CswButton({ID:"deletenode_submit",enabledText:"Delete",disabledText:"Deleting",onclick:function(){deleteNodes({nodeids:h,nodekeys:i,onSuccess:function(k,s){f.dialog("close");
g.onDeleteNode(k,s)},onError:function(){n.CswButton("enable")}})}});f.CswButton({ID:"deletenode_cancel",enabledText:"Cancel",disabledText:"Canceling",onclick:function(){f.dialog("close")}});d(f,400,200)},AboutDialog:function(){var e=a("<div></div>");CswAjaxXml({url:"/NbtWebApp/wsNBT.asmx/getAbout",data:{},stringify:false,success:function(g){e.append("NBT Assembly Version: "+g.children("assembly").text()+"<br/><br/>");var f=e.CswTable("init",{ID:"abouttable"}),h=1;g.children("component").each(function(){var i=
f.CswTable("cell",h,1),n=f.CswTable("cell",h,2),k=f.CswTable("cell",h,3);i.css("padding","2px 5px 2px 5px");n.css("padding","2px 5px 2px 5px");k.css("padding","2px 5px 2px 5px");var s=a(this);i.append(s.children("name").text());n.append(s.children("version").text());k.append(s.children("copyright").text());h++})}});d(e,600,400)},SearchDialog:function(){},FileUploadDialog:function(e){var g={url:"",params:{},onSuccess:function(){}};e&&a.extend(g,e);var f=a("<div></div>");new qq.FileUploader({element:f.get(0),
action:g.url,params:g.params,debug:false,onComplete:function(){f.dialog("close");g.onSuccess()}});f.CswButton({ID:"fileupload_cancel",enabledText:"Cancel",disabledText:"Canceling",onclick:function(){f.dialog("close")}});d(f,400,300)},ShowLicenseDialog:function(e){var g={GetLicenseUrl:"/NbtWebApp/wsNBT.asmx/getLicense",AcceptLicenseUrl:"/NbtWebApp/wsNBT.asmx/acceptLicense",onAccept:function(){},onDecline:function(){}};e&&a.extend(g,e);var f=a('<div align="center"></div>');f.append("Service Level Agreement<br/>");
var h=a('<textarea id="license" disabled="true" rows="30" cols="80"></textarea>').appendTo(f);f.append("<br/>");CswAjaxJSON({url:g.GetLicenseUrl,success:function(n){h.text(n.license)}});var i=f.CswButton({ID:"license_accept",enabledText:"I Accept",disabledText:"Accepting...",onclick:function(){CswAjaxJSON({url:g.AcceptLicenseUrl,success:function(){f.dialog("close");g.onAccept()},error:function(){i.CswButton("enable")}})}});f.CswButton({ID:"license_decline",enabledText:"I Decline",disabledText:"Declining...",
onclick:function(){f.dialog("close");g.onDecline()}});d(f,800,600)},PrintLabelDialog:function(e){var g={ID:"print_label",GetPrintLabelsUrl:"/NbtWebApp/wsNBT.asmx/getLabels",GetEPLTextUrl:"/NbtWebApp/wsNBT.asmx/getEPLText",nodeid:"",propid:""};e&&a.extend(g,e);var f=a('<div align="center"></div>');f.append("Select a Label to Print:<br/>");var h=a("<div />").appendTo(f),i;CswAjaxJSON({url:g.GetPrintLabelsUrl,data:{PropId:g.propid},success:function(k){if(k.labels.length>0){i=a('<select id="'+g.ID+'_labelsel"></select>');
for(var s=0;s<k.labels.length;s++){var m=k.labels[s];i.append('<option value="'+m.nodeid+'">'+m.name+"</option>")}i.appendTo(h);n.CswButton("enable")}else{n.hide();h.append("<span>No labels have been assigned!</span>")}}});var n=f.CswButton({ID:"print_label_print",enabledText:"Print",disableOnClick:false,onclick:function(){var k={PropId:g.propid,PrintLabelNodeId:i.val()};CswAjaxJSON({url:g.GetEPLTextUrl,data:k,success:function(s){var m=a("#labelx").get(0);m.EPLScript=s.epl;m.Print()}})}});n.CswButton("disable");
f.CswButton({ID:"print_label_close",enabledText:"Close",disabledText:"Closing...",onclick:function(){f.dialog("close")}});e=a('<div style="display: none; border: 1px solid red;"></div>').appendTo(f);a("<OBJECT ID='labelx' Name='labelx' classid='clsid:A8926827-7F19-48A1-A086-B1A5901DB7F0' codebase='CafLabelPrintUtil.cab#version=0,1,6,0' width=500 height=300 align=center hspace=0 vspace=0></OBJECT>").appendTo(e);d(f,400,300)},OpenDialog:function(e,g){var f=a('<div id="'+e+'"></div>');f.load(g,{},function(){f.appendTo("body").dialog()})},
CloseDialog:function(e){a("#"+e).dialog("close").remove()}};a.CswDialog=function(e){if(b[e])return b[e].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof e==="object"||!e)return b.init.apply(this,arguments);else a.error("Method "+e+" does not exist on CswDialog")}})(jQuery);(function(a){var d={init:function(b){var e={ID:"",value:"",cssclass:""};b&&a.extend(e,b);b=a(this);var g=a("<div></div>"),f=tryParseString(e.ID,"");g.CswAttrDom("id",f);g.CswAttrDom("name",f);isNullOrEmpty(e.cssclass)||g.addClass(e.cssclass);isNullOrEmpty(e.value)||g.text(e.value);b.append(g);return g}};a.fn.CswDiv=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswDiv")}})(jQuery);(function(a){a.fn.CswErrorMessage=function(d){var b={message:"",detail:""};d&&a.extend(b,d);var e=a(this);e.show();d="error_"+(new Date).getTime();var g=a("<div />").appendTo(e).CswAttrDom("id",d).addClass("CswErrorMessage_ErrorMessage"),f=g.CswTable("init",{id:makeId({prefix:d,id:"tbl"}),width:"100%"}),h=f.CswTable("cell",1,1).CswAttrDom("width","100%"),i=f.CswTable("cell",1,2),n=f.CswTable("cell",2,1);a('<a href="#">'+b.message+"</a>").appendTo(h).click(function(){n.toggle()});n.append(b.detail);
n.hide();i.CswImageButton({ButtonType:CswImageButton_ButtonType.Delete,AlternateText:"Hide",ID:makeId({prefix:d,id:"hidebtn"}),onClick:function(){g.remove();e.children().length===0&&e.hide();return CswImageButton_ButtonType.None}});return g}})(jQuery);var CswImageButton_ButtonType={None:-1,Add:27,ArrowNorth:28,ArrowEast:29,ArrowSouth:30,ArrowWest:31,Calendar:6,CheckboxFalse:18,CheckboxNull:19,CheckboxTrue:20,Clear:4,Clock:10,ClockGrey:11,Configure:26,Delete:4,Edit:3,Fire:5,PageFirst:23,PagePrevious:24,PageNext:25,PageLast:22,PinActive:17,PinInactive:15,Print:2,Refresh:9,SaveStatus:13,Select:32,ToggleActive:1,ToggleInactive:0,View:8};
(function(a){a.fn.CswImageButton=function(d){function b(f){if(f!==undefined&&f!==CswImageButton_ButtonType.None){g.get(0).style.background="url('Images/buttons/buttons18.gif') 0px "+f*-18+"px no-repeat";g.unbind("mouseover");g.unbind("mouseout");g.unbind("mousedown");g.unbind("mouseup");g.bind("mouseover",function(){this.style.backgroundPosition="-18px "+f*-18+"px"});g.bind("mouseout",function(){this.style.backgroundPosition="0px "+f*-18+"px"});g.bind("mousedown",function(){this.style.backgroundPosition=
"-36px "+f*-18+"px"});g.bind("mouseup",function(){this.style.backgroundPosition="-18px "+f*-18+"px"})}}var e={ButtonType:CswImageButton_ButtonType.None,Active:false,AlternateText:"",ID:"",Required:false,onClick:function(){return CswImageButton_ButtonType.None}};d&&a.extend(e,d);$Div=a(this);var g=a('<div id="'+e.ID+'" class="divbutton" alt="'+e.AlternateText+'" />"').appendTo($Div).css("display","inline-block").click(function(){var f=e.onClick(g);b(f);return false});b(e.ButtonType);return g}})(jQuery);(function(a){var d={init:function(b){var e={ID:"",name:"",type:CswInput_Types.text,placeholder:"",cssclass:"",value:"",width:"",autofocus:false,autocomplete:"on",onChange:function(){}};b&&a.extend(e,b);e.name=tryParseString(e.name,e.ID);e.ID=tryParseString(e.ID,e.name);b=a(this);var g=a("<input />");g.CswAttrDom("id",e.ID);g.CswAttrDom("name",e.name);if(!isNullOrEmpty(e.type)){g.CswAttrDom("type",e.type.name);e.type.autocomplete===true&&e.autocomplete==="on"&&g.CswAttrDom("autocomplete","on");e.value=
tryParseString(e.value,"");if(isTrue(e.type.value.required)||!isNullOrEmpty(e.value))g.val(e.value);e.width=tryParseString(e.width,e.type.defaultwidth)}isNullOrEmpty(e.cssclass)||g.addClass(e.cssclass);isNullOrEmpty(e.width)||g.css("width",e.width);isTrue(e.autofocus)&&g.CswAttrDom("autofocus",e.autofocus);isNullOrEmpty(e.onChange)||g.change(function(){e.onChange()});b.append(g);return g}};a.fn.CswInput=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b===
"object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswInput")}})(jQuery);(function(a){a.fn.CswLayoutTable=function(d){function b(j,l,q){for(var t=parseInt(j.CswAttrDom("cellset_rows")),y=parseInt(j.CswAttrDom("cellset_columns")),A=[],C=1;C<=t;C++)for(var x=1;x<=y;x++){if(A[C]===undefined)A[C]=[];A[C][x]=n(j,l,q,C,x,t,y)}return A}function e(j){return j.CswAttrDom("removemode")==="true"}function g(j){return j.CswAttrDom("configmode")==="true"}function f(j,l){j.CswAttrDom("removemode","false");l.removeClass("CswLayoutTable_removeEnabled")}function h(j,l){l.find("#"+j.CswAttrDom("id")+
"addbtn").hide();var q=l.find("#"+j.CswAttrDom("id")+"rembtn");q.hide();l.find("#"+j.CswAttrDom("id")+"addcolumnbtn").hide();l.find("#"+j.CswAttrDom("id")+"addrowbtn").hide();j.CswTable("findCell",".CswLayoutTable_cell").removeClass("CswLayoutTable_configcell");j.find(".CswLayoutTable_celldiv").draggable("destroy");j.CswAttrDom("configmode","false");j.trigger(j.CswAttrDom("id")+"CswLayoutTable_onConfigOff",l);f(j,q)}function i(j,l){l.find("#"+j.CswAttrDom("id")+"addbtn").show();l.find("#"+j.CswAttrDom("id")+
"rembtn").show();l.find("#"+j.CswAttrDom("id")+"addcolumnbtn").show();l.find("#"+j.CswAttrDom("id")+"addrowbtn").show();parseInt(j.CswAttrDom("cellset_rows"));parseInt(j.CswAttrDom("cellset_columns"));j.CswTable("finish",null);j.CswTable("findCell",".CswLayoutTable_cell").addClass("CswLayoutTable_configcell");s(j);j.CswAttrDom("configmode","true");j.trigger(j.CswAttrDom("id")+"CswLayoutTable_onConfigOn",l)}function n(j,l,q,t,y,A,C){if(l<1)l=1;if(q<1)q=1;return j.CswTable("cell",(l-1)*A+t,(q-1)*C+
y)}function k(j,l,q,t,y,A){var C=Math.ceil(q/y),x=Math.ceil(t/A);q=parseInt(y-q%y);t=parseInt(A-t%A);l.CswAttrDom("row",C).CswAttrDom("column",x).CswAttrDom("cellsetrow",q).CswAttrDom("cellsetcolumn",t).click(function(){if(e(j)){var w=j.find(".CswLayoutTable_remove");w.length>0&&j.trigger(j.CswAttrDom("id")+"CswLayoutTable_onRemove",{table:j,cellset:b(j,C,x),row:w.CswAttrDom("row"),column:w.CswAttrDom("column")});w.children().hide();w.removeClass("CswLayoutTable_remove")}}).droppable({hoverClass:"CswLayoutTable_hover",
drop:function(w,v){var L=a(this);if(g(j)){L.children("div");var N=v.draggable.parent();$dragcells=j.CswTable("findCell",'[row="'+N.CswAttrDom("row")+'"][column="'+N.CswAttrDom("column")+'"]');$dropcells=j.CswTable("findCell",'[row="'+L.CswAttrDom("row")+'"][column="'+L.CswAttrDom("column")+'"]');$dragcells.removeClass("CswLayoutTable_dragcell");j.trigger(j.CswAttrDom("id")+"CswLayoutTable_onSwap",{table:j,cellset:b(j,N.CswAttrDom("row"),N.CswAttrDom("column")),swapcellset:b(j,$dropcells.first().CswAttrDom("row"),
$dropcells.first().CswAttrDom("column")),row:N.CswAttrDom("row"),column:N.CswAttrDom("column"),swaprow:$dropcells.first().CswAttrDom("row"),swapcolumn:$dropcells.first().CswAttrDom("column")});for(r=1;r<=y;r++)for(c=1;c<=A;c++){L=$dragcells.filter('[cellsetrow="'+r+'"][cellsetcolumn="'+c+'"]');N=$dropcells.filter('[cellsetrow="'+r+'"][cellsetcolumn="'+c+'"]');var ia=L.children("div"),ma=N.children("div");L.append(ma);N.append(ia);ia.position({my:"left top",at:"left top",of:N,offset:j.CswAttrDom("cellpadding")});
ma.position({my:"left top",at:"left top",of:L,offset:j.CswAttrDom("cellpadding")})}}}}).hover(function(){var w=a(this);e(j)&&j.CswTable("findCell",'[row="'+w.CswAttrDom("row")+'"][column="'+w.CswAttrDom("column")+'"]').addClass("CswLayoutTable_remove")},function(){var w=a(this);e(j)&&j.CswTable("findCell",'[row="'+w.CswAttrDom("row")+'"][column="'+w.CswAttrDom("column")+'"]').removeClass("CswLayoutTable_remove")});a('<div class="CswLayoutTable_celldiv"></div>').appendTo(l)}function s(j){j.find(".CswLayoutTable_celldiv").draggable({revert:"invalid",
drag:function(){var l=a(this);if(g(j)){l=l.parent();j.CswTable("findCell",'[row="'+l.CswAttrDom("row")+'"][column="'+l.CswAttrDom("column")+'"]').addClass("CswLayoutTable_dragcell")}}})}var m={init:function(j){var l={ID:"",cellset:{rows:1,columns:1},onSwap:function(){},onAddClick:function(){},onConfigOn:function(){},onConfigOff:function(){},onRemove:function(){},TableCssClass:"",CellCssClass:"",cellpadding:0,cellspacing:0,width:"",align:"",showConfigButton:false,showAddButton:false,showRemoveButton:false,
OddCellRightAlign:false,ReadOnly:false};j&&a.extend(l,j);j=a(this);var q=a("<div />").appendTo(j).css({"float":"right"});l.ReadOnly&&q.hide();var t=j.CswTable("init",{ID:l.ID,TableCssClass:l.TableCssClass+" CswLayoutTable_table",CellCssClass:l.CellCssClass+" CswLayoutTable_cell",cellpadding:l.cellpadding,cellspacing:l.cellspacing,OddCellRightAlign:l.OddCellRightAlign,width:l.width,align:l.align,onCreateCell:function(A,C,x,w,v){k(C,x,w,v,l.cellset.rows,l.cellset.columns)}}).CswAttrDom("cellset_rows",
l.cellset.rows).CswAttrDom("cellset_columns",l.cellset.columns);t.CswAttrDom("configmode","false");t.bind(l.ID+"CswLayoutTable_onSwap",l.onSwap);t.bind(l.ID+"CswLayoutTable_onRemove",l.onRemove);t.bind(l.ID+"CswLayoutTable_onConfigOn",l.onConfigOn);t.bind(l.ID+"CswLayoutTable_onConfigOff",l.onConfigOff);var y=q.CswTable("init",{ID:l.ID+"_buttontbl"});l.showAddButton&&y.CswTable("cell",1,1).CswImageButton({ButtonType:CswImageButton_ButtonType.Add,AlternateText:"Add",ID:l.ID+"addbtn",onClick:function(){l.onAddClick();
return CswImageButton_ButtonType.None}}).hide();l.showRemoveButton&&y.CswTable("cell",1,2).CswImageButton({ButtonType:CswImageButton_ButtonType.Delete,AlternateText:"Remove",ID:l.ID+"rembtn",onClick:function(){var A=a(this);if(e(t))f(t,A);else{t.CswAttrDom("removemode","true");A.addClass("CswLayoutTable_removeEnabled")}return CswImageButton_ButtonType.None}}).hide();if(l.showConfigButton){y.CswTable("cell",1,3).CswImageButton({ButtonType:CswImageButton_ButtonType.ArrowEast,AlternateText:"Add Column",
ID:l.ID+"addcolumnbtn",onClick:function(){var A=parseInt(t.CswAttrDom("cellset_rows")),C=parseInt(t.CswAttrDom("cellset_columns")),x=t.CswTable("maxrows"),w=t.CswTable("maxcolumns");n(t,x/A,w/C+1,A,C,A,C);t.CswTable("finish",null);g(t)&&t.CswTable("findCell",".CswLayoutTable_cell").addClass("CswLayoutTable_configcell");return CswImageButton_ButtonType.None}}).hide();y.CswTable("cell",1,4).CswImageButton({ButtonType:CswImageButton_ButtonType.ArrowSouth,AlternateText:"Add Row",ID:l.ID+"addrowbtn",onClick:function(){var A=
parseInt(t.CswAttrDom("cellset_rows")),C=parseInt(t.CswAttrDom("cellset_columns")),x=t.CswTable("maxrows"),w=t.CswTable("maxcolumns");n(t,x/A+1,w/C,A,C,A,C);t.CswTable("finish",null);g(t)&&t.CswTable("findCell",".CswLayoutTable_cell").addClass("CswLayoutTable_configcell");return CswImageButton_ButtonType.None}}).hide();y.CswTable("cell",1,5).CswImageButton({ButtonType:CswImageButton_ButtonType.Configure,AlternateText:"Configure",ID:l.ID+"configbtn",onClick:function(){g(t)?h(t,y):i(t,y);return CswImageButton_ButtonType.None}})}return t},
cellset:function(j,l){var q=a(this);return b(q,j,l)},isConfig:function(){var j=a(this);return g(j)},toggleConfig:function(){var j=a(this),l=a("#"+j.CswAttrDom("id")+"_buttontbl");g(j)?h(j,l):i(j,l)},ConfigOn:function(){var j=a(this),l=a("#"+j.CswAttrDom("id")+"_buttontbl");i(j,l)},ConfigOff:function(){var j=a(this),l=a("#"+j.CswAttrDom("id")+"_buttontbl");h(j,l)}};if(m[d])return m[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return m.init.apply(this,arguments);
else a.error("Method "+d+" does not exist on CswLayoutTable")}})(jQuery);(function(a){var d={init:function(b){var e={ID:"",value:"",type:"",media:"all",target:"",rel:"",cssclass:"",onClick:function(){}};b&&a.extend(e,b);b=a(this);var g=a("<a></a>"),f=tryParseString(e.ID,"");f!==""&&g.CswAttrDom("id",f);isNullOrEmpty(e.href)||g.CswAttrDom("href",e.href);isNullOrEmpty(e.value)||g.text(e.value);isNullOrEmpty(e.cssclass)||g.addClass(e.cssclass);isNullOrEmpty(e.type)||g.CswAttrDom("type",e.type);isNullOrEmpty(e.rel)||g.CswAttrDom("rel",e.rel);isNullOrEmpty(e.media)||g.CswAttrDom("media",
e.media);isNullOrEmpty(e.target)||g.CswAttrDom("target",e.target);isNullOrEmpty(e.onClick)||g.click(function(){e.onClick()});b.append(g);return g}};a.fn.CswLink=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswLink")}})(jQuery);(function(a){a.fn.CswLogin=function(d){var b={login:function(e){var g={AuthenticateUrl:"/NbtWebApp/wsNBT.asmx/authenticate",onAuthenticate:function(){}};e&&a.extend(g,e);e=a.CswCookie("get",CswCookieName.SessionId);if(isNullOrEmpty(e)){var f=a('<div id="logindiv" align="center">  <form>    <table>    <tr>      <td align="right"></td>      <td id="loginmsg" style="display: none;"></td>    </tr>    <tr>      <td align="right">Customer ID:</td>      <td><input type="text" name="login_accessid" id="login_accessid" /></td>    </tr>    <tr>      <td align="right">User Name:</td>      <td><input type="text" name="login_username" id="login_username" /></td>    </tr>    <tr>      <td align="right">Password:</td>      <td><input type="password" name="login_password" id="login_password" /></td>    </tr>    <tr>      <td align="right"></td>      <td id="login_button_cell">           </td>    </tr>    <tr>      <td></td>      <td></td>    </tr>  </table> </form> </div> <br/><br/><br/> <div id="assemblydiv" width="100%" align="right"></div>').appendTo(a(this));
a("#assemblydiv").load("_Assembly.txt");a("#login_accessid").focus();var h=a("#login_button_cell").CswButton({ID:"login_button",enabledText:"Login",disabledText:"Logging in...",onclick:function(){a("#loginmsg").hide().children().remove();var i=a("#login_accessid").val(),n=a("#login_username").val(),k=a("#login_password").val();CswAjaxJSON({url:g.AuthenticateUrl,data:{AccessId:i,UserName:n,Password:k},success:function(){a.CswCookie("set",CswCookieName.Username,n);f.remove();g.onAuthenticate(n)},onloginfail:function(s){a("#loginmsg").CswErrorMessage({message:s});
a("#login_password").val("");h.CswButton("enable")},error:function(){h.CswButton("enable")}})}});a("#login_accessid").clickOnEnter(h);a("#login_username").clickOnEnter(h);a("#login_password").clickOnEnter(h)}else g.onAuthenticate(a.CswCookie("get",CswCookieName.Username))}};if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswLogin")}})(jQuery);(function(a){a.fn.CswMenu=function(d){function b(){$this=a(this);e();$this.find("ul.subnav").slideDown("fast").show()}function e(){f.find("ul").stop(true,true);f.find("ul.subnav").slideUp("fast")}var g={};d&&a.extend(g,d);var f=a(this);f.children("li").click(b).hover(b,e);f.find(".subnav").children("li").click(function(h){e();h&&h.stopPropagation()});return this}})(jQuery);(function(a){a.fn.CswMenuHeader=function(d){var b={Url:"/NbtWebApp/wsNBT.asmx/getHeaderMenu",onLogout:function(){},onSuccess:function(){}};d&&a.extend(b,d);var e=a(this);CswAjaxXml({url:b.Url,data:{},stringify:false,success:function(g){var f=a('<ul class="topnav"></ul>');e.text("").append(f);g.children().each(function(){var h=a(this);if(h.CswAttrXml("text")!==undefined){var i=HandleMenuItem({$ul:f,$itemxml:h,onLogout:b.onLogout});if(h.children().length>1){var n=a('<ul class="subnav"></ul>').appendTo(i);
h.children().each(function(){HandleMenuItem({$ul:n,$itemxml:a(this),onLogout:b.onLogout})})}}});f.CswMenu();b.onSuccess()}});return this}})(jQuery);(function(a){a.fn.CswMenuMain=function(d){var b={Url:"/NbtWebApp/wsNBT.asmx/getMainMenu",viewid:"",nodeid:"",cswnbtnodekey:"",onAddNode:function(){},onMultiEdit:function(){},onSearch:{onViewSearch:function(){},onGenericSearch:function(){}},onEditView:function(){},onSaveView:function(){},Multi:false,NodeCheckTreeId:""};d&&a.extend(b,d);var e=a(this);CswAjaxXml({url:b.Url,data:{ViewId:b.viewid,SafeNodeKey:b.cswnbtnodekey},stringify:false,success:function(g){var f=a('<ul class="topnav"></ul>');e.text("").append(f);
g.children().each(function(){var h=a(this);if(h.CswAttrXml("text")!==undefined){var i={$ul:f,$itemxml:h,onAlterNode:b.onAddNode,onMultiEdit:b.onMultiEdit,onEditView:b.onEditView,onSaveView:b.onSaveView,onSearch:b.onSearch,Multi:b.Multi,NodeCheckTreeId:b.NodeCheckTreeId},n=HandleMenuItem(i);if(h.children().length>=1){var k=a('<ul class="subnav"></ul>').appendTo(n);h.children().each(function(){var s={$ul:k,$itemxml:a(this)};a.extend(i,s);HandleMenuItem(i)})}}});f.CswMenu()}});return this}})(jQuery);(function(a){a.fn.makeUL=function(d,b){var e={"data-filter":true,"data-role":"listview","data-inset":true};b&&a.extend(e,b);var g=a(this),f=undefined;if(!isNullOrEmpty(g)){f=a('<ul id="'+tryParseString(d,"")+'"></ul>').appendTo(g).CswAttrXml(e);f.listview()}return f};a.fn.bindLI=function(){var d=a(this),b=undefined;if(!isNullOrEmpty(d)){d.unbind("click");b=d.find("li a").bind("click",function(){var e=a(this).CswAttrXml("data-url");a("#"+e).doChangePage()})}return b};a.fn.doChangePage=function(d){var b=
{transition:a.mobile.defaultPageTransition,reverse:false,changeHash:true,role:"page",pageContainer:a.mobile.pageContainer,type:"get",data:undefined,reloadPage:false,showLoadMsg:true};d&&a.extend(b,d);d=a(this);var e=false;if(!isNullOrEmpty(d)){var g=a.mobile.activePage;g=isNullOrEmpty(g)?"no ID":g.CswAttrDom("id");debug&&log("doChangePage from: "+g+" to: "+d.CswAttrDom("id"),true);if(g!==d.CswAttrDom("id"))e=a.mobile.changePage(d.CswAttrXml("data-url"),b)}return e};a.fn.doPage=function(){var d=a(this),
b=false;if(!isNullOrEmpty(d)){debug&&log("doPage on "+d.CswAttrDom("id"),true);b=d.page()}return b};a.fn.cachePage=function(){var d=a(this),b=d.CswAttrDom("id"),e=[];isNullOrEmpty(sessionStorage.storedPages)||(e=sessionStorage.storedPages.split(","));e.indexOf(b)===-1&&e.push(b);sessionStorage.storedPages=e.toString();sessionStorage[b]=xmlToString(d);return d};a.fn.restorePages=function(d){var b=a(this);if(!isNullOrEmpty(sessionStorage.storedPages))for(var e=sessionStorage.storedPages.split(","),
g=0;g<e.length;g++){var f=e[g];isNullOrEmpty(sessionStorage[f])||a(sessionStorage[f]).bindJqmEvents(d).appendTo(b).page()}return b};a.fn.bindJqmEvents=function(d){var b=a(this),e=false;if(!isNullOrEmpty(b)){var g={ParentId:"",DivId:"",HeaderText:"",$xml:"",parentlevel:0,level:1,HideRefreshButton:false,HideSearchButton:false,persistBindEvent:false,onPageShow:function(){},onSuccess:function(){a.mobile.pageLoading(true)}};d&&a.extend(g,d);g.level=g.parentlevel===g.level?g.parentlevel+1:g.level;b.unbind("pageshow");
e=b.bind("pageshow",function(){a.mobile.pageLoading();if(g.level===1)localStorage.currentviewid=g.DivId;g.onPageShow(g);g.persistBindEvent||a(this).unbind("pageshow")})}return e};a.fn.CswMobile=function(d){function b(){H&&H.find('div:jqmData(role="content")').empty();H.bindJqmEvents({parentlevel:-1,level:0,DivId:"viewsdiv",HeaderText:"Views",HideRefreshButton:true,HideSearchButton:true,HideBackButton:true,onPageShow:function(o){return f(o)}});return H}function e(){localStorage.online=true;var o=a(".onlineStatus");
if(o.hasClass("offline")){o.removeClass("offline").addClass("online").find("span.ui-btn-text").text("Online").end();a(".refresh").css("visibility","");H=b()}a.mobile.activePage===ba&&E.doPage()}function g(){return!isTrue(localStorage.online)}function f(o){var p={ParentId:"",level:1,DivId:"",HeaderText:"",HideRefreshButton:false,HideSearchButton:false,$xml:"",SessionId:P,onSuccess:function(){}};o&&a.extend(p,o);if(p.level===1)B=p.DivId;o=a("#"+p.DivId);if(isNullOrEmpty(o)||o.length===0||o.find('div:jqmData(role="content")').length===
1)if(p.level===0)if(g()){p.$xml=na();o=h(p)}else{p.url=F.ViewsListUrl;o=i(p)}else if(p.level===1){var u=oa(B);if(isNullOrEmpty(u)){if(!g()){p.url=F.ViewUrl;o=i(p)}}else{K=u;p.$xml=K;o=h(p)}}else if(!isNullOrEmpty(K)){p.$xml=K.find("#"+p.DivId).children("subitems").first();o=h(p)}return o}function h(o){o.parentlevel=o.level;return n(o)}function i(o){var p=undefined,u={url:F.ViewUrl};a.extend(u,o);CswAjaxXml({url:u.url,data:{SessionId:u.SessionId,ParentId:u.DivId,formobile:D},onloginfail:function(z){v(z)},
success:function(z){debug&&log("On Success "+F.ViewUrl,true);K=z;u.$xml=K;if(o.level===1){z=u.DivId;var J=u.HeaderText,G=K;if(isNullOrEmpty(W))W=[{rootid:z,name:J}];else W.indexOf(z)===-1&&W.push({rootid:z,name:J});localStorage.storedviews=JSON.stringify(W);localStorage[z]=JSON.stringify({name:J,xml:xmlToString(G),wasmodified:false})}p=h(u)},error:function(z){debug&&log(z,true)}});return p}function n(o){var p={ParentId:"",DivId:"",HeaderText:"",$xml:"",$xmlitem:"",parentlevel:"",level:"",HideSearchButton:false,
HideOnlineButton:false,HideRefreshButton:false,HideLogoutButton:false,HideHelpButton:false,HideCloseButton:true,HideBackButton:false,onSuccess:function(){}};o&&a.extend(p,o);o=t({ParentId:p.ParentId,level:p.parentlevel,DivId:p.DivId,HeaderText:p.HeaderText,HideSearchButton:p.HideSearchButton,HideOnlineButton:p.HideOnlineButton,HideRefreshButton:p.HideRefreshButton,HideLogoutButton:p.HideLogoutButton,HideHelpButton:p.HideHelpButton,HideCloseButton:p.HideCloseButton,HideBackButton:p.HideBackButton});
var u=o.find('div:jqmData(role="content")').empty().makeUL();fa="";aa=function(){};p.$xml.children().each(function(){p.$xmlitem=a(this);k(u,p).CswAttrXml("data-icon",false).appendTo(u)});u.listview("refresh").bindLI();aa(o);p.onSuccess();return o}function k(o,p){var u={ParentId:"",DivId:"",HeaderText:"",$xmlitem:"",parentlevel:"",level:"",HideRefreshButton:false,HideSearchButton:false};p&&a.extend(u,p);var z=makeSafeId({ID:u.$xmlitem.CswAttrXml("id")}),J=u.$xmlitem.CswAttrXml("name"),G=!isNullOrEmpty(z),
I=tryParseString(u.$xmlitem.get(0).nodeName,"").toLowerCase(),O=u.$xmlitem.next().CswAttrXml("id"),M=u.$xmlitem.prev().CswAttrXml("id"),R=a('<div data-role="controlgroup" data-type="horizontal" class="ui-bar"></div>');isNullOrEmpty(M)||R.CswLink("init",{href:"javascript:void(0);",value:"Previous"}).CswAttrXml({"data-identity":M,"data-url":M,"data-icon":"arrow-u","data-inline":true}).bind("click",function(){a("#"+M).doChangePage({transition:"slideup",reverse:true,changeHash:false})});isNullOrEmpty(O)||
R.CswLink("init",{href:"javascript:void(0);",value:"Next"}).CswAttrXml({"data-identity":O,"data-url":O,"data-icon":"arrow-d","data-inline":true}).bind("click",function(){a("#"+O).doChangePage({transition:"slidedown",changeHash:false})});var Y=a("");switch(I){case "search":break;case "node":Y=s(u).appendTo(o);break;case "prop":var ca=u.$xmlitem.CswAttrXml("tab");G=tryParseString(u.$xmlitem.CswAttrXml("fieldtype"),"");var T=u.$xmlitem.CswAttrXml("gestalt"),U=isTrue(u.$xmlitem.CswAttrXml("isreadonly"));
if(T==="NaN")T="";I=u.$xmlitem.prevAll('[fieldtype="'+G+'"]').andSelf().length;var la=u.$xmlitem.siblings('[fieldtype="'+G+'"]').andSelf().length;if(fa!==ca){a('<li data-role="list-divider">'+ca+"</li>").appendTo(o);fa=ca}ca=a('<li id="'+z+'_li"></li>').CswAttrXml("data-icon",false).appendTo(o).CswLink("init",{ID:z+"_href",href:"javascript:void(0)",value:J}).css("white-space","normal");U||ca.CswAttrXml({"data-identity":z,"data-url":z});switch(G.toLowerCase()){case "logical":U=tryParseString(u.$xmlitem.children("checked").text(),
"");ca=tryParseString(u.$xmlitem.children("required").text(),"");T=a('<div class="lisubstitute ui-li ui-btn-up-c"></div>').appendTo(o);j(u.DivId,z,"ans","ans2",U,ca).appendTo(T);break;case "question":U=tryParseString(u.$xmlitem.children("answer").text(),"");ca=tryParseString(u.$xmlitem.children("allowedanswers").text(),"");var S=tryParseString(u.$xmlitem.children("compliantanswers").text(),""),ea=tryParseString(u.$xmlitem.children("correctiveaction").text(),"");T=a('<div class="lisubstitute ui-li ui-btn-up-c"><div>').appendTo(o);
l(u.DivId,z,"ans","ans2","cor","li","label",ca,U,S).appendTo(T);if(!isNullOrEmpty(U)&&(","+S+",").indexOf(","+U+",")<0&&isNullOrEmpty(ea)){var Z=aa;aa=function(X){X.find("#"+z+"_li div").addClass("OOC");Z(X)}}break;default:a("<div><p>"+T+"</p></div>").appendTo(ca)}if(G.toLowerCase()==="question"){G=a("<span>"+I+"&nbsp;of&nbsp;"+la+"</span>").addClass("ui-btn-right");R.append(G)}u=t({ParentId:u.DivId,level:u.parentlevel,DivId:z,HeaderText:J,$toolbar:R,$content:m(u.$xmlitem,u.DivId,z+"_href")}).addClass("CswNbtNodeProp");
break;default:Y=a("<li></li>");G?Y.CswLink("init",{href:"javascript:void(0);",value:J}).css("white-space","normal").CswAttrXml({"data-identity":z,"data-url":z}):Y.val(J);if(u.parentlevel===0){u=q({ParentId:u.DivId,parentlevel:u.parentlevel,level:u.parentlevel+1,DivId:z,persistBindEvent:true,HeaderText:J});u.addClass("CswNbtView").doPage(u.CswAttrXml("data-url"))}}return Y}function s(o){var p={ParentId:"",DivId:"",HeaderText:"",$xmlitem:"",parentlevel:"",HideRefreshButton:false,HideSearchButton:false};
o&&a.extend(p,o);o="";var u=makeSafeId({ID:p.$xmlitem.CswAttrXml("id")}),z=p.$xmlitem.CswAttrXml("name"),J="";isNullOrEmpty(p.$xmlitem.CswAttrXml("iconfilename"))||(J="images/icons/"+p.$xmlitem.CswAttrXml("iconfilename"));switch(p.$xmlitem.CswAttrXml("objectclass")){case "InspectionDesignClass":var G=p.$xmlitem.find('prop[ocpname="Due Date"]').CswAttrXml("gestalt"),I=p.$xmlitem.find('prop[ocpname="Location"]').CswAttrXml("gestalt"),O=p.$xmlitem.find('prop[ocpname="Target"]').CswAttrXml("gestalt"),
M=p.$xmlitem.find('prop[ocpname="Status"]').CswAttrXml("gestalt"),R=0;p.$xmlitem.find('prop[fieldtype="Question"]').each(function(){var Y=a(this);isNullOrEmpty(Y.children("Answer").text())&&R++});o+="<li>";isNullOrEmpty(J)||(o+='<img src="'+J+'" class="ui-li-icon"/>');o+='<a data-identity="'+u+'" data-url="'+u+'" href="javascript:void(0);">';o+="<h2>"+z+"</h2>";o+="<p>"+I+"</p>";o+="<p>"+O+"</p>";o+="<p>";isNullOrEmpty(M)||(o+=M+", ");o+="Due: "+G+"</p>";o+='<span id="'+makeSafeId({prefix:u,ID:"unansweredcnt"})+
'" class="ui-li-count">'+R+"</span>";o+="</a>";o+="</li>";break;default:o+="<li>";isNullOrEmpty(J)||(o+='<img src="'+J+'" class="ui-li-icon"/>');o+='<a data-identity="'+u+'" data-url="'+u+'" href="javascript:void(0);">'+z+"</a>";o+="</li>"}q({ParentId:p.DivId,parentlevel:p.parentlevel,level:p.parentlevel+1,DivId:u,HeaderText:z}).addClass("CswNbtNode");return a(o)}function m(o,p,u){var z=makeSafeId({ID:o.CswAttrXml("id")}),J=o.CswAttrXml("fieldtype"),G=o.CswAttrXml("name"),I=isTrue(o.CswAttrXml("isreadonly")),
O=tryParseString(o.children("text").text(),""),M=tryParseString(o.children("value").text(),""),R=tryParseString(o.children("href").text(),""),Y=tryParseString(o.children("checked").text(),""),ca=tryParseString(o.children("required").text(),""),T=tryParseString(o.children("units").text(),""),U=tryParseString(o.children("answer").text(),""),la=tryParseString(o.children("allowedanswers").text(),""),S=tryParseString(o.children("correctiveaction").text(),""),ea=tryParseString(o.children("comments").text(),
""),Z=tryParseString(o.children("compliantanswers").text(),""),X=tryParseString(o.children("options").text(),""),V=a('<div data-role="fieldcontain" id="'+z+'_fieldcontain"></div>');G=a('<label for="'+z+'_input" id="'+z+'_label">'+G+"</label>").appendTo(V);if(J==="Question"&&!(U===""||(","+Z+",").indexOf(","+U+",")>=0))G.addClass("OOC");if(I)V.append(a('<p id="'+ga+'">'+o.CswAttrXml("gestalt")+"</p>"));else{I=true;var Q,ga=z+"_input";switch(J){case "Date":Q=V.CswInput("init",{type:CswInput_Types.text,
ID:ga,value:M});break;case "Link":Q=V.CswLink("init",{ID:ga,href:R,rel:"external",value:O});break;case "List":Q=a('<select name="'+ga+'" id="'+ga+'"></select>').appendTo(V).selectmenu();U=M;ea=X.split(",");for(Z=0;Z<ea.length;Z++){X=a('<option value="'+ea[Z]+'"></option>').appendTo(Q);U===ea[Z]&&X.CswAttrDom("selected","selected");isNullOrEmpty(ea[Z])?X.valueOf("[blank]"):X.val(ea[Z])}Q.selectmenu("refresh");break;case "Logical":I=false;Q=j(p,z,"ans2","ans",Y,ca).appendTo(V);break;case "Memo":Q=a('<textarea name="'+
ga+'">'+O+"</textarea>").appendTo(V);break;case "Number":M=tryParseNumber(M,"");Q=V.CswInput("init",{type:CswInput_Types.number,ID:ga,value:M});break;case "Password":break;case "Quantity":Q=V.CswInput("init",{type:CswInput_Types.text,ID:ga,value:M}).append(T);break;case "Question":I=false;Q=l(p,z,"ans2","ans","cor","li","label",la,U,Z).appendTo(V);X=a('<textarea id="'+z+'_cor" name="'+z+'_cor" placeholder="Corrective Action">'+S+"</textarea>").appendTo(Q);if(U===""||(","+Z+",").indexOf(","+U+",")>=
0)X.css("display","none");X.bind("change",function(){if(a(this).val()===""){a("#"+z+"_li div").addClass("OOC");a("#"+z+"_label").addClass("OOC")}else{a("#"+z+"_li div").removeClass("OOC");a("#"+z+"_label").removeClass("OOC")}});a('<textarea name="'+ga+'" id="'+ga+'" placeholder="Comments">'+ea+"</textarea>").appendTo(Q);break;case "Static":V.append(a('<p id="'+ga+'">'+O+"</p>"));break;case "Text":Q=V.CswInput("init",{type:CswInput_Types.text,ID:ga,value:O});break;case "Time":Q=V.CswInput("init",{type:CswInput_Types.text,
ID:ga,value:M});break;default:V.append(a('<p id="'+ga+'">'+o.CswAttrXml("gestalt")+"</p>"))}I&&!isNullOrEmpty(Q)&&Q.length!==0&&Q.bind("change",function(va){var wa=a(this),ta=a("#"+u);!isNullOrEmpty(ta)&&ta.length!==0&&ta.children("div").children("p").text(wa.val());ia(p,va)})}return V}function j(o,p,u,z,J,G){var I=a('<div class="csw_fieldset ui-field-contain ui-body ui-br" data-role="fieldcontain"></div>'),O=a("<fieldset></fieldset>").appendTo(I).CswAttrDom({"class":"csw_fieldset",id:p+"_fieldset"}).CswAttrXml({"data-role":"controlgroup",
"data-type":"horizontal"}).addClass("csw_fieldset toolbar ui-corner-all ui-controlgroup ui-controlgroup-horizontal"),M=["Null","True","False"];if(isTrue(G))M=["True","False"];G=makeSafeId({prefix:p,ID:u});for(var R=0;R<M.length;R++){var Y;switch(M[R]){case "Null":Y="?";break;case "True":Y="Yes";break;case "False":Y="No"}var ca=makeSafeId({prefix:p,ID:u,suffix:M[R]}),T=O.CswInput("init",{type:CswInput_Types.radio,name:G,ID:ca,value:M[R]});a('<label for="'+ca+'">'+Y+"</label>").appendTo(O);if(J==="false"&&
M[R]==="False"||J==="true"&&M[R]==="True"||J===""&&M[R]==="Null")T.CswAttrDom("checked","checked");T.data("thisI",R);T.bind("change",function(U){for(var la=a(this).data("thisI"),S=0;S<M.length;S++){var ea=makeSafeId({prefix:p,ID:u,suffix:M[S]});ea=a("#"+ea);var Z=makeSafeId({prefix:p,ID:z,suffix:M[S]});Z=a("#"+Z);if(M[S]===M[la]){ea.CswAttrDom("checked","checked");Z.CswAttrDom("checked","checked")}else{ea.removeAttr("checked");Z.removeAttr("checked")}ea.checkboxradio("refresh");Z.checkboxradio("refresh")}ia(o,
U)})}I.find('input[type="radio"]').checkboxradio();return I}function l(o,p,u,z,J,G,I,O,M,R){var Y=a('<div class="csw_fieldset ui-field-contain ui-body ui-br" data-role="fieldcontain"></div>'),ca=a("<fieldset></fieldset>").appendTo(Y).CswAttrDom({"class":"csw_fieldset",id:p+"_fieldset"}).CswAttrXml({"data-role":"controlgroup","data-type":"horizontal"}).addClass("csw_fieldset toolbar ui-corner-all ui-controlgroup ui-controlgroup-horizontal"),T=O.split(",");O=makeSafeId({prefix:p,ID:u});for(var U=0;U<
T.length;U++){var la=makeSafeId({prefix:p,ID:u,suffix:T[U]}),S=ca.CswInput("init",{type:CswInput_Types.radio,name:O,ID:la,value:T[U]});a('<label for="'+la+'">'+T[U]+"</label>").appendTo(ca);M===T[U]&&S.CswAttrDom("checked","checked");S.data("thisI",U);S.bind("change",function(ea){for(var Z=a(this).data("thisI"),X=0;X<T.length;X++){var V=makeSafeId({prefix:p,ID:u,suffix:T[X]});V=a("#"+V);var Q=makeSafeId({prefix:p,ID:z,suffix:T[X]});Q=a("#"+Q);if(T[X]===T[Z]){V.CswAttrDom("checked","checked");Q.CswAttrDom("checked",
"checked")}else{V.removeAttr("checked");Q.removeAttr("checked")}Q.checkboxradio("refresh");V.checkboxradio("refresh")}V=makeSafeId({prefix:p,ID:J});Q=makeSafeId({prefix:p,ID:G});X=makeSafeId({prefix:p,ID:I});V=a("#"+V);Q=a("#"+Q);X=a("#"+X);if((","+R+",").indexOf(","+T[Z]+",")>=0){V.css("display","none");Q.children("div").removeClass("OOC").children("div").removeClass("OOC");X.removeClass("OOC")}else{V.css("display","");if(isNullOrEmpty(V.val())){Q.children("div").addClass("OOC");X.addClass("OOC")}else{Q.children("div").removeClass("OOC");
X.removeClass("OOC")}}if(!isNullOrEmpty(M)){Z=a("#"+p+"_fieldset");if(Z.CswAttrDom("answered")){X=a("#"+o+"_unansweredcnt");X.text(parseInt(X.text())-1);Z.CswAttrDom("answered","true")}}ia(o,ea)})}Y.find('input[type="radio"]').checkboxradio();return Y}function q(o){var p=undefined,u={ParentId:"",parentlevel:0,level:1,DivId:"",HeaderText:"",$toolbar:"",persistBindEvent:false,onPageShow:function(z){return f(z)}};o&&a.extend(u,o);p=t(u);p.bindJqmEvents(u);return p}function t(o){var p={ParentId:undefined,
level:1,DivId:"",HeaderText:"",$toolbar:a(""),$content:a(""),HideSearchButton:false,HideOnlineButton:false,HideRefreshButton:false,HideLogoutButton:false,HideHelpButton:false,HideCloseButton:true,HideBackButton:false,HideHeaderOnlineButton:true,dataRel:"page",backicon:undefined,backtransition:undefined};o&&a.extend(p,o);p.DivId=makeSafeId({ID:p.DivId});o=a("#"+p.DivId);var u=a("#"+p.DivId+"_searchopen"),z=a("#"+p.DivId+"_gosyncstatus"),J=a("#"+p.DivId+"_refresh"),G=a("#"+p.DivId+"_logout"),I=a("#"+
p.DivId+"_help"),O=a("#"+p.DivId+"_close"),M=a("#"+p.DivId+"_back"),R=a("#"+p.DivId+"_headeronline");if(isNullOrEmpty(o)||o.length===0){o=qa.CswDiv("init",{ID:p.DivId}).CswAttrXml({"data-role":"page","data-url":p.DivId,"data-title":p.HeaderText,"data-rel":p.dataRel});I=o.CswDiv("init",{ID:p.DivId+"_header"}).CswAttrXml({"data-role":"header","data-theme":F.Theme,"data-position":"fixed","data-id":"csw_header"});M=I.CswLink("init",{href:"javascript:void(0)",ID:p.DivId+"_back",cssclass:"ui-btn-left",
value:"Back"}).CswAttrXml({"data-identity":p.DivId+"_back","data-rel":"back","data-direction":"reverse"});O=I.CswLink("init",{href:"javascript:void(0)",ID:p.DivId+"_close",cssclass:"ui-btn-left"}).CswAttrXml({"data-identity":p.DivId+"_close","data-icon":"delete","data-rel":"back","data-iconpos":"notext","data-direction":"reverse",title:"Close"});isNullOrEmpty(p.backtransition)||M.CswAttrXml("data-transition",p.backtransition);isNullOrEmpty(p.backicon)?M.CswAttrXml("data-icon","arrow-l"):M.CswAttrXml("data-icon",
p.backicon);I.append(a("<h1>"+p.HeaderText+"</h1>"));u=I.CswLink("init",{href:"javascript:void(0)",ID:p.DivId+"_searchopen",cssclass:"ui-btn-right",value:"Search"}).CswAttrXml({"data-identity":p.DivId+"_searchopen","data-url":p.DivId+"_searchopen","data-transition":"pop","data-rel":"dialog"});R=I.CswLink("init",{ID:p.DivId+"_headeronline",cssclass:"ui-btn-right onlineStatus online",value:"Online"}).CswAttrDom({disabled:"disabled"}).hide();I.CswDiv("init",{cssclass:"toolbar"}).append(p.$toolbar).CswAttrXml({"data-role":"header",
"data-type":"horizontal","data-theme":F.Theme});o.CswDiv("init",{ID:p.DivId+"_content"}).CswAttrXml({"data-role":"content","data-theme":F.Theme}).append(p.$content);I=o.CswDiv("init",{ID:p.DivId+"_footer",cssclass:"ui-bar"}).CswAttrXml({"data-role":"footer","data-theme":F.Theme,"data-position":"fixed","data-id":"csw_footer"});I=a('<div data-role="controlgroup" data-type="horizontal" class="ui-bar">').appendTo(I);z=g()?"onlineStatus offline":"onlineStatus online";J=g()?"Offline":"Online";z=I.CswLink("init",
{href:"javascript:void(0)",ID:p.DivId+"_gosyncstatus",cssclass:z+" ui-btn-left",value:J}).CswAttrXml({"data-identity":p.DivId+"_gosyncstatus","data-url":p.DivId+"_gosyncstatus","data-transition":"pop","data-rel":"dialog"}).css("display","");J=I.CswLink("init",{href:"javascript:void(0)",ID:p.DivId+"_refresh",value:"Refresh",cssclass:"refresh ui-btn-left"}).CswAttrXml({"data-identity":p.DivId+"_refresh","data-url":p.DivId+"_refresh"}).css("display","");G=I.CswLink("init",{href:"javascript:void(0)",
ID:p.DivId+"_logout",value:"Logout",cssclass:"ui-btn-left"}).CswAttrXml({"data-identity":p.DivId+"_logout","data-url":p.DivId+"_logout","data-transition":"flip"}).css("display","");I.CswLink("init",{href:"NewMain.html",rel:"external",ID:p.DivId+"_newmain",value:"Full Site"}).CswAttrXml({"data-transition":"pop"});I=I.CswLink("init",{href:"javascript:void(0)",ID:p.DivId+"_help",value:"Help",cssclass:"ui-btn-left"}).CswAttrXml({"data-identity":p.DivId+"_help","data-url":p.DivId+"_help","data-transition":"pop",
"data-rel":"dialog"}).css("display","")}p.HideOnlineButton?z.hide():z.show().css("display","");p.HideHelpButton?I.hide():I.show().css("display","");p.HideLogoutButton?G.hide():G.show().css("display","");p.HideRefreshButton?J.hide():J.show().css("display","");p.HideSearchButton?u.hide():u.show().css("display","");p.HideHeaderOnlineButton?R.hide():R.show().css("display","");p.dataRel==="dialog"&&!p.HideCloseButton?O.show().css("display",""):O.hide();p.HideBackButton?M.hide():M.show().css("display",
"");y(p.DivId,p.ParentId,p.level,o);return o}function y(o,p,u,z){z.find("#"+o+"_searchopen").bind("tap",function(){ma(o);return false}).end().find("#"+o+"_gosyncstatus").bind("tap",function(){da.doChangePage({transition:"slideup"});return false}).end().find("#"+o+"_refresh").bind("tap",function(){var J=a(this).CswAttrDom("id");if(!g())if(C()){a.mobile.pageLoading();N(J)}return false}).end().find("#"+o+"_logout").bind("tap",function(){L(true);return false}).end().find("#"+o+"_help").bind("tap",function(){$help=
x();$help.doChangePage({transition:"slideup"});return false}).end().find("textarea").bind("change",function(J){ia(o,J)}).end().find("select").bind("change",function(J){ia(o,J)}).end()}function A(o,p){if(o){a("#ss_pendingchangecnt").text("Yes");a(".onlineStatus").addClass("pendingchanges")}else{a("#ss_pendingchangecnt").text("No");a(".onlineStatus").removeClass("pendingchanges")}if(p){var u=new Date;a("#ss_lastsync").text(u.toLocaleDateString()+" "+u.toLocaleTimeString())}}function C(){return a("#ss_pendingchangecnt").text()!==
"Yes"||confirm("You have pending unsaved changes.  These changes will be lost.  Continue?")}function x(){var o=a("<p>Help</p>");return t({DivId:"help",HeaderText:"Help",$content:o,dataRel:"dialog",HideSearchButton:true,HideOnlineButton:false,HideRefreshButton:true,HideLogoutButton:false,HideHelpButton:true,HideCloseButton:false,HideBackButton:true})}function w(){if(!g()){var o=a("#login_username").val(),p={AccessId:a("#login_customerid").val(),UserName:o,Password:a("#login_password").val()};CswAjaxJSON({formobile:D,
async:false,url:F.AuthenticateUrl,data:p,onloginfail:function(u){v(u)},success:function(){var u=P=a.CswCookie("get",CswCookieName.SessionId);localStorage.online=true;localStorage.username=o;localStorage.sessionid=u;H=b();H.doChangePage()},error:function(){a.mobile.pageLoading(true)}})}}function v(o){L(false);a.mobile.pageLoading(true);var p=E;p.find('div:jqmData(role="header") h1').append(a('<p style="color: yellow;">'+o+"</p>"));a.mobile.loadPage(p)}function L(o){if(C()){sessionStorage.clear();localStorage.clear();
if(o)window.location.href=window.location.pathname}}function N(){var o=localStorage.currentviewid;if(!isNullOrEmpty(o)){var p=a("#"+o).find('div:jqmData(role="header") h1').text();CswAjaxXml({async:false,formobile:D,url:F.ViewUrl,data:{SessionId:P,ParentId:o,ForMobile:D},stringify:false,onloginfail:function(u){v(u)},success:function(u){debug&&log("On Success "+F.ViewUrl,true);K=u;pa(o,K,"0");f({ParentId:"viewsdiv",DivId:o,HeaderText:p,$xml:K,parentlevel:0,level:1,HideRefreshButton:false,HideSearchButton:false,
HideBackButton:false,onPageShow:function(z){return f(z)}});a.mobile.loadPage(o);a.mobile.pageLoading(true)},error:function(u){debug&&log(u)}})}}function ia(o,p){var u=a(p.target),z=u.CswAttrDom("name"),J=u.val();if(!isNullOrEmpty(K)){K.find("#"+o).andSelf().find("prop").each(function(){var G=a(this),I=new CswString(z),O=makeSafeId({ID:G.CswAttrXml("id")}),M=G.CswAttrXml("fieldtype");G.CswAttrXml("name");var R=G.children("text"),Y=G.children("value");G.children("href");G.children("options");var ca=
G.children("checked");G.children("required");G.children("units");var T=G.children("answer");G.children("allowedanswers");var U=G.children("correctiveaction"),la=G.children("comments");G.children("compliantanswers");var S=null;switch(M){case "Date":if(I.contains(O))S=Y;break;case "List":if(I.contains(O))S=Y;break;case "Logical":if(I.contains(makeSafeId({ID:O,suffix:"ans"})))S=ca;break;case "Memo":if(I.contains(O))S=R;break;case "Number":if(I.contains(O))S=Y;break;case "Quantity":if(I.contains(O))S=
Y;break;case "Question":if(I.contains(makeSafeId({ID:O,suffix:"com"})))S=la;else if(I.contains(makeSafeId({ID:O,suffix:"ans"})))S=T;else if(I.contains(makeSafeId({ID:O,suffix:"cor"})))S=U;break;case "Text":if(I.contains(O))S=R;break;case "Time":if(I.contains(O))S=Y}if(!isNullOrEmpty(S)){S.text(J);G.CswAttrXml("wasmodified","1")}});pa(B,K,"1");A(true,false)}}function ma(o){a("#"+o+"_searchprop").val();a("#"+o+"_searchfor").val();var p=oa(B);if(!isNullOrEmpty(p)){var u=a("<div></div>"),z=a('<div data-role="fieldcontain"></div>').appendTo(u),
J=a('<select id="'+o+'_searchprop" name="'+o+'_searchprop">').appendTo(z).CswAttrXml({"data-native-menu":"false"});p.children("search").each(function(){var G=a(this);a('<option value="'+G.CswAttrXml("id")+'">'+G.CswAttrXml("name")+"</option>").appendTo(J)});a('<div data-role="fieldcontain"></div>').appendTo(u).CswInput("init",{type:CswInput_Types.search,ID:o+"_searchfor"}).CswAttrXml({placeholder:"Search","data-placeholder":"Search"});u.CswLink("init",{type:"button",ID:o+"_searchgo",value:"Go",href:"javascript:void(0)"}).CswAttrXml({"data-inline":"true"}).bind("click",
function(){ja(o)});u.CswDiv("init",{ID:o+"_searchresults"});t({ParentId:o,DivId:"CswMobile_SearchDiv",HeaderText:"Search",$content:u,HideSearchButton:true,HideOnlineButton:true,HideRefreshButton:true,HideLogoutButton:false,HideHelpButton:false,HideCloseButton:true,HideBackButton:false}).doChangePage({transition:"slideup",changeHash:false})}}function ja(o){var p=a("#"+o+"_searchprop").val(),u=a("#"+o+"_searchfor").val(),z=a("#"+o+"_searchresults").empty(),J=oa(B);if(!isNullOrEmpty(J)){var G=z.makeUL(o+
"_searchresultslist",{"data-filter":false}).append(a('<li data-role="list divider">Results</li>')),I=0;J.find("node").each(function(){var O=a(this);if(!isNullOrEmpty(O.CswAttrXml(p)))if(O.CswAttrXml(p).toLowerCase().indexOf(u.toLowerCase())>=0){I++;G.append(k(G,{ParentId:o+"_searchresults",DivId:o+"_searchresultslist",HeaderText:"Results",$xmlitem:O,parentlevel:1}));G.bindLI()}});I===0&&G.append(a("<li>No Results</li>"));G.listview("refresh")}}function pa(o,p,u){if(!isNullOrEmpty(localStorage[o])){var z=
JSON.parse(localStorage[o]);p={xml:xmlToString(p),wasmodified:u};z&&a.extend(z,p);localStorage[o]=JSON.stringify(z)}}function ua(o){var p=false;if(!isNullOrEmpty(localStorage.storedviews)){for(var u=JSON.parse(localStorage.storedviews),z=0;z<u.length;z++){stored=u[z];if(!isNullOrEmpty(localStorage[stored.rootid])){var J=JSON.parse(localStorage[stored.rootid]);if(J.wasmodified){p=true;var G=stored.rootid;J=J.xml;!isNullOrEmpty(G)&&!isNullOrEmpty(J)&&o(G,J)}}}if(!p){A(false,true);o()}}}function oa(o){var p;
if(!isNullOrEmpty(localStorage[o])){o=JSON.parse(localStorage[o]).xml;p=a(o)}return p}function na(){var o="",p;for(p in W)o+='<view id="'+p.rootid+'" name="'+p.name+'" />';return a(o)}function ka(){ha=setTimeout(ra,F.PollingInterval)}function ra(o,p){var u=F.ConnectTestUrl;if(F.RandomConnectionFailure)u=F.ConnectTestRandomFailUrl;CswAjaxXml({formobile:D,url:u,data:{},stringify:false,onloginfail:function(z){v(z)},success:function(z){e();sa(true);isNullOrEmpty(o)||o(z)},error:function(z){z=a(z);isNullOrEmpty(p)||
p(z);ka()}})}function sa(o){if(isNullOrEmpty(P))o&&ka();else ua(function(p,u){if(!isNullOrEmpty(p)&&!isNullOrEmpty(u))CswAjaxJSON({formobile:D,url:F.UpdateUrl,data:{SessionId:P,ParentId:p,UpdatedViewXml:u,ForMobile:D},stringify:true,onloginfail:function(z){debug&&log("_processChanges onloginfail()"+F.UpdateUrl,true);o&&ka();v(z)},success:function(z){debug&&log("On Success "+F.UpdateUrl,true);pa(p,z.xml,"0");A(false,true);o&&ka()},error:function(){debug&&log("_processChanges error()"+F.UpdateUrl,true);
o&&ka()}});else o&&ka()})}var qa=this,F={DBShortName:"Mobile.html",DBVersion:"1.0",DBDisplayName:"Mobile.html",DBMaxSize:65536,ViewsListUrl:"/NbtWebApp/wsNBT.asmx/GetViewsList",ViewUrl:"/NbtWebApp/wsNBT.asmx/GetView",ConnectTestUrl:"/NbtWebApp/wsNBT.asmx/ConnectTest",ConnectTestRandomFailUrl:"/NbtWebApp/wsNBT.asmx/ConnectTestRandomFail",UpdateUrl:"/NbtWebApp/wsNBT.asmx/UpdateProperties",MainPageUrl:"/NbtWebApp/Mobile.html",AuthenticateUrl:"/NbtWebApp/wsNBT.asmx/Authenticate",Theme:"a",PollingInterval:3E4,
DivRemovalDelay:1,RandomConnectionFailure:false};d&&a.extend(F,d);var D=true,B;localStorage.sessionid||L();var P=localStorage.sessionid,K,W="";if(localStorage.storedViews)W=JSON.parse(localStorage.storedviews);var E=function(){var o='<input type="textbox" id="login_customerid" placeholder="Customer Id"/><br>';o+='<input type="textbox" id="login_username" placeholder="User Name"/><br>';o+='<input type="password" id="login_password" placeholder="Password"/><br>';o+='<a id="loginsubmit" data-role="button" data-identity="loginsubmit" data-url="loginsubmit" href="javascript:void(0);">Continue</a>';
o=t({DivId:"logindiv",HeaderText:"Login to ChemSW Fire Inspection",$content:a(o),HideSearchButton:true,HideOnlineButton:true,HideRefreshButton:true,HideLogoutButton:true,HideHelpButton:false,HideCloseButton:true,HideBackButton:true,dataRel:"dialog"});a("#loginsubmit").bind("click",function(){a.mobile.pageLoading();w()});a("#login_customerid").clickOnEnter(a("#loginsubmit"));a("#login_username").clickOnEnter(a("#loginsubmit"));a("#login_password").clickOnEnter(a("#loginsubmit"));return o}(),H=function(){var o=
t({DivId:"viewsdiv",HeaderText:"Views",HideRefreshButton:false,HideSearchButton:true,HideOnlineButton:false,HideLogoutButton:false,HideHelpButton:false,HideCloseButton:true,HideBackButton:true,onPageShow:function(p){return f(p)}});o.bindJqmEvents({ParentId:"",DivId:"viewsdiv",HeaderText:"Views",$xml:"",parentlevel:-1,level:0,HideRefreshButton:true,HideSearchButton:true,HideBackButton:true,onPageShow:function(p){return f(p)}});return o}(),da=function(){var o="";o+='<p>Pending Unsynced Changes: <span id="ss_pendingchangecnt">No</span></p>';
o+='<p>Last sync: <span id="ss_lastsync"></span></p>';o+='<a id="ss_forcesync" data-identity="ss_forcesync" data-url="ss_forcesync" href="javascript:void(0)" data-role="button">Force Sync Now</a>';o+='<a id="ss_gooffline" data-identity="ss_gooffline" data-url="ss_gooffline" href="javascript:void(0)" data-role="button">Go Offline</a>';o=t({DivId:"syncstatus",HeaderText:"Sync Status",$content:a(o),dataRel:"dialog",HideSearchButton:true,HideOnlineButton:true,HideRefreshButton:false,HideLogoutButton:false,
HideHelpButton:false,HideCloseButton:false,HideBackButton:true,HideHeaderOnlineButton:false});o.find("#ss_forcesync").bind("tap",function(){sa(false);return false}).end().find("#ss_gooffline").bind("tap",function(){if(g()){clearTimeout(ha);ka();e();a("#ss_gooffline span").text("Go Offline")}else{clearTimeout(ha);localStorage.online=false;var p=a(".onlineStatus");if(p.hasClass("online")){p.removeClass("online").addClass("offline").find("span.ui-btn-text").text("Offline").end();a(".refresh").css("visibility",
"hidden");H=b()}a.mobile.activePage===E&&ba.doPage();a("#ss_gooffline span").text("Go Online")}return false});return o}();x();var ba=function(o){var p={DivId:"sorrycharliediv",HeaderText:"Sorry Charlie!",HideHelpButton:false,HideCloseButton:true,HideOnlineButton:false,content:"You must have internet connectivity to login."};o&&a.extend(p,o);return $retDiv=t({DivId:p.DivId,HeaderText:p.HeaderText,HideSearchButton:true,HideOnlineButton:p.HideOnlineButton,HideRefreshButton:true,HideLogoutButton:true,
HideHelpButton:p.HideHelpButton,HideCloseButton:p.HideCloseButton,HideBackButton:true,dataRel:"dialog",$content:a("<p>"+p.content+"</p>")})}();if(!isNullOrEmpty(P)){d=window.location.hash.substr(1);a("#"+d).length===0&&d!=="viewsdiv"&&d!=="logindiv"&&a.mobile.path.set("#viewsdiv")}if(isNullOrEmpty(P))ra(function(){E.doPage();E.doChangePage()},function(){ba.doPage();ba.doChangePage()});else{H=b();H.page();ka()}var fa,aa,ha;return this}})(jQuery);(function(a){var d={init:function(b){var e={GridUrl:"/NbtWebApp/wsNBT.asmx/getGrid",viewid:"",showempty:false,ID:"",nodeid:"",cswnbtnodekey:"",gridTableID:"gridTable",gridPagerID:"gridPager",reinit:false,EditMode:EditMode.Edit.name,onEditNode:function(){},onDeleteNode:function(){}};b&&a.extend(e,b);b=a(this);e.reinit&&b.empty();var g=makeId({ID:e.gridTableID,prefix:e.ID}),f=b.CswTable("init",{ID:g});g=makeId({ID:e.gridPagerID,prefix:e.ID});var h=b.CswDiv("init",{ID:g});CswAjaxJSON({url:e.GridUrl,
data:{ViewId:e.viewid,SafeNodeKey:e.cswnbtnodekey,ShowEmpty:e.showempty},success:function(i){jqGridOpt=i.jqGridOpt;var n=!isNullOrEmpty(jqGridOpt.width)?"650":jqGridOpt.width;i=isTrue(jqGridOpt.CanEdit);var k=isTrue(jqGridOpt.CanDelete);n={autoencode:true,altRows:true,caption:"",datatype:"local",emptyrecords:"No Results",height:"300",loadtext:"Loading...",multiselect:false,pager:h,rowList:[10,25,50],rowNum:10,shrinkToFit:true,sortname:"",sortorder:"asc",toppager:false,viewrecords:true,width:n+"px"};
a.extend(n,jqGridOpt);if(n.rowNum>=50)n.toppager=true;var s={},m={};if(e.EditMode===EditMode.PrintReport.name){n.caption="";f.jqGrid(n)}else{s={caption:"Search...",Find:"Find",Reset:"Reset",odata:["equal","not equal","less","less or equal","greater","greater or equal","begins with","does not begin with","is in","is not in","ends with","does not end with","contains","does not contain"],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],matchText:"match",rulesText:"rules"};var j={edit:true,edittext:"",
edittitle:"Edit row",editfunc:function(q){var t={cswnbtnodekey:"",nodeid:"",onEditNode:e.onEditNode};if(q!==null){t.cswnbtnodekey=f.jqGrid("getCell",q,"cswnbtnodekey");a.CswDialog("EditNodeDialog",t)}else alert("Please select a row to edit");return t.CswNbtNodeKey}},l={del:true,deltext:"",deltitle:"Delete row",delfunc:function(q){var t={cswnbtnodekey:"",nodeid:"",nodename:"",onDeleteNode:e.onDeleteNode};if(q!==null){t.cswnbtnodekey=f.jqGrid("getCell",q,"cswnbtnodekey");t.nodename=f.jqGrid("getCell",
q,"nodename");a.CswDialog("DeleteNodeDialog",t)}else alert("Please select a row to delete");return t.cswnbtnodekey}};m={cloneToTop:false,add:false,del:false,edit:false,search:true,searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",view:true,viewtext:"",viewtitle:"View row"};i&&a.extend(m,j);k&&a.extend(m,l);if(i||k)n.multiselect=true;f.jqGrid(n).navGrid("#"+h.CswAttrDom("id"),m,{},{},{},s,{})}}});return f},scrollToSelectedRow:function(){var b=
a(this),e=b.jqGrid("getGridParam","selrow"),g=null;try{g=b.find("tbody").find("tr:first").outerHeight()}catch(f){}g=g||23;e=b.getInd(e);b.closest(".ui-jqgrid-bdiv").scrollTop(g*(e-1))}};a.fn.CswNodeGrid=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on "+PluginName)}})(jQuery);(function(a){var d={init:function(b){var e={ID:"",NodesUrl:"/NbtWebApp/wsNBT.asmx/getNodes",nodetypeid:"",objectclassid:"",objectclass:"",onSelect:function(){},onSuccess:function(){}};b&&a.extend(e,b);b=a(this);var g=a('<select id="'+e.ID+'_nodeselect" />').appendTo(b);g.change(function(){e.onSelect(g.val())});CswAjaxXml({url:e.NodesUrl,data:{NodeTypeId:e.nodetypeid,ObjectClassId:e.objectclassid,ObjectClass:e.objectclass},stringify:false,success:function(f){f.children("node").each(function(){var h=
a(this);g.append('<option value="'+h.CswAttrXml("id")+'">'+h.CswAttrXml("name")+"</option>")});e.onSuccess()}});return g},value:function(){return a(this).val()}};a.fn.CswNodeSelect=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswNodeSelect")}})(jQuery);(function(a){a.fn.CswNodeTabs=function(d){function b(l,q){CswAjaxXml({url:m.PropsUrl,data:{EditMode:m.EditMode,NodeId:m.nodeid,TabId:q,SafeNodeKey:m.cswnbtnodekey,NodeTypeId:m.nodetypeid},stringify:false,success:function(t){var y=l.children("form");y.contents().remove();m.title!==""&&y.append(m.title);var A,C=y.CswLayoutTable("init",{ID:m.ID+"_props",OddCellRightAlign:true,ReadOnly:m.EditMode==="PrintReport",cellset:{rows:1,columns:2},onSwap:function(x,w){e(w)},showConfigButton:m.filterToPropId===
"",onConfigOn:function(){t.children().each(function(){var x=a(this),w=C.find("#"+x.CswAttrXml("id")+"_subproptable"),v=w.parent();v=C.CswLayoutTable("cellset",v.CswAttrDom("row"),v.CswAttrDom("column"));v=f(v);if(w.length>0){w={fieldtype:x.CswAttrXml("fieldtype"),nodeid:m.nodeid,relatednodeid:m.relatednodeid,propid:x.CswAttrXml("id"),$propdiv:v.children("div"),$propxml:x,onchange:function(){},onReload:function(){b(l,q)},cswnbtnodekey:m.cswnbtnodekey};n(w,m.SinglePropUrl,m.EditMode,m.cswnbtnodekey,
x.CswAttrXml("id"),m.nodetypeid,x,v,l,q,true,A)}})},onConfigOff:function(){t.children().each(function(){var x=a(this),w=C.find("#"+x.CswAttrXml("id")+"_subproptable"),v=w.parent();v=C.CswLayoutTable("cellset",v.CswAttrDom("row"),v.CswAttrDom("column"));v=f(v);if(w.length>0){w={fieldtype:x.CswAttrXml("fieldtype"),nodeid:m.nodeid,relatednodeid:m.relatednodeid,propid:x.CswAttrXml("id"),$propdiv:v.children("div"),$propxml:x,onchange:function(){},onReload:function(){b(l,q)},cswnbtnodekey:m.cswnbtnodekey};
n(w,m.SinglePropUrl,m.EditMode,m.cswnbtnodekey,x.CswAttrXml("id"),m.nodetypeid,x,v,l,q,false,A)}})}});if(m.EditMode!=="PrintReport")A=y.CswButton({ID:"SaveTab",enabledText:"Save Changes",disabledText:"Saving...",onclick:function(){k(y,C,t,A)}});h(C,t,l,q,false,A);y.validate({highlight:function(x){x=a(x);x.CswAttrDom("csw_invalid","1");x.animate({backgroundColor:"#ff6666"})},unhighlight:function(x){var w=a(x);if(w.CswAttrDom("csw_invalid")==="1"){w.css("background-color","#66ff66");w.CswAttrDom("csw_invalid",
"0");setTimeout(function(){w.animate({backgroundColor:"transparent"})},500)}}})}})}function e(l){g(f(l.cellset).children("div").first(),l.swaprow,l.swapcolumn);g(f(l.swapcellset).children("div").first(),l.row,l.column)}function g(l,q,t){if(l.length>0){l={PropId:l.CswAttrDom("propid"),NewRow:q,NewColumn:t,EditMode:m.EditMode};CswAjaxJSON({url:m.MovePropUrl,data:l,success:function(){}})}}function f(l){return l[1][2].children("div")}function h(l,q,t,y,A,C){q.children().each(function(){var x=a(this),
w=x.CswAttrXml("id"),v=x.CswAttrXml("fieldtype"),L=l.CswLayoutTable("cellset",x.CswAttrXml("displayrow"),x.CswAttrXml("displaycol"));if((x.CswAttrXml("display")!=="false"||A)&&v!=="Image"&&v!=="Grid"&&(m.filterToPropId===""||m.filterToPropId===w)){v=L[1][1].children("div");v.addClass("propertylabel");x.CswAttrXml("helptext")!==""?a('<a href="#" title="'+x.CswAttrXml("helptext")+'" onclick="return false;">'+x.CswAttrXml("name")+"</a>").appendTo(v):v.append(x.CswAttrXml("name"));m.ShowCheckboxes&&x.CswAttrXml("copyable")===
"true"&&x.CswAttrXml("readonly")==="false"&&v.CswInput("init",{ID:"check_"+w,type:CswInput_Types.checkbox,value:false,cssclass:m.ID+"_check"}).CswAttrDom("propid",w)}w=f(L);w.addClass("propertyvaluecell");i(w,x,t,y,A,C)})}function i(l,q,t,y,A,C){l.empty();if((q.CswAttrXml("display")!=="false"||A)&&(m.filterToPropId===""||m.filterToPropId===q.CswAttrXml("id"))){var x={fieldtype:q.CswAttrXml("fieldtype"),nodeid:m.nodeid,relatednodeid:m.relatednodeid,propid:q.CswAttrXml("id"),$propdiv:a("<div/>").appendTo(l),
$savebtn:C,$propxml:q,onchange:function(){},onReload:function(){b(t,y)},cswnbtnodekey:m.cswnbtnodekey,EditMode:m.EditMode,onEditView:m.onEditView,ReadOnly:isTrue(q.CswAttrXml("readonly"))};x.$propdiv.CswAttrDom("nodeid",x.nodeid);x.$propdiv.CswAttrDom("propid",x.propid);x.$propdiv.CswAttrDom("cswnbtnodekey",x.cswnbtnodekey);x.onchange=function(){m.onPropertyChange(x.propid,q.CswAttrXml("name"))};if(q.CswAttrXml("hassubprops")==="true")x.onchange=function(){n(x,m.SinglePropUrl,m.EditMode,m.cswnbtnodekey,
q.CswAttrXml("id"),m.nodetypeid,q,l,t,y,false,C);m.onPropertyChange(x.propid,q.CswAttrXml("name"))};a.CswFieldTypeFactory("make",x);var w=q.children("subprops"),v=l.CswLayoutTable("init",{ID:x.propid+"_subproptable",OddCellRightAlign:true,ReadOnly:m.EditMode==="PrintReport",cellset:{rows:1,columns:2},onSwap:function(L,N){e(N)},showConfigButton:false});if(w.length>0&&w.children('[display != "false"]').length>0||A){h(v,w,t,y,A,C);A?v.CswLayoutTable("ConfigOn"):v.CswLayoutTable("ConfigOff")}}}function n(l,
q,t,y,A,C,x,w,v,L,N,ia){a.CswFieldTypeFactory("save",l);l={EditMode:t,NodeId:m.nodeid,SafeNodeKey:y,PropId:A,NodeTypeId:C,NewPropXml:xmlToString(x)};CswAjaxXml({url:q,data:l,stringify:true,success:function(ma){i(w,ma.children().first(),v,L,N,ia)}})}function k(l,q,t,y){if(l.valid()){s(q,t);l={EditMode:m.EditMode,NodeId:m.nodeid,SafeNodeKey:m.cswnbtnodekey,NodeTypeId:m.nodetypeid,ViewId:a.CswCookie("get",CswCookieName.CurrentViewId),NewPropsXml:xmlToString(t)};CswAjaxJSON({url:m.SavePropUrl,data:l,
success:function(A){var C=true;if(m.ShowCheckboxes){var x=a("."+m.NodeCheckTreeId+"_check:checked"),w=a("."+m.ID+"_check:checked");if(x.length>0&&w.length>0){var v={SourceNodeKey:m.cswnbtnodekey,CopyNodeIds:[],PropIds:[]};x.each(function(){var L=a(this).CswAttrDom("nodeid");v.CopyNodeIds.push(L)});w.each(function(){var L=a(this).CswAttrDom("propid");v.PropIds.push(L)});CswAjaxJSON({url:m.CopyPropValuesUrl,data:v})}else{C=false;alert("You have not selected any properties to save.")}}if(C)m.onSave(A.nodeid,
A.cswnbtnodekey)},error:function(){y.CswButton("enable")}})}else y.CswButton("enable")}function s(l,q){q.children().each(function(){var t={$propxml:a(this),$propdiv:"",$propCell:"",fieldtype:"",nodeid:m.nodeid,cswnbtnodekey:m.cswnbtnodekey};t.fieldtype=t.$propxml.CswAttrXml("fieldtype");var y=l.CswLayoutTable("cellset",t.$propxml.CswAttrXml("displayrow"),t.$propxml.CswAttrXml("displaycol"));t.$propcell=f(y);t.$propdiv=t.$propcell.children("div").first();a.CswFieldTypeFactory("save",t);if(t.$propxml.CswAttrXml("hassubprops")===
"true"){y=t.$propxml.children("subprops");if(y.length>0){t=t.$propcell.children("#"+t.$propxml.CswAttrXml("id")+"_subproptable").first();t.length>0&&s(t,y)}}})}var m={ID:"",TabsUrl:"/NbtWebApp/wsNBT.asmx/getTabs",SinglePropUrl:"/NbtWebApp/wsNBT.asmx/getSingleProp",PropsUrl:"/NbtWebApp/wsNBT.asmx/getProps",MovePropUrl:"/NbtWebApp/wsNBT.asmx/moveProp",SavePropUrl:"/NbtWebApp/wsNBT.asmx/saveProps",CopyPropValuesUrl:"/NbtWebApp/wsNBT.asmx/copyPropValues",nodeid:"",relatednodeid:"",tabid:"",cswnbtnodekey:"",
nodetypeid:"",filterToPropId:"",title:"",EditMode:"Edit",onSave:function(){},onBeforeTabSelect:function(){return true},onTabSelect:function(){},onPropertyChange:function(){},ShowCheckboxes:false,NodeCheckTreeId:"",onEditView:function(){}};d&&a.extend(m,d);d=a(this);var j=a('<div id="'+m.ID+'_tabdiv" />').appendTo(d);(function(){CswAjaxXml({url:m.TabsUrl,data:{EditMode:m.EditMode,NodeId:m.nodeid,SafeNodeKey:m.cswnbtnodekey,NodeTypeId:m.nodetypeid},stringify:false,success:function(l){j.contents().remove();
var q=[],t=0,y=0;l.children().each(function(){$tab=a(this);if(m.EditMode==="PrintReport"||q.length===0)q[q.length]=a("<div><ul></ul></div>").appendTo(j);var w=q[q.length-1];w.children("ul").append('<li><a href="#'+$tab.CswAttrXml("id")+'">'+$tab.CswAttrXml("name")+"</a></li>");w.append('<div id="'+$tab.CswAttrXml("id")+'"><form id="'+$tab.CswAttrXml("id")+'_form" /></div>');if($tab.CswAttrXml("id")===m.tabid)t=y;y++});for(var A in q){var C=q[A];C.tabs({selected:t,select:function(w,v){if(m.onBeforeTabSelect(N)){var L=
a(C.children("div")[v.index]),N=L.CswAttrDom("id");b(L,N);m.onTabSelect(N)}else return false}});l=a(C.children("div")[C.tabs("option","selected")]);var x=l.CswAttrDom("id");b(l,x);m.onTabSelect(x)}}})})(m);if(m.EditMode!=="PrintReport"){d=a('<div id="'+m.ID+'_linkdiv" align="right"/>').appendTo(d);a('<a href="#">As Report</a>').appendTo(d).click(function(){openPopup("NewNodeReport.html?nodeid="+m.nodeid+"&cswnbtnodekey="+m.cswnbtnodekey,600,800)})}return this}})(jQuery);(function(a){function d(f){var h={e:"",data:"",url:"",$treediv:"",IDPrefix:"",onSelectNode:function(){},onInitialSelectNode:function(){},viewid:"",UsePaging:"",forsearch:""};f&&a.extend(h,f);f={};a.extend(f,h);f.onSelectNode=h.onInitialSelectNode;b(f);h.$treediv.unbind("select_node.jstree");h.$treediv.bind("select_node.jstree",function(){return b(h)})}function b(f){var h={e:"",data:"",url:"",$treediv:"",IDPrefix:"",onSelectNode:function(){},viewid:"",UsePaging:"",forsearch:""};f&&a.extend(h,f);f=
jsTreeGetSelected(h.$treediv);var i={nodeid:f.id,nodename:f.text,iconurl:f.iconurl,cswnbtnodekey:f.$item.CswAttrDom("cswnbtnodekey"),nodespecies:f.$item.CswAttrDom("species"),viewid:h.viewid};if(i.nodespecies==="More"){var n="",k=h.data.inst._get_parent(h.data.rslt.obj);if(k!==-1)n=tryParseString(k.CswAttrDom("cswnbtnodekey"),"");CswAjaxXml({url:h.url,data:{UsePaging:h.UsePaging,ViewId:h.viewid,IDPrefix:h.IDPrefix,IsFirstLoad:false,ParentNodeKey:n,IncludeNodeRequired:false,IncludeNodeKey:i.cswnbtnodekey,
ShowEmpty:false,ForSearch:h.forsearch,NodePk:f.id,IncludeInQuickLaunch:false},success:function(s){function m(){l.length>0&&h.$treediv.jstree("create","#"+j,"after",{attr:{id:l.CswAttrXml("id"),rel:l.CswAttrXml("rel"),cswnbtnodekey:l.CswAttrXml("cswnbtnodekey"),species:l.CswAttrXml("species")},data:l.children("content").children("name").text(),state:l.CswAttrXml("state")},function(){j===l.CswAttrXml("id")&&h.$treediv.jstree("remove","#"+h.IDPrefix+i.nodeid+'[species="More"]');j=l.CswAttrXml("id");
l=l.next();m()},true,true)}var j=h.IDPrefix+i.nodeid,l=s.children().first();m()}})}else{a("."+h.IDPrefix+"check").CswAttrDom("checked","");h.onSelectNode(i)}}function e(f,h){return jsTreeGetSelected(f).$item.CswAttrDom("rel")===h.CswAttrDom("rel")}var g={init:function(f){var h={ID:"",ViewTreeUrl:"/NbtWebApp/wsNBT.asmx/getTreeOfView",NodeTreeUrl:"/NbtWebApp/wsNBT.asmx/getTreeOfNode",viewid:"",viewmode:"",showempty:false,forsearch:false,nodeid:"",cswnbtnodekey:"",IncludeNodeRequired:false,UsePaging:true,
onSelectNode:function(){return{nodeid:"",nodename:"",iconurl:"",cswnbtnodekey:"",viewid:""}},onInitialSelectNode:undefined,onViewChange:function(){},SelectFirstChild:true,ShowCheckboxes:false,IncludeInQuickLaunch:true};f&&a.extend(h,f);if(h.onInitialSelectNode===undefined)h.onInitialSelectNode=h.onSelectNode;var i=h.ID+"_",n=a('<div id="'+i+'" class="treediv" />').appendTo(a(this)),k=h.ViewTreeUrl;f={UsePaging:h.UsePaging,ViewId:h.viewid,IDPrefix:i,IsFirstLoad:true,ParentNodeKey:"",IncludeNodeRequired:h.IncludeNodeRequired,
IncludeNodeKey:tryParseString(h.cswnbtnodekey,""),ShowEmpty:h.showempty,ForSearch:h.forsearch,NodePk:tryParseString(h.nodeid,""),IncludeInQuickLaunch:h.IncludeInQuickLaunch};if(isNullOrEmpty(h.viewid))k=h.NodeTreeUrl;CswAjaxXml({url:k,data:f,stringify:false,success:function(s){var m="",j=["themes","html_data","ui","types","crrm"],l;isNullOrEmpty(h.nodeid)||(m=i+h.nodeid);var q=s.children("viewid").text();if(h.viewid!==q){h.onViewChange(q);h.viewid=q}var t=s.find('item[id="'+m+'"]');if(m===""||t.length===
0)if(h.SelectFirstChild)if(h.viewmode==="list"){m=s.find("item").first().CswAttrXml("id");l={dots:false}}else{m=s.find("item").first().find("item").first().CswAttrXml("id");l={dots:true}}else m=i+"root";t=s.find('item[id="'+m+'"]');var y=0;t.parents("item").andSelf().each(function(){a(this).CswAttrXml("id");y++});q=s.find("types").text();q=a.parseJSON(q);var A=s.find("tree").children("root");if(A.length>0){var C=function(w){var v=w.CswAttrXml("id").substring(i.length),L=w.children("content").children("name").text(),
N='<li id="'+w.CswAttrXml("id")+'" ';N+='    rel="'+w.CswAttrXml("rel")+'" ';N+='    species="'+w.CswAttrXml("species")+'" ';N+='    class="jstree-'+w.CswAttrXml("state")+'" ';if(w.CswAttrXml("cswnbtnodekey")!==undefined)N+='    cswnbtnodekey="'+w.CswAttrXml("cswnbtnodekey").replace(/"/g,"&quot;")+'"';N+=">";if(h.ShowCheckboxes)N+='  <input type="checkbox" class="'+i+'check" id="check_'+v+'" rel="'+w.CswAttrXml("rel")+'" nodeid="'+v+'" nodename="'+L+'"></input>';N+='  <a href="#">'+L+"</a>";if(w.children("item").length>
0){N+="<ul>";w.children("item").each(function(){N+=C(a(this))});N+="</ul>"}N+="</li>";return N},x="<ul>";A.children().each(function(){x+=C(a(this))});x+="</ul>";n.bind("init_done.jstree",function(){t=s.find('item[id="'+m+'"]');t.parents("item").andSelf().each(function(){n.jstree("open_node","#"+a(this).CswAttrXml("id"))});n.jstree("select_node","#"+m)}).bind("load_node.jstree",function(){a("."+i+"check").unbind("click");a("."+i+"check").click(function(){return e(n,a(this))})}).bind("select_node.jstree",
function(w,v){return d({e:w,data:v,url:k,$treediv:n,IDPrefix:i,onSelectNode:h.onSelectNode,onInitialSelectNode:h.onInitialSelectNode,viewid:h.viewid,UsePaging:h.UsePaging,forsearch:h.forsearch})}).jstree({html_data:{data:x,ajax:{type:"POST",url:k,dataType:"xml",data:function(w){w=w.CswAttrXml("cswnbtnodekey");w={UsePaging:h.UsePaging,ViewId:h.viewid,IDPrefix:i,IsFirstLoad:false,ParentNodeKey:w,IncludeNodeRequired:false,IncludeNodeKey:"",ShowEmpty:false,ForSearch:h.forsearch,NodePk:tryParseString(h.nodeid,
""),IncludeInQuickLaunch:false};return a.param(w)},success:function(w,v,L){var N="";a(L.responseXML).children().first().children().each(function(){N+=C(a(this))});return N}}},ui:{select_limit:1},themes:l,core:{},types:{types:q,max_children:-2,max_depth:-2},plugins:j});a("."+i+"check").click(function(){return e(n,a(this))});n.find("li").each(function(){var w=a(this);w.children("ins").CswAttrDom("id",w.CswAttrDom("id")+"_expand")})}else n.append("No Results")}});return n},selectNode:function(f){var h=
{newnodeid:"",newcswnbtnodekey:""};f&&a.extend(h,f);f=a(this).children(".treediv");var i=f.CswAttrDom("id");f.jstree("select_node","#"+i+h.newnodeid)}};a.fn.CswNodeTree=function(f){if(g[f])return g[f].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof f==="object"||!f)return g.init.apply(this,arguments);else a.error("Method "+f+" does not exist on CswNodeTree")}})(jQuery);(function(a){var d={init:function(b){var e={ID:"",NodeTypesUrl:"/NbtWebApp/wsNBT.asmx/getNodeTypes",nodetypeid:"",onSelect:function(){},onSuccess:function(){}};b&&a.extend(e,b);b=a(this);b.contents().remove();var g=a('<select id="'+e.ID+'_sel" />').appendTo(b);g.change(function(){e.onSelect(g.val())});CswAjaxXml({url:e.NodeTypesUrl,data:{},stringify:false,success:function(f){f.children("nodetype").each(function(){var h=a(this);g.append('<option value="'+h.CswAttrXml("id")+'">'+h.CswAttrXml("name")+
"</option>")});e.onSuccess()}});return g},value:function(){return a(this).val()}};a.fn.CswNodeTypeSelect=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswNodeTypeSelect")}})(jQuery);(function(a){var d={init:function(b){var e={ID:"",Value:"",MinValue:"",MaxValue:"",Precision:"",ReadOnly:false,Required:false,onchange:function(){}};b&&a.extend(e,b);b=a(this);b.contents().remove();if(e.ReadOnly)b.append(e.Value);else{b=b.CswInput("init",{ID:e.ID,type:CswInput_Types.text,value:e.Value,cssclass:"textinput number",onChange:e.onchange});if(e.MinValue!==undefined){jQuery.validator.addMethod(e.ID+"_validateFloatMinValue",function(g,f){return this.optional(f)||validateFloatMinValue(a(f).val(),
e.MinValue)},"Number must be greater than or equal to "+e.MinValue);b.addClass(e.ID+"_validateFloatMinValue")}if(e.MaxValue!==undefined){jQuery.validator.addMethod(e.ID+"_validateFloatMaxValue",function(g,f){return this.optional(f)||validateFloatMaxValue(a(f).val(),e.MaxValue)},"Number must be less than or equal to "+e.MaxValue);b.addClass(e.ID+"_validateFloatMaxValue")}if(e.Precision===undefined||e.Precision<=0){jQuery.validator.addMethod(e.ID+"_validateInteger",function(g,f){return this.optional(f)||
validateInteger(a(f).val())},"Value must be an integer");b.addClass(e.ID+"_validateInteger")}else{jQuery.validator.addMethod(e.ID+"_validateFloatPrecision",function(g,f){return this.optional(f)||validateFloatPrecision(a(f).val(),e.Precision)},"Value must be numeric");b.addClass(e.ID+"_validateFloatPrecision")}e.Required&&b.addClass("required")}},value:function(){return a(this).find("input").val()},setValue:function(b){var e=a(this).find("input");b!==undefined&&e.val(b)}};a.fn.CswNumberTextBox=function(b){if(d[b])return d[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswNumberTextBox")}})(jQuery);(function(a){a.CswQueryString=function(){for(var d={},b,e=/\+/g,g=/([^&=]+)=?([^&]*)/g,f=window.location.search.substring(1);b=g.exec(f);)d[decodeURIComponent(b[1].replace(e," "))]=decodeURIComponent(b[2].replace(e," "));return d}})(jQuery);(function(a){a.fn.CswQuickLaunch=function(d){var b={Url:"/NbtWebApp/wsNBT.asmx/getQuickLaunchItems",onLinkClick:function(){},onSuccess:function(){}};d&&a.extend(b,d);var e=a(this);CswAjaxXml({url:b.Url,data:{UserId:""},stringify:false,success:function(g){var f=a('<div id="quicklaunchdiv"><ul id="launchitems"></ul></div>').appendTo(e).children();g.children("items").children("item").each(function(){var h=a(this),i={launchtype:h.CswAttrXml("launchtype"),viewmode:h.CswAttrXml("viewmode"),text:h.CswAttrXml("text"),
url:h.CswAttrXml("url"),viewid:h.CswAttrXml("itemid")};switch(i.launchtype){case "View":case "view":a('<li><a href="#'+i.text+"_"+i.type+"_"+i.viewmode+"_"+i.viewid+'">'+i.text+"</a></li>").appendTo(f).children("a").click(function(){b.onLinkClick(i);return false});break;case "Action":case "action":a("<li><a href="+i.url+">"+i.text+"</a></li>").appendTo(f)}});b.onSuccess()}});return this}})(jQuery);var CswSearch_CssClasses={nodetype_select:{name:"csw_search_nodetype_select"},property_select:{name:"csw_search_property_select"}};
(function(a){a.fn.CswSearch=function(d){function b(j){var l={$link:"",advancedIsHidden:false};j&&a.extend(l,j);if("Advanced"===l.$link.text()||l.advancedIsHidden){a("."+ViewBuilder_CssClasses.subfield_select.name).each(function(){a(this).show()});a("."+ViewBuilder_CssClasses.filter_select.name).each(function(){a(this).show()});a("."+ViewBuilder_CssClasses.default_filter.name).each(function(){a(this).hide()});l.$link.text("Simple");l.advancedIsHidden=false}else if("Simple"===l.$link.text()||!l.advancedIsHidden){a("."+
ViewBuilder_CssClasses.subfield_select.name).each(function(){a(this).hide()});a("."+ViewBuilder_CssClasses.filter_select.name).each(function(){a(this).hide()});a("."+ViewBuilder_CssClasses.default_filter.name).each(function(){a(this).show()});l.$link.text("Advanced");l.advancedIsHidden=true}return l.advancedIsHidden}function e(){for(var j=3;j<=k.propsCount;){var l=k.$searchTable.CswTable("cell",j,1).CswAttrDom({align:"right"}),q=a("<span>&nbsp;and&nbsp;</span>");l.append(q);j++}var t=2;k.$propsXml.children("property").each(function(){var y=
a(this),A=k.$searchTable.CswTable("cell",t,2),C=makeId({ID:"viewbuilderpropid",suffix:y.CswAttrXml("viewbuilderpropid"),prefix:k.ID});A.CswSpan("init",{ID:C,value:y.CswAttrXml("metadatatypename"),cssclass:ViewBuilder_CssClasses.metadatatype_static.name}).CswAttrDom("relatedidtype",y.CswAttrXml("relatedidtype"));k.selectedSubfieldVal="";k.selectedFilterVal="";A=y.CswAttrXml("filtarbitraryid");k.$searchTable.CswViewPropFilter("init",{ID:k.ID,propRow:t,firstColumn:3,includePropertyName:true,$propsXml:y,
filtarbitraryid:A,advancedIsHidden:k.advancedIsHidden});t++});k.bottomRow=t;k.bottomCell=1;k.searchtype="viewsearch";h()}function g(){var j=k.$searchTable.CswTable("cell",2,2).empty(),l=makeId({ID:"nodetype_select",prefix:k.ID});l=a(xmlToString(k.$nodeTypesXml.children("select"))).CswAttrDom("id",l).CswAttrDom("name",l).addClass(CswSearch_CssClasses.nodetype_select.name).change(function(){var q=a(this);q={nodetypeorobjectclassid:q.val(),relatedidtype:q.find(":selected").CswAttrDom("title"),cswnbtnodekey:"",
$parent:k.$searchTable,$nodeTypesSelect:q};a.extend(k,q);f()});k.$nodeTypesSelect=l;k.relatedidtype=l.find(":selected").CswAttrDom("title");k.nodetypeorobjectclassid!==""&&l.val(k.nodetypeorobjectclassid).CswAttrDom("selected",true);j.append(l);j=k.$searchTable.CswTable("cell",2,3).empty();l=makeId({ID:"property_select",prefix:k.ID});l=a(xmlToString(k.$propsXml.children("properties").children("select"))).CswAttrDom("id",l).CswAttrDom("name",l).addClass(CswSearch_CssClasses.property_select.name).change(function(){var q=
a(this).val(),t={propertyid:q,selectedSubfieldVal:"",selectedFilterVal:"",$selectedPropXml:k.$propsXml.children("propertyfilters").children("property[viewbuilderpropid="+q+"]")};a.extend(k,t);k.$searchTable.CswViewPropFilter("init",{ID:k.ID,propRow:2,firstColumn:3,includePropertyName:false,$propsXml:k.$selectedPropXml,viewbuilderpropid:q,advancedIsHidden:k.advancedIsHidden})});k.propertyid!==""&&l.val(k.propertyid).CswAttrDom("selected",true);j.append(l);k.propertyid=l.find(":selected").val();k.$selectedPropXml=
k.$propsXml.children("propertyfilters").children("property[viewbuilderpropid="+k.propertyid+"]");k.$searchTable.CswViewPropFilter("init",{ID:k.ID,propRow:2,firstColumn:3,includePropertyName:false,$propsXml:k.$selectedPropXml,viewbuilderpropid:k.propertyid,advancedIsHidden:k.advancedIsHidden});k.bottomRow=k.propsCount+2;k.bottomCell=2;k.searchtype="nodetypesearch";h()}function f(){CswAjaxXml({url:k.getNewPropsUrl,data:{RelatedIdType:k.relatedidtype,NodeTypeOrObjectClassId:k.nodetypeorobjectclassid,
IdPrefix:k.ID,NodeKey:k.cswnbtnodekey},stringify:false,success:function(j){k.$propsXml=j;g()}})}function h(){var j=k.$searchTable,l=k.bottomCell,q=l+1,t=k.bottomRow;if(k.searchtype==="nodetypesearch"){j=k.$searchTable.CswTable("cell",k.bottomRow,k.bottomCell).empty();q=makeId({prefix:k.ID,ID:"split_cell_table"});j=j.CswTable("init",{ID:q,cellpadding:1,cellspacing:1,cellalign:"left",align:"left"});l=1;t=q=2}l=j.CswTable("cell",t,l).empty();var y=makeId({ID:"clear_button",prefix:k.ID});l.CswButton({ID:y,
enabledText:"Clear",disabledText:"Clear",disableOnClick:false,onclick:function(){k.onClearSubmit(k.parentviewid,k.viewmode)}});j=j.CswTable("cell",t,q).empty();q=makeId({ID:"advanced_options",prefix:k.ID});var A=j.CswLink("init",{ID:q,href:"javascript:void(0)",value:k.advancedIsHidden?"Advanced":"Simple"}).click(function(){k.advancedIsHidden=b({$link:A,advancedIsHidden:k.advancedIsHidden});return false});j=k.$searchTable.CswTable("cell",k.bottomRow,k.searchBtnCell).CswAttrDom({align:"right"}).empty();
q=makeId({ID:"search_button",prefix:k.ID});j.CswButton({ID:q,enabledText:"Search",disabledText:"Searching",onclick:function(){n()}}).CswViewPropFilter("bindToButton")}function i(){var j={ViewId:!isNullOrEmpty(k.searchviewid)?k.searchviewid:k.parentviewid,SelectedNodeTypeIdNum:k.nodetypeorobjectclassid,IdPrefix:k.ID,NodeKey:k.cswnbtnodekey};CswAjaxXml({url:k.getClientSearchXmlUrl,data:j,stringify:false,success:function(l){m.empty();k.searchtype=l.CswAttrXml("searchtype");var q=makeId({prefix:k.ID,
ID:"search_tbl"});k.$searchTable=m.CswTable("init",{ID:q,cellpadding:1,cellspacing:1,cellalign:"left",align:"center",TableCssClass:"CswSearch_Table"});k.$searchTable.CswTable("cell",1,10).css("align","right").CswImageButton({ButtonType:CswImageButton_ButtonType.Delete,AlternateText:"Close",ID:makeId({prefix:k.ID,id:"closebtn"}),onClick:function(){k.onSearchClose();return CswImageButton_ButtonType.None}});switch(k.searchtype){case "nodetypesearch":k.$nodeTypesXml=l.children("nodetypes");k.$propsXml=
l.children("viewbuilderprops");g();break;case "viewsearch":k.$propsXml=l.children("properties");k.propsCount=l.children("properties").children("property").size();e()}}})}function n(){var j,l=[],q;switch(k.searchtype){case "nodetypesearch":q=k.doNodeSearchUrl;var t=k.$nodeTypesSelect.val();k.relatedidtype=k.$nodeTypesSelect.find(":selected").CswAttrDom("title");a("."+CswSearch_CssClasses.property_select.name).each(function(){var y=a(this),A=y.text(),C=y.val();A=k.$propsXml.children("propertyfilters").children('property[propname="'+
A+'"][viewbuilderpropid="'+C+'"]').CswAttrDom("fieldtype");y=y.CswViewPropFilter("getFilterJson",{nodetypeorobjectclassid:t,relatedidtype:k.relatedidtype,fieldtype:A,ID:k.ID,$parent:k.$searchTable,viewbuilderpropid:C,advancedIsHidden:k.advancedIsHidden});l.push(y)});j={viewbuilderprops:l,parentviewid:a.CswCookie("get",CswCookieName.CurrentViewId)};break;case "viewsearch":q=k.doViewSearchUrl;k.$propsXml.children("property").each(function(){var y=a(this);y.CswAttrXml("filtarbitraryid");y=y.CswViewPropFilter("getFilterJson",
{ID:k.ID,$parent:k.$searchTable});l.push(y)});j={viewprops:l,searchviewid:k.searchviewid,parentviewid:k.parentviewid}}j&&CswAjaxJSON({url:q,data:{SearchJson:j},success:function(y){k.searchviewid=y.searchviewid;k.parentviewid=y.parentviewid;k.viewmode=y.viewmode;k.searchtype="viewsearch";i();k.onSearchSubmit(y.searchviewid,y.viewmode,y.parentviewid)}})}var k={$parent:"",$searchTable:"",getNewPropsUrl:"/NbtWebApp/wsNBT.asmx/getNodeTypeSearchProps",doViewSearchUrl:"/NbtWebApp/wsNBT.asmx/doViewSearch",
doNodeSearchUrl:"/NbtWebApp/wsNBT.asmx/doNodeTypeSearch",getSearchableViewsUrl:"/NbtWebApp/wsNBT.asmx/getSearchableViews",getClientSearchXmlUrl:"/NbtWebApp/wsNBT.asmx/getClientSearchXml",searchviewid:"",viewmode:"tree",parentviewid:"",nodetypeorobjectclassid:"",propertyid:"",cswnbtnodekey:"",relatedidtype:"",ID:"",propsCount:1,advancedIsHidden:true,$propsXml:"",$selectedPropXml:"",$nodeTypesXml:"",$nodeTypesSelect:"",onSearchSubmit:function(){},onClearSubmit:function(){},onSearchClose:function(){},
selectedPropVal:"",selectedSubfieldVal:"",selectedFilterVal:"",bottomRow:2,bottomCell:1,propRow:"",clearBtnCell:1,searchBtnCell:6,searchtype:""};d&&a.extend(k,d);d=a(this);k.$searchTable=d.CswDiv("init",{ID:k.ID});d=k.$searchTable.CswSpan("init");var s=makeId({ID:"search_criteria_div",prefix:k.ID}),m=d.CswDiv("init",{ID:s}).addClass("CswSearch_Div");i();return k.$searchTable}})(jQuery);(function(a){var d={init:function(b){var e={ID:"",value:"",cssclass:""};b&&a.extend(e,b);b=a(this);var g=a("<span></span>"),f=tryParseString(e.ID,"");if(f!==""){g.CswAttrDom("id",f);g.CswAttrDom("name",f)}isNullOrEmpty(e.cssclass)||g.addClass(e.cssclass);isNullOrEmpty(e.value)||g.text(e.value);b.append(g);return g}};a.fn.CswSpan=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+
b+" does not exist on CswSpan")}})(jQuery);(function(a){a.fn.CswTable=function(d){function b(h){return h.children("tbody").children("tr").length}function e(h){h=h.children("tbody").children("tr");for(var i=0,n=0;n<h.length;n++){var k=a(h[n]).children("td");if(k.length>i)i=k.length}return i}function g(h,i,n){var k=null;if(h.length>0&&i!==undefined&&i!==""&&n!==undefined&&n!==""){if(i<=0){log("error: row must be greater than 1, got: "+i);i=1}if(n<=0){log("error: col must be greater than 1, got: "+n);n=1}for(;i>h.children("tbody").children("tr").length;)h.append("<tr></tr>");
for(k=a(h.children("tbody").children("tr")[i-1]);n>k.children("td").length;){var s=h.CswAttrDom("cellalign");if(k.children("td").length===0&&isTrue(h.CswAttrDom("FirstCellRightAlign"))||k.children("td").length%2===0&&isTrue(h.CswAttrDom("OddCellRightAlign")))s="right";s=a('<td class="'+h.CswAttrDom("cellcssclass")+'" align="'+s+'" valign="'+h.CswAttrDom("cellvalign")+'"></td>').appendTo(k);h.trigger("CswTable_onCreateCell",[h,s,i,k.children("td").length])}k=a(k.children("td")[n-1])}return k}var f=
{init:function(h){var i={ID:"",prefix:"",suffix:"",TableCssClass:"",CellCssClass:"",cellpadding:0,cellspacing:0,cellalign:"top",width:"",align:"",cellalign:"",cellvalign:"top",onCreateCell:function(){},FirstCellRightAlign:false,OddCellRightAlign:false};h&&a.extend(i,h);h=makeId({ID:i.ID,prefix:i.prefix,suffix:i.suffix});h=a('<table id="'+h+'"></table>');h.addClass(i.TableCssClass);h.CswAttrDom("width",i.width);h.CswAttrDom("align",i.align);h.CswAttrDom("cellpadding",i.cellpadding);h.CswAttrDom("cellspacing",
i.cellspacing);h.CswAttrDom("border","0");h.CswAttrDom("cellalign",i.cellalign);h.CswAttrDom("cellvalign",i.cellvalign);h.CswAttrDom("cellcssclass",i.CellCssClass);h.CswAttrDom("FirstCellRightAlign",i.FirstCellRightAlign);h.CswAttrDom("OddCellRightAlign",i.OddCellRightAlign);h.bind("CswTable_onCreateCell",function(n,k,s,m,j){i.onCreateCell(n,k,s,m,j);n.stopPropagation()});h.trigger("CswTable_onCreateCell",[h,h.find("td"),1,1]);a(this).append(h);return h},cell:function(h,i){var n=a(this);return g(n,
h,i)},maxrows:function(){return b(a(this))},maxcolumns:function(){return e(a(this))},finish:function(h){for(var i=a(this),n=b(i),k=e(i),s=1;s<=n;s++)for(var m=1;m<=k;m++){var j=g(i,s,m);if(j.contents().length===0)h!==null?h(j,s,m):j.append("&nbsp;")}},findRow:function(h){var i=a(this).children("tbody").children("tr");if(h!==""&&h!==null)i=i.filter(h);return i},findCell:function(h){var i=a(this).children("tbody").children("tr").children("td");if(h!==""&&h!==null)i=i.filter(h);return i},rowFindCell:function(h,
i){var n=h.children("td");if(i!==""&&i!==null)n=n.filter(i);return n}};if(f[d])return f[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return f.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswTable")}})(jQuery);(function(a){a.fn.listenForEnter=function(){var d=this;return d.each(function(){d.focus(function(){d.data("safeEnter_InAutocomplete",false)});d.keypress(function(b){switch(b.keyCode?b.keyCode:b.which){case 13:if(!d.data("safeEnter_InAutocomplete")||!d.is("input[type=text]")||a.browser.opera)d.trigger("pressedEnter",b);d.data("safeEnter_InAutocomplete",false);break;case 40:case 38:case 34:case 33:d.data("safeEnter_InAutocomplete",true);break;default:d.data("safeEnter_InAutocomplete",false)}})})};a.fn.clickOnEnter=
function(d){var b=this;return b.each(function(){b.listenForEnter().bind("pressedEnter",function(){d.click()})})};a.fn.replaceText=function(d,b){this instanceof jQuery&&this.each(function(){var e,g="";if(!isNullOrEmpty(this))if(!isNullOrEmpty(this)&&this.nodeType===3){e=tryParseString(this.val(),"");if(!isNullOrEmpty(e)){log(e,true);g=e.replace(d,b);g!==e&&this.replaceWith(g)}}this.replaceText(d,b)});return this}})(jQuery);(function(a){var d={init:function(b){var e={ID:"",prefix:"",Checked:"",ReadOnly:false,Required:false,onchange:function(){}};b&&a.extend(e,b);b=a(this);b.empty();var g=makeId({prefix:e.prefix,ID:e.ID}),f=tryParseString(e.Checked,"null").toLowerCase();if(e.ReadOnly)switch(f){case "true":b.append("Yes");break;case "false":b.append("No")}else{var h;switch(f){case "true":h=CswImageButton_ButtonType.CheckboxTrue;break;case "false":h=CswImageButton_ButtonType.CheckboxFalse;break;default:h=CswImageButton_ButtonType.CheckboxNull}b.CswImageButton({ID:g,
ButtonType:h,AlternateText:f,onClick:function(i){var n=e.Required,k=i.CswAttrDom("alt"),s=CswImageButton_ButtonType.CheckboxNull,m="null";if(k==="null"){s=CswImageButton_ButtonType.CheckboxTrue;m="true"}else if(k==="false")if(n==="true"){s=CswImageButton_ButtonType.CheckboxTrue;m="true"}else{s=CswImageButton_ButtonType.CheckboxNull;m="null"}else if(k==="true"){s=CswImageButton_ButtonType.CheckboxFalse;m="false"}i.CswAttrDom("alt",m);i=s;e.onchange();return i}})}},value:function(){return a(this).CswAttrDom("alt")}};
a.fn.CswTristateCheckBox=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswTristateCheckBox")}})(jQuery);var CswViewEditor_WizardSteps={step1:{step:1,description:"Choose a View"},step2:{step:2,description:"Edit View Attributes"},step3:{step:3,description:"Add Relationships"},step4:{step:4,description:"Select Properties"},step5:{step:5,description:"Set Filters"},step6:{step:6,description:"Fine Tuning"}};
(function(a){a.fn.CswViewEditor=function(d){function b(D){x=D}function e(){F.CswAttrXml("viewname",ia.val());F.CswAttrXml("category",ma.val());if(F.CswAttrXml("visibility")!=="Property")if(ja.getvisibilityselect()!==undefined){var D=ja.getvisibilityselect().val();F.CswAttrXml("visibility",D);var B="";if(D==="Role"){B=ja.getvisroleselect().val();isNullOrEmpty(B)||(B=B.substr(6))}F.CswAttrXml("visibilityroleid",B);B="";if(D==="User"){B=ja.getvisuserselect().val();isNullOrEmpty(B)||(B=B.substr(6))}F.CswAttrXml("visibilityuserid",
B)}D=pa.is(":checked")?"true":"false";F.CswAttrXml("formobile",D);F.CswAttrXml("width",na.CswNumberTextBox("value"))}function g(D,B){var P=false;if(a("#"+j.ID+"_all:checked").length>0)P=true;A.text("");j.startingStep===1&&y.CswWizard("button","next","disable");P={All:P,SelectedViewId:tryParseString(B,"")};CswAjaxJSON({url:j.ViewGridUrl,data:P,success:function(K){C.empty();var W=a('<div id="'+j.ID+'_gp" style="width:100%; height:20px;" />').appendTo(C),E=a('<table id="'+j.ID+'_gt" />').appendTo(C);
a.extend(K,{autowidth:true,height:180,onSelectRow:function(H,da){if(da){v.CswButton("enable");L.CswButton("enable")}else{v.CswButton("disable");L.CswButton("disable")}A.text(i(E));y.CswWizard("button","next","enable")},pager:W});E.jqGrid(K).hideCol(j.ColumnFullViewId);if(!isNullOrEmpty(K.selectedpk)){E.setSelection(k(E,K.selectedpk));E.CswNodeGrid("scrollToSelectedRow")}D(E)}})}function f(D){var B="";return B=j.startingStep===1?n(D,j.ColumnFullViewId):j.viewid}function h(D){var B="";return B=j.startingStep===
1?n(D,j.ColumnViewMode):j.viewmode}function i(D){var B="";return B=j.startingStep===1?n(D,j.ColumnViewName):j.viewname}function n(D,B){var P=D.jqGrid("getGridParam","selrow");return D.jqGrid("getCell",P,B)}function k(D,B){var P=D.jqGrid("getCol",j.ColumnViewId,true),K=0,W;for(W in P)if(P[W].value.toString()===B.toString())K=P[W].id;return K}function s(D,B){var P=m(D,F);B.jstree({html_data:{data:P.htmlstring},ui:{select_limit:1},types:{types:P.types,max_children:-2,max_depth:-2},plugins:["themes",
"html_data","ui","types","crrm"]});B.find(".vieweditor_childselect").change(function(){var E=a(this),H=E.find("option:selected").data("optionviewxml");E.CswAttrDom("arbid")==="root"?F.append(a(H)):F.find('[arbitraryid="'+E.CswAttrDom("arbid")+'"]').append(a(H));s(D,B)});B.find(".vieweditor_deletespan").each(function(){var E=a(this);E.CswImageButton({ButtonType:CswImageButton_ButtonType.Delete,AlternateText:"Delete",ID:E.CswAttrDom("arbid")+"_delete",onClick:function(H){H=H.parent();F.find('[arbitraryid="'+
H.CswAttrDom("arbid")+'"]').remove();s(D,B);return CswImageButton_ButtonType.None}})});D===CswViewEditor_WizardSteps.step5.step&&B.find(".vieweditor_addfilter").each(function(){var E=a(this),H=E.CswTable({ID:j.ID+"_propfilttbl"});H.css("display","inline-table");H.CswViewPropFilter("init",{viewxml:xmlToString(F),proparbitraryid:E.CswAttrDom("proparbid"),filtarbitraryid:"",viewbuilderpropid:"",ID:j.ID,propRow:1,firstColumn:1,includePropertyName:false,selectedSubfieldVal:"",selectedFilterVal:"",autoFocusInput:false});
H.CswTable("cell",1,5).CswButton("init",{ID:"addfiltbtn",prefix:j.ID,enabledText:"Add",disabledText:"Adding",onclick:function(){var da=H.CswViewPropFilter("getFilterJson",{ID:j.ID,$parent:E,fieldtype:F.find('[arbitraryid="'+E.CswAttrDom("proparbid")+'"]').CswAttrXml("fieldtype"),proparbitraryid:E.CswAttrDom("proparbid"),allowNullFilterValue:true});H.CswViewPropFilter("makeFilter",{viewxml:xmlToString(F),filtJson:da,onSuccess:function(ba){var fa=F.find('[arbitraryid="'+E.CswAttrDom("proparbid")+'"]');
a(xmlToString(ba)).appendTo(fa);s(D,B)}})}})});if(D===CswViewEditor_WizardSteps.step6.step){var K=qa.CswTable("cell",1,2),W=h(x);B.find(".vieweditor_viewrootlink").click(function(){K.empty()});B.find(".vieweditor_viewrellink").click(function(){$a=a(this);K.empty();var E=F.find('[arbitraryid="'+$a.CswAttrDom("arbid")+'"]'),H=K.CswTable({ID:j.ID+"_editrel",FirstCellRightAlign:true});H.CswTable("cell",1,1).append("Allow Deleting");var da=H.CswTable("cell",1,2).CswInput("init",{ID:j.ID+"_adcb",type:CswInput_Types.checkbox});
E.CswAttrXml("allowdelete").toLowerCase()=="true"&&da.CswAttrDom("checked","true");H.CswTable("cell",2,1).append("Group By");var ba=a('<select id="'+j.ID+'_gbs" />').appendTo(H.CswTable("cell",2,2)),fa={Type:E.CswAttrXml("secondtype"),Id:E.CswAttrXml("secondid")};CswAjaxXml({url:j.PropNamesUrl,data:fa,stringify:false,success:function(ha){ba.empty();a('<option value="">[None]</option>').appendTo(ba);ha.children().each(function(){var o=a(this),p=a('<option value="'+o.CswAttrXml("propid")+'">'+o.CswAttrXml("propname")+
"</option>").appendTo(ba).data("propxml",o);E.CswAttrXml("groupbypropid")===o.CswAttrXml("propid")&&E.CswAttrXml("groupbyproptype")===o.CswAttrXml("proptype")&&E.CswAttrXml("groupbypropname")===o.CswAttrXml("propname")&&p.CswAttrDom("selected","true")})}});var aa;if(W==="Tree"){H.CswTable("cell",3,1).append("Show In Tree");aa=H.CswTable("cell",3,2).CswInput("init",{ID:j.ID+"_stcb",type:CswInput_Types.checkbox});E.CswAttrXml("showintree").toLowerCase()=="true"&&aa.CswAttrDom("checked","true")}H.CswTable("cell",
4,2).CswButton({ID:j.ID+"_saverel",enabledText:"Apply",disableOnClick:false,onclick:function(){aa!==undefined&&E.CswAttrXml("showintree",aa.is(":checked"));E.CswAttrXml("allowdelete",da.is(":checked"));if(ba.val()!==""){var ha=ba.find(":selected").data("propxml");E.CswAttrXml("groupbypropid",ha.CswAttrXml("propid"));E.CswAttrXml("groupbyproptype",ha.CswAttrXml("proptype"));E.CswAttrXml("groupbypropname",ha.CswAttrXml("propname"))}else{E.CswAttrXml("groupbypropid","");E.CswAttrXml("groupbyproptype",
"");E.CswAttrXml("groupbypropname","")}}})});B.find(".vieweditor_viewproplink").click(function(){$a=a(this);K.empty();if(W==="Grid"){var E=F.find('[arbitraryid="'+$a.CswAttrDom("arbid")+'"]'),H=K.CswTable({ID:j.ID+"_editprop",FirstCellRightAlign:true});H.CswTable("cell",1,1).append("Sort By");var da=H.CswTable("cell",1,2).CswInput("init",{ID:j.ID+"_sortcb",type:CswInput_Types.checkbox});E.CswAttrXml("sortby").toLowerCase()=="true"&&da.CswAttrDom("checked","true");H.CswTable("cell",2,1).append("Grid Column Order");
var ba=H.CswTable("cell",2,2).CswInput("init",{ID:j.ID+"_gcotb",type:CswInput_Types.text});ba.val(E.CswAttrXml("order"));H.CswTable("cell",3,1).append("Grid Column Width (in characters)");var fa=H.CswTable("cell",3,2).CswInput("init",{ID:j.ID+"_gcwtb",type:CswInput_Types.text});fa.val(E.CswAttrXml("width"));H.CswTable("cell",4,2).CswButton({ID:j.ID+"_saveprop",enabledText:"Apply",disableOnClick:false,onclick:function(){E.CswAttrXml("sortby",da.is(":checked"));E.CswAttrXml("order",ba.val());E.CswAttrXml("width",
fa.val())}})}});B.find(".vieweditor_viewfilterlink").click(function(){$a=a(this);K.empty();var E=F.find('[arbitraryid="'+$a.CswAttrDom("arbid")+'"]'),H=K.CswTable({ID:j.ID+"_editfilt",FirstCellRightAlign:true});H.CswTable("cell",1,1).append("Case Sensitive");var da=a('<input type="checkbox" id="'+j.ID+'_casecb" />').appendTo(H.CswTable("cell",1,2));E.CswAttrXml("casesensitive").toLowerCase()==="true"&&da.CswAttrDom("checked","true");H.CswTable("cell",4,2).CswButton({ID:j.ID+"_savefilt",enabledText:"Apply",
disableOnClick:false,onclick:function(){E.CswAttrXml("casesensitive",da.is(":checked"))}})})}}function m(D,B){var P={},K=B.CswAttrXml("arbitraryid"),W=B.get(0).nodeName,E,H,da=false,ba=true,fa;if(W.toLowerCase()==="treeview"){if(D===CswViewEditor_WizardSteps.step3.step)ba=false;K="root";E=B.CswAttrXml("viewname");H="root";P.root={icon:{image:B.CswAttrXml("iconfilename")}};fa="vieweditor_viewrootlink"}else if(W.toLowerCase()==="relationship"){if(D===CswViewEditor_WizardSteps.step3.step)ba=false;if(D===
CswViewEditor_WizardSteps.step4.step)ba=false;E=B.CswAttrXml("secondname");W=B.CswAttrXml("propname");if(W!==""&&W!==undefined)E+=B.CswAttrXml("propowner")==="First"?" (by "+B.CswAttrXml("firstname")+"'s "+W+")":" (by "+W+")";H=B.CswAttrXml("secondtype")+"_"+B.CswAttrXml("secondid");P[H]={icon:{image:B.CswAttrXml("secondiconfilename")}};fa="vieweditor_viewrellink"}else if(W.toLowerCase()==="property"){if(D<=CswViewEditor_WizardSteps.step3.step)da=true;if(D===CswViewEditor_WizardSteps.step5.step)ba=
false;E=B.CswAttrXml("name");H="property";P.property={icon:{image:"Images/view/property.gif"}};fa="vieweditor_viewproplink"}else if(W.toLowerCase()==="filter"){if(D<=CswViewEditor_WizardSteps.step4.step)da=true;E=B.CswAttrXml("subfieldname")+" "+B.CswAttrXml("filtermode")+" "+B.CswAttrXml("value");H="filter";P.filter={icon:{image:"Images/view/filter.gif"}};fa="vieweditor_viewfilterlink"}var aa="";if(!da){aa='<li id="'+K+'" ';aa+='    rel="'+H+'" ';aa+='    class="jstree-open" ';aa+=">";aa+=' <a href="#" class="'+
fa+'" arbid="'+K+'">'+E+"</a>";if(K!=="root")aa+=' <span style="" class="vieweditor_deletespan" arbid="'+K+'"></span>';aa+="<ul>";B.children().each(function(){var ha=m(D,a(this));aa+=ha.htmlstring;a.extend(P,ha.types)});if(!ba)if(D===CswViewEditor_WizardSteps.step5.step)aa+='<li><span class="vieweditor_addfilter" proparbid="'+K+'"></span></li>';else{aa+='<li><select id="'+D+"_"+K+'_child" arbid="'+K+'" class="vieweditor_childselect"></select></li>';E={StepNo:D,ArbitraryId:K,ViewXml:xmlToString(F)};
CswAjaxXml({url:j.ChildOptionsUrl,data:E,stringify:true,success:function(ha){var o=a("#"+D+"_"+K+"_child");o.empty();o.append('<option value="">Select...</option>');ha.children().each(function(){var p=a(this),u=a(p.CswAttrXml("value"));a('<option value="'+u.CswAttrXml("arbitraryid")+'">'+p.CswAttrXml("name")+"</option>").appendTo(o).data("optionviewxml",p.CswAttrXml("value"))})}})}aa+="</ul>";aa+="</li>"}return{htmlstring:aa,types:P}}var j={ViewGridUrl:"/NbtWebApp/wsNBT.asmx/getViewGrid",ViewInfoUrl:"/NbtWebApp/wsNBT.asmx/getViewInfo",
SaveViewUrl:"/NbtWebApp/wsNBT.asmx/saveViewInfo",CopyViewUrl:"/NbtWebApp/wsNBT.asmx/copyView",DeleteViewUrl:"/NbtWebApp/wsNBT.asmx/deleteView",ChildOptionsUrl:"/NbtWebApp/wsNBT.asmx/getViewChildOptions",PropNamesUrl:"/NbtWebApp/wsNBT.asmx/getPropNames",viewid:"",viewname:"",viewmode:"",ID:"vieweditor",ColumnViewName:"VIEWNAME",ColumnViewId:"NODEVIEWID",ColumnFullViewId:"VIEWID",ColumnViewMode:"VIEWMODE",onCancel:function(){},onFinish:function(){},startingStep:1};d&&a.extend(j,d);var l=[CswViewEditor_WizardSteps.step1,
CswViewEditor_WizardSteps.step2,CswViewEditor_WizardSteps.step3,CswViewEditor_WizardSteps.step4,CswViewEditor_WizardSteps.step5,CswViewEditor_WizardSteps.step6],q={};for(d=1;d<=l.length;d++)q[d]=l[d-1].description;var t=j.startingStep;d=a(this);d=a("<div></div>").appendTo(d);var y=d.CswWizard("init",{ID:j.ID+"_wizard",Title:"Edit View",StepCount:l.length,Steps:q,StartingStep:j.startingStep,FinishText:"Save and Finish",onNext:function(D,B){t=B;switch(B){case CswViewEditor_WizardSteps.step2.step:D.CswWizard("button",
"finish","enable");D.CswWizard("button","next","disable");var P={ViewId:f(x)};CswAjaxXml({url:j.ViewInfoUrl,data:P,stringify:false,success:function(K){F=K;ia.val(F.CswAttrXml("viewname"));ma.val(F.CswAttrXml("category"));if(F.CswAttrXml("visibility")!=="Property")if(ja.getvisibilityselect()!==undefined){ja.getvisibilityselect().val(F.CswAttrXml("visibility")).trigger("change");ja.getvisroleselect().val("nodes_"+F.CswAttrXml("visibilityroleid"));ja.getvisuserselect().val("nodes_"+F.CswAttrXml("visibilityuserid"))}isTrue(F.CswAttrXml("formobile"))&&
pa.CswAttrDom("checked","checked");K=F.CswAttrXml("mode");ua.text(K);na.CswNumberTextBox("setValue",F.CswAttrXml("width"));if(K==="Grid"){oa.show();na.show()}else{oa.hide();na.hide()}D.CswWizard("button","next","enable")}});break;case CswViewEditor_WizardSteps.step3.step:F!==undefined&&e();s(CswViewEditor_WizardSteps.step3.step,ka);break;case CswViewEditor_WizardSteps.step4.step:s(CswViewEditor_WizardSteps.step4.step,ra);break;case CswViewEditor_WizardSteps.step5.step:s(CswViewEditor_WizardSteps.step5.step,
sa);break;case CswViewEditor_WizardSteps.step6.step:s(CswViewEditor_WizardSteps.step6.step,qa.CswTable("cell",1,1))}},onPrevious:function(D,B){B===1&&D.CswWizard("button","finish","disable");t=B;switch(B){case CswViewEditor_WizardSteps.step3.step:s(CswViewEditor_WizardSteps.step3.step,ka);break;case CswViewEditor_WizardSteps.step4.step:s(CswViewEditor_WizardSteps.step4.step,ra);break;case CswViewEditor_WizardSteps.step5.step:s(CswViewEditor_WizardSteps.step5.step,sa);break;case CswViewEditor_WizardSteps.step6.step:s(CswViewEditor_WizardSteps.step6.step,
qa.CswTable("cell",1,1))}},onBeforePrevious:function(D,B){return B!==CswViewEditor_WizardSteps.step2.step||confirm("You will lose any changes made to the current view if you continue.  Are you sure?")},onCancel:j.onCancel,onFinish:function(D){var B=f(x),P=true;if(!isNullOrEmpty(F)){t===CswViewEditor_WizardSteps.step2.step&&e();if(F.CswAttrXml("mode")==="Grid"&&(F.children("relationship").length===0||F.children("relationship").children("property").length===0))(P=confirm("You are attempting to create a Grid without properties. This will not display any information. Do you want to continue?"))||
D.CswWizard("button","finish","enable")}if(P){D={ViewId:B,ViewXml:xmlToString(F)};CswAjaxXml({url:j.SaveViewUrl,data:D,stringify:true,success:function(){j.onFinish(B,h(x))}})}}});j.startingStep===1&&y.CswWizard("button","finish","disable");l=y.CswWizard("div",CswViewEditor_WizardSteps.step1.step);l.append("A <em>View</em> controls the arrangement of information you see in a tree or grid.  Views are useful for defining a user's workflow or for creating elaborate search criteria. This wizard will take you step by step through the process of creating a new View or editing an existing View.<br/><br/>");
l.append("Select a View to Edit:&nbsp;");var A=a('<span id="'+j.ID+'_selviewname" style="font-weight: bold"></span>').appendTo(l),C=a("<div></div>").appendTo(l),x;g(b,j.viewid);q=l.CswTable({ID:j.ID+"_1_btntbl",width:"100%"});l=q.CswTable("cell",1,1);q=q.CswTable("cell",1,2);q.CswAttrDom("align","right");var w=a("<div></div>").appendTo(q);IsAdministrator({Yes:function(){w.CswInput("init",{ID:j.ID+"_all",type:CswInput_Types.checkbox,onChange:function(){g(b)}});w.append("Show Other Roles/Users")}});
var v=l.CswButton({ID:j.ID+"_copyview",enabledText:"Copy View",disableOnClick:true,onclick:function(){var D=f(x);isNullOrEmpty(D)||CswAjaxJSON({url:j.CopyViewUrl,data:{ViewId:D},success:function(B){g(b,B.copyviewid)},error:function(){v.CswButton("enable")}})}});v.CswButton("disable");var L=l.CswButton({ID:j.ID+"_deleteview",enabledText:"Delete View",disableOnClick:true,onclick:function(){var D=f(x);isNullOrEmpty(D)||confirm("Are you sure you want to delete: "+i(x))&&CswAjaxJSON({url:j.DeleteViewUrl,
data:{ViewId:D},success:function(){g(b);v.CswButton("disable")},error:function(){L.CswButton("enable")}})}});L.CswButton("disable");var N=l.CswButton({ID:j.ID+"_newview",enabledText:"Create New View",disableOnClick:false,onclick:function(){a.CswDialog("AddViewDialog",{onAddView:function(D){x=g(b,D)},onClose:function(){N.CswButton("enable")}})}});l=y.CswWizard("div",CswViewEditor_WizardSteps.step2.step).CswTable({ID:j.ID+"_tbl2",FirstCellRightAlign:true});l.CswTable("cell",1,1).append("View Name:");
var ia=l.CswTable("cell",1,2).CswInput("init",{ID:j.ID+"_viewname",type:CswInput_Types.text});l.CswTable("cell",2,1).append("Category:");var ma=l.CswTable("cell",2,2).CswInput("init",{ID:j.ID+"_category",type:CswInput_Types.text}),ja;if(j.startingStep===1)ja=makeViewVisibilitySelect(l,3,"View Visibility:");l.CswTable("cell",4,1).append("For Mobile:");var pa=l.CswTable("cell",4,2).CswInput("init",{ID:j.ID+"_formobile",type:CswInput_Types.checkbox});l.CswTable("cell",5,1).append("Display Mode:");var ua=
l.CswTable("cell",5,2).append('<span id="'+j.ID+'_displaymode"></span>'),oa=l.CswTable("cell",6,1).append("Grid Width (in characters):"),na=l.CswTable("cell",6,2);na.CswNumberTextBox("init",{ID:j.ID+"_gridwidth",Value:"",MinValue:"1",MaxValue:"",Precision:"0",onchange:function(){}});l=y.CswWizard("div",CswViewEditor_WizardSteps.step3.step);l.append("Add relationships from the select boxes below:<br/><br/>");var ka=a("<div />").appendTo(l);l=y.CswWizard("div",CswViewEditor_WizardSteps.step4.step);
l.append("Add properties from the select boxes below:<br/><br/>");var ra=a("<div />").appendTo(l);l=y.CswWizard("div",CswViewEditor_WizardSteps.step5.step);l.append("Add filters by selecting properties from the tree:<br/><br/>");var sa=a("<div />").appendTo(l);l=y.CswWizard("div",CswViewEditor_WizardSteps.step6.step);l.append("Select what you want to edit from the tree:<br/><br/>");var qa=l.CswTable({ID:j.ID+"_6_tbl"}),F;return d}})(jQuery);var ViewBuilder_CssClasses={subfield_select:{name:"csw_viewbuilder_subfield_select"},filter_select:{name:"csw_viewbuilder_filter_select"},default_filter:{name:"csw_viewbuilder_default_filter"},filter_value:{name:"csw_viewbuilder_filter_value"},metadatatype_static:{name:"csw_viewbuilder_metadatatype_static"}};
(function(a){function d(e,g){var f="";f={proparbitraryid:"",filtarbitraryid:"",viewbuilderpropid:"",ID:""};g&&a.extend(f,g);return f=isNullOrEmpty(f.filtarbitraryid)?isNullOrEmpty(f.viewbuilderpropid)?isNullOrEmpty(f.proparbitraryid)?isNullOrEmpty(f.ID)?e:makeId({ID:e,prefix:f.ID}):makeId({ID:e+"_proparbitraryid",prefix:f.ID,suffix:f.proparbitraryid}):makeId({ID:e+"_viewbuilderpropid",prefix:f.ID,suffix:f.viewbuilderpropid}):makeId({ID:e+"_filtarbitraryid",prefix:f.ID,suffix:f.filtarbitraryid})}var b=
{init:function(e){function g(i){i.$propsXml.CswAttrXml("viewbuilderpropid");var n=i.$propsXml.CswAttrXml("propname");if(i.includePropertyName){var k=h.CswTable("cell",i.propRow,i.firstColumn).empty(),s=d(n,i);k.CswSpan("init",{ID:s,value:n})}k=i.$propsXml.CswAttrXml("fieldtype");var m=i.$propsXml.children("defaultsubfield").CswAttrXml("filter");s=h.CswTable("cell",i.propRow,i.firstColumn+1).empty();var j=d("default_filter",i);m=s.CswSpan("init",{ID:j,value:m,cssclass:ViewBuilder_CssClasses.default_filter.name}).CswAttrDom({align:"center"});
i.advancedIsHidden||m.hide();m=d("subfield_select",i);var l=a(xmlToString(i.$propsXml.children("subfields").children("select"))).CswAttrDom("id",m).CswAttrDom("name",m).addClass(ViewBuilder_CssClasses.subfield_select.name).change(function(){var t=a(this);t={selectedSubfieldVal:t.val(),selectedFilterVal:"",advancedIsHidden:isTrue(t.is(":hidden"))};a.extend(i,t);g(i)});isNullOrEmpty(i.selectedSubfieldVal)||l.val(i.selectedSubfieldVal).CswAttrDom("selected",true);s.append(l);i.advancedIsHidden&&l.hide();
j=l.find(":selected").val();s=l.find(":selected").CswAttrDom("defaultvalue");m=h.CswTable("cell",i.propRow,i.firstColumn+2).empty();var q=d("filter_select",i);j=a(xmlToString(i.$propsXml.children("propertyfilters").children("subfield[column="+j+"]").children("select"))).CswAttrDom("id",q).CswAttrDom("name",q).addClass(ViewBuilder_CssClasses.filter_select.name).change(function(){var t=a(this);t={selectedSubfieldVal:l.val(),selectedFilterVal:t.val(),advancedIsHidden:isTrue(t.is(":hidden"))};a.extend(i,
t);g(i)});isNullOrEmpty(i.selectedFilterVal)||j.val(i.selectedFilterVal).CswAttrDom("selected",true);m.append(j);i.advancedIsHidden&&j.hide();m=h.CswTable("cell",i.propRow,i.firstColumn+3).empty();j=d("propfilter_input",i);if(k==="List")a(xmlToString(i.$propsXml.children("filtersoptions").children("select"))).appendTo(m).CswAttrDom({id:j,name:j});else if(k==="Logical")m.CswTristateCheckBox("init",{ID:j,Checked:s});else{k={value:s,placeholder:""};if(isNullOrEmpty(k.value)){i.placeholder=n;if(i.placeholder!==
l.find(":selected").text())i.placeholder+="'s "+l.find(":selected").text()}m.CswInput("init",{ID:j,type:CswInput_Types.text,cssclass:ViewBuilder_CssClasses.filter_value.name,value:k.value,placeholder:k.placeholder,width:"200px",autofocus:i.autoFocusInput,autocomplete:"on"})}}var f={getNewPropsUrl:"/NbtWebApp/wsNBT.asmx/getViewPropFilterUI",viewid:"",viewxml:"",$propsXml:"",proparbitraryid:"",filtarbitraryid:"",viewbuilderpropid:"",ID:"",propRow:1,firstColumn:3,includePropertyName:false,advancedIsHidden:false,
selectedSubfieldVal:"",selectedFilterVal:"",autoFocusInput:false};e&&a.extend(f,e);var h=a(this);isNullOrEmpty(f.$propsXml)&&!isNullOrEmpty(f.proparbitraryid)?CswAjaxXml({url:f.getNewPropsUrl,data:{ViewXml:f.viewxml,PropArbitraryId:f.proparbitraryid},stringify:true,success:function(i){f.$propsXml=i.children("propertyfilters").children("property");f.filtarbitraryid=f.$propsXml.CswAttrXml("filtarbitraryid");g(f)}}):g(f);return h},getFilterJson:function(e){var g=a(this),f={nodetypeorobjectclassid:"",
relatedidtype:"",fieldtype:g.CswAttrXml("fieldtype"),ID:"",$parent:"",proparbitraryid:"",filtarbitraryid:g.CswAttrXml("filtarbitraryid"),viewbuilderpropid:"",allowNullFilterValue:false};e&&a.extend(f,e);var h={proparbitraryid:f.proparbitraryid,filtarbitraryid:f.filtarbitraryid,viewbuilderpropid:f.viewbuilderpropid,ID:f.ID},i=d("propfilter_input",h);e=d("subfield_select",h);h=d("filter_select",h);var n={};i=tryParseElement(i,f.$parent);switch(f.fieldtype){case "Logical":i=i.CswTristateCheckBox("value");
break;case "List":i=i.find(":selected").val();break;default:i=i.val()}if(i!==""||f.allowNullFilterValue){e=tryParseElement(e,f.$parent).find(":selected").text();h=tryParseElement(h,f.$parent).find(":selected").val();g=g.CswAttrXml("proptype");n={nodetypeorobjectclassid:f.nodetypeorobjectclassid,relatedidtype:f.relatedidtype,proptype:g,viewbuilderpropid:f.viewbuilderpropid,filtarbitraryid:f.filtarbitraryid,proparbitraryid:f.proparbitraryid,relatedidtype:f.relatedidtype,subfield:e,filter:h,filtervalue:i}}return n},
makeFilter:function(e){var g={url:"/NbtWebApp/wsNBT.asmx/makeViewPropFilter",viewxml:"",filtJson:"",onSuccess:function(){}};e&&a.extend(g,e);e={PropFiltJson:JSON.stringify(g.filtJson),ViewXml:g.viewxml};CswAjaxXml({url:g.url,data:e,success:function(f){g.onSuccess(f)}})},bindToButton:function(){var e=a(this);if(!isNullOrEmpty(e)){a("."+ViewBuilder_CssClasses.subfield_select.name).each(function(){a(this).clickOnEnter(e)});a("."+ViewBuilder_CssClasses.filter_select.name).each(function(){a(this).clickOnEnter(e)});
a("."+ViewBuilder_CssClasses.default_filter.name).each(function(){a(this).clickOnEnter(e)});a("."+ViewBuilder_CssClasses.filter_value.name).each(function(){a(this).clickOnEnter(e)})}return e}};a.fn.CswViewPropFilter=function(e){if(b[e])return b[e].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof e==="object"||!e)return b.init.apply(this,arguments);else a.error("Method "+e+" does not exist on CswViewPropFilter")}})(jQuery);(function(a){function d(e){var g={ID:"",ClickDelay:300,$item:"",iconurl:"",type:"",viewid:"",viewname:"",viewmode:"",actionid:"",actionurl:"",reportid:"",onSelect:function(){},$selectdiv:""};e&&a.extend(g,e);e=a("<div></div>");var f=e.CswTable("init",{ID:g.ID+"selectedtbl"}),h=f.CswTable("cell",1,1);h=a("<div />").appendTo(h);h.css("background-image",g.iconurl);h.css("width","18px");h.css("height","18px");f.CswTable("cell",1,2).append(g.viewname);g.$selectdiv.CswComboBox("TopContent",e);g.$selectdiv.CswAttrXml("selectedType",
g.type);switch(g.type.toLowerCase()){case "view":g.$selectdiv.CswAttrXml("selectedValue",g.viewid);break;case "action":g.$selectdiv.CswAttrXml("selectedValue",g.actionid);break;case "report":g.$selectdiv.CswAttrXml("selectedValue",g.reportid)}setTimeout(function(){g.$selectdiv.CswComboBox("toggle")},g.ClickDelay);g.onSelect({iconurl:g.iconurl,type:g.type,viewid:g.viewid,viewname:g.viewname,viewmode:g.viewmode,actionid:g.actionid,actionurl:g.actionurl,reportid:g.reportid})}var b={init:function(e){var g=
{ID:"",onSelect:function(){},onSuccess:function(){},ClickDelay:300,issearchable:false,usesession:true};e&&a.extend(g,e);var f=a(this);$viewtreediv=a("<div/>");f.CswComboBox("init",{ID:g.ID+"_combo",TopContent:"Select a View",SelectContent:$viewtreediv,Width:"266px"});$viewtreediv.CswViewTree({onSelect:function(h){d({ID:g.ID,ClickDelay:g.ClickDelay,$item:h.$item,iconurl:h.iconurl,type:h.type,viewid:h.viewid,viewname:h.viewname,viewmode:h.viewmode,actionid:h.actionid,actionurl:h.actionurl,reportid:h.reportid,
onSelect:g.onSelect,$selectdiv:f})},onSuccess:g.onSuccess,issearchable:g.issearchable,usesession:g.usesession});return f},value:function(){var e=a(this);return{type:e.CswAttrXml("selectedType"),value:e.CswAttrXml("selectedValue")}}};a.fn.CswViewSelect=function(e){if(b[e])return b[e].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof e==="object"||!e)return b.init.apply(this,arguments);else a.error("Method "+e+" does not exist on CswViewSelect")}})(jQuery);(function(a){a.fn.CswViewTree=function(d){var b={ViewUrl:"/NbtWebApp/wsNBT.asmx/getViewTree",viewid:"",issearchable:false,usesession:true,onSelect:function(){},onSuccess:function(){}};d&&a.extend(b,d);var e=a(this);CswAjaxXml({url:b.ViewUrl,data:{IsSearchable:b.issearchable,UseSession:b.usesession},stringify:false,success:function(g){var f=g.find("types").text();f=a.parseJSON(f);g=g.find("tree").children("root");g=xmlToString(g);e.jstree({xml_data:{data:g,xsl:"nest"},ui:{select_limit:1},core:{initially_open:["root"]},
types:{types:f},plugins:["themes","xml_data","ui","types"]}).bind("select_node.jstree",function(){var h=jsTreeGetSelected(e);h={$item:h.$item,iconurl:h.iconurl,type:h.$item.CswAttrXml("viewtype"),viewid:h.$item.CswAttrXml("viewid"),viewname:h.text,viewmode:h.$item.CswAttrXml("viewmode"),actionid:h.$item.CswAttrXml("actionid"),actionurl:h.$item.CswAttrXml("actionurl"),reportid:h.$item.CswAttrXml("reportid")};b.onSelect(h)});b.onSuccess()}});return this}})(jQuery);(function(a){function d(h){var i={$item:"",$table:"",onAddClick:function(){},onLinkClick:function(){},onSearchClick:function(){}};h&&a.extend(i,h);h={type:i.$item.CswAttrXml("type"),viewmode:i.$item.CswAttrXml("viewmode"),itemid:i.$item.CswAttrXml("itemid"),text:i.$item.CswAttrXml("text"),iconurl:i.$item.CswAttrXml("iconurl"),viewid:i.$item.CswAttrXml("viewid"),actionid:i.$item.CswAttrXml("actionid"),reportid:i.$item.CswAttrXml("reportid"),linktype:i.$item.CswAttrXml("linktype")};if(i.$table.CswLayoutTable("isConfig")===
false)switch(h.linktype.toLowerCase()){case "add":i.onAddClick(i.$item.CswAttrXml("nodetypeid"));break;case "link":i.onLinkClick(h);break;case "search":i.onSearchClick(h)}}function b(h){var i={cellset:"",row:"",column:"",RemoveWelcomeItemUrl:"",onSuccess:function(){}};h&&a.extend(i,h);h=a(i.cellset[2][1]);if(h.length>0){h={RoleId:"",WelcomeId:h.find("input").CswAttrDom("welcomeid")};CswAjaxJSON({url:i.RemoveWelcomeItemUrl,data:h,success:function(){i.onSuccess()}})}}function e(h){var i={AddWelcomeItemUrl:"",
type:"",viewtype:"",viewvalue:"",nodetypeid:"",text:"",iconfilename:"",onSuccess:function(){},onError:function(){}};h&&a.extend(i,h);CswAjaxJSON({url:i.AddWelcomeItemUrl,data:{RoleId:"",Type:i.type,ViewType:i.viewtype,ViewValue:i.viewvalue,NodeTypeId:i.nodetypeid,Text:i.text,IconFileName:i.iconfilename},success:function(){i.onSuccess()},error:i.onError})}function g(h,i,n,k){i=a(i[2][1]);if(i.length>0){i=i.find("input").CswAttrDom("welcomeid");isNullOrEmpty(i)||CswAjaxJSON({url:h,data:{RoleId:"",WelcomeId:i,
NewRow:n,NewColumn:k},success:function(){}})}}var f={initTable:function(h){var i={Url:"/NbtWebApp/wsNBT.asmx/getWelcomeItems",MoveWelcomeItemUrl:"/NbtWebApp/wsNBT.asmx/moveWelcomeItems",RemoveWelcomeItemUrl:"/NbtWebApp/wsNBT.asmx/deleteWelcomeItem",onLinkClick:function(){},onSearchClick:function(){},onAddClick:function(){},onAddComponent:function(){}};h&&a.extend(i,h);var n=a(this);CswAjaxXml({url:i.Url,data:{RoleId:""},stringify:false,success:function(k){var s=a('<div id="welcomediv"></div>').appendTo(n).css("text-align",
"center").css("font-size","1.2em").CswLayoutTable("init",{ID:"welcometable",cellset:{rows:2,columns:1},TableCssClass:"WelcomeTable",cellpadding:10,align:"center",onSwap:function(m,j){var l={cellset:j.cellset,row:j.row,column:j.column,swapcellset:j.swapcellset,swaprow:j.swaprow,swapcolumn:j.swapcolumn,MoveWelcomeItemUrl:i.MoveWelcomeItemUrl},q={cellset:"",row:"",column:"",swapcellset:"",swaprow:"",swapcolumn:"",MoveWelcomeItemUrl:""};l&&a.extend(q,l);g(q.MoveWelcomeItemUrl,q.cellset,q.swaprow,q.swapcolumn);
g(q.MoveWelcomeItemUrl,q.swapcellset,q.row,q.column)},showConfigButton:true,showAddButton:true,showRemoveButton:true,onAddClick:function(){a.CswDialog("AddWelcomeItemDialog",{onAdd:i.onAddComponent})},onRemove:function(m,j){b({cellset:j.cellset,row:j.row,column:j.column,RemoveWelcomeItemUrl:i.RemoveWelcomeItemUrl})}});k.children().each(function(){var m=a(this),j=s.CswLayoutTable("cellset",m.CswAttrXml("displayrow"),m.CswAttrXml("displaycol")),l=j[1][1].children("div");j=j[2][1].children("div");m.CswAttrXml("buttonicon")!==
undefined&&m.CswAttrXml("buttonicon")!==""&&l.append(a('<a href=""><img border="0" src="'+m.CswAttrXml("buttonicon")+'"/></a>'));var q={$item:m,$table:s,onAddClick:i.onAddClick,onLinkClick:i.onLinkClick,onSearchClick:i.onSearchClick};if(m.CswAttrXml("linktype").toLowerCase()==="text")j.append("<span>"+m.CswAttrXml("text")+"</span>");else{j.append(a('<a href="">'+m.CswAttrXml("text")+"</a>"));j.find("a").click(function(){d(q);return false});l.find("a").click(function(){d(q);return false})}j.CswInput("init",
{ID:m.CswAttrXml("welcomeid"),type:CswInput_Types.hidden}).CswAttrDom("welcomeid",m.CswAttrXml("welcomeid"))})}})},getAddItemForm:function(h){var i={AddWelcomeItemUrl:"/NbtWebApp/wsNBT.asmx/addWelcomeItem",onAdd:function(){}};h&&a.extend(i,h);h=a(this).CswTable("init",{ID:"addwelcomeitem_tbl"});a("<span>Type:</span>").appendTo(h.CswTable("cell",1,1));var n=a('<select id="welcome_type" name="welcome_type"></select>').appendTo(h.CswTable("cell",1,2));n.append('<option value="Add" selected>Add</option>');
n.append('<option value="Link">Link</option>');n.append('<option value="Search">Search</option>');n.append('<option value="Text">Text</option>');var k=a("<span>View:</span>").appendTo(h.CswTable("cell",2,1)).hide(),s=h.CswTable("cell",2,2).CswTable("init",{ID:"viewselecttable"}),m=s.CswTable("cell",1,1).CswViewSelect({ID:"welcome_viewsel"}).hide(),j=s.CswTable("cell",2,1).CswViewSelect({ID:"welcome_searchviewsel",issearchable:true,usesession:false}).hide(),l=a("<span>Add New:</span>").appendTo(h.CswTable("cell",
3,1)),q=h.CswTable("cell",3,2).CswNodeTypeSelect({ID:"welcome_ntsel"});a("<span>Text:</span>").appendTo(h.CswTable("cell",4,1));var t=h.CswTable("cell",4,2).CswInput("init",{ID:"welcome_text",type:CswInput_Types.text}),y=a("<span>Use Button:</span>").appendTo(h.CswTable("cell",5,1)),A=a('<select id="welcome_button" />').appendTo(h.CswTable("cell",5,2));A.append('<option value="blank.gif"></option>');var C=a('<img id="welcome_btnimg" />').appendTo(h.CswTable("cell",6,2)),x=h.CswTable("cell",7,2).CswButton({ID:"welcome_add",
enabledText:"Add",disabledText:"Adding",onclick:function(){var w="",v="";if(m.is(":hidden")){if(!j.is(":hidden")){v=j.CswViewSelect("value");w=v.type;v=v.value}}else{v=m.CswViewSelect("value");w=v.type;v=v.value}e({AddWelcomeItemUrl:i.AddWelcomeItemUrl,type:n.val(),viewtype:w,viewvalue:v,nodetypeid:q.CswNodeTypeSelect("value"),text:t.val(),iconfilename:A.val(),onSuccess:i.onAdd,onError:function(){x.CswButton("enable")}})}});h.CswTable("cell",7,2).append(x);A.change(function(){C.CswAttrDom("src","Images/biggerbuttons/"+
A.val())});n.change(function(){var w={$typeselect:n,$viewselect_label:k,$viewselect:m,$searchviewselect:j,$ntselect_label:l,$ntselect:q,$buttonsel_label:y,$buttonsel:A,$buttonimg:C},v={$typeselect:"",$viewselect_label:"",$viewselect:"",$searchviewselect:"",$ntselect_label:"",$ntselect:"",$buttonsel_label:"",$buttonsel:"",$buttonimg:""};w&&a.extend(v,w);switch(v.$typeselect.val()){case "Add":v.$viewselect_label.hide();v.$viewselect.hide();v.$searchviewselect.hide();v.$ntselect_label.show();v.$ntselect.show();
v.$buttonsel_label.show();v.$buttonsel.show();v.$buttonimg.show();break;case "Link":v.$viewselect_label.show();v.$viewselect.show();v.$searchviewselect.hide();v.$ntselect_label.hide();v.$ntselect.hide();v.$buttonsel_label.show();v.$buttonsel.show();v.$buttonimg.show();break;case "Search":v.$viewselect_label.show();v.$viewselect.hide();v.$searchviewselect.show();v.$ntselect_label.hide();v.$ntselect.hide();v.$buttonsel_label.show();v.$buttonsel.show();v.$buttonimg.show();break;case "Text":v.$viewselect_label.hide();
v.$viewselect.hide();v.$searchviewselect.hide();v.$ntselect_label.hide();v.$ntselect.hide();v.$buttonsel_label.hide();v.$buttonsel.hide();v.$buttonimg.hide()}});CswAjaxXml({url:"/NbtWebApp/wsNBT.asmx/getWelcomeButtonIconList",success:function(w){w.children().each(function(){var v=a(this).CswAttrDom("filename");v!=="blank.gif"&&A.append('<option value="'+v+'">'+v+"</option>")})}})}};a.fn.CswWelcome=function(h){if(f[h])return f[h].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof h===
"object"||!h)return f.init.apply(this,arguments);else a.error("Method "+h+" does not exist on CswWelcome")}})(jQuery);(function(a){function d(g){return parseInt(g.find(".CswWizard_StepLinkDivSelected").CswAttrDom("stepno"))}function b(g,f){var h=g.CswAttrDom("stepcount"),i=g.CswAttrDom("startingstep");if(f>0&&f<=h){g.find(".CswWizard_StepLinkDiv").removeClass("CswWizard_StepLinkDivSelected");g.find(".CswWizard_StepLinkDiv[stepno="+f+"]").addClass("CswWizard_StepLinkDivSelected");g.find(".CswWizard_StepDiv").hide();g.find(".CswWizard_StepDiv[stepno="+f+"]").show();var n=a("#"+g.CswAttrDom("id")+"_prev");f<=i?n.CswButton("disable"):
n.CswButton("enable");i=a("#"+g.CswAttrDom("id")+"_next");f>=h?i.CswButton("disable"):i.CswButton("enable")}}var e={init:function(g){var f={ID:"",Title:"A Wizard",StepCount:1,Steps:{1:"Default"},StartingStep:1,SelectedStep:1,FinishText:"Finish",onNext:function(){},onPrevious:function(){},onBeforeNext:function(){return true},onBeforePrevious:function(){return true},onFinish:function(){},onCancel:function(){}};g&&a.extend(f,g);if(f.StartingStep>f.SelectedStep)f.SelectedStep=f.StartingStep;var h=a(this).CswTable({ID:f.ID,
TableCssClass:"CswWizard_WizardTable"});h.CswAttrDom("stepcount",f.StepCount);h.CswAttrDom("startingstep",f.StartingStep);h.CswTable("cell",1,1).addClass("CswWizard_TitleCell").CswAttrDom("colspan",2).append(f.Title);g=h.CswTable("cell",2,1).CswAttrDom("rowspan",2).addClass("CswWizard_IndexCell");for(var i=h.CswTable("cell",2,2).addClass("CswWizard_StepsCell"),n=h.CswTable("cell",3,1).addClass("CswWizard_ButtonsCell"),k=1;k<=f.StepCount;k++){var s=f.Steps[k];a('<div class="CswWizard_StepLinkDiv" stepno="'+
k+'">'+k+".&nbsp;"+s+"</div>").appendTo(g);a('<div class="CswWizard_StepDiv" id="'+f.ID+"_"+k+'" stepno="'+k+'" ><span class="CswWizard_StepTitle">'+s+'</span><br/></br><div id="'+f.ID+"_"+k+'_content"></div></div>').appendTo(i)}i=n.CswTable({ID:f.ID+"_btntbl",width:"100%"});g=i.CswTable("cell",1,1).CswAttrDom("align","right").CswAttrDom("width","65%");i=i.CswTable("cell",1,2).CswAttrDom("align","right").CswAttrDom("width","35%");g.CswButton("init",{ID:f.ID+"_prev",enabledText:"< Previous",disableOnClick:false,
onclick:function(){var m=d(h);if(f.onBeforePrevious(h,m)){b(h,m-1);f.onPrevious(m-1)}}});g.CswButton("init",{ID:f.ID+"_next",enabledText:"Next >",disableOnClick:false,onclick:function(){var m=d(h);if(f.onBeforeNext(m)){b(h,m+1);f.onNext(h,m+1)}}});g.CswButton("init",{ID:f.ID+"_finish",enabledText:f.FinishText,onclick:function(){f.onFinish(h)}});i.CswButton("init",{ID:f.ID+"_cancel",enabledText:"Cancel",onclick:function(){f.onCancel(h)}});b(h,f.SelectedStep);f.onNext(h,f.SelectedStep);return h},div:function(g){return a(this).find(".CswWizard_StepDiv[stepno="+
g+"] div")},button:function(g,f){var h=a(this);switch(g){case "previous":a("#"+h.CswAttrDom("id")+"_prev").CswButton(f);break;case "next":a("#"+h.CswAttrDom("id")+"_next").CswButton(f);break;case "finish":a("#"+h.CswAttrDom("id")+"_finish").CswButton(f);break;case "cancel":a("#"+h.CswAttrDom("id")+"_cancel").CswButton(f)}}};a.fn.CswWizard=function(g){if(e[g])return e[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||!g)return e.init.apply(this,arguments);else a.error("Method "+
g+" does not exist on CswWizard")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("barcode").text().trim();if(b.ReadOnly)e.append(g);else{e=e.CswTable("init",{ID:b.ID+"_tbl"});g=e.CswTable("cell",1,1).CswInput("init",{ID:b.ID,type:CswInput_Types.text,cssclass:"textinput",onChange:b.onchange,value:g});e=e.CswTable("cell",1,2);a("<div/>").appendTo(e).CswImageButton({ButtonType:CswImageButton_ButtonType.Print,AlternateText:"",ID:b.ID+"_print",onClick:function(){a.CswDialog("PrintLabelDialog",
{nodeid:b.nodeid,propid:b.ID});return CswImageButton_ButtonType.None}});b.Required&&g.addClass("required")}},save:function(b){var e=b.$propdiv.find("input");b.$propxml.children("barcode").text(e.val())}};a.fn.CswFieldTypeBarcode=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeBarcode")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();b=b.$propxml.children("value").text().trim();e.append(b)},save:function(){}};a.fn.CswFieldTypeComposite=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeComposite")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("value").text().trim();if(g==="1/1/0001")g="";if(b.ReadOnly)e.append(g);else{e=e.CswInput("init",{ID:b.ID,type:CswInput_Types.text,value:g,onChange:b.onchange,cssclass:"textinput date"});e.datepicker();b.Required&&e.addClass("required")}},save:function(b){var e=b.$propdiv.find("input");b.$propxml.children("value").text(e.val())}};a.fn.CswFieldTypeDate=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,
1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeDate")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("href").text().trim(),f=b.$propxml.children("name").text().trim(),h=e.CswTable("init",{ID:b.ID+"_tbl"});e=h.CswTable("cell",1,1);var i=h.CswTable("cell",1,2);h=h.CswTable("cell",1,3);e.append('<a href="'+g+'" target="_blank">'+f+"</a>");if(!b.ReadOnly&&b.EditMode!=EditMode.AddInPopup.name){a("<div/>").appendTo(i).CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID+
"_edit",onClick:function(){a.CswDialog("FileUploadDialog",{url:"/NbtWebApp/wsNBT.asmx/fileForProp",params:{PropId:b.$propxml.CswAttrXml("id")},onSuccess:function(){b.onReload()}});return CswImageButton_ButtonType.None}});a("<div/>").appendTo(h).CswImageButton({ButtonType:CswImageButton_ButtonType.Clear,AlternateText:"Clear",ID:b.ID+"_clr",onClick:function(){if(confirm("Are you sure you want to clear this file?")){var n={PropId:b.$propxml.CswAttrXml("id"),IncludeBlob:true};CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/clearProp",
data:n,success:function(){b.onReload()}})}return CswImageButton_ButtonType.None}})}},save:function(){}};a.fn.CswFieldTypeFile=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeFile")}})(jQuery);(function(a){var d={init:function(b){function e(j){var l={reinit:true};j&&a.extend(j,l);k.CswNodeGrid("init",j)}var g=a(this);g.empty();var f=makeId({prefix:b.ID,ID:"grid_as_fieldtype_menu"});f=a('<div id="'+f+'" name="'+f+'"></div>');var h=makeId({prefix:b.ID,ID:"grid_as_fieldtype_search"}),i=a('<div id="'+h+'" name="'+h+'"></div>'),n=makeId({prefix:b.ID,ID:"grid_as_fieldtype"}),k=a('<div id="'+n+'" name="'+n+'"></div>'),s=b.$propxml.children("viewid").text().trim(),m={ID:b.ID,viewid:s,nodeid:b.nodeid,
cswnbtnodekey:b.cswnbtnodekey,readonly:b.ReadOnly,reinit:false,EditMode:b.EditMode,onEditNode:function(){e(m)},onDeleteNode:function(){e(m)}};k.CswNodeGrid("init",m);b.EditMode!==EditMode.PrintReport.name&&f.CswMenuMain({viewid:s,nodeid:b.nodeid,cswnbtnodekey:b.cswnbtnodekey,onAddNode:function(){e(m)},onSearch:{onViewSearch:function(){i.empty();i.CswSearch({parentviewid:s,cswnbtnodekey:b.cswnbtnodekey,ID:h,onSearchSubmit:function(j){var l={};a.extend(l,m);l.viewid=j;e(l)},onClearSubmit:function(j){var l=
{};a.extend(l,m);l.viewid=j;e(l)}})},onGenericSearch:function(){}},onEditView:function(){b.onEditView(s)}});g.append(f,a("<br/>"),i,a("<br/>"),k)},save:function(){}};a.fn.CswFieldTypeGrid=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeGrid")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("href").text().trim(),f=b.$propxml.children("href").CswAttrXml("width"),h=b.$propxml.children("href").CswAttrXml("height"),i=b.$propxml.children("name").text().trim(),n=e.CswTable("init",{ID:b.ID+"_tbl"});e=n.CswTable("cell",1,1).CswAttrDom("colspan","3");var k=n.CswTable("cell",2,1).CswAttrDom("width",f-36),s=n.CswTable("cell",2,2).CswAttrDom("align","right");n=n.CswTable("cell",2,3).CswAttrDom("align",
"right");if(i!==""){a('<a href="'+g+'" target="_blank"><img src="'+g+'" alt="'+i+'" width="'+f+'" height="'+h+'"/></a>').appendTo(e);k.append('<a href="'+g+'" target="_blank">'+i+"</a>")}if(!b.ReadOnly&&b.EditMode!=EditMode.AddInPopup.name){a("<div/>").appendTo(s).CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID+"_edit",onClick:function(){a.CswDialog("FileUploadDialog",{url:"/NbtWebApp/wsNBT.asmx/fileForProp",params:{PropId:b.$propxml.CswAttrXml("id")},onSuccess:function(){b.onReload()}});
return CswImageButton_ButtonType.None}});a("<div/>").appendTo(n).CswImageButton({ButtonType:CswImageButton_ButtonType.Clear,AlternateText:"Clear",ID:b.ID+"_clr",onClick:function(){if(confirm("Are you sure you want to clear this image?")){var m={PropId:b.$propxml.CswAttrXml("id"),IncludeBlob:true};CswAjaxJSON({url:"/NbtWebApp/wsNBT.asmx/clearProp",data:m,success:function(){b.onReload()}})}return CswImageButton_ButtonType.None}})}},save:function(){}};a.fn.CswFieldTypeImage=function(b){if(d[b])return d[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeImage")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("text").text().trim(),f=b.$propxml.children("href").text().trim();if(b.ReadOnly)e.append(Value);else{var h=e.CswTable("init",{ID:b.ID+"_tbl"});a('<a href="'+f+'" target="_blank">'+g+"</a>&nbsp;&nbsp;").appendTo(h.CswTable("cell",1,1));a("<div/>").appendTo(h.CswTable("cell",1,2)).CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID+"_edit",Required:b.Required,onClick:function(){i.show();
return CswImageButton_ButtonType.None}});var i=e.CswTable("init",{ID:b.ID+"_edittbl"}).hide();a("<span>Text</span>").appendTo(i.CswTable("cell",1,1));e=i.CswTable("cell",1,2).CswInput("init",{ID:b.ID+"_text",type:CswInput_Types.text,value:g,onChange:b.onchange});a("<span>URL</span>").appendTo(i.CswTable("cell",2,1));g=i.CswTable("cell",2,2).CswInput("init",{ID:b.ID+"_href",type:CswInput_Types.text,value:f,onChange:b.onchange});if(b.Required&&f===""){i.show();e.addClass("required");g.addClass("required")}}},
save:function(b){var e=b.$propdiv.find("#"+b.ID+"_text"),g=b.$propdiv.find("#"+b.ID+"_href");b.$propxml.children("text").text(e.val());b.$propxml.children("href").text(g.val())}};a.fn.CswFieldTypeLink=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeLink")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("value").text().trim(),f=b.$propxml.children("options").text().trim();if(b.ReadOnly)e.append(g);else{e=a('<select id="'+b.ID+'" name="'+b.ID+'" class="selectinput" />"').appendTo(e).change(b.onchange);f=f.split(",");for(var h=0;h<f.length;h++)e.append('<option value="'+f[h]+'">'+f[h]+"</option>");e.val(g);b.Required&&e.addClass("required")}},save:function(b){var e=b.$propdiv.find("select");b.$propxml.children("value").text(e.val())}};
a.fn.CswFieldTypeList=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeList")}})(jQuery);(function(a){a.fn.CswFieldTypeLocation=function(d){function b(g,f,h,i,n){if(f==="root")f="";g.CswComboBox("TopContent",h);if(g.val()!==f){g.val(f);n()}setTimeout(function(){g.CswComboBox("close")},300)}var e={init:function(g){var f=a(this);f.contents().remove();var h=g.$propxml.children("nodeid").text().trim(),i=g.$propxml.children("nodekey").text().trim(),n=g.$propxml.children("name").text().trim(),k=g.$propxml.children("path").text().trim(),s=g.$propxml.children("viewid").text().trim();if(g.ReadOnly)f.append(k);
else{f=f.CswTable("init",{ID:g.ID+"_tbl"});var m=f.CswTable("cell",1,1);m.CswAttrDom("colspan","2");m.append(k+"<br/>");k=f.CswTable("cell",2,1);var j=a('<div class="locationselect" value="'+h+'"/>').appendTo(k);h=a("<div />").CswNodeTree("init",{ID:g.ID,viewid:s,nodeid:h,cswnbtnodekey:i,onSelectNode:function(l){b(j,l.nodeid,l.nodename,l.iconurl,g.onchange)},onInitialSelectNode:function(l){b(j,l.nodeid,l.nodename,l.iconurl,function(){})},SelectFirstChild:false,UsePaging:false,IncludeInQuickLaunch:false});
j.CswComboBox("init",{ID:g.ID+"_combo",TopContent:n,SelectContent:h,Width:"266px"})}},save:function(g){var f=g.$propdiv.find(".locationselect");g.$propxml.children("nodeid").text(f.val())}};if(e[d])return e[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return e.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswFieldTypeLocation")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();b.$propxml.children("value").text().trim();e.append("[Not Implemented Yet]")},save:function(){}};a.fn.CswFieldTypeLocationContents=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeLocationContents")}})(jQuery);(function(a){var d={init:function(b){$Div=a(this);b={Checked:b.$propxml.children("checked").text().trim(),Required:b.Required,ReadOnly:b.ReadOnly,onchange:b.onchange};$Div.CswTristateCheckBox("init",b)},save:function(b){$Div=b.$propdiv.find("div");var e=$Div.CswTristateCheckBox("value");b.$propxml.children("checked").text(e)}};a.fn.CswFieldTypeLogical=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);
else a.error("Method "+b+" does not exist on CswFieldTypeLogical")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("logicalsetxml");e=a("<div />").appendTo(e);var f=[],h=0;g.find("item").first().children("column").each(function(){var k=a(this).CswAttrXml("field");if(k!=="name"&&k!="key"){f[h]=k;h++}});var i=[],n=0;g.find("item").each(function(){for(var k=a(this),s=[],m=0,j=0;j<f.length;j++){var l=k.children('column[field="'+f[j]+'"]').CswAttrXml("value");s[m]=l==="True";m++}k={label:k.children('column[field="name"]').CswAttrXml("value"),
key:k.children('column[field="key"]').CswAttrXml("value"),values:s};i[n]=k;n++});e.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:f,data:i,onchange:b.onchange,ReadOnly:b.ReadOnly})},save:function(b){var e=b.$propxml.children("logicalsetxml");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var g=0;g<b.length;g++)for(var f=0;f<b[g].length;f++){var h=b[g][f],i=e.find('item:has(column[field="key"][value="'+h.key+'"])').find('column[field="'+h.collabel+'"]');if(h.checked&&
i.CswAttrXml("value")==="False")i.CswAttrXml("value","True");else!h.checked&&i.CswAttrXml("value")==="True"&&i.CswAttrXml("value","False")}}};a.fn.CswFieldTypeLogicalSet=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeLogicalSet")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("text").text().trim(),f=b.$propxml.children("text").CswAttrXml("rows"),h=b.$propxml.children("text").CswAttrXml("columns");if(b.ReadOnly)e.append(g);else{e=a('<textarea id="'+b.ID+'" name="'+b.ID+'" rows="'+f+'" cols="'+h+'">'+g+"</textarea>").appendTo(e).change(b.onchange);b.Required&&e.addClass("required")}},save:function(b){var e=b.$propdiv.find("textarea");b.$propxml.children("text").text(e.val())}};
a.fn.CswFieldTypeMemo=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeMemo")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("startdatetime").text().trim(),f=b.$propxml.children("value").text().trim(),h=b.$propxml.children("units").text().trim();e=e.CswTable("init",{ID:b.ID+"_tbl"});var i=e.CswTable("cell",1,1),n=e.CswTable("cell",1,2);i.append(f+"&nbsp;"+h);if(!b.ReadOnly){n.CswImageButton({ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",ID:b.ID,onClick:function(){k.show()}});var k=e.CswTable("cell",2,2).CswTable("init",
{ID:b.ID+"_edittbl"});k.CswTable("cell",1,1).append("Start Date");k.CswTable("cell",1,2).CswInput("init",{ID:b.ID+"_sd",type:CswInput_Types.text,cssclass:"textinput date",value:g,onChange:b.onchange}).datepicker();k.CswTable("cell",3,1).append("Units");b=a('<select id="'+b.ID+'_units" />').appendTo(k.CswTable("cell",3,2)).change(b.onchange);g=a('<option value="hours">hours</option>').appendTo(b);h==="hours"&&g.CswAttrDom("selected","true");b=a('<option value="days">days</option>').appendTo(b);h===
"days"&&b.CswAttrDom("selected","true");k.hide()}},save:function(b){var e=b.$propdiv.find("#"+b.ID+"_sd").val(),g=b.$propdiv.find("#"+b.ID+"_units").val();b.$propxml.children("startdatetime").text(e);b.$propxml.children("units").text(g)}};a.fn.CswFieldTypeMTBF=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeMTBF")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("options");b.$propxml.children("NodeType").text().trim();var f=b.$propxml.children("NodeType").CswAttrXml("SelectMode");e=a("<div />").appendTo(e);var h=[],i=0;g.find("item").each(function(){var n=a(this);n={label:n.children('column[field="NodeTypeName"]').CswAttrXml("value"),key:n.children('column[field="nodetypeid"]').CswAttrXml("value"),values:[n.children('column[field="Include"]').CswAttrXml("value")===
"True"]};h[i]=n;i++});e.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:["Include"],data:h,UseRadios:f==="Single",Required:b.Required,ReadOnly:b.ReadOnly,onchange:b.onchange})},save:function(b){var e=b.$propxml.children("options");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var g=0;g<b.length;g++){var f=b[g][0],h=e.find('item:has(column[field="nodetypeid"][value="'+f.key+'"])').find('column[field="Include"]');if(f.checked&&h.CswAttrXml("value")==="False")h.CswAttrXml("value",
"True");else!f.checked&&h.CswAttrXml("value")==="True"&&h.CswAttrXml("value","False")}}};a.fn.CswFieldTypeNodeTypeSelect=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeNodeTypeSelect")}})(jQuery);(function(a){var d={init:function(b){a(this).CswNumberTextBox({ID:b.ID,Value:b.$propxml.children("value").text().trim(),MinValue:b.$propxml.children("value").CswAttrXml("minvalue"),MaxValue:b.$propxml.children("value").CswAttrXml("maxvalue"),Precision:b.$propxml.children("value").CswAttrXml("precision"),ReadOnly:b.ReadOnly,Required:b.Required,onchange:b.onchange})},save:function(b){b.$propxml.children("value").text(b.$propdiv.CswNumberTextBox("value"))}};a.fn.CswFieldTypeNumber=function(b){if(d[b])return d[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeNumber")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();if(!b.ReadOnly){var g=e.CswTable("init",{ID:b.ID+"_tbl"});e=g.CswTable("cell",1,1);g=g.CswTable("cell",2,1);e.CswInput("init",{ID:b.ID+"_pwd1",type:CswInput_Types.password,cssclass:"textinput",onChange:b.onchange});g.CswInput("init",{ID:b.ID+"_pwd2",type:CswInput_Types.password,cssclass:"textinput password2",onChange:b.onchange});jQuery.validator.addMethod("password2",function(){var f=a("#"+b.ID+"_pwd1").val(),h=a("#"+b.ID+"_pwd2").val();
return f===""&&h===""||f===h},"Passwords do not match!")}},save:function(b){var e=b.$propdiv.find("input#"+b.ID+"_pwd1").val();e!==""&&b.$propxml.children("newpassword").text(e)}};a.fn.CswFieldTypePassword=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypePassword")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("value").text().trim();g+="&nbsp;";a('<div id="'+b.ID+'" class="staticvalue">'+g+"</div>").appendTo(e)},save:function(){}};a.fn.CswFieldTypePropertyReference=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypePropertyReference")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();e.CswNumberTextBox({ID:b.ID+"_qty",Value:b.$propxml.children("value").text().trim(),MinValue:b.$propxml.children("value").CswAttrXml("minvalue"),MaxValue:b.$propxml.children("value").CswAttrXml("maxvalue"),Precision:b.$propxml.children("value").CswAttrXml("precision"),ReadOnly:b.ReadOnly,Required:b.Required,onchange:b.onchange});var g=b.$propxml.children("units").contents().first().text(),f=a('<select id="'+b.ID+'_units" />').appendTo(e).change(b.onchange);
b.$propxml.children("units").children().each(function(){var h=a(this).CswAttrXml("value"),i=a('<option value="'+h+'">'+h+"</option>").appendTo(f);g===h&&i.CswAttrDom("selected","true")})},save:function(b){b.$propxml.children("value").text(b.$propdiv.CswNumberTextBox("value"));var e=b.$propdiv.find("#"+b.ID+"_units").val();b.$propxml.children("units").text(e)}};a.fn.CswFieldTypeQuantity=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||
!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeQuantity")}})(jQuery);(function(a){function d(e,g,f,h){e=e.split(",");var i=true,n=g.val(),k=h.val();if(n!==""&&k===""){i=false;for(var s=0;s<e.length;s++)if(e[s]===n)i=true}if(i){g.removeClass("CswFieldTypeQuestion_OOC");if(k===""){f.hide();h.hide()}}else{g.addClass("CswFieldTypeQuestion_OOC");f.show();h.show()}}var b={init:function(e){var g=a(this);g.contents().remove();var f=e.$propxml.children("answer").text().trim(),h=e.$propxml.children("allowedanswers").text().trim(),i=e.$propxml.children("compliantanswers").text().trim(),
n=e.$propxml.children("comments").text().trim(),k=e.$propxml.children("correctiveaction").text().trim(),s=e.$propxml.children("dateanswered").text().trim(),m=e.$propxml.children("datecorrected").text().trim();e.$propxml.children("iscompliant").text().trim();if(e.ReadOnly){g.append("Answer: "+f);s!==""&&g.append(" ("+s+")");g.append("<br/>");g.append("Corrective Action: "+k);m!==""&&g.append(" ("+m+")");g.append("<br/>");g.append("Comments: "+n+"<br/>")}else{g=g.CswTable("init",{ID:e.ID+"_tbl",FirstCellRightAlign:true});
g.CswTable("cell",1,1).append("Answer");h=h.split(",");var j=a('<select id="'+e.ID+'_ans" />').appendTo(g.CswTable("cell",1,2)).change(function(){d(i,j,q,t);e.onchange()});s=a('<option value=""></option>').appendTo(j);for(m=0;m<h.length;m++){var l=h[m];s=a('<option value="'+l+'">'+l+"</option>").appendTo(j);l===f&&s.CswAttrDom("selected","true")}var q=g.CswTable("cell",2,1).append("Corrective Action"),t=a('<textarea id="'+e.ID+'_cor" />').appendTo(g.CswTable("cell",2,2)).text(k).change(function(){d(i,
j,q,t);e.onchange()});g.CswTable("cell",3,1).append("Comments");a('<textarea id="'+e.ID+'_com" />').appendTo(g.CswTable("cell",3,2)).text(n).change(e.onchange);d(i,j,q,t)}},save:function(e){var g=e.$propdiv.find("#"+e.ID+"_ans").val(),f=e.$propdiv.find("#"+e.ID+"_cor").val(),h=e.$propdiv.find("#"+e.ID+"_com").val();e.$propxml.children("answer").text(g);e.$propxml.children("correctiveaction").text(f);e.$propxml.children("comments").text(h)}};a.fn.CswFieldTypeQuestion=function(e){if(b[e])return b[e].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof e==="object"||!e)return b.init.apply(this,arguments);else a.error("Method "+e+" does not exist on CswFieldTypeQuestion")}})(jQuery);(function(a){a.fn.CswFieldTypeRelationship=function(d){var b={init:function(e){var g=a(this);g.contents().remove();var f=e.$propxml.children("nodeid").text().trim();if(e.relatednodeid!==""&&e.relatednodeid!==undefined&&(f===""||f===undefined))f=e.relatednodeid;var h=e.$propxml.children("name").text().trim(),i=e.$propxml.children("nodetypeid").text().trim(),n=isTrue(e.$propxml.children("allowadd").text().trim()),k=e.$propxml.children("options");if(e.ReadOnly)g.append(h);else{g=g.CswTable("init",{ID:e.ID+
"_tbl"});h=g.CswTable("cell",1,1);var s=a('<select id="'+e.ID+'" name="'+e.ID+'" class="selectinput" />"').appendTo(h).change(e.onchange);k.children().each(function(){var m=a(this);s.append('<option value="'+m.CswAttrXml("id")+'">'+m.CswAttrXml("value")+"</option>")});s.val(f);if(!isNullOrEmpty(i)&&n){f=g.CswTable("cell",1,2);a("<div />").appendTo(f).CswImageButton({ButtonType:CswImageButton_ButtonType.Add,AlternateText:"Add New",onClick:function(){a.CswDialog("AddNodeDialog",{nodetypeid:i,onAddNode:function(){e.onReload()}});
return CswImageButton_ButtonType.None}})}e.Required&&s.addClass("required")}},save:function(e){var g=e.$propdiv.find("select");e.$propxml.children("nodeid").text(g.val())}};if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on CswFieldTypeRelationship")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("sequence").text().trim();if(b.ReadOnly)e.append(g);else{e=e.CswInput("init",{ID:b.ID,type:CswInput_Types.text,cssclass:"textinput",onChange:b.onchange,value:g});b.Required&&e.addClass("required")}},save:function(b){var e=b.$propdiv.find("input");b.$propxml.children("sequence").text(e.val())}};a.fn.CswFieldTypeSequence=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));
else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeSequence")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("text").text().trim(),f=parseInt(b.$propxml.children("text").CswAttrXml("columns"));b=parseInt(b.$propxml.children("text").CswAttrXml("rows"));var h="auto",i="",n="";if(f>0&&b>0){h="scroll";i=Math.round(f+2-f/2.25)+"em";n=Math.round(b+2.5+b/5)+"em"}else if(f>0)i=Math.round(f-f/2.25)+"em";else if(b>0)n=Math.round(b+0.5+b/5)+"em";a('<div class="staticvalue" style="overflow: '+h+"; width: "+i+"; height: "+
n+';">'+g+"</div>").appendTo(e)},save:function(){}};a.fn.CswFieldTypeStatic=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeStatic")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("text").text().trim(),f=tryParseNumber(b.$propxml.children("text").CswAttrXml("length"),14);if(b.ReadOnly)e.append(g);else{e=e.CswInput("init",{ID:b.ID,type:CswInput_Types.text,value:g,cssclass:"textinput",width:f*7,onChange:b.onchange});b.Required&&e.addClass("required")}},save:function(b){var e=b.$propdiv.find("input");b.$propxml.children("text").text(e.val())}};a.fn.CswFieldTypeText=function(b){if(d[b])return d[b].apply(this,
Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeText")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("value").text().trim();if(b.ReadOnly)e.append(g);else{var f=e.CswInput("init",{ID:b.ID,type:CswInput_Types.text,cssclass:"textinput validateTime",onChange:b.onchange,value:g});e.CswButton("init",{ID:b.ID+"_now",disableOnClick:false,onclick:function(){f.val(getTimeString(new Date))},enabledText:"Now"});jQuery.validator.addMethod("validateTime",function(h,i){return this.optional(i)||validateTime(a(i).val())},
"Enter a valid time (e.g. 12:30 PM)");b.Required&&f.addClass("required")}},save:function(b){var e=b.$propdiv.find("input");b.$propxml.children("value").text(e.val())}};a.fn.CswFieldTypeTime=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeTime")}})(jQuery);(function(a){function d(f,h,i,n){f=f.CswTable("init",{ID:h,cellalign:"center"});f.CswTable("cell",1,1).append("Su");f.CswTable("cell",1,2).append("M");f.CswTable("cell",1,3).append("Tu");f.CswTable("cell",1,4).append("W");f.CswTable("cell",1,5).append("Th");f.CswTable("cell",1,6).append("F");f.CswTable("cell",1,7).append("Sa");for(var k=1;k<=7;k++){var s=CswInput_Types.checkbox;if(n)s=CswInput_Types.radio;f.CswTable("cell",2,k).CswInput("init",{ID:h+"_"+k,name:h,type:s,onChange:i,value:k})}}function b(f,
h){a('[name="'+f+'"]').CswAttrDom("checked","");for(var i=h.split(","),n=0;n<i.length;n++)switch(i[n]){case "Sunday":a("#"+f+"_1").CswAttrDom("checked","true");break;case "Monday":a("#"+f+"_2").CswAttrDom("checked","true");break;case "Tuesday":a("#"+f+"_3").CswAttrDom("checked","true");break;case "Wednesday":a("#"+f+"_4").CswAttrDom("checked","true");break;case "Thursday":a("#"+f+"_5").CswAttrDom("checked","true");break;case "Friday":a("#"+f+"_6").CswAttrDom("checked","true");break;case "Saturday":a("#"+
f+"_7").CswAttrDom("checked","true")}}function e(f){var h="";a('[name="'+f+'"]:checked').each(function(){var i=a(this);if(h!=="")h+=",";switch(i.val()){case "1":h+="Sunday";break;case "2":h+="Monday";break;case "3":h+="Tuesday";break;case "4":h+="Wednesday";break;case "5":h+="Thursday";break;case "6":h+="Friday";break;case "7":h+="Saturday"}});return h}var g={init:function(f){var h=a(this);h.contents().remove();var i=f.$propxml.children("Interval").CswAttrXml("text");h.append('<span id="'+f.ID+'_textvalue">'+
i+"</span>");if(!f.ReadOnly){var n=h.CswTable("init",{ID:f.ID+"_tbl",cellspacing:5});h=n.CswTable("cell",1,1).CswInput("init",{ID:f.ID+"_type_weekly",name:f.ID+"_type",type:CswInput_Types.radio,value:"weekly"});n.CswTable("cell",1,2).append("<span>&nbsp;Weekly</span>");h.click(function(){m.show();j.hide();L.hide();f.onchange()});i=n.CswTable("cell",2,1).CswInput("init",{ID:f.ID+"_type_monthly",name:f.ID+"_type",type:CswInput_Types.radio,value:"monthly"});n.CswTable("cell",2,2).append("<span>&nbsp;Monthly</span>");
i.click(function(){m.hide();j.show();L.hide();f.onchange()});var k=n.CswTable("cell",3,1).CswInput("init",{ID:f.ID+"_type_yearly",name:f.ID+"_type",type:CswInput_Types.radio,value:"yearly"});n.CswTable("cell",3,2).append("<span>&nbsp;Yearly</span>");k.click(function(){m.hide();j.hide();L.show();f.onchange()});var s=n.CswTable("cell",1,3);s.CswAttrDom("rowspan","3");var m=a("<div />").appendTo(s).addClass("CswFieldTypeTimeInterval_Div");n=m.CswTable("init",{ID:f.ID+"_weeklytbl",cellalign:"center",
FirstCellRightAlign:true});n.CswTable("cell",1,1).append("Every:");d(n.CswTable("cell",1,2),f.ID+"_weeklyday",f.onchange,false);n.CswTable("cell",2,1).append("Starting On:");n=n.CswTable("cell",2,2).CswInput("init",{ID:f.ID+"_weekly_sd",type:CswInput_Types.text,cssclass:"textinput date",onChange:f.onchange});n.datepicker();var j=a("<div />").appendTo(s).addClass("CswFieldTypeTimeInterval_Div");j.append("Every ");for(var l=a('<select id="'+f.ID+'_monthly_rate"/>').appendTo(j).change(f.onchange),q=
1;q<=12;q++)l.append('<option value="'+q+'">'+q+"</option>");j.append(" Month(s)<br/>");var t=j.CswInput("init",{ID:f.ID+"_monthly_by_date",name:f.ID+"_monthly",type:CswInput_Types.radio,onChange:f.onchange,value:"MonthlyByDate"});j.append("On Day of Month:&nbsp;");var y=a('<select id="'+f.ID+'_monthly_date" />').appendTo(j).change(f.onchange);for(q=1;q<=31;q++)y.append('<option value="'+q+'">'+q+"</option>");j.append("<br/>");var A=j.CswInput("init",{ID:f.ID+"_monthly_by_day",name:f.ID+"_monthly",
type:CswInput_Types.radio,onChange:f.onchange,value:"MonthlyByWeekAndDay"});j.append("Every&nbsp;");var C=a('<select id="'+f.ID+'_monthly_week" />').appendTo(j);C.append('<option value="1">First:</option>');C.append('<option value="2">Second:</option>');C.append('<option value="3">Third:</option>');C.append('<option value="4">Fourth:</option>');j.append("<br/>");d(j,f.ID+"_monthly_day",f.onchange,true);j.append("<br/>Starting On:&nbsp;");var x=a('<select id="'+f.ID+'_monthly_startMonth" />').appendTo(j).change(f.onchange);
for(q=1;q<=12;q++)x.append('<option value="'+q+'">'+q+"</option>");j.append("/");var w=a('<select id="'+f.ID+'_monthly_startYear" />').appendTo(j).change(f.onchange),v=(new Date).getFullYear();for(q=v-10;q<=v+10;q++)w.append('<option value="'+q+'">'+q+"</option>");w.val(v);var L=a("<div />").appendTo(s).addClass("CswFieldTypeTimeInterval_Div");L.append("Every Year, Starting On:<br/>");s=L.CswInput("init",{ID:f.ID+"_yearly_sd",type:CswInput_Types.text,cssclass:"textinput date",onChange:f.onchange});
s.datepicker();q=f.$propxml.children("interval").children("rateintervalvalue");switch(q.children("ratetype").text()){case "WeeklyByDay":h.CswAttrDom("checked","true");m.show();j.hide();L.hide();b(f.ID+"_weeklyday",q.children("weeklyday").text());n.val(q.children("startingdate").text());t.CswAttrDom("checked","true");break;case "MonthlyByDate":i.CswAttrDom("checked","true");m.hide();j.show();L.hide();t.CswAttrDom("checked","true");l.val(q.children("monthlyfrequency").text());y.val(q.children("monthlydate").text());
x.val(q.children("startingmonth").text());w.val(q.children("startingyear").text());break;case "MonthlyByWeekAndDay":i.CswAttrDom("checked","true");m.hide();j.show();L.hide();A.CswAttrDom("checked","true");C.val(q.children("monthlyweek").text());b(f.ID+"_monthly_day",q.children("monthlyday").text());x.val(q.children("startingmonth").text());w.val(q.children("startingyear").text());break;case "YearlyByDate":k.CswAttrDom("checked","true");m.hide();j.hide();L.show();s.val(q.children("yearlydate").text());
t.CswAttrDom("checked","true")}}},save:function(f){var h="<interval><rateintervalvalue>";switch(a('[name="'+f.ID+'_type"]:checked').val()){case "weekly":h+="<ratetype>WeeklyByDay</ratetype>";h+="<weeklyday>"+e(f.ID+"_weeklyday")+"</weeklyday>";h+="<startingdate>"+a("#"+f.ID+"_weekly_sd").val()+"</startingdate>";break;case "monthly":var i=a('[name="'+f.ID+'_monthly"]:checked').val();h+="<ratetype>"+i+"</ratetype>";h+="<monthlyfrequency>"+a("#"+f.ID+"_monthly_rate").val()+"</monthlyfrequency>";if(i===
"MonthlyByDate")h+="<monthlydate>"+a("#"+f.ID+"_monthly_date").val()+"</monthlydate>";else{h+="<monthlyweek>"+a("#"+f.ID+"_monthly_week").val()+"</monthlyweek>";h+="<monthlyday>"+e(f.ID+"_monthly_day")+"</monthlyday>"}h+="<startingmonth>"+a("#"+f.ID+"_monthly_startMonth").val()+"</startingmonth>";h+="<startingyear>"+a("#"+f.ID+"_monthly_startYear").val()+"</startingyear>";break;case "yearly":h+="<ratetype>YearlyByDate</ratetype>";h+="<yearlydate>"+a("#"+f.ID+"_yearly_sd").val()+"</yearlydate>"}h+=
"</rateintervalvalue></interval>";f.$propxml.children().remove();a.browser.msie?f.$propxml.append(a.xml(h)):f.$propxml.append(a(h))}};a.fn.CswFieldTypeTimeInterval=function(f){if(g[f])return g[f].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof f==="object"||!f)return g.init.apply(this,arguments);else a.error("Method "+f+" does not exist on CswFieldTypeTimeInterval")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();b.$propxml.children("NodeId").text().trim();var g=b.$propxml.children("options");e=a("<div />").appendTo(e);var f=[],h=0;g.children().each(function(){var i=a(this);i={label:i.children('column[field="User Name"]').CswAttrXml("value"),key:i.children('column[field="UserId"]').CswAttrXml("value"),values:[i.children('column[field="Include"]').CswAttrXml("value")==="True"]};f[h]=i;h++});e.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:["Include"],
data:f,UseRadios:false,Required:b.Required,ReadOnly:b.ReadOnly,onchange:b.onchange})},save:function(b){var e=b.$propxml.children("options");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var g=0;g<b.length;g++){var f=b[g][0],h=e.find('user:has(column[field="UserId"][value="'+f.key+'"])').find('column[field="Include"]');if(f.checked&&h.CswAttrXml("value")==="False")h.CswAttrXml("value","True");else!f.checked&&h.CswAttrXml("value")==="True"&&h.CswAttrXml("value",
"False")}}};a.fn.CswFieldTypeUserSelect=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeUserSelect")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();b.$propxml.children("viewid").text().trim();var g=b.$propxml.children("options"),f=b.$propxml.children("viewid").CswAttrXml("SelectMode");e=a("<div />").appendTo(e);var h=[],i=0;g.children().each(function(){var n=a(this);n={label:n.children('column[field="View Name"]').CswAttrXml("value"),key:n.children('column[field="nodeviewid"]').CswAttrXml("value"),values:[n.children('column[field="Include"]').CswAttrXml("value")==="True"]};
h[i]=n;i++});e.CswCheckBoxArray("init",{ID:b.ID+"_cba",cols:["Include"],data:h,UseRadios:f==="Single",Required:b.Required,ReadOnly:b.ReadOnly,onchange:b.onchange})},save:function(b){var e=b.$propxml.children("options");b=b.$propdiv.children("div").first().CswCheckBoxArray("getdata",{ID:b.ID+"_cba"});for(var g=0;g<b.length;g++){var f=b[g][0],h=e.find('user:has(column[field="nodeviewid"][value="'+f.key+'"])').find('column[field="Include"]');if(f.checked&&h.CswAttrXml("value")==="False")h.CswAttrXml("value",
"True");else!f.checked&&h.CswAttrXml("value")==="True"&&h.CswAttrXml("value","False")}}};a.fn.CswFieldTypeViewPickList=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeViewPickList")}})(jQuery);(function(a){var d={init:function(b){var e=a(this);e.contents().remove();var g=b.$propxml.children("viewid").text().trim(),f=b.$propxml.children("viewmode").text().trim().toLowerCase();b.$propxml.children("name").text().trim();e=e.CswTable("init",{ID:b.ID+"_tbl"});if(b.EditMode!=EditMode.AddInPopup.name){e.CswTable("cell",1,1).CswImageButton({ID:b.ID+"_view",ButtonType:CswImageButton_ButtonType.View,AlternateText:"View",Required:b.Required,onClick:function(){a.CswCookie("set",CswCookieName.CurrentViewId,
g);a.CswCookie("set",CswCookieName.CurrentViewMode,f);a.CswCookie("clear",CswCookieName.CurrentNodeId);a.CswCookie("clear",CswCookieName.CurrentNodeKey);window.location="NewMain.html";return CswImageButton_ButtonType.None}});b.ReadOnly||e.CswTable("cell",1,2).CswImageButton({ID:b.ID+"_edit",ButtonType:CswImageButton_ButtonType.Edit,AlternateText:"Edit",Required:b.Required,onClick:function(){window.location="EditView.aspx?step=2&return=NewMain.html&viewid="+g;return CswImageButton_ButtonType.None}})}},
save:function(){}};a.fn.CswFieldTypeViewReference=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.init.apply(this,arguments);else a.error("Method "+b+" does not exist on CswFieldTypeViewReference")}})(jQuery);$.CswFieldTypeFactory=function(a){var d={nodeid:"",fieldtype:"",$propdiv:"",$savebtn:"",$propxml:"",onchange:function(){},onReload:function(){},cswnbtnodekey:"",ID:"",Required:"",ReadOnly:"",EditMode:EditMode.Edit.name,onEditView:function(){}},b={make:function(e){e&&$.extend(d,e);d.ID=d.$propxml.CswAttrXml("id");d.Required=d.$propxml.CswAttrXml("required")==="true"||d.Required;d.ReadOnly=d.$propxml.CswAttrXml("readonly")==="true"||d.ReadOnly||d.EditMode===EditMode.PrintReport.name;switch(d.fieldtype){case "Barcode":d.$propdiv.CswFieldTypeBarcode("init",
d);break;case "Composite":d.$propdiv.CswFieldTypeComposite("init",d);break;case "Date":d.$propdiv.CswFieldTypeDate("init",d);break;case "File":d.$propdiv.CswFieldTypeFile("init",d);break;case "Grid":d.$propdiv.CswFieldTypeGrid("init",d);break;case "Image":d.$propdiv.CswFieldTypeImage("init",d);break;case "Link":d.$propdiv.CswFieldTypeLink("init",d);break;case "List":d.$propdiv.CswFieldTypeList("init",d);break;case "Location":d.$propdiv.CswFieldTypeLocation("init",d);break;case "LocationContents":d.$propdiv.CswFieldTypeLocationContents("init",
d);break;case "Logical":d.$propdiv.CswFieldTypeLogical("init",d);break;case "LogicalSet":d.$propdiv.CswFieldTypeLogicalSet("init",d);break;case "Memo":d.$propdiv.CswFieldTypeMemo("init",d);break;case "MTBF":d.$propdiv.CswFieldTypeMTBF("init",d);break;case "NodeTypeSelect":d.$propdiv.CswFieldTypeNodeTypeSelect("init",d);break;case "Number":d.$propdiv.CswFieldTypeNumber("init",d);break;case "Password":d.$propdiv.CswFieldTypePassword("init",d);break;case "PropertyReference":d.$propdiv.CswFieldTypePropertyReference("init",
d);break;case "Quantity":d.$propdiv.CswFieldTypeQuantity("init",d);break;case "Question":d.$propdiv.CswFieldTypeQuestion("init",d);break;case "Relationship":d.$propdiv.CswFieldTypeRelationship("init",d);break;case "Sequence":d.$propdiv.CswFieldTypeSequence("init",d);break;case "Static":d.$propdiv.CswFieldTypeStatic("init",d);break;case "Text":d.$propdiv.CswFieldTypeText("init",d);break;case "Time":d.$propdiv.CswFieldTypeTime("init",d);break;case "TimeInterval":d.$propdiv.CswFieldTypeTimeInterval("init",
d);break;case "UserSelect":d.$propdiv.CswFieldTypeUserSelect("init",d);break;case "ViewPickList":d.$propdiv.CswFieldTypeViewPickList("init",d);break;case "ViewReference":d.$propdiv.CswFieldTypeViewReference("init",d);break;default:d.$propdiv.append(d.$propxml.CswAttrXml("init",d))}},save:function(e){e&&$.extend(d,e);d.ID=d.$propxml.CswAttrXml("id");d.Required=d.$propxml.CswAttrXml("required")==="true";d.ReadOnly=d.$propxml.CswAttrXml("readonly")==="true";switch(d.fieldtype){case "Barcode":d.$propdiv.CswFieldTypeBarcode("save",
d);break;case "Composite":d.$propdiv.CswFieldTypeComposite("save",d);break;case "Date":d.$propdiv.CswFieldTypeDate("save",d);break;case "File":d.$propdiv.CswFieldTypeFile("save",d);break;case "Grid":d.$propdiv.CswFieldTypeGrid("save",d);break;case "Image":d.$propdiv.CswFieldTypeImage("save",d);break;case "Link":d.$propdiv.CswFieldTypeLink("save",d);break;case "List":d.$propdiv.CswFieldTypeList("save",d);break;case "Location":d.$propdiv.CswFieldTypeLocation("save",d);break;case "LocationContents":d.$propdiv.CswFieldTypeLocationContents("save",
d);break;case "Logical":d.$propdiv.CswFieldTypeLogical("save",d);break;case "LogicalSet":d.$propdiv.CswFieldTypeLogicalSet("save",d);break;case "Memo":d.$propdiv.CswFieldTypeMemo("save",d);break;case "MTBF":d.$propdiv.CswFieldTypeMTBF("save",d);break;case "NodeTypeSelect":d.$propdiv.CswFieldTypeNodeTypeSelect("save",d);break;case "Number":d.$propdiv.CswFieldTypeNumber("save",d);break;case "Password":d.$propdiv.CswFieldTypePassword("save",d);break;case "PropertyReference":d.$propdiv.CswFieldTypePropertyReference("save",
d);break;case "Quantity":d.$propdiv.CswFieldTypeQuantity("save",d);break;case "Question":d.$propdiv.CswFieldTypeQuestion("save",d);break;case "Relationship":d.$propdiv.CswFieldTypeRelationship("save",d);break;case "Sequence":d.$propdiv.CswFieldTypeSequence("save",d);break;case "Static":d.$propdiv.CswFieldTypeStatic("save",d);break;case "Text":d.$propdiv.CswFieldTypeText("save",d);break;case "Time":d.$propdiv.CswFieldTypeTime("save",d);break;case "TimeInterval":d.$propdiv.CswFieldTypeTimeInterval("save",
d);break;case "UserSelect":d.$propdiv.CswFieldTypeUserSelect("save",d);break;case "ViewPickList":d.$propdiv.CswFieldTypeViewPickList("save",d);break;case "ViewReference":d.$propdiv.CswFieldTypeViewReference("save",d)}}};if(b[a])return b[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return b.init.apply(this,arguments);else $.error("Method "+a+" does not exist on "+PluginName)};
